<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Exceptions raised by the coercion model" href="coerce_exceptions.html" /><link rel="prev" title="Group, ring, etc. actions on objects" href="../categories/action.html" />

    <meta name="generator" content="sphinx-5.2.3, furo 2022.09.29"/>
        <title>Containers for storing coercion data - Coercion</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=d81277517bee4d6b0349d71bb2661d4890b5617c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom-furo.css" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  --color-brand-primary: #0f0fff;
  --color-brand-content: #0f0fff;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Coercion</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../../_static/logo_sagemath_black.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../../../_static/logo_sagemath_white.svg" alt="Dark Logo"/>
  </div>
  
      <span class="sidebar-brand-text">Sage 10.0 Reference Manual</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-home">
  <div class="sidebar-tree">
    <ul><li class="toctree-l1">
      <a class="reference internal" href="../../index.html">Home - Coercion</a>
    </li></ul>
  </div>
</div><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="coerce.html">The coercion model</a></li>
<li class="toctree-l1"><a class="reference internal" href="coerce_actions.html">Coerce actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="coerce_maps.html">Coerce maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../categories/pushout.html">Coercion via construction functors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../categories/action.html">Group, ring, etc. actions on objects</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Containers for storing coercion data</a></li>
<li class="toctree-l1"><a class="reference internal" href="coerce_exceptions.html">Exceptions raised by the coercion model</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="containers-for-storing-coercion-data">
<span id="sage-structure-coerce-dict"></span><h1>Containers for storing coercion data<a class="headerlink" href="#containers-for-storing-coercion-data" title="Permalink to this heading">#</a></h1>
<span class="target" id="module-sage.structure.coerce_dict"></span><p>This module provides <a class="reference internal" href="#sage.structure.coerce_dict.TripleDict" title="sage.structure.coerce_dict.TripleDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">TripleDict</span></code></a> and <a class="reference internal" href="#sage.structure.coerce_dict.MonoDict" title="sage.structure.coerce_dict.MonoDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">MonoDict</span></code></a>. These are
structures similar to <a class="reference external" href="https://docs.python.org/library/weakref.html#weakref.WeakKeyDictionary" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">WeakKeyDictionary</span></code></a> in Python’s weakref
module, and are optimized for lookup speed. The keys for <a class="reference internal" href="#sage.structure.coerce_dict.TripleDict" title="sage.structure.coerce_dict.TripleDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">TripleDict</span></code></a>
consist of triples (k1,k2,k3) and are looked up by identity rather than
equality. The keys are stored by weakrefs if possible. If any one of the
components k1, k2, k3 gets garbage collected, then the entry is removed from
the <a class="reference internal" href="#sage.structure.coerce_dict.TripleDict" title="sage.structure.coerce_dict.TripleDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">TripleDict</span></code></a>.</p>
<p>Key components that do not allow for weakrefs are stored via a normal
refcounted reference. That means that any entry stored using a triple
(k1,k2,k3) so that none of the k1,k2,k3 allows a weak reference behaves
as an entry in a normal dictionary: Its existence in <a class="reference internal" href="#sage.structure.coerce_dict.TripleDict" title="sage.structure.coerce_dict.TripleDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">TripleDict</span></code></a>
prevents it from being garbage collected.</p>
<p>That container currently is used to store coercion and conversion maps between
two parents (<a class="reference external" href="https://github.com/sagemath/sage/issues/715">github issue #715</a>) and to store homsets of pairs of objects of a
category (<a class="reference external" href="https://github.com/sagemath/sage/issues/11521">github issue #11521</a>). In both cases, it is essential that the parent
structures remain garbage collectable, it is essential that the data access is
faster than with a usual <a class="reference external" href="https://docs.python.org/library/weakref.html#weakref.WeakKeyDictionary" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">WeakKeyDictionary</span></code></a>, and we enforce
the “unique parent condition” in Sage (parent structures should be identical
if they are equal).</p>
<p><a class="reference internal" href="#sage.structure.coerce_dict.MonoDict" title="sage.structure.coerce_dict.MonoDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">MonoDict</span></code></a> behaves similarly, but it takes a single item as a key. It
is used for caching the parents which allow a coercion map into a fixed other
parent (<a class="reference external" href="https://github.com/sagemath/sage/issues/12313">github issue #12313</a>).</p>
<p>By <a class="reference external" href="https://github.com/sagemath/sage/issues/14159">github issue #14159</a>, <a class="reference internal" href="#sage.structure.coerce_dict.MonoDict" title="sage.structure.coerce_dict.MonoDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">MonoDict</span></code></a> and <a class="reference internal" href="#sage.structure.coerce_dict.TripleDict" title="sage.structure.coerce_dict.TripleDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">TripleDict</span></code></a> can be optionally
used with weak references on the values.</p>
<p>Note that this kind of dictionary is also used for caching actions and
coerce maps. In previous versions of Sage, the cache was by strong
references and resulted in a memory leak in the following example.
However, this leak was fixed by <a class="reference external" href="https://github.com/sagemath/sage/issues/715">github issue #715</a>, using weak references:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">K</span><span class="o">.&lt;</span><span class="n">t</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="o">^</span><span class="mi">55</span><span class="p">)</span>
<span class="gp">sage: </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="n">a</span> <span class="o">=</span> <span class="n">K</span><span class="o">.</span><span class="n">random_element</span><span class="p">()</span>
<span class="gp">....: </span>    <span class="n">E</span> <span class="o">=</span> <span class="n">EllipticCurve</span><span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="n">a</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="n">P</span> <span class="o">=</span> <span class="n">E</span><span class="o">.</span><span class="n">random_point</span><span class="p">()</span>
<span class="gp">....: </span>    <span class="n">Q</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">P</span>
<span class="gp">sage: </span><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="n">Partitions</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">200</span><span class="p">)]</span>  <span class="c1"># purge strong cache in CachedRepresentation</span>
<span class="gp">sage: </span><span class="kn">import</span> <span class="nn">gc</span>
<span class="gp">sage: </span><span class="n">n</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.schemes.elliptic_curves.ell_finite_field</span> <span class="kn">import</span> <span class="n">EllipticCurve_finite_field</span>
<span class="gp">sage: </span><span class="n">LE</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">gc</span><span class="o">.</span><span class="n">get_objects</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">EllipticCurve_finite_field</span><span class="p">)]</span>
<span class="gp">sage: </span><span class="nb">len</span><span class="p">(</span><span class="n">LE</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="sage.structure.coerce_dict.MonoDict">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.structure.coerce_dict.</span></span><span class="sig-name descname"><span class="pre">MonoDict</span></span><a class="headerlink" href="#sage.structure.coerce_dict.MonoDict" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<blockquote>
<div><p>This is a hashtable specifically designed for (read) speed in
the coercion model.</p>
<p>It differs from a python WeakKeyDictionary in the following important ways:</p>
<blockquote>
<div><ul class="simple">
<li><p>Comparison is done using the ‘is’ rather than ‘==’ operator.</p></li>
<li><p>Only weak references to the keys are stored if at all possible.
Keys that do not allow for weak references are stored with a normal
refcounted reference.</p></li>
<li><p>The callback of the weak references is safe against recursion, see below.</p></li>
</ul>
</div></blockquote>
<p>There are special cdef set/get methods for faster access.
It is bare-bones in the sense that not all dictionary methods are
implemented.</p>
<p>IMPLEMENTATION:</p>
<p>It is implemented as a hash table with open addressing, similar to python’s
dict.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code> – optional iterable defining initial data, as dict or
iterable of (key, value) pairs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">weak_values</span></code> – optional bool (default False). If it is true,
weak references to the values in this dictionary will be used,
when possible.</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.coerce_dict</span> <span class="kn">import</span> <span class="n">MonoDict</span>
<span class="gp">sage: </span><span class="n">L</span> <span class="o">=</span> <span class="n">MonoDict</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">;</span> <span class="n">b</span> <span class="o">=</span> <span class="s1">&#39;ab&#39;</span><span class="p">;</span> <span class="n">c</span> <span class="o">=</span> <span class="s1">&#39;-15&#39;</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
<p>The key is expected to be a unique object. Hence, the item stored for <code class="docutils literal notranslate"><span class="pre">c</span></code>
cannot be obtained by providing another equal string:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="n">a</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="n">b</span><span class="p">]</span>
<span class="go">2</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
<span class="go">3</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="s1">&#39;-15&#39;</span><span class="p">]</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">KeyError: &#39;-15&#39;</span>
</pre></div>
</div>
<p>Not all features of Python dictionaries are available, but iteration over
the dictionary items is possible:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="nb">sorted</span><span class="p">(</span><span class="n">L</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(&#39;-15&#39;, 3), (&#39;a&#39;, 1), (&#39;ab&#39;, 2)]</span>
<span class="gp">sage: </span><span class="k">del</span> <span class="n">L</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
<span class="gp">sage: </span><span class="nb">sorted</span><span class="p">(</span><span class="n">L</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(&#39;a&#39;, 1), (&#39;ab&#39;, 2)]</span>
<span class="gp">sage: </span><span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">sage: </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="n">L</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
<span class="gp">sage: </span><span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
<span class="go">1002</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">]</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">KeyError: &#39;c&#39;</span>
</pre></div>
</div>
</div></blockquote>
<p>Note that <code class="docutils literal notranslate"><span class="pre">MW</span></code> also accepts values that do not allow for weak references:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">    sage: MW[k] = int(5)</span>
<span class="go">    sage: MW[k]</span>
<span class="go">    5</span>

<span class="go">The following demonstrates that :class:`MonoDict` is safer than</span>
<span class="go">:class:`~weakref.WeakKeyDictionary` against recursions created by nested</span>
<span class="go">callbacks; compare :trac:`15069` (the mechanism used now is different, though)::</span>

<span class="go">    sage: M = MonoDict()</span>
<span class="go">    sage: class A: pass</span>
<span class="go">    sage: a = A()</span>
<span class="go">    sage: prev = a</span>
<span class="go">    sage: for i in range(1000):</span>
<span class="go">    ....:     newA = A()</span>
<span class="go">    ....:     M[prev] = newA</span>
<span class="go">    ....:     prev = newA</span>
<span class="go">    sage: len(M)</span>
<span class="go">    1000</span>
<span class="go">    sage: del a</span>
<span class="go">    sage: len(M)</span>
<span class="go">    0</span>

<span class="go">The corresponding example with a Python :class:`weakref.WeakKeyDictionary`</span>
<span class="go">would result in a too deep recursion during deletion of the dictionary</span>
<span class="go">items::</span>

<span class="go">    sage: import weakref</span>
<span class="go">    sage: M = weakref.WeakKeyDictionary()</span>
<span class="go">    sage: a = A()</span>
<span class="go">    sage: prev = a</span>
<span class="go">    sage: for i in range(1000):</span>
<span class="go">    ....:     newA = A()</span>
<span class="go">    ....:     M[prev] = newA</span>
<span class="go">    ....:     prev = newA</span>
<span class="go">    sage: len(M)</span>
<span class="go">    1000</span>

<span class="go">Check that also in the presence of circular references, :class:`MonoDict`</span>
<span class="go">gets properly collected::</span>

<span class="go">    sage: import gc</span>
<span class="go">    sage: def count_type(T):</span>
<span class="go">    ....:     return len([c for c in gc.get_objects() if isinstance(c,T)])</span>
<span class="go">    sage: gc.freeze()  # so that gc.collect() only deals with our trash</span>
<span class="go">    sage: N = count_type(MonoDict)</span>
<span class="go">    sage: for i in range(100):</span>
<span class="go">    ....:     V = [MonoDict({&quot;id&quot;:j+100*i}) for j in range(100)]</span>
<span class="go">    ....:     n = len(V)</span>
<span class="go">    ....:     for i in range(n): V[i][V[(i+1)%n]] = (i+1)%n</span>
<span class="go">    ....:     del V</span>
<span class="go">    ....:     _ = gc.collect()</span>
<span class="go">    ....:     assert count_type(MonoDict) == N</span>
<span class="go">    sage: count_type(MonoDict) == N</span>
<span class="go">    True</span>
<span class="go">    sage: gc.unfreeze()</span>

<span class="go">AUTHORS:</span>

<span class="go">- Simon King (2012-01)</span>
<span class="go">- Nils Bruin (2012-08)</span>
<span class="go">- Simon King (2013-02)</span>
<span class="go">- Nils Bruin (2013-11)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.coerce_dict.MonoDict.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.coerce_dict.MonoDict.copy" title="Permalink to this definition">#</a></dt>
<dd><p>Return a copy of this <a class="reference internal" href="#sage.structure.coerce_dict.MonoDict" title="sage.structure.coerce_dict.MonoDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">MonoDict</span></code></a> as Python dict.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.coerce_dict</span> <span class="kn">import</span> <span class="n">MonoDict</span>
<span class="gp">sage: </span><span class="n">L</span> <span class="o">=</span> <span class="n">MonoDict</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span>
<span class="gp">sage: </span><span class="n">L</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="go">{1: 42}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.coerce_dict.MonoDict.items">
<span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.coerce_dict.MonoDict.items" title="Permalink to this definition">#</a></dt>
<dd><p>Iterate over the <code class="docutils literal notranslate"><span class="pre">(key,</span> <span class="pre">value)</span></code> pairs of this <a class="reference internal" href="#sage.structure.coerce_dict.MonoDict" title="sage.structure.coerce_dict.MonoDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">MonoDict</span></code></a>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.coerce_dict</span> <span class="kn">import</span> <span class="n">MonoDict</span>
<span class="gp">sage: </span><span class="n">L</span> <span class="o">=</span> <span class="n">MonoDict</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">sage: </span><span class="n">L</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="go">&lt;generator object at ...&gt;</span>
<span class="gp">sage: </span><span class="nb">sorted</span><span class="p">(</span><span class="n">L</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(1, None), (2, True)]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.structure.coerce_dict.MonoDictEraser">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.structure.coerce_dict.</span></span><span class="sig-name descname"><span class="pre">MonoDictEraser</span></span><a class="headerlink" href="#sage.structure.coerce_dict.MonoDictEraser" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Erase items from a <a class="reference internal" href="#sage.structure.coerce_dict.MonoDict" title="sage.structure.coerce_dict.MonoDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">MonoDict</span></code></a> when a weak reference becomes
invalid.</p>
<p>This is of internal use only. Instances of this class will be passed as a
callback function when creating a weak reference.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.coerce_dict</span> <span class="kn">import</span> <span class="n">MonoDict</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span> <span class="k">pass</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">MonoDict</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">M</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">sage: </span><span class="nb">len</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">sage: </span><span class="k">del</span> <span class="n">a</span>
<span class="gp">sage: </span><span class="kn">import</span> <span class="nn">gc</span>
<span class="gp">sage: </span><span class="n">n</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="gp">sage: </span><span class="nb">len</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>    <span class="c1"># indirect doctest</span>
<span class="go">0</span>
</pre></div>
</div>
<p>AUTHOR:</p>
<ul class="simple">
<li><p>Simon King (2012-01)</p></li>
<li><p>Nils Bruin (2013-11)</p></li>
</ul>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.structure.coerce_dict.ObjectWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.structure.coerce_dict.</span></span><span class="sig-name descname"><span class="pre">ObjectWrapper</span></span><a class="headerlink" href="#sage.structure.coerce_dict.ObjectWrapper" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A simple fast wrapper around a Python object. This is like a
1-element tuple except that it does not keep a reference to the
wrapped object.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.structure.coerce_dict.TripleDict">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.structure.coerce_dict.</span></span><span class="sig-name descname"><span class="pre">TripleDict</span></span><a class="headerlink" href="#sage.structure.coerce_dict.TripleDict" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This is a hashtable specifically designed for (read) speed in
the coercion model.</p>
<p>It differs from a python dict in the following important ways:</p>
<blockquote>
<div><ul class="simple">
<li><p>All keys must be sequence of exactly three elements. All sequence
types (tuple, list, etc.) map to the same item.</p></li>
<li><p>Any of the three key components that support weak-refs are stored
via a weakref. If any of these components gets garbage collected
then the entire entry is removed. In that sense, this structure
behaves like a nested <a class="reference external" href="https://docs.python.org/library/weakref.html#weakref.WeakKeyDictionary" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">WeakKeyDictionary</span></code></a>.</p></li>
<li><p>Comparison is done using the ‘is’ rather than ‘==’ operator.</p></li>
</ul>
</div></blockquote>
<p>There are special cdef set/get methods for faster access.
It is bare-bones in the sense that not all dictionary methods are
implemented.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code> – optional iterable defining initial data, as dict or
iterable of (key, value) pairs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">weak_values</span></code> – optional bool (default False). If it is true,
weak references to the values in this dictionary will be used,
when possible.</p></li>
</ul>
<p>IMPLEMENTATION:</p>
<p>It is implemented as a hash table with open addressing, similar to python’s
dict.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.coerce_dict</span> <span class="kn">import</span> <span class="n">TripleDict</span>
<span class="gp">sage: </span><span class="n">L</span> <span class="o">=</span> <span class="n">TripleDict</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">;</span> <span class="n">b</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span><span class="p">;</span> <span class="n">c</span> <span class="o">=</span> <span class="s1">&#39;c&#39;</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="n">c</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="gp">sage: </span><span class="nb">sorted</span><span class="p">(</span><span class="n">L</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[((&#39;a&#39;, &#39;b&#39;, &#39;c&#39;), 1), ((&#39;c&#39;, &#39;b&#39;, &#39;a&#39;), -1)]</span>
<span class="gp">sage: </span><span class="k">del</span> <span class="n">L</span><span class="p">[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">]</span>
<span class="gp">sage: </span><span class="nb">list</span><span class="p">(</span><span class="n">L</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[((&#39;c&#39;, &#39;b&#39;, &#39;a&#39;), -1)]</span>
<span class="gp">sage: </span><span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">sage: </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="n">L</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
<span class="gp">sage: </span><span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
<span class="go">1001</span>
<span class="gp">sage: </span><span class="n">L</span> <span class="o">=</span> <span class="n">TripleDict</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="n">c</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">a</span><span class="p">]</span>
<span class="go">-1</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">]</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">KeyError: (&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="n">a</span><span class="p">]</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">KeyError: &#39;a&#39;</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">KeyError: &#39;a&#39;</span>
</pre></div>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li><p>Robert Bradshaw, 2007-08</p></li>
<li><p>Simon King, 2012-01</p></li>
<li><p>Nils Bruin, 2012-08</p></li>
<li><p>Simon King, 2013-02</p></li>
<li><p>Nils Bruin, 2013-11</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.coerce_dict.TripleDict.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.coerce_dict.TripleDict.copy" title="Permalink to this definition">#</a></dt>
<dd><p>Return a copy of this <a class="reference internal" href="#sage.structure.coerce_dict.TripleDict" title="sage.structure.coerce_dict.TripleDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">TripleDict</span></code></a> as Python dict.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.coerce_dict</span> <span class="kn">import</span> <span class="n">TripleDict</span>
<span class="gp">sage: </span><span class="n">L</span> <span class="o">=</span> <span class="n">TripleDict</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span>
<span class="gp">sage: </span><span class="n">L</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="go">{(1, 2, 3): 42}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.coerce_dict.TripleDict.items">
<span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.coerce_dict.TripleDict.items" title="Permalink to this definition">#</a></dt>
<dd><p>Iterate over the <code class="docutils literal notranslate"><span class="pre">(key,</span> <span class="pre">value)</span></code> pairs of this <a class="reference internal" href="#sage.structure.coerce_dict.TripleDict" title="sage.structure.coerce_dict.TripleDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">TripleDict</span></code></a>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.coerce_dict</span> <span class="kn">import</span> <span class="n">TripleDict</span>
<span class="gp">sage: </span><span class="n">L</span> <span class="o">=</span> <span class="n">TripleDict</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">sage: </span><span class="n">L</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="go">&lt;generator object at ...&gt;</span>
<span class="gp">sage: </span><span class="nb">list</span><span class="p">(</span><span class="n">L</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[((1, 2, 3), None)]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.structure.coerce_dict.TripleDictEraser">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.structure.coerce_dict.</span></span><span class="sig-name descname"><span class="pre">TripleDictEraser</span></span><a class="headerlink" href="#sage.structure.coerce_dict.TripleDictEraser" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Erases items from a <a class="reference internal" href="#sage.structure.coerce_dict.TripleDict" title="sage.structure.coerce_dict.TripleDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">TripleDict</span></code></a> when a weak reference becomes
invalid.</p>
<p>This is of internal use only. Instances of this class will be passed as a
callback function when creating a weak reference.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.coerce_dict</span> <span class="kn">import</span> <span class="n">TripleDict</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span> <span class="k">pass</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">TripleDict</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">[</span><span class="n">a</span><span class="p">,</span><span class="n">ZZ</span><span class="p">,</span><span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">[</span><span class="n">ZZ</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">[</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">ZZ</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">sage: </span><span class="nb">len</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">sage: </span><span class="k">del</span> <span class="n">a</span>
<span class="gp">sage: </span><span class="kn">import</span> <span class="nn">gc</span>
<span class="gp">sage: </span><span class="n">n</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="gp">sage: </span><span class="nb">len</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="c1"># indirect doctest</span>
<span class="go">0</span>
</pre></div>
</div>
<p>AUTHOR:</p>
<ul class="simple">
<li><p>Simon King (2012-01)</p></li>
<li><p>Nils Bruin (2013-11)</p></li>
</ul>
</dd></dl>

</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="coerce_exceptions.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Exceptions raised by the coercion model</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../categories/action.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Group, ring, etc. actions on objects</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2005--2023, The Sage Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Containers for storing coercion data</a><ul>
<li><a class="reference internal" href="#sage.structure.coerce_dict.MonoDict"><code class="docutils literal notranslate"><span class="pre">MonoDict</span></code></a><ul>
<li><a class="reference internal" href="#sage.structure.coerce_dict.MonoDict.copy"><code class="docutils literal notranslate"><span class="pre">copy()</span></code></a></li>
<li><a class="reference internal" href="#sage.structure.coerce_dict.MonoDict.items"><code class="docutils literal notranslate"><span class="pre">items()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sage.structure.coerce_dict.MonoDictEraser"><code class="docutils literal notranslate"><span class="pre">MonoDictEraser</span></code></a></li>
<li><a class="reference internal" href="#sage.structure.coerce_dict.ObjectWrapper"><code class="docutils literal notranslate"><span class="pre">ObjectWrapper</span></code></a></li>
<li><a class="reference internal" href="#sage.structure.coerce_dict.TripleDict"><code class="docutils literal notranslate"><span class="pre">TripleDict</span></code></a><ul>
<li><a class="reference internal" href="#sage.structure.coerce_dict.TripleDict.copy"><code class="docutils literal notranslate"><span class="pre">copy()</span></code></a></li>
<li><a class="reference internal" href="#sage.structure.coerce_dict.TripleDict.items"><code class="docutils literal notranslate"><span class="pre">items()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sage.structure.coerce_dict.TripleDictEraser"><code class="docutils literal notranslate"><span class="pre">TripleDictEraser</span></code></a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    </body>
</html>