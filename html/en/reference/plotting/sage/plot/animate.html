<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Animated plots &mdash; Sage Reference Manual v7.0: 2D Graphics</title>
    
    <link rel="stylesheet" href="../../../_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '7.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="top" title="Sage Reference Manual v7.0: 2D Graphics" href="../../index.html" />
    <link rel="next" title="Complex Plots" href="complex_plot.html" />
    <link rel="prev" title="Colors" href="colors.html" />
    <link rel="icon" href="../../../_static/sageicon.png" type="image/x-icon" />

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="complex_plot.html" title="Complex Plots"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="colors.html" title="Colors"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="../../index.html">2D Graphics</a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="animated-plots">
<span id="sage-plot-animate"></span><h1>Animated plots<a class="headerlink" href="#animated-plots" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-sage.plot.animate"></span><p>Animations are generated from a list (or other iterable) of graphics
objects.
Images are produced by calling the <tt class="docutils literal"><span class="pre">save_image</span></tt> method on each input
object, creating a sequence of PNG files.
These are then assembled to various target formats using different
tools.
In particular, the <tt class="docutils literal"><span class="pre">convert</span></tt> program from <a class="reference external" href="http://www.imagemagick.org">ImageMagick</a> can be used to
generate an animated GIF file.
<a class="reference external" href="http://www.ffmpeg.org">FFmpeg</a> (with the command line program <tt class="docutils literal"><span class="pre">ffmpeg</span></tt>) provides support for
various video formats, but also an alternative method of generating
animated GIFs.
For <a class="reference external" href="http://caniuse.com/#feat=apng">browsers which support it</a>, <a class="reference external" href="https://wiki.mozilla.org/APNG_Specification">APNG</a> can be used as another
alternative which works without any extra dependencies.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Note that ImageMagick and FFmpeg are not included with Sage, and
must be installed by the user.  On unix systems, type <tt class="docutils literal"><span class="pre">which</span>
<span class="pre">convert</span></tt> at a command prompt to see if <tt class="docutils literal"><span class="pre">convert</span></tt> (part of the
ImageMagick suite) is installed.  If it is, you will be given its
location.  Similarly, you can check for <tt class="docutils literal"><span class="pre">ffmpeg</span></tt> with <tt class="docutils literal"><span class="pre">which</span>
<span class="pre">ffmpeg</span></tt>.  See the websites of <a class="reference external" href="http://www.imagemagick.org">ImageMagick</a> or <a class="reference external" href="http://www.ffmpeg.org">FFmpeg</a> for
installation instructions.</p>
</div>
<p>EXAMPLES:</p>
<p>The sine function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">sines</span> <span class="o">=</span> <span class="p">[</span><span class="n">plot</span><span class="p">(</span><span class="n">c</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="n">Color</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">ymin</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">sxrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">.</span><span class="mi">2</span><span class="p">)]</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">(</span><span class="n">sines</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span>         <span class="c"># optional -- ImageMagick</span>
<span class="go">Animation with 5 frames</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>Animate using <a class="reference external" href="http://www.ffmpeg.org">FFmpeg</a> instead of ImageMagick:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">f</span> <span class="o">=</span> <span class="n">tmp_filename</span><span class="p">(</span><span class="n">ext</span><span class="o">=</span><span class="s">&#39;.gif&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">f</span><span class="p">,</span> <span class="n">use_ffmpeg</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c"># optional -- ffmpeg</span>
</pre></div>
</div>
<p>Animate as an <a class="reference external" href="https://wiki.mozilla.org/APNG_Specification">APNG</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">apng</span><span class="p">()</span>  <span class="c"># long time</span>
<span class="go">doctest:...: DeprecationWarning: use tmp_filename instead</span>
<span class="go">See http://trac.sagemath.org/17234 for details.</span>
</pre></div>
</div>
<p>An animated <a class="reference internal" href="graphics.html#sage.plot.graphics.GraphicsArray" title="sage.plot.graphics.GraphicsArray"><tt class="xref py py-class docutils literal"><span class="pre">sage.plot.graphics.GraphicsArray</span></tt></a> of rotating ellipses:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">E</span> <span class="o">=</span> <span class="n">animate</span><span class="p">((</span><span class="n">graphics_array</span><span class="p">([[</span><span class="n">ellipse</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">angle</span><span class="o">=</span><span class="n">t</span><span class="p">,</span><span class="n">xmin</span><span class="o">=-</span><span class="mi">3</span><span class="p">,</span><span class="n">xmax</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">+</span><span class="n">circle</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="mi">3</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;blue&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)]</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">)])</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">sxrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="o">.</span><span class="mi">15</span><span class="p">)))</span>
<span class="gp">sage: </span><span class="nb">str</span><span class="p">(</span><span class="n">E</span><span class="p">)</span>    <span class="c"># animations produced from a generator do not have a known length</span>
<span class="go">&#39;Animation with unknown number of frames&#39;</span>
<span class="gp">sage: </span><span class="n">E</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>A simple animation of a circle shooting up to the right:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">c</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">circle</span><span class="p">((</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="p">),</span> <span class="mi">1</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="n">hue</span><span class="o">=</span><span class="n">i</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">)],</span>
<span class="go">....:               xmin=0,ymin=0,xmax=2,ymax=2,figsize=[2,2])</span>
<span class="gp">sage: </span><span class="n">c</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>Animations of 3d objects:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">var</span><span class="p">(</span><span class="s">&#39;s,t&#39;</span><span class="p">)</span>
<span class="go">(s, t)</span>
<span class="gp">sage: </span><span class="k">def</span> <span class="nf">sphere_and_plane</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="go">....:     return sphere((0,0,0),1,color=&#39;red&#39;,opacity=.5)+parametric_plot3d([t,x,s],(s,-1,1),(t,-1,1),color=&#39;green&#39;,opacity=.7)</span>
<span class="gp">sage: </span><span class="n">sp</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">sphere_and_plane</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">sxrange</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">.</span><span class="mi">3</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">sp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>      <span class="c"># first frame</span>
<span class="go">Graphics3d Object</span>
<span class="gp">sage: </span><span class="n">sp</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>     <span class="c"># last frame</span>
<span class="go">Graphics3d Object</span>
<span class="gp">sage: </span><span class="n">sp</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c"># optional -- ImageMagick</span>

<span class="gp">sage: </span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)</span> <span class="o">=</span> <span class="n">var</span><span class="p">(</span><span class="s">&#39;x,y,z&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="k">def</span> <span class="nf">frame</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
<span class="go">....:     return implicit_plot3d((x^2 + y^2 + z^2), (x, -2, 2), (y, -2, 2), (z, -2, 2), plot_points=60, contour=[1,3,5], region=lambda x,y,z: x&lt;=t or y&gt;=t or z&lt;=t)</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">frame</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="o">.</span><span class="mo">01</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="o">.</span><span class="mi">2</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>       <span class="c"># long time</span>
<span class="go">Graphics3d Object</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>   <span class="c"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>If the input objects do not have a <tt class="docutils literal"><span class="pre">save_image</span></tt> method, then the
animation object attempts to make an image by calling its internal
method <a class="reference internal" href="#sage.plot.animate.Animation.make_image" title="sage.plot.animate.Animation.make_image"><tt class="xref py py-meth docutils literal"><span class="pre">sage.plot.animate.Animation.make_image()</span></tt></a>.  This is
illustrated by the following example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">t</span> <span class="o">=</span> <span class="n">var</span><span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">((</span><span class="n">sin</span><span class="p">(</span><span class="n">c</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">sxrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">.</span><span class="mi">2</span><span class="p">)))</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li>William Stein</li>
<li>John Palmieri</li>
<li>Niles Johnson (2013-12): Expand to animate more graphics objects</li>
<li>Martin von Gagern (2014-12): Added APNG support</li>
</ul>
<dl class="class">
<dt id="sage.plot.animate.APngAssembler">
<em class="property">class </em><tt class="descclassname">sage.plot.animate.</tt><tt class="descname">APngAssembler</tt><big>(</big><em>out</em>, <em>num_frames</em>, <em>num_plays=0</em>, <em>delay=200</em>, <em>delay_denominator=100</em><big>)</big><a class="headerlink" href="#sage.plot.animate.APngAssembler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Builds an <a class="reference external" href="https://wiki.mozilla.org/APNG_Specification">APNG</a> (Animated PNG) from a sequence of PNG files.
This is used by the <a class="reference internal" href="#sage.plot.animate.Animation.apng" title="sage.plot.animate.Animation.apng"><tt class="xref py py-meth docutils literal"><span class="pre">sage.plot.animate.Animation.apng()</span></tt></a> method.</p>
<p>This code is quite simple; it does little more than copying chunks
from input PNG files to the output file. There is no optimization
involved. This does not depend on external programs or libraries.</p>
<p>INPUT:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">out</span></tt> &#8211; a file opened for binary writing to which the data
will be written</li>
<li><tt class="docutils literal"><span class="pre">num_frames</span></tt> &#8211; the number of frames in the animation</li>
<li><tt class="docutils literal"><span class="pre">num_plays</span></tt> &#8211; how often to iterate, 0 means infinitely</li>
<li><tt class="docutils literal"><span class="pre">delay</span></tt> &#8211; numerator of the delay fraction in seconds</li>
<li><tt class="docutils literal"><span class="pre">delay_denominator</span></tt> &#8211; denominator of the delay in seconds</li>
</ul>
</div></blockquote>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.plot.animate</span> <span class="kn">import</span> <span class="n">APngAssembler</span>
<span class="gp">sage: </span><span class="k">def</span> <span class="nf">assembleAPNG</span><span class="p">():</span>
<span class="go">....:     a = animate([sin(x + float(k)) for k in srange(0,2*pi,0.7)],</span>
<span class="go">....:                 xmin=0, xmax=2*pi, figsize=[2,1])</span>
<span class="go">....:     pngdir = a.png()</span>
<span class="go">....:     outfile = sage.misc.temporary_file.tmp_filename(ext=&#39;.png&#39;)</span>
<span class="go">....:     with open(outfile, &quot;wb&quot;) as f:</span>
<span class="go">....:         apng = APngAssembler(f, len(a))</span>
<span class="go">....:         for i in range(len(a)):</span>
<span class="go">....:             png = os.path.join(pngdir, &quot;{:08d}.png&quot;.format(i))</span>
<span class="go">....:             apng.add_frame(png, delay=10*i + 10)</span>
<span class="go">....:     return outfile</span>
<span class="go">....:</span>
<span class="gp">sage: </span><span class="n">assembleAPNG</span><span class="p">()</span>  <span class="c"># long time</span>
<span class="go">&#39;...png&#39;</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.plot.animate.APngAssembler.add_frame">
<tt class="descname">add_frame</tt><big>(</big><em>pngfile</em>, <em>delay=None</em>, <em>delay_denominator=None</em><big>)</big><a class="headerlink" href="#sage.plot.animate.APngAssembler.add_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a single frame to the APNG file.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">pngfile</span></tt> &#8211; file name of the PNG file with data for this frame</li>
<li><tt class="docutils literal"><span class="pre">delay</span></tt> &#8211; numerator of the delay fraction in seconds</li>
<li><tt class="docutils literal"><span class="pre">delay_denominator</span></tt> &#8211; denominator of the delay in seconds</li>
</ul>
<p>If the delay is not specified, the default from the constructor
applies.</p>
<p>TESTS:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.plot.animate</span> <span class="kn">import</span> <span class="n">APngAssembler</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">StringIO</span> <span class="kn">import</span> <span class="n">StringIO</span>
<span class="gp">sage: </span><span class="n">buf</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">apng</span> <span class="o">=</span> <span class="n">APngAssembler</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">fn</span> <span class="o">=</span> <span class="n">APngAssembler</span><span class="o">.</span><span class="n">_testData</span><span class="p">(</span><span class="s">&quot;input1&quot;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">apng</span><span class="o">.</span><span class="n">add_frame</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mh">0x567</span><span class="p">,</span> <span class="n">delay_denominator</span><span class="o">=</span><span class="mh">0x1234</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">fn</span> <span class="o">=</span> <span class="n">APngAssembler</span><span class="o">.</span><span class="n">_testData</span><span class="p">(</span><span class="s">&quot;input2&quot;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">apng</span><span class="o">.</span><span class="n">add_frame</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
<span class="gp">sage: </span><span class="nb">len</span><span class="p">(</span><span class="n">buf</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
<span class="go">217</span>
<span class="gp">sage: </span><span class="n">buf</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">==</span> <span class="n">APngAssembler</span><span class="o">.</span><span class="n">_testData</span><span class="p">(</span><span class="s">&quot;anim12&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">apng</span><span class="o">.</span><span class="n">add_frame</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">RuntimeError</span>: <span class="n">Already reached the declared number of frames</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.plot.animate.APngAssembler.set_default">
<tt class="descname">set_default</tt><big>(</big><em>pngfile</em><big>)</big><a class="headerlink" href="#sage.plot.animate.APngAssembler.set_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a default image for the APNG file.</p>
<p>This image is used as a fallback in case some application does
not understand the APNG format.  This method must be called
prior to any calls to the <tt class="docutils literal"><span class="pre">add_frame</span></tt> method, if it is called
at all.  If it is not called, then the first frame of the
animation will be the default.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">pngfile</span></tt> &#8211; file name of the PNG file with data
for the default image</li>
</ul>
<p>TESTS:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.plot.animate</span> <span class="kn">import</span> <span class="n">APngAssembler</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">StringIO</span> <span class="kn">import</span> <span class="n">StringIO</span>
<span class="gp">sage: </span><span class="n">buf</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">apng</span> <span class="o">=</span> <span class="n">APngAssembler</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">fn</span> <span class="o">=</span> <span class="n">APngAssembler</span><span class="o">.</span><span class="n">_testData</span><span class="p">(</span><span class="s">&quot;input1&quot;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">apng</span><span class="o">.</span><span class="n">set_default</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">fn</span> <span class="o">=</span> <span class="n">APngAssembler</span><span class="o">.</span><span class="n">_testData</span><span class="p">(</span><span class="s">&quot;input2&quot;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">apng</span><span class="o">.</span><span class="n">add_frame</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mh">0x567</span><span class="p">,</span> <span class="n">delay_denominator</span><span class="o">=</span><span class="mh">0x1234</span><span class="p">)</span>
<span class="gp">sage: </span><span class="nb">len</span><span class="p">(</span><span class="n">buf</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
<span class="go">179</span>
<span class="gp">sage: </span><span class="n">buf</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span> <span class="o">==</span> <span class="n">APngAssembler</span><span class="o">.</span><span class="n">_testData</span><span class="p">(</span><span class="s">&quot;still1anim2&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">apng</span><span class="o">.</span><span class="n">add_frame</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">RuntimeError</span>: <span class="n">Already reached the declared number of frames</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.plot.animate.Animation">
<em class="property">class </em><tt class="descclassname">sage.plot.animate.</tt><tt class="descname">Animation</tt><big>(</big><em>v=None</em>, <em>**kwds</em><big>)</big><a class="headerlink" href="#sage.plot.animate.Animation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="../../../misc/sage/misc/fast_methods.html#sage.misc.fast_methods.WithEqualityById" title="(in Sage Reference Manual: Utilities v7.0)"><tt class="xref py py-class docutils literal"><span class="pre">sage.misc.fast_methods.WithEqualityById</span></tt></a>, <a class="reference external" href="../../../structure/sage/structure/sage_object.html#sage.structure.sage_object.SageObject" title="(in Sage Reference Manual: Basic Structures v7.0)"><tt class="xref py py-class docutils literal"><span class="pre">sage.structure.sage_object.SageObject</span></tt></a></p>
<p>Return an animation of a sequence of plots of objects.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">v</span></tt> - iterable of Sage objects. These should preferably be
graphics objects, but if they aren&#8217;t then <a class="reference internal" href="#sage.plot.animate.Animation.make_image" title="sage.plot.animate.Animation.make_image"><tt class="xref py py-meth docutils literal"><span class="pre">make_image()</span></tt></a> is
called on them.</li>
<li><tt class="docutils literal"><span class="pre">xmin,</span> <span class="pre">xmax,</span> <span class="pre">ymin,</span> <span class="pre">ymax</span></tt> - the ranges of the x and y axes.</li>
<li><tt class="docutils literal"><span class="pre">**kwds</span></tt> - all additional inputs are passed onto the rendering
command. E.g., use figsize to adjust the resolution and aspect
ratio.</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mf">0.3</span><span class="p">)],</span>
<span class="go">....:                xmin=0, xmax=2*pi, figsize=[2,1])</span>
<span class="gp">sage: </span><span class="n">a</span>                 <span class="c"># optional -- ImageMagick</span>
<span class="go">Animation with 21 frames</span>
<span class="gp">sage: </span><span class="n">a</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>             <span class="c"># optional -- ImageMagick</span>
<span class="go">Animation with 5 frames</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>          <span class="c"># optional -- ImageMagick</span>
<span class="gp">sage: </span><span class="n">a</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>      <span class="c"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#sage.plot.animate.Animation.show" title="sage.plot.animate.Animation.show"><tt class="xref py py-meth docutils literal"><span class="pre">show()</span></tt></a> method takes arguments to specify the
delay between frames (measured in hundredths of a second, default
value 20) and the number of iterations (default value 0, which
means to iterate forever). To iterate 4 times with half a second
between each frame:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">delay</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="c"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>An animation of drawing a parabola:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">step</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="gp">sage: </span><span class="n">L</span> <span class="o">=</span> <span class="n">Graphics</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">sage: </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">step</span><span class="p">):</span>
<span class="go">....:       L += line([(i,i^2),(i+step,(i+step)^2)], rgbcolor=(1,0,0), thickness=2)</span>
<span class="go">....:       v.append(L)</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c"># optional -- ImageMagick</span>
<span class="gp">sage: </span><span class="n">show</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
</pre></div>
</div>
<p>TESTS:</p>
<p>This illustrates that <a class="reference external" href="http://trac.sagemath.org/2066">trac ticket #2066</a> is fixed (setting axes
ranges when an endpoint is 0):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">animate</span><span class="p">([</span><span class="n">plot</span><span class="p">(</span><span class="n">sin</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)],</span> <span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">_kwds</span><span class="p">[</span><span class="s">&#39;xmin&#39;</span><span class="p">]</span>
<span class="go">0</span>
</pre></div>
</div>
<p>We check that <a class="reference external" href="http://trac.sagemath.org/7981">trac ticket #7981</a> is fixed:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">plot</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="p">)),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">),</span> <span class="n">ymin</span><span class="o">=-</span><span class="mi">5</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="go">....:              for k in srange(0,2*pi,0.3)])</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>Do not convert input iterator to a list, but ensure that
the frame count is known after rendering the frames:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">((</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">^</span><span class="n">p</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">sxrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">.</span><span class="mi">1</span><span class="p">)))</span>
<span class="gp">sage: </span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">&#39;Animation with unknown number of frames&#39;</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">png</span><span class="p">()</span>    <span class="c"># long time</span>
<span class="go">&#39;.../&#39;</span>
<span class="gp">sage: </span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>     <span class="c"># long time</span>
<span class="go">10</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">_frames</span>
<span class="go">&lt;generator object ...</span>

<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.plot.animate</span> <span class="kn">import</span> <span class="n">Animation</span>
<span class="gp">sage: </span><span class="nb">hash</span><span class="p">(</span><span class="n">Animation</span><span class="p">())</span> <span class="c"># random</span>
<span class="go">140658972348064</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.plot.animate.Animation.apng">
<tt class="descname">apng</tt><big>(</big><em>savefile=None</em>, <em>show_path=False</em>, <em>delay=20</em>, <em>iterations=0</em><big>)</big><a class="headerlink" href="#sage.plot.animate.Animation.apng" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an animated PNG composed from rendering the graphics
objects in self. Return the absolute path to that file.</p>
<p>Notice that not all web browsers are capable of displaying APNG
files, though they should still present the first frame of the
animation as a fallback.</p>
<p>The generated file is not optimized, so it may be quite large.</p>
<p>Input:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">delay</span></tt> - (default: 20) delay in hundredths of a
second between frames</li>
<li><tt class="docutils literal"><span class="pre">savefile</span></tt> - file that the animated gif gets saved
to</li>
<li><tt class="docutils literal"><span class="pre">iterations</span></tt> - integer (default: 0); number of
iterations of animation. If 0, loop forever.</li>
<li><tt class="docutils literal"><span class="pre">show_path</span></tt> - boolean (default: False); if True,
print the path to the saved file</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mf">0.7</span><span class="p">)],</span>
<span class="go">....:                xmin=0, xmax=2*pi, figsize=[2,1])</span>
<span class="gp">sage: </span><span class="nb">dir</span> <span class="o">=</span> <span class="n">tmp_dir</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">apng</span><span class="p">()</span>  <span class="c"># long time</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">apng</span><span class="p">(</span><span class="n">savefile</span><span class="o">=</span><span class="nb">dir</span> <span class="o">+</span> <span class="s">&#39;my_animation.png&#39;</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>  <span class="c"># long time</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">apng</span><span class="p">(</span><span class="n">savefile</span><span class="o">=</span><span class="nb">dir</span> <span class="o">+</span> <span class="s">&#39;my_animation.png&#39;</span><span class="p">,</span> <span class="n">show_path</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>  <span class="c"># long time</span>
<span class="go">Animation saved to .../my_animation.png.</span>
</pre></div>
</div>
<p>If the individual frames have different sizes, an error will be raised:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">plot</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)],</span>
<span class="go">....:             ymin=-1, ymax=1, aspect_ratio=1, figsize=[2,1])</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">apng</span><span class="p">()</span>  <span class="c"># long time</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Chunk IHDR mismatch</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.plot.animate.Animation.ffmpeg">
<tt class="descname">ffmpeg</tt><big>(</big><em>savefile=None</em>, <em>show_path=False</em>, <em>output_format=None</em>, <em>ffmpeg_options=''</em>, <em>delay=None</em>, <em>iterations=0</em>, <em>pix_fmt='rgb24'</em><big>)</big><a class="headerlink" href="#sage.plot.animate.Animation.ffmpeg" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a movie showing an animation composed from rendering
the frames in self.</p>
<p>This method will only work if ffmpeg is installed.  See
<a class="reference external" href="http://www.ffmpeg.org">http://www.ffmpeg.org</a> for information about ffmpeg.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">savefile</span></tt> - file that the mpeg gets saved to.</li>
</ul>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">show_path</span></tt> - boolean (default: False); if True, print the
path to the saved file</li>
<li><tt class="docutils literal"><span class="pre">output_format</span></tt> - string (default: None); format and
suffix to use for the video.  This may be &#8216;mpg&#8217;, &#8216;mpeg&#8217;,
&#8216;avi&#8217;, &#8216;gif&#8217;, or any other format that ffmpeg can handle.
If this is None and the user specifies <tt class="docutils literal"><span class="pre">savefile</span></tt> with a
suffix, say <tt class="docutils literal"><span class="pre">savefile='animation.avi'</span></tt>, try to determine the
format (&#8216;avi&#8217; in this case) from that file name.  If no file
is specified or if the suffix cannot be determined, &#8216;mpg&#8217; is
used.</li>
<li><tt class="docutils literal"><span class="pre">ffmpeg_options</span></tt> - string (default: &#8216;&#8217;); this string is
passed directly to ffmpeg.</li>
<li><tt class="docutils literal"><span class="pre">delay</span></tt> - integer (default: None); delay in hundredths of a
second between frames.  The framerate is 100/delay.
This is not supported for mpeg files: for mpegs, the frame
rate is always 25 fps.</li>
<li><tt class="docutils literal"><span class="pre">iterations</span></tt> - integer (default: 0); number of iterations
of animation. If 0, loop forever.  This is only supported
for animated gif output and requires ffmpeg version 0.9 or
later.  For older versions, set <tt class="docutils literal"><span class="pre">iterations=None</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">pix_fmt</span></tt> - string (default: &#8216;rgb24&#8217;); used only for gif
output.  Different values such as &#8216;rgb8&#8217; or &#8216;pal8&#8217; may be
necessary depending on how ffmpeg was installed.  Set
<tt class="docutils literal"><span class="pre">pix_fmt=None</span></tt> to disable this option.</li>
</ul>
<p>If <tt class="docutils literal"><span class="pre">savefile</span></tt> is not specified: in notebook mode, display
the animation; otherwise, save it to a default file name.  Use
<a class="reference external" href="../../../misc/sage/misc/misc.html#sage.misc.misc.set_verbose" title="(in Sage Reference Manual: Utilities v7.0)"><tt class="xref py py-func docutils literal"><span class="pre">sage.misc.misc.set_verbose()</span></tt></a> with <tt class="docutils literal"><span class="pre">level=1</span></tt> to see
additional output.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mf">0.7</span><span class="p">)],</span>
<span class="go">....:             xmin=0, xmax=2*pi, ymin=-1, ymax=1, figsize=[2,1])</span>
<span class="gp">sage: </span><span class="n">td</span> <span class="o">=</span> <span class="n">tmp_dir</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">ffmpeg</span><span class="p">(</span><span class="n">savefile</span><span class="o">=</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;new.mpg&#39;</span><span class="p">)</span>       <span class="c"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">ffmpeg</span><span class="p">(</span><span class="n">savefile</span><span class="o">=</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;new.avi&#39;</span><span class="p">)</span>       <span class="c"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">ffmpeg</span><span class="p">(</span><span class="n">savefile</span><span class="o">=</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;new.gif&#39;</span><span class="p">)</span>       <span class="c"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">ffmpeg</span><span class="p">(</span><span class="n">savefile</span><span class="o">=</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;new.mpg&#39;</span><span class="p">,</span> <span class="n">show_path</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c"># optional -- ffmpeg</span>
<span class="go">Animation saved to .../new.mpg.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If ffmpeg is not installed, you will get an error message
like this:</p>
<div class="last highlight-python"><div class="highlight"><pre>Error: ffmpeg does not appear to be installed. Saving an animation to
a movie file in any format other than GIF requires this software, so
please install it and try again.

See www.ffmpeg.org for more information.
</pre></div>
</div>
</div>
<p>TESTS:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">ffmpeg</span><span class="p">(</span><span class="n">output_format</span><span class="o">=</span><span class="s">&#39;gif&#39;</span><span class="p">,</span><span class="n">delay</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">iterations</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>     <span class="c"># optional -- ffmpeg</span>
<span class="go">doctest:...: DeprecationWarning: use tmp_filename instead</span>
<span class="go">See http://trac.sagemath.org/17234 for details.</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.plot.animate.Animation.gif">
<tt class="descname">gif</tt><big>(</big><em>delay=20</em>, <em>savefile=None</em>, <em>iterations=0</em>, <em>show_path=False</em>, <em>use_ffmpeg=False</em><big>)</big><a class="headerlink" href="#sage.plot.animate.Animation.gif" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an animated gif composed from rendering the graphics
objects in self.</p>
<p>This method will only work if either (a) the ImageMagick
software suite is installed, i.e., you have the <tt class="docutils literal"><span class="pre">convert</span></tt>
command or (b) <tt class="docutils literal"><span class="pre">ffmpeg</span></tt> is installed.  See the web sites of
<a class="reference external" href="http://www.imagemagick.org">ImageMagick</a> and <a class="reference external" href="http://www.ffmpeg.org">FFmpeg</a> for more details.  By default, this
produces the gif using <tt class="docutils literal"><span class="pre">convert</span></tt> if it is present.  If this
can&#8217;t find <tt class="docutils literal"><span class="pre">convert</span></tt> or if <tt class="docutils literal"><span class="pre">use_ffmpeg</span></tt> is True, then it
uses <tt class="docutils literal"><span class="pre">ffmpeg</span></tt> instead.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">delay</span></tt> - (default: 20) delay in hundredths of a
second between frames</li>
<li><tt class="docutils literal"><span class="pre">savefile</span></tt> - file that the animated gif gets saved
to</li>
<li><tt class="docutils literal"><span class="pre">iterations</span></tt> - integer (default: 0); number of
iterations of animation. If 0, loop forever.</li>
<li><tt class="docutils literal"><span class="pre">show_path</span></tt> - boolean (default: False); if True,
print the path to the saved file</li>
<li><tt class="docutils literal"><span class="pre">use_ffmpeg</span></tt> - boolean (default: False); if True, use
&#8216;ffmpeg&#8217; by default instead of &#8216;convert&#8217;.</li>
</ul>
<p>If <tt class="docutils literal"><span class="pre">savefile</span></tt> is not specified: in notebook mode, display the
animation; otherwise, save it to a default file name.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mf">0.7</span><span class="p">)],</span>
<span class="go">....:             xmin=0, xmax=2*pi, ymin=-1, ymax=1, figsize=[2,1])</span>
<span class="gp">sage: </span><span class="n">td</span> <span class="o">=</span> <span class="n">tmp_dir</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">gif</span><span class="p">()</span>              <span class="c"># not tested</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">gif</span><span class="p">(</span><span class="n">savefile</span><span class="o">=</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;my_animation.gif&#39;</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>  <span class="c"># optional -- ImageMagick</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;my_animation.gif&#39;</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;</span><span class="se">\x21\xf9\x04\x08\x23\x00</span><span class="s">&#39;</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c"># optional -- ImageMagick</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">gif</span><span class="p">(</span><span class="n">savefile</span><span class="o">=</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;my_animation.gif&#39;</span><span class="p">,</span> <span class="n">show_path</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c"># optional -- ImageMagick</span>
<span class="go">Animation saved to .../my_animation.gif.</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">gif</span><span class="p">(</span><span class="n">savefile</span><span class="o">=</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;my_animation_2.gif&#39;</span><span class="p">,</span> <span class="n">show_path</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">use_ffmpeg</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c"># optional -- ffmpeg</span>
<span class="go">Animation saved to .../my_animation_2.gif.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If neither ffmpeg nor ImageMagick is installed, you will
get an error message like this:</p>
<div class="last highlight-python"><div class="highlight"><pre>Error: Neither ImageMagick nor ffmpeg appears to be installed. Saving an
animation to a GIF file or displaying an animation requires one of these
packages, so please install one of them and try again.

See www.imagemagick.org and www.ffmpeg.org for more information.
</pre></div>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.plot.animate.Animation.graphics_array">
<tt class="descname">graphics_array</tt><big>(</big><em>ncols=3</em><big>)</big><a class="headerlink" href="#sage.plot.animate.Animation.graphics_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="graphics.html#sage.plot.graphics.GraphicsArray" title="sage.plot.graphics.GraphicsArray"><tt class="xref py py-class docutils literal"><span class="pre">sage.plot.graphics.GraphicsArray</span></tt></a> with plots of the
frames of this animation, using the given number of columns.
The frames must be acceptable inputs for
<a class="reference internal" href="graphics.html#sage.plot.graphics.GraphicsArray" title="sage.plot.graphics.GraphicsArray"><tt class="xref py py-class docutils literal"><span class="pre">sage.plot.graphics.GraphicsArray</span></tt></a>.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">E</span> <span class="o">=</span> <span class="n">EllipticCurve</span><span class="p">(</span><span class="s">&#39;37a&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="n">E</span><span class="o">.</span><span class="n">change_ring</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="n">p</span><span class="p">))</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pointsize</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">97</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">103</span><span class="p">,</span> <span class="mi">107</span><span class="p">]]</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span>        <span class="c"># optional -- ImageMagick</span>
<span class="go">Animation with 4 frames</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>Modify the default arrangement of array:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">g</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">graphics_array</span><span class="p">();</span> <span class="k">print</span> <span class="n">g</span>
<span class="go">Graphics Array of size 2 x 3</span>
<span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>  <span class="c"># not tested</span>
</pre></div>
</div>
<p>Specify different arrangement of array and save it with a given file name:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">g</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">graphics_array</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">);</span> <span class="k">print</span> <span class="n">g</span>
<span class="go">Graphics Array of size 2 x 2</span>
<span class="gp">sage: </span><span class="n">f</span> <span class="o">=</span> <span class="n">tmp_filename</span><span class="p">(</span><span class="n">ext</span><span class="o">=</span><span class="s">&#39;.png&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>Frames can be specified as a generator too; it is internally converted to a list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">t</span> <span class="o">=</span> <span class="n">var</span><span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">b</span> <span class="o">=</span> <span class="n">animate</span><span class="p">((</span><span class="n">plot</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">c</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">t</span><span class="p">))</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">sxrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">.</span><span class="mi">2</span><span class="p">)))</span>
<span class="gp">sage: </span><span class="n">g</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">graphics_array</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">g</span>
<span class="go">Graphics Array of size 2 x 3</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.plot.animate.Animation.make_image">
<tt class="descname">make_image</tt><big>(</big><em>frame</em>, <em>filename</em>, <em>**kwds</em><big>)</big><a class="headerlink" href="#sage.plot.animate.Animation.make_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a frame which has no <tt class="docutils literal"><span class="pre">save_image()</span></tt> method, make a graphics
object and save it as an image with the given filename.  By default, this is
<a class="reference internal" href="plot.html#sage.plot.plot.plot" title="sage.plot.plot.plot"><tt class="xref py py-meth docutils literal"><span class="pre">sage.plot.plot.plot()</span></tt></a>.  To make animations of other objects,
override this method in a subclass.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.plot.animate</span> <span class="kn">import</span> <span class="n">Animation</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">MyAnimation</span><span class="p">(</span><span class="n">Animation</span><span class="p">):</span>
<span class="go">....:    def make_image(self, frame, filename, **kwds):</span>
<span class="go">....:        P = parametric_plot(frame[0], frame[1], **frame[2])</span>
<span class="go">....:        P.save_image(filename,**kwds)</span>

<span class="gp">sage: </span><span class="n">t</span> <span class="o">=</span> <span class="n">var</span><span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">y</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">n</span><span class="p">,</span><span class="n">t</span><span class="p">:</span> <span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">/</span><span class="n">n</span>
<span class="gp">sage: </span><span class="n">B</span> <span class="o">=</span> <span class="n">MyAnimation</span><span class="p">([([</span><span class="n">x</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="n">y</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">t</span><span class="p">)],(</span><span class="n">t</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">{</span><span class="s">&#39;color&#39;</span><span class="p">:</span><span class="n">Color</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">i</span><span class="o">/</span><span class="mi">4</span><span class="p">)),</span> <span class="s">&#39;aspect_ratio&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;ymax&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)])</span>

<span class="gp">sage: </span><span class="n">d</span> <span class="o">=</span> <span class="n">B</span><span class="o">.</span><span class="n">png</span><span class="p">();</span> <span class="n">v</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">d</span><span class="p">);</span> <span class="n">v</span><span class="o">.</span><span class="n">sort</span><span class="p">();</span> <span class="n">v</span>  <span class="c"># long time</span>
<span class="go">[&#39;00000000.png&#39;, &#39;00000001.png&#39;, &#39;00000002.png&#39;, &#39;00000003.png&#39;]</span>
<span class="gp">sage: </span><span class="n">B</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c"># not tested</span>

<span class="gp">sage: </span><span class="k">class</span> <span class="nc">MyAnimation</span><span class="p">(</span><span class="n">Animation</span><span class="p">):</span>
<span class="go">....:    def make_image(self, frame, filename, **kwds):</span>
<span class="go">....:        G = frame.plot()</span>
<span class="go">....:        G.set_axes_range(floor(G.xmin()),ceil(G.xmax()),floor(G.ymin()),ceil(G.ymax()))</span>
<span class="go">....:        G.save_image(filename, **kwds)</span>

<span class="gp">sage: </span><span class="n">B</span> <span class="o">=</span> <span class="n">MyAnimation</span><span class="p">([</span><span class="n">graphs</span><span class="o">.</span><span class="n">CompleteGraph</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">11</span><span class="p">)],</span> <span class="n">figsize</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">d</span> <span class="o">=</span> <span class="n">B</span><span class="o">.</span><span class="n">png</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">d</span><span class="p">);</span> <span class="n">v</span><span class="o">.</span><span class="n">sort</span><span class="p">();</span> <span class="n">v</span>
<span class="go">[&#39;00000000.png&#39;, &#39;00000001.png&#39;, &#39;00000002.png&#39;, &#39;00000003.png&#39;]</span>
<span class="gp">sage: </span><span class="n">B</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c"># not tested</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.plot.animate.Animation.png">
<tt class="descname">png</tt><big>(</big><em>dir=None</em><big>)</big><a class="headerlink" href="#sage.plot.animate.Animation.png" title="Permalink to this definition">¶</a></dt>
<dd><p>Render PNG images of the frames in this animation, saving them
in <tt class="docutils literal"><span class="pre">dir</span></tt>.  Return the absolute path to that directory.  If
the frames have been previously rendered and <tt class="docutils literal"><span class="pre">dir</span></tt> is
<tt class="docutils literal"><span class="pre">None</span></tt>, just return the directory in which they are stored.</p>
<p>When <tt class="docutils literal"><span class="pre">dir</span></tt> is other than <tt class="docutils literal"><span class="pre">None</span></tt>, force re-rendering of
frames.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">dir</span></tt> &#8211; Directory in which to store frames.  Default
<tt class="docutils literal"><span class="pre">None</span></tt>; in this case, a temporary directory will be
created for storing the frames.</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">^</span><span class="mi">2</span> <span class="o">+</span> <span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)],</span> <span class="n">ymin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">d</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">png</span><span class="p">();</span> <span class="n">v</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">d</span><span class="p">);</span> <span class="n">v</span><span class="o">.</span><span class="n">sort</span><span class="p">();</span> <span class="n">v</span>  <span class="c"># long time</span>
<span class="go">[&#39;00000000.png&#39;, &#39;00000001.png&#39;, &#39;00000002.png&#39;, &#39;00000003.png&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.plot.animate.Animation.save">
<tt class="descname">save</tt><big>(</big><em>filename=None</em>, <em>show_path=False</em>, <em>use_ffmpeg=False</em>, <em>**kwds</em><big>)</big><a class="headerlink" href="#sage.plot.animate.Animation.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save this animation.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">filename</span></tt> - (default: None) name of save file</li>
<li><tt class="docutils literal"><span class="pre">show_path</span></tt> - boolean (default: False); if True,
print the path to the saved file</li>
<li><tt class="docutils literal"><span class="pre">use_ffmpeg</span></tt> - boolean (default: False); if True, use
&#8216;ffmpeg&#8217; by default instead of &#8216;convert&#8217; when creating GIF
files.</li>
</ul>
<p>If filename is None, then in notebook mode, display the
animation; otherwise, save the animation to a GIF file.  If
filename ends in &#8216;.sobj&#8217;, save to an sobj file.  Otherwise,
try to determine the format from the filename extension
(&#8216;.mpg&#8217;, &#8216;.gif&#8217;, &#8216;.avi&#8217;, etc.).  If the format cannot be
determined, default to GIF.</p>
<p>For GIF files, either ffmpeg or the ImageMagick suite must be
installed.  For other movie formats, ffmpeg must be installed.
An sobj file can be saved with no extra software installed.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mf">0.7</span><span class="p">)],</span>
<span class="go">....:             xmin=0, xmax=2*pi, ymin=-1, ymax=1, figsize=[2,1])</span>
<span class="gp">sage: </span><span class="n">td</span> <span class="o">=</span> <span class="n">tmp_dir</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>         <span class="c"># not tested</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;wave.gif&#39;</span><span class="p">)</span>   <span class="c"># optional -- ImageMagick</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;wave.gif&#39;</span><span class="p">,</span> <span class="n">show_path</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>   <span class="c"># optional -- ImageMagick</span>
<span class="go">Animation saved to file .../wave.gif.</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;wave.avi&#39;</span><span class="p">,</span> <span class="n">show_path</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>   <span class="c"># optional -- ffmpeg</span>
<span class="go">Animation saved to file .../wave.avi.</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;wave0.sobj&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;wave1.sobj&#39;</span><span class="p">,</span> <span class="n">show_path</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">Animation saved to file .../wave1.sobj.</span>
</pre></div>
</div>
<p>TESTS:</p>
<p>Ensure that we can pass delay and iteration count to the saved
GIF image (see <a class="reference external" href="http://trac.sagemath.org/18176">trac ticket #18176</a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;wave.gif&#39;</span><span class="p">)</span>   <span class="c"># optional -- ImageMagick</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;wave.gif&#39;</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;!</span><span class="se">\xf9\x04\x08\x14\x00</span><span class="s">&#39;</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c"># optional -- ImageMagick</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;wave.gif&#39;</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;!</span><span class="se">\xff\x0b</span><span class="s">NETSCAPE2.0</span><span class="se">\x03\x01\x00\x00\x00</span><span class="s">&#39;</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c"># optional -- ImageMagick</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;wave.gif&#39;</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">35</span><span class="p">)</span>   <span class="c"># optional -- ImageMagick</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;wave.gif&#39;</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;!</span><span class="se">\xf9\x04\x08\x14\x00</span><span class="s">&#39;</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c"># optional -- ImageMagick</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;wave.gif&#39;</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;!</span><span class="se">\xf9\x04\x08\x23\x00</span><span class="s">&#39;</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c"># optional -- ImageMagick</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;wave.gif&#39;</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>   <span class="c"># optional -- ImageMagick</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;wave.gif&#39;</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;!</span><span class="se">\xff\x0b</span><span class="s">NETSCAPE2.0</span><span class="se">\x03\x01\x00\x00\x00</span><span class="s">&#39;</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c"># optional -- ImageMagick</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">td</span> <span class="o">+</span> <span class="s">&#39;wave.gif&#39;</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;!</span><span class="se">\xff\x0b</span><span class="s">NETSCAPE2.0</span><span class="se">\x03\x01\x03\x00\x00</span><span class="s">&#39;</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c"># optional -- ImageMagick</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.plot.animate.Animation.show">
<tt class="descname">show</tt><big>(</big><em>delay=None</em>, <em>iterations=None</em>, <em>**kwds</em><big>)</big><a class="headerlink" href="#sage.plot.animate.Animation.show" title="Permalink to this definition">¶</a></dt>
<dd><p>Show this animation immediately.</p>
<p>This method attempts to display the graphics immediately,
without waiting for the currently running code (if any) to
return to the command line. Be careful, calling it from within
a loop will potentially launch a large number of external
viewer programs.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">delay</span></tt> &#8211; (default: 20) delay in hundredths of a
second between frames.</li>
<li><tt class="docutils literal"><span class="pre">iterations</span></tt> &#8211; integer (default: 0); number of
iterations of animation. If 0, loop forever.</li>
<li><tt class="docutils literal"><span class="pre">format</span></tt> - (default: gif) format to use for output.
Currently supported formats are: gif,
ogg, webm, mp4, flash, matroska, avi, wmv, quicktime.</li>
</ul>
<p>OUTPUT:</p>
<p>This method does not return anything. Use <a class="reference internal" href="#sage.plot.animate.Animation.save" title="sage.plot.animate.Animation.save"><tt class="xref py py-meth docutils literal"><span class="pre">save()</span></tt></a> if you
want to save the figure as an image.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently this is done using an animated gif, though this
could change in the future. This requires that either
ffmpeg or the ImageMagick suite (in particular, the
<tt class="docutils literal"><span class="pre">convert</span></tt> command) is installed.</p>
</div>
<p>See also the <a class="reference internal" href="#sage.plot.animate.Animation.ffmpeg" title="sage.plot.animate.Animation.ffmpeg"><tt class="xref py py-meth docutils literal"><span class="pre">ffmpeg()</span></tt></a> method.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">([</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">srange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mf">0.7</span><span class="p">)],</span>
<span class="go">....:                xmin=0, xmax=2*pi, figsize=[2,1])</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>       <span class="c"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>The preceding will loop the animation forever. If you want to show
only three iterations instead:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">iterations</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>    <span class="c"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>To put a half-second delay between frames:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">delay</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>        <span class="c"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>You can also make use of the HTML5 video element in the Sage Notebook:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s">&quot;ogg&quot;</span><span class="p">)</span>         <span class="c"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s">&quot;webm&quot;</span><span class="p">)</span>        <span class="c"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s">&quot;mp4&quot;</span><span class="p">)</span>         <span class="c"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s">&quot;webm&quot;</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c"># optional -- ffmpeg</span>
</pre></div>
</div>
<p>Other backends may support other file formats as well:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s">&quot;flash&quot;</span><span class="p">)</span>       <span class="c"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s">&quot;matroska&quot;</span><span class="p">)</span>    <span class="c"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s">&quot;avi&quot;</span><span class="p">)</span>         <span class="c"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s">&quot;wmv&quot;</span><span class="p">)</span>         <span class="c"># optional -- ffmpeg</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s">&quot;quicktime&quot;</span><span class="p">)</span>   <span class="c"># optional -- ffmpeg</span>
</pre></div>
</div>
<p>TESTS:</p>
<p>Use of positional parameters is discouraged, will likely get
deprecated, but should still work for the time being:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>           <span class="c"># optional -- ImageMagick</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you don&#8217;t have ffmpeg or ImageMagick installed, you will
get an error message like this:</p>
<div class="last highlight-python"><div class="highlight"><pre>Error: Neither ImageMagick nor ffmpeg appears to be installed. Saving an
animation to a GIF file or displaying an animation requires one of these
packages, so please install one of them and try again.

See www.imagemagick.org and www.ffmpeg.org for more information.
</pre></div>
</div>
</div>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="sage.plot.animate.animate">
<tt class="descclassname">sage.plot.animate.</tt><tt class="descname">animate</tt><big>(</big><em>frames</em>, <em>**kwds</em><big>)</big><a class="headerlink" href="#sage.plot.animate.animate" title="Permalink to this definition">¶</a></dt>
<dd><p>Animate a list of frames by creating a
<a class="reference internal" href="#sage.plot.animate.Animation" title="sage.plot.animate.Animation"><tt class="xref py py-class docutils literal"><span class="pre">sage.plot.animate.Animation</span></tt></a> object.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">t</span> <span class="o">=</span> <span class="n">var</span><span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">((</span><span class="n">cos</span><span class="p">(</span><span class="n">c</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">sxrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">.</span><span class="mi">2</span><span class="p">)))</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c"># optional -- ImageMagick</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#module-sage.plot.animate" title="sage.plot.animate"><tt class="xref py py-mod docutils literal"><span class="pre">sage.plot.animate</span></tt></a> for more examples.</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h4>Previous topic</h4>
            <p class="topless"><a href="colors.html"
                                  title="previous chapter">Colors</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="complex_plot.html"
                                  title="next chapter">Complex Plots</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/sage/plot/animate.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../../../search.html" method="get">
                <input type="text" name="q" size="18" />
               <!-- The shading of the "Go" button should be consistent -->
               <!-- with the colour of the header and footer. See the file -->
               <!-- doc/common/themes/sage/theme.conf for colours used by -->
               <!-- the Sage theme. -->
                <input type="submit" style="background-color: #B8B9F6" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="complex_plot.html" title="Complex Plots"
             >next</a> |</li>
        <li class="right" >
          <a href="colors.html" title="Colors"
             >previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="../../index.html">2D Graphics</a> &raquo;</li>
 
      </ul>
    </div>
    
    <div class="footer">
        &copy; Copyright 2005--2016, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
  </body>
</html>