<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Sage Input Formatting &mdash; Sage Reference Manual v7.2: Utilities</title>
    
    <link rel="stylesheet" href="../../../_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '7.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="top" title="Sage Reference Manual v7.2: Utilities" href="../../index.html" />
    <link rel="next" title="Tables" href="table.html" />
    <link rel="prev" title="Unicode Art" href="../typeset/unicode_art.html" />
    <link rel="icon" href="../../../_static/sageicon.png" type="image/x-icon" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="table.html" title="Tables"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../typeset/unicode_art.html" title="Unicode Art"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../index.html">Utilities</a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="sage-input-formatting">
<span id="sage-misc-sage-input"></span><h1>Sage Input Formatting<a class="headerlink" href="#sage-input-formatting" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-sage.misc.sage_input"></span><p>This module provides the function <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a> that takes an
arbitrary sage value and produces a sequence of commands that, if typed
at the <code class="docutils literal"><span class="pre">sage:</span></code> prompt, will recreate the value. If this is not
implemented for a particular value, then an exception is raised instead.
This might be useful in understanding a part of Sage, or for debugging.
For instance, if you have a value produced in a complicated way in the
middle of a debugging session, you could use <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a> to find
a simple way to produce the same value. We attempt to produce commands
that are readable and idiomatic.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sage_input</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">sage: </span><span class="n">sage_input</span><span class="p">((</span><span class="n">polygen</span><span class="p">(</span><span class="n">RR</span><span class="p">)</span> <span class="o">+</span> <span class="n">RR</span><span class="p">(</span><span class="n">pi</span><span class="p">))</span><span class="o">^</span><span class="mi">2</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go"># Verified</span>
<span class="go">R.&lt;x&gt; = RR[]</span>
<span class="go">x^2 + 6.2831853071795862*x + 9.869604401089358</span>
</pre></div>
</div>
<p>With <code class="docutils literal"><span class="pre">verify=True</span></code>, <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a> also verifies the results, by
calling <a class="reference internal" href="sage_eval.html#sage.misc.sage_eval.sage_eval" title="sage.misc.sage_eval.sage_eval"><code class="xref py py-func docutils literal"><span class="pre">sage_eval()</span></code></a> on the result and
verifying that it is equal to the input.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sage_input</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">1</span><span class="p">),</span> <span class="n">verify</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go"># Verified</span>
<span class="go">GF(2)(1)</span>
</pre></div>
</div>
<p>We can generate code that works without the preparser, with
<code class="docutils literal"><span class="pre">preparse=False</span></code>; or we can generate code that will work whether or
not the preparser is enabled, with <code class="docutils literal"><span class="pre">preparse=None</span></code>.  Generating code
with <code class="docutils literal"><span class="pre">preparse=False</span></code> may be useful to see how to create a certain
value in a Python or Cython source file.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sage_input</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go"># Verified</span>
<span class="go">5</span>
<span class="gp">sage: </span><span class="n">sage_input</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">preparse</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">ZZ(5)</span>
<span class="gp">sage: </span><span class="n">sage_input</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">preparse</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="go">ZZ(5)</span>
<span class="gp">sage: </span><span class="n">sage_input</span><span class="p">(</span><span class="mi">5</span><span class="n">r</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go"># Verified</span>
<span class="go">5r</span>
<span class="gp">sage: </span><span class="n">sage_input</span><span class="p">(</span><span class="mi">5</span><span class="n">r</span><span class="p">,</span> <span class="n">preparse</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">5</span>
<span class="gp">sage: </span><span class="n">sage_input</span><span class="p">(</span><span class="mi">5</span><span class="n">r</span><span class="p">,</span> <span class="n">preparse</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="go">int(5)</span>
</pre></div>
</div>
<p>Adding <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a> support to your own classes is
straightforward.  You need to add a <code class="xref py py-func docutils literal"><span class="pre">_sage_input_()</span></code> method which
returns a <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a> (henceforth abbreviated as SIE)
which will reconstruct this instance of your class.</p>
<p>A <code class="docutils literal"><span class="pre">_sage_input_</span></code> method takes two parameters, conventionally named
<code class="docutils literal"><span class="pre">sib</span></code> and <code class="docutils literal"><span class="pre">coerced</span></code>.  The first argument is a
<a class="reference internal" href="#sage.misc.sage_input.SageInputBuilder" title="sage.misc.sage_input.SageInputBuilder"><code class="xref py py-class docutils literal"><span class="pre">SageInputBuilder</span></code></a>; it has methods to build SIEs.  The second
argument, <code class="docutils literal"><span class="pre">coerced</span></code>, is a boolean.  This is only useful if your class
is a subclass of <code class="xref py py-class docutils literal"><span class="pre">Element</span></code> (although it is always present).  If
<code class="docutils literal"><span class="pre">coerced</span></code> is <code class="docutils literal"><span class="pre">False</span></code>, then your method must generate an expression
which will evaluate to a value of the correct type with the correct
parent.  If <code class="docutils literal"><span class="pre">coerced</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, then your method may generate an
expression of a type that has a canonical coercion to your type; and if
<code class="docutils literal"><span class="pre">coerced</span></code> is 2, then your method may generate an expression of a type
that has a conversion to your type.</p>
<p>Let&#8217;s work through some examples.  We&#8217;ll build a sequence of functions
that would be acceptable as <code class="docutils literal"><span class="pre">_sage_input_</span></code> methods for the
<a class="reference external" href="../../../rings_standard/sage/rings/rational.html#sage.rings.rational.Rational" title="(in Sage Reference Manual: Standard Commutative Rings v7.2)"><code class="xref py py-class docutils literal"><span class="pre">Rational</span></code></a> class.</p>
<p>Here&#8217;s the first and simplest version.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">qq_sage_input_v1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sib</span><span class="p">,</span> <span class="n">coerced</span><span class="p">):</span>
<span class="go">....:     return sib(self.numerator())/sib(self.denominator())</span>
</pre></div>
</div>
<p>We see that given a <a class="reference internal" href="#sage.misc.sage_input.SageInputBuilder" title="sage.misc.sage_input.SageInputBuilder"><code class="xref py py-class docutils literal"><span class="pre">SageInputBuilder</span></code></a> <code class="docutils literal"><span class="pre">sib</span></code>, you can construct
a SIE for a value <code class="docutils literal"><span class="pre">v</span></code> simply with <code class="docutils literal"><span class="pre">sib(v)</span></code>, and you can construct a
SIE for a quotient with the division operator.  Of course, the other
operators also work, and so do function calls, method calls, subscripts,
etc.</p>
<p>We&#8217;ll test with the following code, which you don&#8217;t need to understand.
(It produces a list of 8 results, showing the formatted versions of -5/7
and 3, with the preparser either enabled or disabled and either with or
without an automatic coercion to QQ.):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>
<span class="gp">sage: </span><span class="k">def</span> <span class="nf">test_qq_formatter</span><span class="p">(</span><span class="n">fmt</span><span class="p">):</span>
<span class="go">....:     results = []</span>
<span class="go">....:     for v in [-5/7, QQ(3)]:</span>
<span class="go">....:         for pp in [False, True]:</span>
<span class="go">....:             for coerced in [False, True]:</span>
<span class="go">....:                 sib = SageInputBuilder(preparse=pp)</span>
<span class="go">....:                 results.append(sib.result(fmt(v, sib, coerced)))</span>
<span class="go">....:     return results</span>

<span class="gp">sage: </span><span class="n">test_qq_formatter</span><span class="p">(</span><span class="n">qq_sage_input_v1</span><span class="p">)</span>
<span class="go">[-ZZ(5)/ZZ(7), -ZZ(5)/ZZ(7), -5/7, -5/7, ZZ(3)/ZZ(1), ZZ(3)/ZZ(1), 3/1, 3/1]</span>
</pre></div>
</div>
<p>Let&#8217;s try for some shorter, perhaps nicer-looking output.  We&#8217;ll start
by getting rid of the <code class="docutils literal"><span class="pre">ZZ</span></code> in the denominators; even without the
preparser, <code class="docutils literal"><span class="pre">-ZZ(5)/7</span> <span class="pre">==</span> <span class="pre">-ZZ(5)/ZZ(7)</span></code>.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">qq_sage_input_v2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sib</span><span class="p">,</span> <span class="n">coerced</span><span class="p">):</span>
<span class="go">....:     return sib(self.numerator())/sib.int(self.denominator())</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">int</span></code> method on <a class="reference internal" href="#sage.misc.sage_input.SageInputBuilder" title="sage.misc.sage_input.SageInputBuilder"><code class="xref py py-class docutils literal"><span class="pre">SageInputBuilder</span></code></a> returns a SIE for an
integer that is always represented in the simple way, without coercions.
(So, depending on the preparser mode, it might read in as an
<a class="reference external" href="../../../rings_standard/sage/rings/integer.html#sage.rings.integer.Integer" title="(in Sage Reference Manual: Standard Commutative Rings v7.2)"><code class="xref py py-class docutils literal"><span class="pre">Integer</span></code></a>, an <code class="docutils literal"><span class="pre">int</span></code>, or a <code class="docutils literal"><span class="pre">long</span></code>.):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">test_qq_formatter</span><span class="p">(</span><span class="n">qq_sage_input_v2</span><span class="p">)</span>
<span class="go">[-ZZ(5)/7, -ZZ(5)/7, -5/7, -5/7, ZZ(3)/1, ZZ(3)/1, 3/1, 3/1]</span>
</pre></div>
</div>
<p>Next let&#8217;s get rid of the divisions by 1.  These are more complicated,
since if we&#8217;re not careful we&#8217;ll get results in ZZ instead of QQ.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">qq_sage_input_v3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sib</span><span class="p">,</span> <span class="n">coerced</span><span class="p">):</span>
<span class="go">....:     if self.denominator() == 1:</span>
<span class="go">....:         if coerced:</span>
<span class="go">....:             return sib.int(self.numerator())</span>
<span class="go">....:         else:</span>
<span class="go">....:             return sib.name(&#39;QQ&#39;)(sib.int(self.numerator()))</span>
<span class="go">....:     return sib(self.numerator())/sib.int(self.denominator())</span>
</pre></div>
</div>
<p>We see that the method{name} method gives an SIE representing a sage
constant or function.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">test_qq_formatter</span><span class="p">(</span><span class="n">qq_sage_input_v3</span><span class="p">)</span>
<span class="go">[-ZZ(5)/7, -ZZ(5)/7, -5/7, -5/7, QQ(3), 3, QQ(3), 3]</span>
</pre></div>
</div>
<p>This is the prettiest output we&#8217;re going to get, but let&#8217;s make one
further refinement.  Other <code class="xref py py-class docutils literal"><span class="pre">_sage_input_</span></code> methods, like the one
for polynomials, analyze the structure of SIEs; they work better (give
prettier output) if negations are at the outside.  If the above code
were used for rationals, then <code class="docutils literal"><span class="pre">sage_input(polygen(QQ)</span> <span class="pre">-</span> <span class="pre">2/3)</span></code> would
produce <code class="docutils literal"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">(-2/3)</span></code>; if we change to the following code, then we
would get <code class="docutils literal"><span class="pre">x</span> <span class="pre">-</span> <span class="pre">2/3</span></code> instead.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">qq_sage_input_v4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sib</span><span class="p">,</span> <span class="n">coerced</span><span class="p">):</span>
<span class="go">....:     num = self.numerator()</span>
<span class="go">....:     neg = (num &lt; 0)</span>
<span class="go">....:     if neg: num = -num</span>
<span class="go">....:     if self.denominator() == 1:</span>
<span class="go">....:         if coerced:</span>
<span class="go">....:             v = sib.int(num)</span>
<span class="go">....:         else:</span>
<span class="go">....:             v = sib.name(&#39;QQ&#39;)(sib.int(num))</span>
<span class="go">....:     else:</span>
<span class="go">....:         v = sib(num)/sib.int(self.denominator())</span>
<span class="go">....:     if neg: v = -v</span>
<span class="go">....:     return v</span>

<span class="gp">sage: </span><span class="n">test_qq_formatter</span><span class="p">(</span><span class="n">qq_sage_input_v4</span><span class="p">)</span>
<span class="go">[-ZZ(5)/7, -ZZ(5)/7, -5/7, -5/7, QQ(3), 3, QQ(3), 3]</span>
</pre></div>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li>Carl Witty (2008-04): new file</li>
<li>Vincent Delecroix (2015-02): documentation formatting</li>
</ul>
<dl class="class">
<dt id="sage.misc.sage_input.SIE_assign">
<em class="property">class </em><code class="descclassname">sage.misc.sage_input.</code><code class="descname">SIE_assign</code><span class="sig-paren">(</span><em>sib</em>, <em>lhs</em>, <em>rhs</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SIE_assign" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">sage.misc.sage_input.SageInputExpression</span></code></a></p>
<p>This class represents an assignment command.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">sib</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;pi&#39;</span><span class="p">))</span>
<span class="go">{assign: {getattr: {atomic:foo}.x} {atomic:pi}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="sage.misc.sage_input.SIE_binary">
<em class="property">class </em><code class="descclassname">sage.misc.sage_input.</code><code class="descname">SIE_binary</code><span class="sig-paren">(</span><em>sib</em>, <em>op</em>, <em>lhs</em>, <em>rhs</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SIE_binary" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">sage.misc.sage_input.SageInputExpression</span></code></a></p>
<p>This class represents an arithmetic expression with a binary operator
and its two arguments, in a <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a> expression tree.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">+</span><span class="mi">5</span>
<span class="go">{binop:+ {atomic:3} {atomic:5}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="sage.misc.sage_input.SIE_call">
<em class="property">class </em><code class="descclassname">sage.misc.sage_input.</code><code class="descname">SIE_call</code><span class="sig-paren">(</span><em>sib</em>, <em>func</em>, <em>args</em>, <em>kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SIE_call" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">sage.misc.sage_input.SageInputExpression</span></code></a></p>
<p>This class represents a function-call node in a <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a>
expression tree.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sie</span> <span class="o">=</span> <span class="n">sib</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;GF&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sie</span><span class="p">(</span><span class="mi">49</span><span class="p">)</span>
<span class="go">{call: {atomic:GF}({atomic:49})}</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="sage.misc.sage_input.SIE_dict">
<em class="property">class </em><code class="descclassname">sage.misc.sage_input.</code><code class="descname">SIE_dict</code><span class="sig-paren">(</span><em>sib</em>, <em>entries</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SIE_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">sage.misc.sage_input.SageInputExpression</span></code></a></p>
<p>This class represents a dict node in a <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a>
expression tree.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">dict</span><span class="p">([(</span><span class="s1">&#39;TeX&#39;</span><span class="p">,</span> <span class="n">RR</span><span class="p">(</span><span class="n">pi</span><span class="p">)),</span> <span class="p">(</span><span class="s1">&#39;Metafont&#39;</span><span class="p">,</span> <span class="n">RR</span><span class="p">(</span><span class="n">e</span><span class="p">))])</span>
<span class="go">{dict: {{atomic:&#39;TeX&#39;}:{call: {atomic:RR}({atomic:3.1415926535897931})}, {atomic:&#39;Metafont&#39;}:{call: {atomic:RR}({atomic:2.7182818284590451})}}}</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">dict</span><span class="p">({</span><span class="o">-</span><span class="mi">40</span><span class="p">:</span><span class="o">-</span><span class="mi">40</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">32</span><span class="p">,</span> <span class="mi">100</span><span class="p">:</span><span class="mi">212</span><span class="p">})</span>
<span class="go">{dict: {{unop:- {atomic:40}}:{unop:- {atomic:40}}, {atomic:0}:{atomic:32}, {atomic:100}:{atomic:212}}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="sage.misc.sage_input.SIE_gen">
<em class="property">class </em><code class="descclassname">sage.misc.sage_input.</code><code class="descname">SIE_gen</code><span class="sig-paren">(</span><em>sib</em>, <em>parent</em>, <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SIE_gen" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">sage.misc.sage_input.SageInputExpression</span></code></a></p>
<p>This class represents a named generator of a parent with named
generators.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">gen</span><span class="p">(</span><span class="n">ZZ</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span>
<span class="go">{gen:x {constr_parent: {subscr: {atomic:ZZ}[{atomic:&#39;x&#39;}]} with gens: (&#39;x&#39;,)}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="sage.misc.sage_input.SIE_gens_constructor">
<em class="property">class </em><code class="descclassname">sage.misc.sage_input.</code><code class="descname">SIE_gens_constructor</code><span class="sig-paren">(</span><em>sib</em>, <em>constr</em>, <em>gen_names</em>, <em>gens_syntax=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SIE_gens_constructor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">sage.misc.sage_input.SageInputExpression</span></code></a></p>
<p>This class represents an expression that can create a sage parent
with named generators, optionally using the sage preparser
generators syntax (like <code class="docutils literal"><span class="pre">K.&lt;x&gt;</span> <span class="pre">=</span> <span class="pre">QQ[]</span></code>).</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">qq</span> <span class="o">=</span> <span class="n">sib</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;QQ&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">parent_with_gens</span><span class="p">(</span><span class="s2">&quot;some parent&quot;</span><span class="p">,</span> <span class="n">qq</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span>
<span class="gp">... </span>                       <span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,),</span> <span class="s1">&#39;QQx&#39;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="n">gens_syntax</span><span class="o">=</span><span class="n">sib</span><span class="o">.</span><span class="n">empty_subscript</span><span class="p">(</span><span class="n">qq</span><span class="p">))</span>
<span class="go">{constr_parent: {subscr: {atomic:QQ}[{atomic:&#39;x&#39;}]} with gens: (&#39;x&#39;,)}</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="sage.misc.sage_input.SIE_getattr">
<em class="property">class </em><code class="descclassname">sage.misc.sage_input.</code><code class="descname">SIE_getattr</code><span class="sig-paren">(</span><em>sib</em>, <em>obj</em>, <em>attr</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SIE_getattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">sage.misc.sage_input.SageInputExpression</span></code></a></p>
<p>This class represents a getattr node in a <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a>
expression tree.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sie</span> <span class="o">=</span> <span class="n">sib</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;CC&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">gen</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sie</span>
<span class="go">{call: {getattr: {atomic:CC}.gen}()}</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="sage.misc.sage_input.SIE_import_name">
<em class="property">class </em><code class="descclassname">sage.misc.sage_input.</code><code class="descname">SIE_import_name</code><span class="sig-paren">(</span><em>sib</em>, <em>module</em>, <em>name</em>, <em>alt_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SIE_import_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">sage.misc.sage_input.SageInputExpression</span></code></a></p>
<p>This class represents a name which has been imported from a module.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">import_name</span><span class="p">(</span><span class="s1">&#39;sage.rings.integer&#39;</span><span class="p">,</span> <span class="s1">&#39;make_integer&#39;</span><span class="p">)</span>
<span class="go">{import:sage.rings.integer/make_integer}</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">import_name</span><span class="p">(</span><span class="s1">&#39;sage.foo&#39;</span><span class="p">,</span> <span class="s1">&#39;happy&#39;</span><span class="p">,</span> <span class="s1">&#39;sad&#39;</span><span class="p">)</span>
<span class="go">{import:sage.foo/happy as sad}</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="sage.misc.sage_input.SIE_literal">
<em class="property">class </em><code class="descclassname">sage.misc.sage_input.</code><code class="descname">SIE_literal</code><span class="sig-paren">(</span><em>sib</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SIE_literal" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">sage.misc.sage_input.SageInputExpression</span></code></a></p>
<p>An abstract base class for <code class="docutils literal"><span class="pre">literals</span></code> (basically, values which
consist of a single token).</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span><span class="p">,</span> <span class="n">SIE_literal</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sie</span> <span class="o">=</span> <span class="n">sib</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sie</span>
<span class="go">{atomic:3}</span>
<span class="gp">sage: </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">sie</span><span class="p">,</span> <span class="n">SIE_literal</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="sage.misc.sage_input.SIE_literal_stringrep">
<em class="property">class </em><code class="descclassname">sage.misc.sage_input.</code><code class="descname">SIE_literal_stringrep</code><span class="sig-paren">(</span><em>sib</em>, <em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SIE_literal_stringrep" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.sage_input.SIE_literal" title="sage.misc.sage_input.SIE_literal"><code class="xref py py-class docutils literal"><span class="pre">sage.misc.sage_input.SIE_literal</span></code></a></p>
<p>Values in this class are leaves in a <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a> expression
tree.  Typically they represent a single token, and consist of the
string representation of that token.  They are used for integer,
floating-point, and string literals, and for name expressions.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span><span class="p">,</span> <span class="n">SIE_literal_stringrep</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">sib</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">SIE_literal_stringrep</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">sib</span><span class="p">(</span><span class="mf">3.14159</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span> <span class="n">SIE_literal_stringrep</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;pi&#39;</span><span class="p">),</span> <span class="n">SIE_literal_stringrep</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">sib</span><span class="p">(</span><span class="bp">False</span><span class="p">),</span> <span class="n">SIE_literal_stringrep</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="go">{atomic:False}</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="sage.misc.sage_input.SIE_subscript">
<em class="property">class </em><code class="descclassname">sage.misc.sage_input.</code><code class="descname">SIE_subscript</code><span class="sig-paren">(</span><em>sib</em>, <em>coll</em>, <em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SIE_subscript" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">sage.misc.sage_input.SageInputExpression</span></code></a></p>
<p>This class represents a subscript node in a <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a>
expression tree.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sie</span> <span class="o">=</span> <span class="n">sib</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;QQ&#39;</span><span class="p">)[</span><span class="s1">&#39;x,y&#39;</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">sie</span>
<span class="go">{subscr: {atomic:QQ}[{atomic:&#39;x,y&#39;}]}</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="sage.misc.sage_input.SIE_tuple">
<em class="property">class </em><code class="descclassname">sage.misc.sage_input.</code><code class="descname">SIE_tuple</code><span class="sig-paren">(</span><em>sib</em>, <em>values</em>, <em>is_list</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SIE_tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">sage.misc.sage_input.SageInputExpression</span></code></a></p>
<p>This class represents a tuple or list node in a <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a>
expression tree.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;howdy&#39;</span><span class="p">))</span>
<span class="go">{tuple: ({atomic:1}, {atomic:&#39;howdy&#39;})}</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="p">([</span><span class="s2">&quot;lists&quot;</span><span class="p">])</span>
<span class="go">{list: ({atomic:&#39;lists&#39;})}</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="sage.misc.sage_input.SIE_unary">
<em class="property">class </em><code class="descclassname">sage.misc.sage_input.</code><code class="descname">SIE_unary</code><span class="sig-paren">(</span><em>sib</em>, <em>op</em>, <em>operand</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SIE_unary" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">sage.misc.sage_input.SageInputExpression</span></code></a></p>
<p>This class represents an arithmetic expression with a unary operator
and its argument, in a <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a> expression tree.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="o">-</span><span class="n">sib</span><span class="p">(</span><span class="mi">256</span><span class="p">)</span>
<span class="go">{unop:- {atomic:256}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="sage.misc.sage_input.SageInputAnswer">
<em class="property">class </em><code class="descclassname">sage.misc.sage_input.</code><code class="descname">SageInputAnswer</code><a class="headerlink" href="#sage.misc.sage_input.SageInputAnswer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/library/functions.html#tuple" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">tuple</span></code></a></p>
<p>This class inherits from tuple, so it acts like a tuple when passed
to <a class="reference internal" href="sage_eval.html#sage.misc.sage_eval.sage_eval" title="sage.misc.sage_eval.sage_eval"><code class="xref py py-func docutils literal"><span class="pre">sage_eval()</span></code></a>; but it prints as a sequence of commands.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputAnswer</span>
<span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="n">SageInputAnswer</span><span class="p">(</span><span class="s1">&#39;x = 22</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;x/7&#39;</span><span class="p">);</span> <span class="n">v</span>
<span class="go">x = 22</span>
<span class="go">x/7</span>
<span class="gp">sage: </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&#39;x = 22\n&#39;</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">&#39;x/7&#39;</span>
<span class="gp">sage: </span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="n">SageInputAnswer</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;sin(3.14)&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;sin&#39;</span><span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">});</span> <span class="n">v</span>
<span class="go">LOCALS:</span>
<span class="go">  sin: &lt;built-in function sin&gt;</span>
<span class="go">sin(3.14)</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&#39;&#39;</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">&#39;sin(3.14)&#39;</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="go">{&#39;sin&#39;: &lt;built-in function sin&gt;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="sage.misc.sage_input.SageInputBuilder">
<em class="property">class </em><code class="descclassname">sage.misc.sage_input.</code><code class="descname">SageInputBuilder</code><span class="sig-paren">(</span><em>allow_locals=False</em>, <em>preparse=True</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of this class is passed to <code class="docutils literal"><span class="pre">_sage_input_</span></code> methods.
It keeps track of the current state of the <code class="docutils literal"><span class="pre">_sage_input_</span></code> process,
and contains many utility methods for building <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a>
objects.</p>
<p>In normal use, instances of <a class="reference internal" href="#sage.misc.sage_input.SageInputBuilder" title="sage.misc.sage_input.SageInputBuilder"><code class="xref py py-class docutils literal"><span class="pre">SageInputBuilder</span></code></a> are created
internally by <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a>, but it may be useful to create
an instance directly for testing or doctesting.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>
</pre></div>
</div>
<p>We can create a <a class="reference internal" href="#sage.misc.sage_input.SageInputBuilder" title="sage.misc.sage_input.SageInputBuilder"><code class="xref py py-class docutils literal"><span class="pre">SageInputBuilder</span></code></a>, use it to create some
<a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a> s, and get a result.  (As mentioned
above, this is only useful for testing or doctesting; normally
you would just use <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a>.):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">((</span><span class="n">sib</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="n">sib</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="n">sib</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">sib</span><span class="p">(</span><span class="mi">6</span><span class="p">)))</span>
<span class="go">(3 + 4)*(5 + 6)</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.assign">
<code class="descname">assign</code><span class="sig-paren">(</span><em>e</em>, <em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.assign" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a command that performs the assignment <code class="docutils literal"><span class="pre">e=val</span></code>.</p>
<p>Can only be used as an argument to the <code class="docutils literal"><span class="pre">command</span></code> method.</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">e</span></code>, <code class="docutils literal"><span class="pre">val</span></code> &#8211; SageInputExpression</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">circular</span> <span class="o">=</span> <span class="n">sib</span><span class="p">([</span><span class="bp">None</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">circular</span><span class="p">,</span> <span class="n">sib</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">circular</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">circular</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">circular</span><span class="p">)</span>
<span class="go">si = [None]</span>
<span class="go">si[0] = si</span>
<span class="go">si</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.cache">
<code class="descname">cache</code><span class="sig-paren">(</span><em>x</em>, <em>sie</em>, <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.cache" title="Permalink to this definition">¶</a></dt>
<dd><p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">x</span></code> - an arbitrary value</li>
<li><code class="docutils literal"><span class="pre">sie</span></code> - a <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a></li>
<li><code class="docutils literal"><span class="pre">name</span></code> - a requested variable name</li>
</ul>
<p>Enters <code class="docutils literal"><span class="pre">x</span></code> and <code class="docutils literal"><span class="pre">sie</span></code> in a cache, so that subsequent calls
<code class="docutils literal"><span class="pre">self(x)</span></code> will directly return <code class="docutils literal"><span class="pre">sie</span></code>.  Also, marks the
requested name of this <code class="docutils literal"><span class="pre">sie</span></code> to be <code class="docutils literal"><span class="pre">name</span></code>.</p>
<p>This should almost always be called as part of the
method{_sage_input_} method of a parent.  It may also be called
on values of an arbitrary type, which may be useful if the values
are both large and likely to be used multiple times in a single
expression.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sie42</span> <span class="o">=</span> <span class="n">sib</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">101</span><span class="p">)(</span><span class="mi">42</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">cache</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">101</span><span class="p">)(</span><span class="mi">42</span><span class="p">),</span> <span class="n">sie42</span><span class="p">,</span> <span class="s1">&#39;the_ultimate_answer&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">101</span><span class="p">)(</span><span class="mi">42</span><span class="p">))</span> <span class="o">+</span> <span class="n">sib</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">101</span><span class="p">)(</span><span class="mi">42</span><span class="p">)))</span>
<span class="go">the_ultimate_answer = GF(101)(42)</span>
<span class="go">the_ultimate_answer + the_ultimate_answer</span>
</pre></div>
</div>
<p>Note that we don&#8217;t assign the result to a variable if the value
is only used once.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sie42</span> <span class="o">=</span> <span class="n">sib</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">101</span><span class="p">)(</span><span class="mi">42</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">cache</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">101</span><span class="p">)(</span><span class="mi">42</span><span class="p">),</span> <span class="n">sie42</span><span class="p">,</span> <span class="s1">&#39;the_ultimate_answer&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">101</span><span class="p">)(</span><span class="mi">42</span><span class="p">))</span> <span class="o">+</span> <span class="n">sib</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">101</span><span class="p">)(</span><span class="mi">43</span><span class="p">)))</span>
<span class="go">GF_101 = GF(101)</span>
<span class="go">GF_101(42) + GF_101(43)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.command">
<code class="descname">command</code><span class="sig-paren">(</span><em>v</em>, <em>cmd</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.command" title="Permalink to this definition">¶</a></dt>
<dd><p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">v</span></code>, <code class="docutils literal"><span class="pre">cmd</span></code> &#8211; SageInputExpression</li>
</ul>
<p>Attaches a command to v, which will be executed before v is used.
Multiple commands will be executed in the order added.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">incr_list</span> <span class="o">=</span> <span class="n">sib</span><span class="p">([])</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">incr_list</span><span class="p">,</span> <span class="n">incr_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">incr_list</span><span class="p">,</span> <span class="n">incr_list</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">incr_list</span><span class="p">)</span>
<span class="go">si = []</span>
<span class="go">si.append(1)</span>
<span class="go">si.extend([2, 3])</span>
<span class="go">si</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.dict">
<code class="descname">dict</code><span class="sig-paren">(</span><em>entries</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a dictionary, or a list of (key, value) pairs,
produces a <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a> representing
the dictionary.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">dict</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="mi">100</span><span class="o">/</span><span class="mi">3</span><span class="p">}))</span>
<span class="go">{1:1, 2:5/2, 3:100/3}</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">dict</span><span class="p">([(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;sunshine&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;goodbye&#39;</span><span class="p">,</span> <span class="s1">&#39;rain&#39;</span><span class="p">)]))</span>
<span class="go">{&#39;hello&#39;:&#39;sunshine&#39;, &#39;goodbye&#39;:&#39;rain&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.empty_subscript">
<code class="descname">empty_subscript</code><span class="sig-paren">(</span><em>parent</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.empty_subscript" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a> representing <code class="docutils literal"><span class="pre">foo</span></code>,
produces a <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a> representing <code class="docutils literal"><span class="pre">foo[]</span></code>.
Since this is not legal Python syntax, it is useful only for
producing the sage generator syntax for a polynomial ring.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">empty_subscript</span><span class="p">(</span><span class="n">sib</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">sib</span><span class="p">(</span><span class="mi">3</span><span class="p">)))</span>
<span class="go">(2 + 3)[]</span>
</pre></div>
</div>
<p>The following calls this method indirectly.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sage_input</span><span class="p">(</span><span class="n">polygen</span><span class="p">(</span><span class="n">ZZ</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]))</span>
<span class="go">R.&lt;x&gt; = ZZ[&#39;y&#39;][]</span>
<span class="go">x</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.float_str">
<code class="descname">float_str</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.float_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a string representing a floating-point number,
produces a <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a> that formats as that
string.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">float_str</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">RR</span><span class="p">(</span><span class="n">e</span><span class="p">))))</span>
<span class="go">2.71828182845905</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.gen">
<code class="descname">gen</code><span class="sig-paren">(</span><em>parent</em>, <em>n=0</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.gen" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a parent, returns a <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a> for
the <span class="math">\(n\)</span>-th (default 0) generator of the parent.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">gen</span><span class="p">(</span><span class="n">ZZ</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]))</span>
<span class="go">R.&lt;y&gt; = ZZ[]</span>
<span class="go">y</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.getattr">
<code class="descname">getattr</code><span class="sig-paren">(</span><em>sie</em>, <em>attr</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.getattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a> representing <code class="docutils literal"><span class="pre">foo</span></code>
and an attribute name bar, produce a <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a>
representing <code class="docutils literal"><span class="pre">foo.bar</span></code>.  Normally, you could just use
attribute-access syntax, but that doesn&#8217;t work if bar
is some attribute that bypasses __getattr__ (such as if
bar is &#8216;__getattr__&#8217; itself).</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">getattr</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span> <span class="s1">&#39;__getattr__&#39;</span><span class="p">)</span>
<span class="go">{getattr: {atomic:ZZ}.__getattr__}</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">getattr</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">),</span> <span class="s1">&#39;__new__&#39;</span><span class="p">)</span>
<span class="go">{getattr: {atomic:foo}.__new__}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.id_cache">
<code class="descname">id_cache</code><span class="sig-paren">(</span><em>x</em>, <em>sie</em>, <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.id_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">x</span></code> - an arbitrary value</li>
<li><code class="docutils literal"><span class="pre">sie</span></code> - a <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a></li>
<li><code class="docutils literal"><span class="pre">name</span></code> - a requested variable name</li>
</ul>
<p>Enters <code class="docutils literal"><span class="pre">x</span></code> and <code class="docutils literal"><span class="pre">sie</span></code> in a cache, so that subsequent calls
<code class="docutils literal"><span class="pre">self(x)</span></code> will directly return <code class="docutils literal"><span class="pre">sie</span></code>.  Also, marks the
requested name of this <code class="docutils literal"><span class="pre">sie</span></code> to be <code class="docutils literal"><span class="pre">name</span></code>.  Differs from
the method{cache} method in that the cache is keyed by
<code class="docutils literal"><span class="pre">id(x)</span></code> instead of by <code class="docutils literal"><span class="pre">x</span></code>.</p>
<p>This may be called on values of an arbitrary type, which may
be useful if the values are both large and likely to be used
multiple times in a single expression; it should be preferred to
method{cache} if equality on the values is difficult or impossible
to compute.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">polygen</span><span class="p">(</span><span class="n">ZZ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">my_42</span> <span class="o">=</span> <span class="mi">42</span><span class="o">*</span><span class="n">x</span>
<span class="gp">sage: </span><span class="n">sie42</span> <span class="o">=</span> <span class="n">sib</span><span class="p">(</span><span class="n">my_42</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">id_cache</span><span class="p">(</span><span class="n">my_42</span><span class="p">,</span> <span class="n">sie42</span><span class="p">,</span> <span class="s1">&#39;the_ultimate_answer&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="p">(</span><span class="n">my_42</span><span class="p">)</span> <span class="o">+</span> <span class="n">sib</span><span class="p">(</span><span class="n">my_42</span><span class="p">))</span>
<span class="go">R.&lt;x&gt; = ZZ[]</span>
<span class="go">the_ultimate_answer = 42*x</span>
<span class="go">the_ultimate_answer + the_ultimate_answer</span>
</pre></div>
</div>
<p>Since id_cache keys off of object identity (&#8220;is&#8221;), the
following does not trigger the cache.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="p">(</span><span class="mi">42</span><span class="o">*</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">sib</span><span class="p">(</span><span class="mi">42</span><span class="o">*</span><span class="n">x</span><span class="p">))</span>
<span class="go">42*x + 42*x</span>
</pre></div>
</div>
<p>Note that we don&#8217;t assign the result to a variable if the value
is only used once.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">my_42</span> <span class="o">=</span> <span class="mi">42</span><span class="o">*</span><span class="n">x</span>
<span class="gp">sage: </span><span class="n">sie42</span> <span class="o">=</span> <span class="n">sib</span><span class="p">(</span><span class="n">my_42</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">id_cache</span><span class="p">(</span><span class="n">my_42</span><span class="p">,</span> <span class="n">sie42</span><span class="p">,</span> <span class="s1">&#39;the_ultimate_answer&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="p">(</span><span class="n">my_42</span><span class="p">)</span> <span class="o">+</span> <span class="n">sib</span><span class="p">(</span><span class="mi">43</span><span class="o">*</span><span class="n">x</span><span class="p">))</span>
<span class="go">R.&lt;x&gt; = ZZ[]</span>
<span class="go">42*x + 43*x</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.import_name">
<code class="descname">import_name</code><span class="sig-paren">(</span><em>module</em>, <em>name</em>, <em>alt_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.import_name" title="Permalink to this definition">¶</a></dt>
<dd><p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">module</span></code>, <code class="docutils literal"><span class="pre">name</span></code>, <code class="docutils literal"><span class="pre">alt_name</span></code> &#8211; strings</li>
</ul>
<p>Creates an expression that will import a name from a module and
then use that name.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">v1</span> <span class="o">=</span> <span class="n">sib</span><span class="o">.</span><span class="n">import_name</span><span class="p">(</span><span class="s1">&#39;sage.foo.bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">v2</span> <span class="o">=</span> <span class="n">sib</span><span class="o">.</span><span class="n">import_name</span><span class="p">(</span><span class="s1">&#39;sage.foo.bar&#39;</span><span class="p">,</span> <span class="s1">&#39;ZZ&#39;</span><span class="p">,</span> <span class="s1">&#39;not_the_real_ZZ&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">v1</span><span class="o">+</span><span class="n">v2</span><span class="p">)</span>
<span class="go">from sage.foo.bar import baz</span>
<span class="go">from sage.foo.bar import ZZ as not_the_real_ZZ</span>
<span class="go">baz + not_the_real_ZZ</span>
</pre></div>
</div>
<p>We adjust the names if there is a conflict.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">v1</span> <span class="o">=</span> <span class="n">sib</span><span class="o">.</span><span class="n">import_name</span><span class="p">(</span><span class="s1">&#39;sage.foo&#39;</span><span class="p">,</span> <span class="s1">&#39;poly&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">v2</span> <span class="o">=</span> <span class="n">sib</span><span class="o">.</span><span class="n">import_name</span><span class="p">(</span><span class="s1">&#39;sage.bar&#39;</span><span class="p">,</span> <span class="s1">&#39;poly&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">v1</span><span class="o">+</span><span class="n">v2</span><span class="p">)</span>
<span class="go">from sage.foo import poly as poly1</span>
<span class="go">from sage.bar import poly as poly2</span>
<span class="go">poly1 + poly2</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.int">
<code class="descname">int</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.int" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a raw SIE from the integer <code class="docutils literal"><span class="pre">n</span></code></p>
<p>As it is raw, it may read back as a Sage Integer, a Python int or a
Python long, depending on its size and whether the preparser is enabled.</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">n</span></code> - a Sage Integer, a Python int or a Python long</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="o">^</span><span class="mi">50</span><span class="p">))</span>
<span class="go">-717897987691852588770249</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="nb">long</span><span class="p">(</span><span class="mi">2</span><span class="o">^</span><span class="mi">65</span><span class="p">)))</span>
<span class="go">36893488147419103232</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="o">-</span><span class="mi">42</span><span class="n">r</span><span class="p">))</span>
<span class="go">-42</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.name">
<code class="descname">name</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a string representing a Python name,
produces a <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a> for that name.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;pi&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">sib</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;e&#39;</span><span class="p">))</span>
<span class="go">pi + e</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.parent_with_gens">
<code class="descname">parent_with_gens</code><span class="sig-paren">(</span><em>parent</em>, <em>sie</em>, <em>gen_names</em>, <em>name</em>, <em>gens_syntax=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.parent_with_gens" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is used for parents with generators, to manage the
sage preparser generator syntax (like <code class="docutils literal"><span class="pre">K.&lt;x&gt;</span> <span class="pre">=</span> <span class="pre">QQ[]</span></code>).</p>
<p>The method{_sage_input_} method of a parent class with
generators should construct a <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a> for
the parent, and then call this method with the parent itself,
the constructed SIE, a sequence containing the names of the
generators, and (optionally) another SIE to use if the sage
generator syntax is used; typically this will be the same as
the first SIE except omitting a <code class="docutils literal"><span class="pre">names</span></code> parameter.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>


<span class="gp">sage: </span><span class="k">def</span> <span class="nf">test_setup</span><span class="p">(</span><span class="n">use_gens</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">preparse</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
<span class="gp">... </span>      <span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">(</span><span class="n">preparse</span><span class="o">=</span><span class="n">preparse</span><span class="p">)</span>
<span class="gp">... </span>      <span class="n">gen_names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">... </span>      <span class="n">parent</span> <span class="o">=</span> <span class="s2">&quot;some parent&quot;</span>
<span class="gp">... </span>      <span class="n">normal_sie</span> <span class="o">=</span> <span class="n">sib</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;make_a_parent&#39;</span><span class="p">)(</span><span class="n">names</span><span class="o">=</span><span class="n">gen_names</span><span class="p">)</span>
<span class="gp">... </span>      <span class="k">if</span> <span class="n">use_gens</span><span class="p">:</span>
<span class="gp">... </span>          <span class="n">gens_sie</span> <span class="o">=</span> <span class="n">sib</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;make_a_parent&#39;</span><span class="p">)()</span>
<span class="gp">... </span>      <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>          <span class="n">gens_sie</span> <span class="o">=</span> <span class="bp">None</span>
<span class="gp">... </span>      <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;the_thing&#39;</span>
<span class="gp">... </span>      <span class="n">result</span> <span class="o">=</span> <span class="n">sib</span><span class="o">.</span><span class="n">parent_with_gens</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">normal_sie</span><span class="p">,</span>
<span class="gp">... </span>                                    <span class="n">gen_names</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span>
<span class="gp">... </span>                                    <span class="n">gens_syntax</span><span class="o">=</span><span class="n">gens_sie</span><span class="p">)</span>
<span class="gp">... </span>      <span class="k">return</span> <span class="n">sib</span><span class="p">,</span> <span class="n">result</span>

<span class="gp">sage: </span><span class="n">sib</span><span class="p">,</span> <span class="n">par_sie</span> <span class="o">=</span> <span class="n">test_setup</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">par_sie</span><span class="p">)</span>
<span class="go">make_a_parent(names=(&#39;foo&#39;, &#39;bar&#39;))</span>

<span class="gp">sage: </span><span class="n">sib</span><span class="p">,</span> <span class="n">par_sie</span> <span class="o">=</span> <span class="n">test_setup</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">sib</span><span class="o">.</span><span class="n">gen</span><span class="p">(</span><span class="s2">&quot;some parent&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="go">the_thing.&lt;foo,bar&gt; = make_a_parent()</span>
<span class="go">3*foo</span>

<span class="gp">sage: </span><span class="n">sib</span><span class="p">,</span> <span class="n">par_sie</span> <span class="o">=</span> <span class="n">test_setup</span><span class="p">(</span><span class="n">preparse</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">par_sie</span><span class="p">)</span>
<span class="go">make_a_parent(names=(&#39;foo&#39;, &#39;bar&#39;))</span>

<span class="gp">sage: </span><span class="n">sib</span><span class="p">,</span> <span class="n">par_sie</span> <span class="o">=</span> <span class="n">test_setup</span><span class="p">(</span><span class="n">preparse</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">sib</span><span class="o">.</span><span class="n">gen</span><span class="p">(</span><span class="s2">&quot;some parent&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="go">the_thing = make_a_parent(names=(&#39;foo&#39;, &#39;bar&#39;))</span>
<span class="go">foo,bar = the_thing.gens()</span>
<span class="go">ZZ(3)*foo</span>

<span class="gp">sage: </span><span class="n">sib</span><span class="p">,</span> <span class="n">par_sie</span> <span class="o">=</span> <span class="n">test_setup</span><span class="p">(</span><span class="n">use_gens</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">par_sie</span><span class="p">)</span>
<span class="go">make_a_parent(names=(&#39;foo&#39;, &#39;bar&#39;))</span>

<span class="gp">sage: </span><span class="n">sib</span><span class="p">,</span> <span class="n">par_sie</span> <span class="o">=</span> <span class="n">test_setup</span><span class="p">(</span><span class="n">use_gens</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">sib</span><span class="o">.</span><span class="n">gen</span><span class="p">(</span><span class="s2">&quot;some parent&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="go">the_thing = make_a_parent(names=(&#39;foo&#39;, &#39;bar&#39;))</span>
<span class="go">foo,bar = the_thing.gens()</span>
<span class="go">3*foo</span>

<span class="gp">sage: </span><span class="n">sib</span><span class="p">,</span> <span class="n">par_sie</span> <span class="o">=</span> <span class="n">test_setup</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">par_sie</span> <span class="o">-</span> <span class="n">sib</span><span class="o">.</span><span class="n">gen</span><span class="p">(</span><span class="s2">&quot;some parent&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">the_thing.&lt;foo,bar&gt; = make_a_parent()</span>
<span class="go">the_thing - bar</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.preparse">
<code class="descname">preparse</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.preparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks the preparse status.</p>
<p>It returns <code class="docutils literal"><span class="pre">True</span></code> if the preparser will be enabled, <code class="docutils literal"><span class="pre">False</span></code> if it
will be disabled, and <code class="docutils literal"><span class="pre">None</span></code> if the result must work whether or not
the preparser is enabled.</p>
<p>For example, this is useful in the method{_sage_input_}
methods of <a class="reference external" href="../../../rings_standard/sage/rings/integer.html#sage.rings.integer.Integer" title="(in Sage Reference Manual: Standard Commutative Rings v7.2)"><code class="xref py py-class docutils literal"><span class="pre">Integer</span></code></a> and <a class="reference external" href="../../../rings_numerical/sage/rings/real_mpfr.html#sage.rings.real_mpfr.RealNumber" title="(in Sage Reference Manual: Fixed and Arbitrary Precision Numerical Fields v7.2)"><code class="xref py py-class docutils literal"><span class="pre">RealNumber</span></code></a>; but most
method{_sage_input_} methods will not need to examine this.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>
<span class="gp">sage: </span><span class="n">SageInputBuilder</span><span class="p">()</span><span class="o">.</span><span class="n">preparse</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">SageInputBuilder</span><span class="p">(</span><span class="n">preparse</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">preparse</span><span class="p">()</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.prod">
<code class="descname">prod</code><span class="sig-paren">(</span><em>factors</em>, <em>simplify=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.prod" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a sequence, returns a <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a>
for the product of the elements.</p>
<p>With <code class="docutils literal"><span class="pre">simplify=True</span></code>, performs some simplifications
first.  If any element is formatted as a string <code class="docutils literal"><span class="pre">'0'</span></code>,
then that element is returned directly.  If any element is
formatted as a string <code class="docutils literal"><span class="pre">'1'</span></code>, then it is removed
from the sequence (unless it is the only element in the sequence).
And any negations are removed from the elements and moved to the
outside of the product.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">prod</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">]))</span>
<span class="go">-1*0*1*-2</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">prod</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">simplify</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
<span class="go">0</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">prod</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">],</span> <span class="n">simplify</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
<span class="go">-2*3*4</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">prod</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">simplify</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
<span class="go">-1</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">prod</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">simplify</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
<span class="go">1</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.result">
<code class="descname">result</code><span class="sig-paren">(</span><em>e</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.result" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a> constructed using <code class="docutils literal"><span class="pre">self</span></code>,
returns a tuple of a list of commands and an expression
(and possibly a dictionary of local variables) suitable for
<a class="reference internal" href="sage_eval.html#sage.misc.sage_eval.sage_eval" title="sage.misc.sage_eval.sage_eval"><code class="xref py py-func docutils literal"><span class="pre">sage_eval()</span></code></a>.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">r</span> <span class="o">=</span> <span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">*</span> <span class="n">sib</span><span class="p">(</span><span class="mi">7</span><span class="p">));</span> <span class="n">r</span>
<span class="go">6*7</span>
<span class="gp">sage: </span><span class="nb">tuple</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">(&#39;&#39;, &#39;6*7&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.share">
<code class="descname">share</code><span class="sig-paren">(</span><em>sie</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.share" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark the given expression as sharable, so that it will be replaced
by a variable if it occurs multiple times in the expression.
(Most non-single-token expressions are already sharable.)</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>
</pre></div>
</div>
<p>Without explicitly using .share(), string literals are not shared:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">e</span> <span class="o">=</span> <span class="n">sib</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">e</span><span class="p">)))</span>
<span class="go">(&#39;hello&#39;, &#39;hello&#39;)</span>
</pre></div>
</div>
<p>See the difference if we use .share():</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">e</span> <span class="o">=</span> <span class="n">sib</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">share</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">e</span><span class="p">)))</span>
<span class="go">si = &#39;hello&#39;</span>
<span class="go">(si, si)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.sum">
<code class="descname">sum</code><span class="sig-paren">(</span><em>terms</em>, <em>simplify=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a sequence, returns a <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a>
for the product of the elements.</p>
<p>With <code class="docutils literal"><span class="pre">simplify=True</span></code>, performs some simplifications
first.  If any element is formatted as a string <code class="docutils literal"><span class="pre">'0'</span></code>,
then it is removed from the sequence (unless it is the only
element in the sequence); and any instances of <code class="docutils literal"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">-b</span></code>
are changed to <code class="docutils literal"><span class="pre">a</span> <span class="pre">-</span> <span class="pre">b</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
<span class="go">-1 + 0 + 1 + 0 + -1</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">simplify</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
<span class="go">-1 + 1 - 1</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">sib</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">simplify</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
<span class="go">0</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputBuilder.use_variable">
<code class="descname">use_variable</code><span class="sig-paren">(</span><em>sie</em>, <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputBuilder.use_variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks the <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a> <code class="docutils literal"><span class="pre">sie</span></code> to use a variable
even if it is only referenced once.  (If <code class="docutils literal"><span class="pre">sie</span></code> is the final
top-level expression, though, it will not use a variable.)</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">e</span> <span class="o">=</span> <span class="n">sib</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;MatrixSpace&#39;</span><span class="p">)(</span><span class="n">ZZ</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">use_variable</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;MS&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">zero_matrix</span><span class="p">())</span>
<span class="go">MS = MatrixSpace(ZZ, 10, 10)</span>
<span class="go">MS.zero_matrix()</span>
</pre></div>
</div>
<p>Without the call to use_variable, we get this instead:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">e</span> <span class="o">=</span> <span class="n">sib</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;MatrixSpace&#39;</span><span class="p">)(</span><span class="n">ZZ</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">zero_matrix</span><span class="p">())</span>
<span class="go">MatrixSpace(ZZ, 10, 10).zero_matrix()</span>
</pre></div>
</div>
<p>And even with the call to use_variable, we don&#8217;t use a variable here:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">e</span> <span class="o">=</span> <span class="n">sib</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;MatrixSpace&#39;</span><span class="p">)(</span><span class="n">ZZ</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">use_variable</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;MS&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="go">MatrixSpace(ZZ, 10, 10)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.misc.sage_input.SageInputExpression">
<em class="property">class </em><code class="descclassname">sage.misc.sage_input.</code><code class="descname">SageInputExpression</code><span class="sig-paren">(</span><em>sib</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputExpression" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Subclasses of this class represent expressions for <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a>.
sage classes should define a method{_sage_input_} method, which
will return an instance of <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a>, created using
methods of <a class="reference internal" href="#sage.misc.sage_input.SageInputBuilder" title="sage.misc.sage_input.SageInputBuilder"><code class="xref py py-class docutils literal"><span class="pre">SageInputBuilder</span></code></a>.</p>
<p>To the extent possible, operations on <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a> objects
construct a new <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a> representing that operation.
That is, if <code class="docutils literal"><span class="pre">a</span></code> is a <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a>, then <code class="docutils literal"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span></code>
constructs a <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a> representing this sum.
This also works for attribute access, function calls, subscripts, etc.
Since arbitrary attribute accesses might be used to construct a new
attribute-access expression, all internal attributes and methods
have names that begin with <code class="docutils literal"><span class="pre">_sie_</span></code> to reduce the chance of
collisions.</p>
<p>It is expected that instances of this class will not be directly
created outside this module; instead, instances will be created
using methods of <a class="reference internal" href="#sage.misc.sage_input.SageInputBuilder" title="sage.misc.sage_input.SageInputBuilder"><code class="xref py py-class docutils literal"><span class="pre">SageInputBuilder</span></code></a> and <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a>.</p>
<p>Values of type <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a> print in a fairly ugly
way, that reveals the internal structure of the expression tree.</p>
</dd></dl>

<dl class="class">
<dt id="sage.misc.sage_input.SageInputFormatter">
<em class="property">class </em><code class="descclassname">sage.misc.sage_input.</code><code class="descname">SageInputFormatter</code><a class="headerlink" href="#sage.misc.sage_input.SageInputFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of this class is used to keep track of variable names
and a sequence of generated commands during the <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a>
formatting process.</p>
<dl class="method">
<dt id="sage.misc.sage_input.SageInputFormatter.format">
<code class="descname">format</code><span class="sig-paren">(</span><em>e</em>, <em>prec</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputFormatter.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a Sage input expression into a string.</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">e</span></code> - a <a class="reference internal" href="#sage.misc.sage_input.SageInputExpression" title="sage.misc.sage_input.SageInputExpression"><code class="xref py py-class docutils literal"><span class="pre">SageInputExpression</span></code></a></li>
<li><code class="docutils literal"><span class="pre">prec</span></code> - an integer representing a precedence level</li>
</ul>
<p>First, we check to see if <code class="docutils literal"><span class="pre">e</span></code> should be replaced by a variable.
If so, we generate the command to assign the variable, and return
the name of the variable.</p>
<p>Otherwise, we format the expression by calling its method{_sie_format}
method, and add parentheses if necessary.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputBuilder</span><span class="p">,</span> <span class="n">SageInputFormatter</span>

<span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sif</span> <span class="o">=</span> <span class="n">SageInputFormatter</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sie</span> <span class="o">=</span> <span class="n">sib</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
<p>Here we <code class="docutils literal"><span class="pre">cheat</span></code> by calling method{_sie_prepare} twice, to make it
use a variable.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sie</span><span class="o">.</span><span class="n">_sie_prepare</span><span class="p">(</span><span class="n">sif</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sie</span><span class="o">.</span><span class="n">_sie_prepare</span><span class="p">(</span><span class="n">sif</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sif</span><span class="o">.</span><span class="n">_commands</span>
<span class="go">&#39;&#39;</span>
<span class="gp">sage: </span><span class="n">sif</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sie</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;GF_5&#39;</span>
<span class="gp">sage: </span><span class="n">sif</span><span class="o">.</span><span class="n">_commands</span>
<span class="go">&#39;GF_5 = GF(5)\n&#39;</span>
</pre></div>
</div>
<p>We demonstrate the use of commands, by showing how to construct
code that will produce a random matrix:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sib</span> <span class="o">=</span> <span class="n">SageInputBuilder</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sif</span> <span class="o">=</span> <span class="n">SageInputFormatter</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sie</span> <span class="o">=</span> <span class="n">sib</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;matrix&#39;</span><span class="p">)(</span><span class="n">sib</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;ZZ&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sib</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">sie</span><span class="p">,</span> <span class="n">sie</span><span class="o">.</span><span class="n">randomize</span><span class="p">())</span>
<span class="gp">sage: </span><span class="n">sie</span><span class="o">.</span><span class="n">_sie_prepare</span><span class="p">(</span><span class="n">sif</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sif</span><span class="o">.</span><span class="n">_commands</span>
<span class="go">&#39;&#39;</span>
<span class="gp">sage: </span><span class="n">sif</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sie</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;si&#39;</span>
<span class="gp">sage: </span><span class="n">sif</span><span class="o">.</span><span class="n">_commands</span>
<span class="go">&#39;si = matrix(ZZ, 10, 10)\nsi.randomize()\n&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputFormatter.get_name">
<code class="descname">get_name</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputFormatter.get_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a name corresponding to a given requested name.
If only one request for a name is received, then we will use the
requested name; otherwise, we will add numbers to the end of the
name to make it unique.</p>
<p>If the input name is <code class="docutils literal"><span class="pre">None</span></code>, then it is treated as a name of
<code class="docutils literal"><span class="pre">'si'</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputFormatter</span>

<span class="gp">sage: </span><span class="n">sif</span> <span class="o">=</span> <span class="n">SageInputFormatter</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">names</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span> <span class="n">sif</span><span class="o">.</span><span class="n">register_name</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="gp">sage: </span><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span> <span class="n">sif</span><span class="o">.</span><span class="n">get_name</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="go">&#39;x1&#39;</span>
<span class="go">&#39;x2&#39;</span>
<span class="go">&#39;y&#39;</span>
<span class="go">&#39;z&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sage_input.SageInputFormatter.register_name">
<code class="descname">register_name</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.SageInputFormatter.register_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Register that some value would like to use a given name.
If only one request for a name is received, then we will use the
requested name; otherwise, we will add numbers to the end of the
name to make it unique.</p>
<p>If the input name is <code class="docutils literal"><span class="pre">None</span></code>, then it is treated as a name of
<code class="docutils literal"><span class="pre">'si'</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">SageInputFormatter</span>

<span class="gp">sage: </span><span class="n">sif</span> <span class="o">=</span> <span class="n">SageInputFormatter</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sif</span><span class="o">.</span><span class="n">_names</span><span class="p">,</span> <span class="n">sif</span><span class="o">.</span><span class="n">_dup_names</span>
<span class="go">(set(), {})</span>
<span class="gp">sage: </span><span class="n">sif</span><span class="o">.</span><span class="n">register_name</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sif</span><span class="o">.</span><span class="n">register_name</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sif</span><span class="o">.</span><span class="n">_names</span><span class="p">,</span> <span class="n">sif</span><span class="o">.</span><span class="n">_dup_names</span>
<span class="go">({&#39;x&#39;, &#39;y&#39;}, {})</span>
<span class="gp">sage: </span><span class="n">sif</span><span class="o">.</span><span class="n">register_name</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sif</span><span class="o">.</span><span class="n">_names</span><span class="p">,</span> <span class="n">sif</span><span class="o">.</span><span class="n">_dup_names</span>
<span class="go">({&#39;x&#39;, &#39;y&#39;}, {&#39;x&#39;: 0})</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="sage.misc.sage_input.sage_input">
<code class="descclassname">sage.misc.sage_input.</code><code class="descname">sage_input</code><span class="sig-paren">(</span><em>x</em>, <em>preparse=True</em>, <em>verify=False</em>, <em>allow_locals=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.sage_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a sequence of commands that can be used to rebuild the object <code class="docutils literal"><span class="pre">x</span></code>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">x</span></code> - the value we want to find an input form for</li>
<li><code class="docutils literal"><span class="pre">preparse</span></code> - (default <code class="docutils literal"><span class="pre">True</span></code>) Whether to generate code that requires
the preparser.  With <code class="docutils literal"><span class="pre">True</span></code>, generated code requires the preparser.
With <code class="docutils literal"><span class="pre">False</span></code>, generated code requires that the preparser not be used.
With <code class="docutils literal"><span class="pre">None</span></code>, generated code will work whether or not the preparser is
used.</li>
<li><code class="docutils literal"><span class="pre">verify</span></code> - (default <code class="docutils literal"><span class="pre">False</span></code>) If <code class="docutils literal"><span class="pre">True</span></code>, then the answer will be
evaluated with <a class="reference internal" href="sage_eval.html#sage.misc.sage_eval.sage_eval" title="sage.misc.sage_eval.sage_eval"><code class="xref py py-func docutils literal"><span class="pre">sage_eval()</span></code></a>, and an exception will be raised if the
result is not equal to the original value.  (In fact, for <code class="docutils literal"><span class="pre">verify=True</span></code>,
<a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a> is effectively run three times, with <code class="docutils literal"><span class="pre">preparse</span></code> set
to <code class="docutils literal"><span class="pre">True</span></code>, <code class="docutils literal"><span class="pre">False</span></code>, and <code class="docutils literal"><span class="pre">None</span></code>, and all three results are checked.)
This is particularly useful for doctests.</li>
<li><code class="docutils literal"><span class="pre">allow_locals</span></code> - (default <code class="docutils literal"><span class="pre">False</span></code>) If <code class="docutils literal"><span class="pre">True</span></code>, then values that
<a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a> cannot handle are returned in a dictionary, and the
returned code assumes that this dictionary is passed as the <code class="docutils literal"><span class="pre">locals</span></code>
parameter of <a class="reference internal" href="sage_eval.html#sage.misc.sage_eval.sage_eval" title="sage.misc.sage_eval.sage_eval"><code class="xref py py-func docutils literal"><span class="pre">sage_eval()</span></code></a>.  (Otherwise, if <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a> cannot
handle a value, an exception is raised.)</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sage_input</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">1</span><span class="p">))</span>
<span class="go">GF(2)(1)</span>
<span class="gp">sage: </span><span class="n">sage_input</span><span class="p">((</span><span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">0</span><span class="p">),</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">1</span><span class="p">)),</span> <span class="n">verify</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go"># Verified</span>
<span class="go">GF_2 = GF(2)</span>
<span class="go">(GF_2(0), GF_2(1))</span>
</pre></div>
</div>
<p>When the preparser is enabled, we use the sage generator syntax.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">K</span><span class="o">.&lt;</span><span class="n">x</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="mi">5</span><span class="p">)[]</span>
<span class="gp">sage: </span><span class="n">sage_input</span><span class="p">(</span><span class="n">x</span><span class="o">^</span><span class="mi">3</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go"># Verified</span>
<span class="go">R.&lt;x&gt; = GF(5)[]</span>
<span class="go">x^3 + 2*x</span>
<span class="gp">sage: </span><span class="n">sage_input</span><span class="p">(</span><span class="n">x</span><span class="o">^</span><span class="mi">3</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="n">preparse</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">R = GF(5)[&#39;x&#39;]</span>
<span class="go">x = R.gen()</span>
<span class="go">x**3 + 2*x</span>
</pre></div>
</div>
<p>The result of <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a> is actually a pair of strings with a
special <code class="docutils literal"><span class="pre">__repr__</span></code> method to print nicely.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">r</span> <span class="o">=</span> <span class="n">sage_input</span><span class="p">(</span><span class="n">RealField</span><span class="p">(</span><span class="mi">20</span><span class="p">)(</span><span class="n">pi</span><span class="p">),</span> <span class="n">verify</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">r</span>
<span class="go"># Verified</span>
<span class="go">RealField(20)(3.1415939)</span>
<span class="gp">sage: </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">sage: </span><span class="nb">tuple</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">(&#39;# Verified\n&#39;, &#39;RealField(20)(3.1415939)&#39;)</span>
</pre></div>
</div>
<p>We cannot find an input form for a function.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sage_input</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">))</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Can&#39;t convert &lt;function &lt;lambda&gt; at 0x...&gt; to sage_input form</span>
</pre></div>
</div>
<p>But we can have <a class="reference internal" href="#sage.misc.sage_input.sage_input" title="sage.misc.sage_input.sage_input"><code class="xref py py-func docutils literal"><span class="pre">sage_input()</span></code></a> continue anyway, and return an input form
for the rest of the expression, with <code class="docutils literal"><span class="pre">allow_locals=True</span></code>.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">r</span> <span class="o">=</span> <span class="n">sage_input</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">),</span> <span class="n">verify</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">allow_locals</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">r</span>
<span class="go">LOCALS:</span>
<span class="go">    _sil1: &lt;function &lt;lambda&gt; at 0x...&gt;</span>
<span class="go"># Verified</span>
<span class="go">(3, _sil1)</span>
<span class="gp">sage: </span><span class="nb">tuple</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">(&#39;# Verified\n&#39;, &#39;(3, _sil1)&#39;, {&#39;_sil1&#39;: &lt;function &lt;lambda&gt; at 0x...&gt;})</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="sage.misc.sage_input.verify_same">
<code class="descclassname">sage.misc.sage_input.</code><code class="descname">verify_same</code><span class="sig-paren">(</span><em>a</em>, <em>b</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.verify_same" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify that two Sage values are the same.  This is an extended equality
test; it checks that the values are equal and that their parents are equal.
(For values which are not Elements, the types are checked instead.)</p>
<p>If the values are the same, we return <code class="docutils literal"><span class="pre">None</span></code>; otherwise,
we raise an exception.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">verify_same</span>
<span class="gp">sage: </span><span class="n">verify_same</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">verify_same</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">AssertionError</span>: <span class="n">Expected 1 == 2</span>
<span class="gp">sage: </span><span class="n">verify_same</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="n">r</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">AttributeError</span>: <span class="n">&#39;int&#39; object has no attribute &#39;parent&#39;</span>
<span class="gp">sage: </span><span class="n">verify_same</span><span class="p">(</span><span class="mi">1</span><span class="n">r</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
    <span class="k">assert</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
<span class="gr">AssertionError</span>
<span class="gp">sage: </span><span class="n">verify_same</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">GF</span><span class="p">(</span><span class="mi">7</span><span class="p">)(</span><span class="mi">5</span><span class="p">))</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="o">==</span> <span class="n">b</span><span class="o">.</span><span class="n">parent</span><span class="p">())</span>
<span class="gr">AssertionError</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="sage.misc.sage_input.verify_si_answer">
<code class="descclassname">sage.misc.sage_input.</code><code class="descname">verify_si_answer</code><span class="sig-paren">(</span><em>x</em>, <em>answer</em>, <em>preparse</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sage_input.verify_si_answer" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify that evaluating <code class="docutils literal"><span class="pre">answer</span></code> gives a value equal to <code class="docutils literal"><span class="pre">x</span></code>
(with the same parent/type).  If <code class="docutils literal"><span class="pre">preparse</span></code> is <code class="docutils literal"><span class="pre">True</span></code> or
<code class="docutils literal"><span class="pre">False</span></code>, then we evaluate <code class="docutils literal"><span class="pre">answer</span></code> with the preparser
enabled or disabled, respectively; if <code class="docutils literal"><span class="pre">preparse</span></code> is <code class="docutils literal"><span class="pre">None</span></code>,
then we evaluate <code class="docutils literal"><span class="pre">answer</span></code> both with the preparser enabled and
disabled and check both results.</p>
<p>On success, we return <code class="docutils literal"><span class="pre">None</span></code>; on failure, we raise an exception.</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">x</span></code> - an arbitrary Sage value</li>
<li><code class="docutils literal"><span class="pre">answer</span></code> - a string, or a <a class="reference internal" href="#sage.misc.sage_input.SageInputAnswer" title="sage.misc.sage_input.SageInputAnswer"><code class="xref py py-class docutils literal"><span class="pre">SageInputAnswer</span></code></a></li>
<li><code class="docutils literal"><span class="pre">preparse</span></code> &#8211; <code class="docutils literal"><span class="pre">True</span></code>, <code class="docutils literal"><span class="pre">False</span></code>, or <code class="docutils literal"><span class="pre">None</span></code></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sage_input</span> <span class="kn">import</span> <span class="n">verify_si_answer</span>
<span class="gp">sage: </span><span class="n">verify_si_answer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">verify_si_answer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">AttributeError</span>: <span class="n">&#39;int&#39; object has no attribute &#39;parent&#39;</span>
<span class="gp">sage: </span><span class="n">verify_si_answer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;ZZ(1)&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <h4>Previous topic</h4>
            <p class="topless"><a href="../typeset/unicode_art.html"
                                  title="previous chapter">Unicode Art</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="table.html"
                                  title="next chapter">Tables</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/sage/misc/sage_input.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../../../search.html" method="get">
                <input type="text" name="q" size="18" />
               <!-- The shading of the "Go" button should be consistent -->
               <!-- with the colour of the header and footer. See the file -->
               <!-- doc/common/themes/sage/theme.conf for colours used by -->
               <!-- the Sage theme. -->
                <input type="submit" style="background-color: #B8B9F6" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="table.html" title="Tables"
             >next</a> |</li>
        <li class="right" >
          <a href="../typeset/unicode_art.html" title="Unicode Art"
             >previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../index.html">Utilities</a> &raquo;</li>
 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &copy; Copyright 2005--2016, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.1.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
  </body>
</html>