<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Lazy strings" href="lazy_string.html" /><link rel="prev" title="Lazy import cache" href="lazy_import_cache.html" />

    <meta name="generator" content="sphinx-5.2.3, furo 2022.09.29"/>
        <title>Lazy lists - Utilities</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=d81277517bee4d6b0349d71bb2661d4890b5617c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom-furo.css" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  --color-brand-primary: #0f0fff;
  --color-brand-content: #0f0fff;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Utilities</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../../_static/logo_sagemath_black.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../../../_static/logo_sagemath_white.svg" alt="Dark Logo"/>
  </div>
  
      <span class="sidebar-brand-text">Sage 10.1 Reference Manual</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-home">
  <div class="sidebar-tree">
    <ul><li class="toctree-l1">
      <a class="reference internal" href="../../index.html">Home - Utilities</a>
    </li></ul>
  </div>
</div><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="defaults.html">Default Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="functional.html">Functional notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="randstate.html">Random Number States</a></li>
<li class="toctree-l1"><a class="reference internal" href="prandom.html">Random Numbers with Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="unknown.html">The Unknown truth value</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="abstract_method.html">Abstract methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="bindable_class.html">Bindable classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="decorators.html">Decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="constant_function.html">Constant functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="classcall_metaclass.html">Special Methods for Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="inherit_comparison.html">Metaclass for inheriting comparison functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="method_decorator.html">Base Class to Support Method Decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="object_multiplexer.html">Multiplex calls to one object to calls to many objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="fast_methods.html">Fast methods via Cython</a></li>
<li class="toctree-l1"><a class="reference internal" href="call.html">Attribute and method calling</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="callable_dict.html">Callable dictionaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="converting_dict.html">Converting Dictionary</a></li>
<li class="toctree-l1"><a class="reference internal" href="flatten.html">Flatten nested lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="search.html">Searching a sorted list</a></li>
<li class="toctree-l1"><a class="reference internal" href="mrange.html">Multidimensional enumeration</a></li>
<li class="toctree-l1"><a class="reference internal" href="multireplace.html">multi_replace</a></li>
<li class="toctree-l1"><a class="reference internal" href="map_threaded.html">Threaded map function</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arith/srange.html">Ranges and the <code class="docutils literal notranslate"><span class="pre">[1,2,..,n]</span></code> notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="element_with_label.html">Elements with labels.</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="temporary_file.html">Temporary file handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="remote_file.html">get_remote_file</a></li>
<li class="toctree-l1"><a class="reference internal" href="messaging.html">Message delivery</a></li>
<li class="toctree-l1"><a class="reference internal" href="sage_ostools.html">Miscellaneous operating system functions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../databases/sql_db.html">Relational (sqlite) Databases Module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../structure/graphics_file.html">Wrapper for Graphics Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../media/wav.html">Work with WAV files</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="stopgap.html">Stopgaps</a></li>
<li class="toctree-l1"><a class="reference internal" href="superseded.html">Handling Superseded Functionality</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="misc.html">Miscellaneous functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc_c.html">Miscellaneous functions (Cython)</a></li>
<li class="toctree-l1"><a class="reference internal" href="verbose.html">Verbosity System and Logging in SageMath</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="lazy_attribute.html">Lazy attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="lazy_format.html">Lazy format strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="lazy_import.html">Lazy imports</a></li>
<li class="toctree-l1"><a class="reference internal" href="lazy_import_cache.html">Lazy import cache</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Lazy lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="lazy_string.html">Lazy strings</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cachefunc.html">Cached Functions and Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="weak_dict.html">Fast and safe weak value dictionary</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ext/fast_callable.html">Fast Expression Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ext/fast_eval.html">Fast Numerical Evaluation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cython.html">Cython support functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="inline_fortran.html">Fortran compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="parser.html">A parser for symbolic equations and expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Evaluating Python code without any preparsing</a></li>
<li class="toctree-l1"><a class="reference internal" href="sage_eval.html">Evaluating a String in Sage</a></li>
<li class="toctree-l1"><a class="reference internal" href="sh.html">Evaluating shell scripts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../typeset/symbols.html">Symbols for Character Art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../typeset/character_art.html">Base Class for Character-Based Art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../typeset/character_art_factory.html">Factory for Character-Based Art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../typeset/ascii_art.html">ASCII Art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../typeset/unicode_art.html">Unicode Art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../typeset/unicode_characters.html">Unicode Characters</a></li>
<li class="toctree-l1"><a class="reference internal" href="repr.html">Repr formatting support</a></li>
<li class="toctree-l1"><a class="reference internal" href="sage_input.html">Sage Input Formatting</a></li>
<li class="toctree-l1"><a class="reference internal" href="table.html">Tables</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="html.html">HTML Fragments</a></li>
<li class="toctree-l1"><a class="reference internal" href="mathml.html">MathML output support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sagetex.html">Installing and using SageTeX</a></li>
<li class="toctree-l1"><a class="reference internal" href="latex.html">LaTeX printing support</a></li>
<li class="toctree-l1"><a class="reference internal" href="latex_macros.html">LaTeX macros</a></li>
<li class="toctree-l1"><a class="reference internal" href="latex_standalone.html">Standalone LaTeX Document class and TikzPicture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="func_persist.html">Support for persistent functions in .sage files</a></li>
<li class="toctree-l1"><a class="reference internal" href="persist.html">Object persistence</a></li>
<li class="toctree-l1"><a class="reference internal" href="fpickle.html">Function pickling</a></li>
<li class="toctree-l1"><a class="reference internal" href="explain_pickle.html">A tool for inspecting Python pickles</a></li>
<li class="toctree-l1"><a class="reference internal" href="nested_class.html">Fixing pickle for nested classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="session.html">Loading and saving sessions and listing all variables</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="banner.html">SageMath version and banner info</a></li>
<li class="toctree-l1"><a class="reference internal" href="reset.html">Interpreter reset</a></li>
<li class="toctree-l1"><a class="reference internal" href="viewer.html">Determination of programs for viewing web pages, etc.</a></li>
<li class="toctree-l1"><a class="reference internal" href="pager.html">Pager for showing strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="sagedoc.html">Format Sage documentation for viewing with IPython and the notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="sagedoc_conf.html">Sphinx configuration shared by sage.misc.sphinxify and sage_docbuild</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinxify.html">Process docstrings with Sphinx</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="package.html">Listing Sage packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="dist.html">Installing shortcut scripts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="citation.html">Dependency usage tracking for citations</a></li>
<li class="toctree-l1"><a class="reference internal" href="copying.html">License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sage_unittest.html">Unit testing for Sage objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="random_testing.html">Random testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="test_nested_class.html">Test for nested class Parent</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="benchmark.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="sage_timeit.html">Accurate timing information for Sage commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="sage_timeit_class.html">The <code class="docutils literal notranslate"><span class="pre">timeit</span></code> command</a></li>
<li class="toctree-l1"><a class="reference internal" href="profiler.html">Simple profiling tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="gperftools.html">C Function Profiler Using Google Perftools</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../docs/instancedoc.html">Dynamic documentation for instances of classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="sageinspect.html">Inspect Python, Sage, and Cython objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="edit_module.html">Edit the source code of Sage interactively</a></li>
<li class="toctree-l1"><a class="reference internal" href="classgraph.html">Class inheritance graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev_tools.html">Some tools for developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="function_mangling.html">Function Mangling</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest_index_of_methods.html">ReST index of functions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ext/memory.html">Low-level memory allocation functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="c3.html">The C3 algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="c3_controlled.html">The C3 algorithm, under control of a total order</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="lazy-lists">
<span id="sage-misc-lazy-list"></span><h1>Lazy lists<a class="headerlink" href="#lazy-lists" title="Permalink to this heading">#</a></h1>
<span class="target" id="module-sage.misc.lazy_list"></span><p>A lazy list is an iterator that behaves like a list and possesses a cache
mechanism. A lazy list is potentially infinite and speed performances of the
cache is comparable with Python lists. One major difference with original
Python list is that lazy list are immutable. The advantage is that slices
share memory.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">Primes</span><span class="p">())</span>
<span class="gp">sage: </span><span class="n">P</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span>
<span class="go">547</span>
<span class="gp">sage: </span><span class="n">P</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">34</span><span class="p">]</span>
<span class="go">lazy list [31, 37, 41, ...]</span>
<span class="gp">sage: </span><span class="n">P</span><span class="p">[</span><span class="mi">12</span><span class="p">:</span><span class="mi">23</span><span class="p">]</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83]</span>

<span class="gp">sage: </span><span class="n">f</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">((</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">3</span><span class="o">*</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>
<span class="gp">sage: </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">f</span><span class="p">))</span>
<span class="go">0 -2 -2 0 4 10 18 28 40 54</span>
<span class="gp">sage: </span><span class="n">i1</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">i2</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="n">i1</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">i1</span><span class="p">)]</span>
<span class="go">[0, -2]</span>
<span class="gp">sage: </span><span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="n">i2</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">i2</span><span class="p">)]</span>
<span class="go">[0, -2]</span>
<span class="gp">sage: </span><span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="n">i1</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">i2</span><span class="p">)]</span>
<span class="go">[-2, -2]</span>
</pre></div>
</div>
<p>It is possible to prepend a list to a lazy list:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">count</span>
<span class="gp">sage: </span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">]</span> <span class="o">+</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">count</span><span class="p">())</span>
<span class="gp">sage: </span><span class="n">l</span>
<span class="go">lazy list [3, 7, 0, ...]</span>
</pre></div>
</div>
<p>But, naturally, not the other way around:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">lazy_list</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">count</span><span class="p">())</span> <span class="o">+</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">TypeError: can only add list to lazy_list</span>
</pre></div>
</div>
<p>You can easily create your own class inheriting from <a class="reference internal" href="#sage.misc.lazy_list.lazy_list_generic" title="sage.misc.lazy_list.lazy_list_generic"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_generic</span></code></a>. You
should call the <a class="reference internal" href="#sage.misc.lazy_list.lazy_list_generic" title="sage.misc.lazy_list.lazy_list_generic"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_generic</span></code></a> constructor (optionally with some
precomputed values for the cache) and implement the method <code class="docutils literal notranslate"><span class="pre">_new_slice</span></code> that
returns a new chunk of data at each call. Here is an example of implementation
of the Thue–Morse word that is obtained as the fixed point of the substitution
<span class="math notranslate nohighlight">\(0 \to 01\)</span> and <span class="math notranslate nohighlight">\(1 \to 10\)</span>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list_generic</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">MyThueMorseWord</span><span class="p">(</span><span class="n">lazy_list_generic</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">....: </span>        <span class="n">lazy_list_generic</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="nf">_new_slice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="n">letter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">i</span><span class="p">)</span>
<span class="gp">....: </span>        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="gp">....: </span>        <span class="k">return</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">letter</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">w</span> <span class="o">=</span> <span class="n">MyThueMorseWord</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">w</span>
<span class="go">lazy list [0, 1, 1, ...]</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">w</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">ZZ</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">popcount</span><span class="p">()</span><span class="o">%</span><span class="k">2</span> for i in range(100))
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">w</span><span class="p">[:</span><span class="mi">500</span><span class="p">]</span><span class="o">.</span><span class="n">list</span><span class="p">()</span> <span class="o">==</span> <span class="n">w</span><span class="p">[:</span><span class="mi">1000</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Alternatively, you can create the lazy list from an update function:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">thue_morse_update</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="gp">....: </span>        <span class="n">letter</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">....: </span>    <span class="k">else</span><span class="p">:</span>
<span class="gp">....: </span>        <span class="k">assert</span> <span class="n">n</span><span class="o">%</span><span class="k">2</span> == 0
<span class="gp">....: </span>        <span class="n">letter</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">n</span><span class="o">//</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">....: </span>    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">letter</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">letter</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">w2</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">update_function</span><span class="o">=</span><span class="n">thue_morse_update</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">w2</span>
<span class="go">lazy list [0, 1, 1, ...]</span>
<span class="gp">sage: </span><span class="n">w2</span><span class="p">[:</span><span class="mi">500</span><span class="p">]</span><span class="o">.</span><span class="n">list</span><span class="p">()</span> <span class="o">==</span> <span class="n">w</span><span class="p">[:</span><span class="mi">500</span><span class="p">]</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
<p>You can also create user-defined classes (Python) and extension types (Cython)
inheriting from <a class="reference internal" href="#sage.misc.lazy_list.lazy_list_generic" title="sage.misc.lazy_list.lazy_list_generic"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_generic</span></code></a>.
In that case you would better implement directly the method
<code class="docutils literal notranslate"><span class="pre">_update_cache_up_to</span></code>. See the examples in this file with the classes
<a class="reference internal" href="#sage.misc.lazy_list.lazy_list_from_iterator" title="sage.misc.lazy_list.lazy_list_from_iterator"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_from_iterator</span></code></a> and <a class="reference internal" href="#sage.misc.lazy_list.lazy_list_from_function" title="sage.misc.lazy_list.lazy_list_from_function"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_from_function</span></code></a>.</p>
<section id="classes-and-methods">
<h2>Classes and Methods<a class="headerlink" href="#classes-and-methods" title="Permalink to this heading">#</a></h2>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.lazy_list.lazy_list">
<span class="sig-prename descclassname"><span class="pre">sage.misc.lazy_list.</span></span><span class="sig-name descname"><span class="pre">lazy_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_function</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.lazy_list.lazy_list" title="Permalink to this definition">#</a></dt>
<dd><p>Return a lazy list.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code> – data to create a lazy list from. This can be</p>
<ol class="arabic simple">
<li><p>a (possibly infinite) iterable,</p></li>
<li><p>a function (that takes as input an integer <code class="docutils literal notranslate"><span class="pre">n</span></code> and return
the <code class="docutils literal notranslate"><span class="pre">n</span></code>-th term of the list),</p></li>
<li><p>or a standard Python container <code class="docutils literal notranslate"><span class="pre">list</span></code> or <code class="docutils literal notranslate"><span class="pre">tuple</span></code>.</p></li>
</ol>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">initial_values</span></code> – the beginning of the sequence that will not be computed from
the <code class="docutils literal notranslate"><span class="pre">data</span></code> provided.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">update_function</span></code> – you can also construct a lazy list from a function
that takes as input a list of precomputed values and updates it with some
more values.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want finer tuning of the constructor you can directly instantiate
the classes associated to lazy lists that are
<a class="reference internal" href="#sage.misc.lazy_list.lazy_list_generic" title="sage.misc.lazy_list.lazy_list_generic"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_generic</span></code></a>, <a class="reference internal" href="#sage.misc.lazy_list.lazy_list_from_iterator" title="sage.misc.lazy_list.lazy_list_from_iterator"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_from_iterator</span></code></a>,
<a class="reference internal" href="#sage.misc.lazy_list.lazy_list_from_function" title="sage.misc.lazy_list.lazy_list_from_function"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_from_function</span></code></a>.</p>
</div>
<p>EXAMPLES:</p>
<p>The basic construction of lazy lists.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list</span>
</pre></div>
</div>
<ol class="arabic">
<li><p>Iterators:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">count</span>
<span class="gp">sage: </span><span class="n">lazy_list</span><span class="p">(</span><span class="n">count</span><span class="p">())</span>
<span class="go">lazy list [0, 1, 2, ...]</span>
</pre></div>
</div>
</li>
<li><p>Functions:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">lazy_list</span><span class="p">(</span><span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="p">(</span><span class="n">n</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">%</span><span class="k">17</span>)
<span class="go">lazy list [0, 1, 4, ...]</span>
</pre></div>
</div>
</li>
<li><p>Plain lists:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">lazy_list</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="go">lazy list [1, 5, 7, ...]</span>
</pre></div>
</div>
</li>
</ol>
<p>If a function is only defined for large values, you can provide the beginning
of the sequence manually:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">l</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">divisors</span><span class="p">,</span> <span class="p">[</span><span class="kc">None</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">l</span>
<span class="go">lazy list [None, [1], [1, 2], ...]</span>
</pre></div>
</div>
<p>Lazy lists behave like lists except that they are immutable:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">l</span><span class="p">[</span><span class="mi">3</span><span class="p">::</span><span class="mi">5</span><span class="p">]</span>
<span class="go">lazy list [[1, 3], [1, 2, 4, 8], [1, 13], ...]</span>
</pre></div>
</div>
<p>If your lazy list is finite, you can obtain the underlying list with the
method <span class="math notranslate nohighlight">\(.list()\)</span>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">l</span><span class="p">[</span><span class="mi">30</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[[1, 2, 3, 5, 6, 10, 15, 30],</span>
<span class="go"> [1, 5, 7, 35],</span>
<span class="go"> [1, 2, 4, 5, 8, 10, 20, 40],</span>
<span class="go"> [1, 3, 5, 9, 15, 45]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.lazy_list.lazy_list_formatter">
<span class="sig-prename descclassname"><span class="pre">sage.misc.lazy_list.</span></span><span class="sig-name descname"><span class="pre">lazy_list_formatter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">L</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lazy</span> <span class="pre">list'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">separator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">',</span> <span class="pre">'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">more</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'...'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opening_delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'['</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">closing_delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">']'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preview</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.lazy_list.lazy_list_formatter" title="Permalink to this definition">#</a></dt>
<dd><p>Return a string representation of <code class="docutils literal notranslate"><span class="pre">L</span></code>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">L</span></code> – an iterable object</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> – (default: <code class="docutils literal notranslate"><span class="pre">'lazy</span> <span class="pre">list'</span></code>) a string appearing
at first position (i.e., in front of the actual values)
in the representation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">opening_delimiter</span></code> – (default: <code class="docutils literal notranslate"><span class="pre">'['</span></code>) a string heading
the shown entries</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">closing_delimiter</span></code> – (default: <code class="docutils literal notranslate"><span class="pre">']'</span></code>) a string trailing
the shown entries</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">separator</span></code> – (default: <code class="docutils literal notranslate"><span class="pre">',</span> <span class="pre">'</span></code>) a string appearing between
two entries</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">more</span></code> – (default: <code class="docutils literal notranslate"><span class="pre">'...'</span></code>) a string indicating that
not all entries of the list are shown</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">preview</span></code> – (default: <code class="docutils literal notranslate"><span class="pre">3</span></code>) an integer specifying the number of
elements shown in the representation string</p></li>
</ul>
<p>OUTPUT:</p>
<p>A string.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list_formatter</span>
<span class="gp">sage: </span><span class="n">lazy_list_formatter</span><span class="p">(</span><span class="n">srange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;list&#39;</span><span class="p">)</span>
<span class="go">&#39;list [3, 8, 13, ...]&#39;</span>
</pre></div>
</div>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list</span>
<span class="gp">sage: </span><span class="n">L</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">Primes</span><span class="p">());</span> <span class="n">L</span>
<span class="go">lazy list [2, 3, 5, ...]</span>
<span class="gp">sage: </span><span class="nb">repr</span><span class="p">(</span><span class="n">L</span><span class="p">)</span> <span class="o">==</span> <span class="n">lazy_list_formatter</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">lazy_list_formatter</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;primes&#39;</span><span class="p">)</span>
<span class="go">&#39;primes [2, 3, 5, ...]&#39;</span>
<span class="gp">sage: </span><span class="n">lazy_list_formatter</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">opening_delimiter</span><span class="o">=</span><span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">closing_delimiter</span><span class="o">=</span><span class="s1">&#39;)&#39;</span><span class="p">)</span>
<span class="go">&#39;lazy list (2, 3, 5, ...)&#39;</span>
<span class="gp">sage: </span><span class="n">lazy_list_formatter</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">opening_delimiter</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">closing_delimiter</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="go">&#39;lazy list 2, 3, 5, ...&#39;</span>
<span class="gp">sage: </span><span class="n">lazy_list_formatter</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">separator</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
<span class="go">&#39;lazy list [2--3--5--...]&#39;</span>
<span class="gp">sage: </span><span class="n">lazy_list_formatter</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">more</span><span class="o">=</span><span class="s1">&#39;and more&#39;</span><span class="p">)</span>
<span class="go">&#39;lazy list [2, 3, 5, and more]&#39;</span>
<span class="gp">sage: </span><span class="n">lazy_list_formatter</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">preview</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="go">&#39;lazy list [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, ...]&#39;</span>
<span class="gp">sage: </span><span class="n">lazy_list_formatter</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;primes&#39;</span><span class="p">,</span>
<span class="gp">....: </span>                    <span class="n">opening_delimiter</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">closing_delimiter</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
<span class="gp">....: </span>                    <span class="n">separator</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">more</span><span class="o">=</span><span class="s1">&#39;-&gt;&#39;</span><span class="p">,</span> <span class="n">preview</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="go">&#39;primes 2 3 5 7 11 13 17 -&gt;&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.misc.lazy_list.lazy_list_from_function">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.misc.lazy_list.</span></span><span class="sig-name descname"><span class="pre">lazy_list_from_function</span></span><a class="headerlink" href="#sage.misc.lazy_list.lazy_list_from_function" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.lazy_list.lazy_list_generic" title="sage.misc.lazy_list.lazy_list_generic"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_generic</span></code></a></p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">function</span></code> – a function that maps <code class="docutils literal notranslate"><span class="pre">n</span></code> to the element
at position <code class="docutils literal notranslate"><span class="pre">n</span></code>. (This
function only needs to be defined for length larger than the length of
the cache.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cache</span></code> – an optional list to be used as the cache. Be careful that
there is no copy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stop</span></code> – an optional integer to specify the length of this lazy list.
(Otherwise it is considered infinite).</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list_from_function</span>
<span class="gp">sage: </span><span class="n">lazy_list_from_function</span><span class="p">(</span><span class="n">euler_phi</span><span class="p">)</span>                                    <span class="c1"># optional - sage.libs.pari</span>
<span class="go">lazy list [0, 1, 1, ...]</span>
<span class="gp">sage: </span><span class="n">lazy_list_from_function</span><span class="p">(</span><span class="n">divisors</span><span class="p">,</span> <span class="p">[</span><span class="kc">None</span><span class="p">])</span>                             <span class="c1"># optional - sage.libs.pari</span>
<span class="go">lazy list [None, [1], [1, 2], ...]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.misc.lazy_list.lazy_list_from_iterator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.misc.lazy_list.</span></span><span class="sig-name descname"><span class="pre">lazy_list_from_iterator</span></span><a class="headerlink" href="#sage.misc.lazy_list.lazy_list_from_iterator" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.lazy_list.lazy_list_generic" title="sage.misc.lazy_list.lazy_list_generic"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_generic</span></code></a></p>
<p>Lazy list built from an iterator.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">count</span>
<span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">count</span><span class="p">());</span> <span class="n">m</span>
<span class="go">lazy list [0, 1, 2, ...]</span>

<span class="gp">sage: </span><span class="n">m2</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">count</span><span class="p">())[</span><span class="mi">8</span><span class="p">:</span><span class="mi">20551</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">m2</span>
<span class="go">lazy list [8, 10, 12, ...]</span>

<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span>
<span class="go">[0, 1, 2]</span>
<span class="gp">sage: </span><span class="n">y</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">y</span><span class="p">)]</span>
<span class="go">[0, 1, 2]</span>
<span class="gp">sage: </span><span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">next</span><span class="p">(</span><span class="n">y</span><span class="p">)]</span>
<span class="go">[3, 3]</span>
<span class="gp">sage: </span><span class="n">loads</span><span class="p">(</span><span class="n">dumps</span><span class="p">(</span><span class="n">m</span><span class="p">))</span>
<span class="go">lazy list [0, 1, 2, ...]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.misc.lazy_list.lazy_list_from_update_function">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.misc.lazy_list.</span></span><span class="sig-name descname"><span class="pre">lazy_list_from_update_function</span></span><a class="headerlink" href="#sage.misc.lazy_list.lazy_list_from_update_function" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.misc.lazy_list.lazy_list_generic" title="sage.misc.lazy_list.lazy_list_generic"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_list_generic</span></code></a></p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">function</span></code> – a function that updates a list of precomputed values.
The update function should take as input a list and make it longer
(using either the methods <code class="docutils literal notranslate"><span class="pre">append</span></code> or <code class="docutils literal notranslate"><span class="pre">extend</span></code>). If after a call
to the update function the list of values is shorter a
<code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code> will occurr. If no value is added then the lazy list
is considered finite.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cache</span></code> – an optional list to be used as the cache. Be careful that
there is no copy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stop</span></code> – an optional integer to specify the length of this lazy list
(otherwise it is considered infinite)</p></li>
</ul>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.misc.lazy_list.lazy_list_generic">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.misc.lazy_list.</span></span><span class="sig-name descname"><span class="pre">lazy_list_generic</span></span><a class="headerlink" href="#sage.misc.lazy_list.lazy_list_generic" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A lazy list</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list</span>
<span class="gp">sage: </span><span class="n">l</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">Primes</span><span class="p">())</span>
<span class="gp">sage: </span><span class="n">l</span>
<span class="go">lazy list [2, 3, 5, ...]</span>
<span class="gp">sage: </span><span class="n">l</span><span class="p">[</span><span class="mi">200</span><span class="p">]</span>
<span class="go">1229</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.lazy_list.lazy_list_generic.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.lazy_list.lazy_list_generic.get" title="Permalink to this definition">#</a></dt>
<dd><p>Return the element at position <code class="docutils literal notranslate"><span class="pre">i</span></code>.</p>
<p>If the index is not an integer, then raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.  If the
argument is negative then raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>.  Finally, if the
argument is beyond the size of that lazy list it raises a
<code class="docutils literal notranslate"><span class="pre">IndexError</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span><span class="p">,</span> <span class="n">repeat</span>
<span class="gp">sage: </span><span class="n">f</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="nb">iter</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]),</span> <span class="n">repeat</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)))</span>
<span class="gp">sage: </span><span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">sage: </span><span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">&#39;a&#39;</span>
<span class="gp">sage: </span><span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">sage: </span><span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">&#39;a&#39;</span>

<span class="gp">sage: </span><span class="n">g</span> <span class="o">=</span> <span class="n">f</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">&#39;a&#39;</span>
<span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">IndexError: lazy list index out of range</span>
<span class="gp">sage: </span><span class="n">g</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">TypeError: unable to convert rational 1/2 to an integer</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.lazy_list.lazy_list_generic.list">
<span class="sig-name descname"><span class="pre">list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.lazy_list.lazy_list_generic.list" title="Permalink to this definition">#</a></dt>
<dd><p>Return the list made of the elements of <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the iterator is sufficiently large, this will build a list
of length <code class="docutils literal notranslate"><span class="pre">PY_SSIZE_T_MAX</span></code> which should be beyond the capacity of
your RAM!</p>
</div>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.lazy_list</span> <span class="kn">import</span> <span class="n">lazy_list</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="n">Primes</span><span class="p">())</span>
<span class="gp">sage: </span><span class="n">P</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">143</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>                                                     <span class="c1"># optional - sage.libs.pari</span>
<span class="go">[5, 19, 41, 61, 83, 107, 137, 163, 191, 223, 241, 271, 307, 337, 367,</span>
<span class="go"> 397, 431, 457, 487, 521, 563, 593, 617, 647, 677, 719, 751, 787, 823]</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">lazy_list</span><span class="p">(</span><span class="nb">iter</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]))</span>
<span class="gp">sage: </span><span class="n">P</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[1, 2, 3]</span>
<span class="gp">sage: </span><span class="n">P</span><span class="p">[:</span><span class="mi">100000</span><span class="p">]</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[1, 2, 3]</span>
<span class="gp">sage: </span><span class="n">P</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">7</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[2]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.lazy_list.slice_unpickle">
<span class="sig-prename descclassname"><span class="pre">sage.misc.lazy_list.</span></span><span class="sig-name descname"><span class="pre">slice_unpickle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">master</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.lazy_list.slice_unpickle" title="Permalink to this definition">#</a></dt>
<dd><p>Unpickle helper</p>
</dd></dl>

</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="lazy_string.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Lazy strings</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="lazy_import_cache.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Lazy import cache</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2005--2023, The Sage Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Lazy lists</a><ul>
<li><a class="reference internal" href="#classes-and-methods">Classes and Methods</a></li>
<li><a class="reference internal" href="#sage.misc.lazy_list.lazy_list"><code class="docutils literal notranslate"><span class="pre">lazy_list()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.lazy_list.lazy_list_formatter"><code class="docutils literal notranslate"><span class="pre">lazy_list_formatter()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.lazy_list.lazy_list_from_function"><code class="docutils literal notranslate"><span class="pre">lazy_list_from_function</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.lazy_list.lazy_list_from_iterator"><code class="docutils literal notranslate"><span class="pre">lazy_list_from_iterator</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.lazy_list.lazy_list_from_update_function"><code class="docutils literal notranslate"><span class="pre">lazy_list_from_update_function</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.lazy_list.lazy_list_generic"><code class="docutils literal notranslate"><span class="pre">lazy_list_generic</span></code></a><ul>
<li><a class="reference internal" href="#sage.misc.lazy_list.lazy_list_generic.get"><code class="docutils literal notranslate"><span class="pre">get()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.lazy_list.lazy_list_generic.list"><code class="docutils literal notranslate"><span class="pre">list()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sage.misc.lazy_list.slice_unpickle"><code class="docutils literal notranslate"><span class="pre">slice_unpickle()</span></code></a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>window.MathJax = {"tex": {"macros": {"ZZ": "\\Bold{Z}", "NN": "\\Bold{N}", "RR": "\\Bold{R}", "CC": "\\Bold{C}", "QQ": "\\Bold{Q}", "QQbar": "\\overline{\\QQ}", "GF": ["\\Bold{F}_{#1}", 1], "Zp": ["\\Bold{Z}_{#1}", 1], "Qp": ["\\Bold{Q}_{#1}", 1], "Zmod": ["\\ZZ/#1\\ZZ", 1], "CDF": "\\Bold{C}", "CIF": "\\Bold{C}", "CLF": "\\Bold{C}", "RDF": "\\Bold{R}", "RIF": "\\Bold{I} \\Bold{R}", "RLF": "\\Bold{R}", "SL": "\\mathrm{SL}", "PSL": "\\mathrm{PSL}", "lcm": "\\mathop{\\operatorname{lcm}}", "Bold": ["\\mathbf{#1}", 1]}, "inlineMath": [["$", "$"], ["\\(", "\\)"]], "maxBuffer": 51200, "autoload": {"color": [], "colorv2": ["color"]}}}</script>
    <script defer="defer" src="../../../_static/mathjax/tex-chtml.js"></script>
    </body>
</html>