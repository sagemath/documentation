<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Edit the source code of Sage interactively" href="edit_module.html" /><link rel="prev" title="Dynamic documentation for instances of classes" href="../docs/instancedoc.html" />

    <meta name="generator" content="sphinx-5.2.3, furo 2022.09.29"/>
        <title>Inspect Python, Sage, and Cython objects - Utilities</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=d81277517bee4d6b0349d71bb2661d4890b5617c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom-furo.css" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  --color-brand-primary: #0f0fff;
  --color-brand-content: #0f0fff;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Utilities</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../../_static/logo_sagemath_black.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../../../_static/logo_sagemath_white.svg" alt="Dark Logo"/>
  </div>
  
      <span class="sidebar-brand-text">Sage 10.1 Reference Manual</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-home">
  <div class="sidebar-tree">
    <ul><li class="toctree-l1">
      <a class="reference internal" href="../../index.html">Home - Utilities</a>
    </li></ul>
  </div>
</div><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="defaults.html">Default Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="functional.html">Functional notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="randstate.html">Random Number States</a></li>
<li class="toctree-l1"><a class="reference internal" href="prandom.html">Random Numbers with Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="unknown.html">The Unknown truth value</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="abstract_method.html">Abstract methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="bindable_class.html">Bindable classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="decorators.html">Decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="constant_function.html">Constant functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="classcall_metaclass.html">Special Methods for Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="inherit_comparison.html">Metaclass for inheriting comparison functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="method_decorator.html">Base Class to Support Method Decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="object_multiplexer.html">Multiplex calls to one object to calls to many objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="fast_methods.html">Fast methods via Cython</a></li>
<li class="toctree-l1"><a class="reference internal" href="call.html">Attribute and method calling</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="callable_dict.html">Callable dictionaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="converting_dict.html">Converting Dictionary</a></li>
<li class="toctree-l1"><a class="reference internal" href="flatten.html">Flatten nested lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="search.html">Searching a sorted list</a></li>
<li class="toctree-l1"><a class="reference internal" href="mrange.html">Multidimensional enumeration</a></li>
<li class="toctree-l1"><a class="reference internal" href="multireplace.html">multi_replace</a></li>
<li class="toctree-l1"><a class="reference internal" href="map_threaded.html">Threaded map function</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arith/srange.html">Ranges and the <code class="docutils literal notranslate"><span class="pre">[1,2,..,n]</span></code> notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="element_with_label.html">Elements with labels.</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="temporary_file.html">Temporary file handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="remote_file.html">get_remote_file</a></li>
<li class="toctree-l1"><a class="reference internal" href="messaging.html">Message delivery</a></li>
<li class="toctree-l1"><a class="reference internal" href="sage_ostools.html">Miscellaneous operating system functions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../databases/sql_db.html">Relational (sqlite) Databases Module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../structure/graphics_file.html">Wrapper for Graphics Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../media/wav.html">Work with WAV files</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="stopgap.html">Stopgaps</a></li>
<li class="toctree-l1"><a class="reference internal" href="superseded.html">Handling Superseded Functionality</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="misc.html">Miscellaneous functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc_c.html">Miscellaneous functions (Cython)</a></li>
<li class="toctree-l1"><a class="reference internal" href="verbose.html">Verbosity System and Logging in SageMath</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="lazy_attribute.html">Lazy attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="lazy_format.html">Lazy format strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="lazy_import.html">Lazy imports</a></li>
<li class="toctree-l1"><a class="reference internal" href="lazy_import_cache.html">Lazy import cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="lazy_list.html">Lazy lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="lazy_string.html">Lazy strings</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cachefunc.html">Cached Functions and Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="weak_dict.html">Fast and safe weak value dictionary</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ext/fast_callable.html">Fast Expression Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ext/fast_eval.html">Fast Numerical Evaluation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cython.html">Cython support functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="inline_fortran.html">Fortran compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="parser.html">A parser for symbolic equations and expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Evaluating Python code without any preparsing</a></li>
<li class="toctree-l1"><a class="reference internal" href="sage_eval.html">Evaluating a String in Sage</a></li>
<li class="toctree-l1"><a class="reference internal" href="sh.html">Evaluating shell scripts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../typeset/symbols.html">Symbols for Character Art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../typeset/character_art.html">Base Class for Character-Based Art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../typeset/character_art_factory.html">Factory for Character-Based Art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../typeset/ascii_art.html">ASCII Art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../typeset/unicode_art.html">Unicode Art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../typeset/unicode_characters.html">Unicode Characters</a></li>
<li class="toctree-l1"><a class="reference internal" href="repr.html">Repr formatting support</a></li>
<li class="toctree-l1"><a class="reference internal" href="sage_input.html">Sage Input Formatting</a></li>
<li class="toctree-l1"><a class="reference internal" href="table.html">Tables</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="html.html">HTML Fragments</a></li>
<li class="toctree-l1"><a class="reference internal" href="mathml.html">MathML output support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sagetex.html">Installing and using SageTeX</a></li>
<li class="toctree-l1"><a class="reference internal" href="latex.html">LaTeX printing support</a></li>
<li class="toctree-l1"><a class="reference internal" href="latex_macros.html">LaTeX macros</a></li>
<li class="toctree-l1"><a class="reference internal" href="latex_standalone.html">Standalone LaTeX Document class and TikzPicture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="func_persist.html">Support for persistent functions in .sage files</a></li>
<li class="toctree-l1"><a class="reference internal" href="persist.html">Object persistence</a></li>
<li class="toctree-l1"><a class="reference internal" href="fpickle.html">Function pickling</a></li>
<li class="toctree-l1"><a class="reference internal" href="explain_pickle.html">A tool for inspecting Python pickles</a></li>
<li class="toctree-l1"><a class="reference internal" href="nested_class.html">Fixing pickle for nested classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="session.html">Loading and saving sessions and listing all variables</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="banner.html">SageMath version and banner info</a></li>
<li class="toctree-l1"><a class="reference internal" href="reset.html">Interpreter reset</a></li>
<li class="toctree-l1"><a class="reference internal" href="viewer.html">Determination of programs for viewing web pages, etc.</a></li>
<li class="toctree-l1"><a class="reference internal" href="pager.html">Pager for showing strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="sagedoc.html">Format Sage documentation for viewing with IPython and the notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="sagedoc_conf.html">Sphinx configuration shared by sage.misc.sphinxify and sage_docbuild</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinxify.html">Process docstrings with Sphinx</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="package.html">Listing Sage packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="dist.html">Installing shortcut scripts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="citation.html">Dependency usage tracking for citations</a></li>
<li class="toctree-l1"><a class="reference internal" href="copying.html">License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sage_unittest.html">Unit testing for Sage objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="random_testing.html">Random testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="test_nested_class.html">Test for nested class Parent</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="benchmark.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="sage_timeit.html">Accurate timing information for Sage commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="sage_timeit_class.html">The <code class="docutils literal notranslate"><span class="pre">timeit</span></code> command</a></li>
<li class="toctree-l1"><a class="reference internal" href="profiler.html">Simple profiling tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="gperftools.html">C Function Profiler Using Google Perftools</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../docs/instancedoc.html">Dynamic documentation for instances of classes</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Inspect Python, Sage, and Cython objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="edit_module.html">Edit the source code of Sage interactively</a></li>
<li class="toctree-l1"><a class="reference internal" href="classgraph.html">Class inheritance graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev_tools.html">Some tools for developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="function_mangling.html">Function Mangling</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest_index_of_methods.html">ReST index of functions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ext/memory.html">Low-level memory allocation functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="c3.html">The C3 algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="c3_controlled.html">The C3 algorithm, under control of a total order</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="inspect-python-sage-and-cython-objects">
<span id="sage-misc-sageinspect"></span><h1>Inspect Python, Sage, and Cython objects<a class="headerlink" href="#inspect-python-sage-and-cython-objects" title="Permalink to this heading">#</a></h1>
<span class="target" id="module-sage.misc.sageinspect"></span><p>This module extends parts of Python’s inspect module to Cython objects.</p>
<p>AUTHORS:</p>
<ul class="simple">
<li><p>originally taken from Fernando Perez’s IPython</p></li>
<li><p>William Stein (extensive modifications)</p></li>
<li><p>Nick Alexander (extensions)</p></li>
<li><p>Nick Alexander (testing)</p></li>
<li><p>Simon King (some extension for Cython, generalisation of SageArgSpecVisitor)</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>Test introspection of modules defined in Python and Cython files:</p>
<p>Cython modules:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="p">)</span>
<span class="go">&#39;.../rational.pyx&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span>
<span class="go">&#39;Rational Numbers...&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="p">)</span>
<span class="go">&#39;# distutils: ...Rational Numbers...&#39;</span>
</pre></div>
</div>
<p>Python modules:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="p">)</span>
<span class="go">&#39;.../sageinspect.py&#39;</span>

<span class="gp">sage: </span><span class="nb">print</span><span class="p">(</span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()[:</span><span class="mi">40</span><span class="p">])</span>
<span class="go">Inspect Python, Sage, and Cython objects</span>

<span class="gp">sage: </span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()[</span><span class="mi">5</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="go">&#39;Inspect Python, Sage, and Cython objects...&#39;</span>
</pre></div>
</div>
<p>Test introspection of classes defined in Python and Cython files:</p>
<p>Cython classes:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="o">.</span><span class="n">Rational</span><span class="p">)</span>
<span class="go">&#39;.../rational.pyx&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="o">.</span><span class="n">Rational</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span>
<span class="go">&#39;A rational number...&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="o">.</span><span class="n">Rational</span><span class="p">)</span>
<span class="go">&#39;cdef class Rational...&#39;</span>
</pre></div>
</div>
<p>Python classes:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">BlockFinder</span><span class="p">)</span>
<span class="go">&#39;.../sage/misc/sageinspect.py&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">BlockFinder</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()[:</span><span class="mi">50</span><span class="p">]</span>
<span class="go">&#39;Provide a tokeneater() method to detect the...&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">BlockFinder</span><span class="p">)</span>
<span class="go">&#39;class BlockFinder:...&#39;</span>
</pre></div>
</div>
<p>Test introspection of functions defined in Python and Cython files:</p>
<p>Cython functions:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sage_getdef</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="o">.</span><span class="n">make_rational</span><span class="p">,</span> <span class="n">obj_name</span><span class="o">=</span><span class="s1">&#39;mr&#39;</span><span class="p">)</span>
<span class="go">&#39;mr(s)&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="o">.</span><span class="n">make_rational</span><span class="p">)</span>
<span class="go">&#39;.../rational.pyx&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="o">.</span><span class="n">make_rational</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span>
<span class="go">&#39;Make a rational number ...&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="o">.</span><span class="n">make_rational</span><span class="p">)[</span><span class="mi">4</span><span class="p">:]</span>
<span class="go">&#39;make_rational(s):...&#39;</span>
</pre></div>
</div>
<p>Python functions:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sage_getdef</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="o">.</span><span class="n">sage_getfile</span><span class="p">,</span> <span class="n">obj_name</span><span class="o">=</span><span class="s1">&#39;sage_getfile&#39;</span><span class="p">)</span>
<span class="go">&#39;sage_getfile(obj)&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="o">.</span><span class="n">sage_getfile</span><span class="p">)</span>
<span class="go">&#39;.../sageinspect.py&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="o">.</span><span class="n">sage_getfile</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span>
<span class="go">&#39;Get the full file name associated to &quot;obj&quot; as a string...&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="o">.</span><span class="n">sage_getfile</span><span class="p">)[</span><span class="mi">4</span><span class="p">:]</span>
<span class="go">&#39;sage_getfile(obj):...&#39;</span>
</pre></div>
</div>
<p>Unfortunately, no argspec is extractable from builtins. Hence, we use a
generic argspec:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sage_getdef</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">find</span><span class="p">,</span> <span class="s1">&#39;find&#39;</span><span class="p">)</span>
<span class="go">&#39;find(*args, **kwds)&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getdef</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">find</span><span class="p">,</span> <span class="s1">&#39;find&#39;</span><span class="p">)</span>
<span class="go">&#39;find(*args, **kwds)&#39;</span>
</pre></div>
</div>
<p>By <a class="reference external" href="https://github.com/sagemath/sage/issues/9976">github issue #9976</a> and <a class="reference external" href="https://github.com/sagemath/sage/issues/14017">github issue #14017</a>, introspection also works for interactively
defined Cython code, and with rather tricky argument lines:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">cython</span><span class="p">(</span><span class="s1">&#39;def foo(unsigned int x=1, a=</span><span class="se">\&#39;</span><span class="s1">)&quot;</span><span class="se">\&#39;</span><span class="s1">, b={not (2+1==3):</span><span class="se">\&#39;</span><span class="s1">bar</span><span class="se">\&#39;</span><span class="s1">}, *args, **kwds): return&#39;</span><span class="p">)</span>    <span class="c1"># optional - sage.misc.cython</span>
<span class="gp">sage: </span><span class="nb">print</span><span class="p">(</span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">foo</span><span class="p">))</span>                                                                        <span class="c1"># optional - sage.misc.cython</span>
<span class="go">def foo(unsigned int x=1, a=&#39;)&quot;&#39;, b={not (2+1==3):&#39;bar&#39;}, *args, **kwds): return</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>                                                                              <span class="c1"># optional - sage.misc.cython</span>
<span class="go">FullArgSpec(args=[&#39;x&#39;, &#39;a&#39;, &#39;b&#39;], varargs=&#39;args&#39;, varkw=&#39;kwds&#39;, defaults=(1, &#39;)&quot;&#39;, {False: &#39;bar&#39;}), kwonlyargs=[], kwonlydefaults=None, annotations={})</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="sage.misc.sageinspect.BlockFinder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.misc.sageinspect.</span></span><span class="sig-name descname"><span class="pre">BlockFinder</span></span><a class="headerlink" href="#sage.misc.sageinspect.BlockFinder" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Provide a tokeneater() method to detect the end of a code block.</p>
<p>This is the Python library’s <code class="xref py py-class docutils literal notranslate"><span class="pre">inspect.BlockFinder</span></code> modified
to recognize Cython definitions.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.sageinspect.BlockFinder.tokeneater">
<span class="sig-name descname"><span class="pre">tokeneater</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">token</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">srow_scol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">erow_ecol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.BlockFinder.tokeneater" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.misc.sageinspect.SageArgSpecVisitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.misc.sageinspect.</span></span><span class="sig-name descname"><span class="pre">SageArgSpecVisitor</span></span><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/library/ast.html#ast.NodeVisitor" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">NodeVisitor</span></code></a></p>
<p>A simple visitor class that walks an abstract-syntax tree (AST)
for a Python function’s argspec.  It returns the contents of nodes
representing the basic Python types: None, booleans, numbers,
strings, lists, tuples, and dictionaries.  We use this class in
<code class="xref py py-func docutils literal notranslate"><span class="pre">_sage_getargspec_from_ast()</span></code> to extract an argspec from a
function’s or method’s source code.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="k">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">visitor</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;[1,2,3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="go">[1, 2, 3]</span>
<span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&quot;{&#39;a&#39;:(&#39;e&#39;,2,[None,({False:True},&#39;pi&#39;)]), 37.0:&#39;temp&#39;}&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="nb">sorted</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<span class="go">[(37.0, &#39;temp&#39;), (&#39;a&#39;, (&#39;e&#39;, 2, [None, ({False: True}, &#39;pi&#39;)]))]</span>
<span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&quot;jc = [&#39;veni&#39;, &#39;vidi&#39;, &#39;vici&#39;]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="n">v</span>
<span class="go">&lt;...ast.Assign object at ...&gt;</span>
<span class="gp">sage: </span><span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">)]</span>
<span class="gp">sage: </span><span class="s1">&#39;_attributes&#39;</span> <span class="ow">in</span> <span class="n">attrs</span> <span class="ow">and</span> <span class="s1">&#39;_fields&#39;</span> <span class="ow">in</span> <span class="n">attrs</span> <span class="ow">and</span> <span class="s1">&#39;col_offset&#39;</span> <span class="ow">in</span> <span class="n">attrs</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">visitor</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">targets</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="go">&#39;jc&#39;</span>
<span class="gp">sage: </span><span class="n">visitor</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="go">[&#39;veni&#39;, &#39;vidi&#39;, &#39;vici&#39;]</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.sageinspect.SageArgSpecVisitor.visit_BinOp">
<span class="sig-name descname"><span class="pre">visit_BinOp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_BinOp" title="Permalink to this definition">#</a></dt>
<dd><p>Visit a Python AST <a class="reference external" href="https://docs.python.org/library/ast.html#ast.BinOp" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ast.BinOp</span></code></a> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - the node instance to visit</p></li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li><p>The result that <code class="docutils literal notranslate"><span class="pre">node</span></code> represents</p></li>
</ul>
<p>AUTHOR:</p>
<ul class="simple">
<li><p>Simon King</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="k">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;(3+(2*4))&#39;</span><span class="p">,</span> <span class="s1">&#39;7|8&#39;</span><span class="p">,</span> <span class="s1">&#39;5^3&#39;</span><span class="p">,</span> <span class="s1">&#39;7/3&#39;</span><span class="p">,</span> <span class="s1">&#39;7//3&#39;</span><span class="p">,</span> <span class="s1">&#39;3&lt;&lt;4&#39;</span><span class="p">]]</span> <span class="c1">#indirect doctest</span>
<span class="go">[11, 15, 6, 2.3333333333333335, 2, 48]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.sageinspect.SageArgSpecVisitor.visit_BoolOp">
<span class="sig-name descname"><span class="pre">visit_BoolOp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_BoolOp" title="Permalink to this definition">#</a></dt>
<dd><p>Visit a Python AST <a class="reference external" href="https://docs.python.org/library/ast.html#ast.BoolOp" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ast.BoolOp</span></code></a> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - the node instance to visit</p></li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li><p>The result that <code class="docutils literal notranslate"><span class="pre">node</span></code> represents</p></li>
</ul>
<p>AUTHOR:</p>
<ul class="simple">
<li><p>Simon King</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="k">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;True and 1&#39;</span><span class="p">,</span> <span class="s1">&#39;False or 3 or None&#39;</span><span class="p">,</span> <span class="s1">&#39;3 and 4&#39;</span><span class="p">]]</span> <span class="c1">#indirect doctest</span>
<span class="go">[1, 3, 4]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.sageinspect.SageArgSpecVisitor.visit_Compare">
<span class="sig-name descname"><span class="pre">visit_Compare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_Compare" title="Permalink to this definition">#</a></dt>
<dd><p>Visit a Python AST <a class="reference external" href="https://docs.python.org/library/ast.html#ast.Compare" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ast.Compare</span></code></a> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - the node instance to visit</p></li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li><p>The result that <code class="docutils literal notranslate"><span class="pre">node</span></code> represents</p></li>
</ul>
<p>AUTHOR:</p>
<ul class="simple">
<li><p>Simon King</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="k">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit_Compare</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;1&lt;2==2!=3&#39;</span><span class="p">,</span> <span class="s1">&#39;1==1&gt;2&#39;</span><span class="p">,</span> <span class="s1">&#39;1&lt;2&gt;1&#39;</span><span class="p">,</span> <span class="s1">&#39;1&lt;3&lt;2&lt;4&#39;</span><span class="p">]]</span>
<span class="go">[True, False, True, False]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.sageinspect.SageArgSpecVisitor.visit_Dict">
<span class="sig-name descname"><span class="pre">visit_Dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_Dict" title="Permalink to this definition">#</a></dt>
<dd><p>Visit a Python AST <a class="reference external" href="https://docs.python.org/library/ast.html#ast.Dict" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ast.Dict</span></code></a> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - the node instance to visit</p></li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li><p>the dictionary the <code class="docutils literal notranslate"><span class="pre">node</span></code> represents</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="k">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit_Dict</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s2">&quot;{1:one, &#39;two&#39;:2, other:bother}&quot;</span><span class="p">]]</span>
<span class="gp">sage: </span><span class="p">[</span><span class="nb">sorted</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">v</span><span class="p">]</span>
<span class="go">[[], [(1, &#39;one&#39;), (&#39;other&#39;, &#39;bother&#39;), (&#39;two&#39;, 2)]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.sageinspect.SageArgSpecVisitor.visit_List">
<span class="sig-name descname"><span class="pre">visit_List</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_List" title="Permalink to this definition">#</a></dt>
<dd><p>Visit a Python AST <a class="reference external" href="https://docs.python.org/library/ast.html#ast.List" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ast.List</span></code></a> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - the node instance to visit</p></li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li><p>the list the <code class="docutils literal notranslate"><span class="pre">node</span></code> represents</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="k">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit_List</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;[]&#39;</span><span class="p">,</span> <span class="s2">&quot;[&#39;s&#39;, &#39;t&#39;, &#39;u&#39;]&quot;</span><span class="p">,</span> <span class="s1">&#39;[[e], [], [pi]]&#39;</span><span class="p">]]</span>
<span class="go">[[], [&#39;s&#39;, &#39;t&#39;, &#39;u&#39;], [[&#39;e&#39;], [], [&#39;pi&#39;]]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.sageinspect.SageArgSpecVisitor.visit_Name">
<span class="sig-name descname"><span class="pre">visit_Name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_Name" title="Permalink to this definition">#</a></dt>
<dd><p>Visit a Python AST <a class="reference external" href="https://docs.python.org/library/ast.html#ast.Name" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ast.Name</span></code></a> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - the node instance to visit</p></li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li><p>None, True, False, or the <code class="docutils literal notranslate"><span class="pre">node</span></code>’s name as a string.</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="k">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit_Name</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">]]</span>
<span class="go">[&#39;foo&#39;, &#39;bar&#39;]</span>
<span class="gp">sage: </span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="n">vis</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">]]</span>
<span class="go">[&lt;class &#39;str&#39;&gt;, &lt;class &#39;str&#39;&gt;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.sageinspect.SageArgSpecVisitor.visit_NameConstant">
<span class="sig-name descname"><span class="pre">visit_NameConstant</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_NameConstant" title="Permalink to this definition">#</a></dt>
<dd><p>Visit a Python AST <code class="xref py py-class docutils literal notranslate"><span class="pre">ast.NameConstant</span></code> node.</p>
<p>This is an optimization added in Python 3.4 for the special cases
of True, False, and None.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - the node instance to visit</p></li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li><p>None, True, False.</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="k">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit_NameConstant</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;True&#39;</span><span class="p">,</span> <span class="s1">&#39;False&#39;</span><span class="p">,</span> <span class="s1">&#39;None&#39;</span><span class="p">]]</span>
<span class="go">[True, False, None]</span>
<span class="gp">sage: </span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="n">vis</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;True&#39;</span><span class="p">,</span> <span class="s1">&#39;False&#39;</span><span class="p">,</span> <span class="s1">&#39;None&#39;</span><span class="p">]]</span>
<span class="go">[&lt;class &#39;bool&#39;&gt;, &lt;class &#39;bool&#39;&gt;, &lt;class &#39;NoneType&#39;&gt;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.sageinspect.SageArgSpecVisitor.visit_Num">
<span class="sig-name descname"><span class="pre">visit_Num</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_Num" title="Permalink to this definition">#</a></dt>
<dd><p>Visit a Python AST <code class="xref py py-class docutils literal notranslate"><span class="pre">ast.Num</span></code> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - the node instance to visit</p></li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li><p>the number the <code class="docutils literal notranslate"><span class="pre">node</span></code> represents</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="k">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit_Num</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;123&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0&#39;</span><span class="p">]]</span>
<span class="go">[123, 0.0]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On Python 3 negative numbers are parsed first, for some reason, as
a UnaryOp node.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.sageinspect.SageArgSpecVisitor.visit_Str">
<span class="sig-name descname"><span class="pre">visit_Str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_Str" title="Permalink to this definition">#</a></dt>
<dd><p>Visit a Python AST <code class="xref py py-class docutils literal notranslate"><span class="pre">ast.Str</span></code> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - the node instance to visit</p></li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li><p>the string the <code class="docutils literal notranslate"><span class="pre">node</span></code> represents</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="k">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit_Str</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;&quot;abstract&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;syntax&#39;&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;&#39;&#39;r&quot;tr\ee&quot;&#39;&#39;&#39;</span><span class="p">]]</span>
<span class="go">[&#39;abstract&#39;, &#39;syntax&#39;, &#39;tr\\ee&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.sageinspect.SageArgSpecVisitor.visit_Tuple">
<span class="sig-name descname"><span class="pre">visit_Tuple</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_Tuple" title="Permalink to this definition">#</a></dt>
<dd><p>Visit a Python AST <a class="reference external" href="https://docs.python.org/library/ast.html#ast.Tuple" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ast.Tuple</span></code></a> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - the node instance to visit</p></li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li><p>the tuple the <code class="docutils literal notranslate"><span class="pre">node</span></code> represents</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="k">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit_Tuple</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;()&#39;</span><span class="p">,</span> <span class="s1">&#39;(x,y)&#39;</span><span class="p">,</span> <span class="s1">&#39;(&quot;Au&quot;, &quot;Al&quot;, &quot;Cu&quot;)&#39;</span><span class="p">]]</span>
<span class="go">[(), (&#39;x&#39;, &#39;y&#39;), (&#39;Au&#39;, &#39;Al&#39;, &#39;Cu&#39;)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.sageinspect.SageArgSpecVisitor.visit_UnaryOp">
<span class="sig-name descname"><span class="pre">visit_UnaryOp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_UnaryOp" title="Permalink to this definition">#</a></dt>
<dd><p>Visit a Python AST <a class="reference external" href="https://docs.python.org/library/ast.html#ast.BinOp" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ast.BinOp</span></code></a> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - the node instance to visit</p></li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li><p>The result that <code class="docutils literal notranslate"><span class="pre">node</span></code> represents</p></li>
</ul>
<p>AUTHOR:</p>
<ul class="simple">
<li><p>Simon King</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="k">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit_UnaryOp</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;+(3*2)&#39;</span><span class="p">,</span> <span class="s1">&#39;-(3*2)&#39;</span><span class="p">]]</span>
<span class="go">[6, -6]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.sageinspect.SageArgSpecVisitor.visit_arg">
<span class="sig-name descname"><span class="pre">visit_arg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_arg" title="Permalink to this definition">#</a></dt>
<dd><p>Visit a Python AST <a class="reference external" href="https://docs.python.org/library/ast.html#ast.arg" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ast.arg</span></code></a> node.</p>
<p>This node type is only on Python 3, where function arguments are
more complex than just an identifier (e.g. they may also include
annotations).</p>
<p>For now we simply return the argument identifier as a string.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> – the node instance to visit</p></li>
</ul>
<p>OUTPUT:</p>
<p>the argument name</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="k">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;def f(a, b=2, c={&#39;a&#39;: [4, 5.5, False]}, d=(None, True)):</span><span class="se">\n</span><span class="s2">    return&quot;</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">args</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">args</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">visitor</span><span class="o">.</span><span class="n">visit_arg</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">args</span><span class="p">]</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.sageinspect.formatannotation">
<span class="sig-prename descclassname"><span class="pre">sage.misc.sageinspect.</span></span><span class="sig-name descname"><span class="pre">formatannotation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">annotation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_module</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.formatannotation" title="Permalink to this definition">#</a></dt>
<dd><p>This is taken from Python 3.7’s inspect.py; the only change is to
add documentation.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">annotation</span></code> – annotation for a function</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">base_module</span></code> (optional, default <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
</ul>
<p>This is only relevant with Python 3, so the doctests are marked
accordingly.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">formatannotation</span>
<span class="gp">sage: </span><span class="kn">import</span> <span class="nn">inspect</span>
<span class="gp">sage: </span><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">pass</span>
<span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>

<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">annotation</span>
<span class="gp">sage: </span><span class="n">a</span>
<span class="go">&lt;class &#39;inspect._empty&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">formatannotation</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">&#39;inspect._empty&#39;</span>

<span class="gp">sage: </span><span class="n">b</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">annotation</span>
<span class="gp">sage: </span><span class="n">b</span>
<span class="go">&lt;class &#39;int&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">formatannotation</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">&#39;int&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.sageinspect.is_function_or_cython_function">
<span class="sig-prename descclassname"><span class="pre">sage.misc.sageinspect.</span></span><span class="sig-name descname"><span class="pre">is_function_or_cython_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.is_function_or_cython_function" title="Permalink to this definition">#</a></dt>
<dd><p>Check whether something is a function.</p>
<p>This is a variant of <a class="reference external" href="https://docs.python.org/library/inspect.html#inspect.isfunction" title="(in Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.isfunction()</span></code></a>:
We assume that anything which has a genuine <code class="docutils literal notranslate"><span class="pre">__code__</span></code>
attribute (not using <code class="docutils literal notranslate"><span class="pre">__getattr__</span></code> overrides) is a function.
This is meant to support Cython functions.</p>
<p>Think twice before using this function (or any function from the
<a class="reference external" href="https://docs.python.org/library/inspect.html#module-inspect" title="(in Python v3.11)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">inspect</span></code></a> or <a class="reference internal" href="#module-sage.misc.sageinspect" title="sage.misc.sageinspect"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sage.misc.sageinspect</span></code></a> modules).  Most uses of
<a class="reference external" href="https://docs.python.org/library/inspect.html#inspect.isfunction" title="(in Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.isfunction()</span></code></a> in ordinary library code can be replaced by
<a class="reference external" href="https://docs.python.org/library/functions.html#callable" title="(in Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">callable()</span></code></a>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">is_function_or_cython_function</span>
<span class="gp">sage: </span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span> <span class="k">pass</span>
<span class="gp">sage: </span><span class="n">is_function_or_cython_function</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">is_function_or_cython_function</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.categories.coercion_methods</span> <span class="kn">import</span> <span class="n">_mul_parent</span>
<span class="gp">sage: </span><span class="n">is_function_or_cython_function</span><span class="p">(</span><span class="n">_mul_parent</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">is_function_or_cython_function</span><span class="p">(</span><span class="n">Integer</span><span class="o">.</span><span class="n">digits</span><span class="p">)</span>     <span class="c1"># unbound method</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">is_function_or_cython_function</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">digits</span><span class="p">)</span>  <span class="c1"># bound method</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.sageinspect.isclassinstance">
<span class="sig-prename descclassname"><span class="pre">sage.misc.sageinspect.</span></span><span class="sig-name descname"><span class="pre">isclassinstance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.isclassinstance" title="Permalink to this definition">#</a></dt>
<dd><p>Check if argument is instance of non built-in class</p>
<p>INPUT: <code class="docutils literal notranslate"><span class="pre">obj</span></code> – object</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">isclassinstance</span>
<span class="gp">sage: </span><span class="n">isclassinstance</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">myclass</span><span class="p">:</span> <span class="k">pass</span>
<span class="gp">sage: </span><span class="n">isclassinstance</span><span class="p">(</span><span class="n">myclass</span><span class="p">())</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">isclassinstance</span><span class="p">(</span><span class="n">myclass</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">mymetaclass</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">myclass2</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">mymetaclass</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">sage: </span><span class="n">isclassinstance</span><span class="p">(</span><span class="n">myclass2</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.sageinspect.loadable_module_extension">
<span class="sig-prename descclassname"><span class="pre">sage.misc.sageinspect.</span></span><span class="sig-name descname"><span class="pre">loadable_module_extension</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.loadable_module_extension" title="Permalink to this definition">#</a></dt>
<dd><p>Return the filename extension of loadable modules, including the dot.</p>
<p>It is ‘.dll’ on cygwin, ‘.so’ otherwise.</p>
<p>This function is deprecated.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">loadable_module_extension</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">importlib.machinery</span> <span class="kn">import</span> <span class="n">EXTENSION_SUFFIXES</span>
<span class="gp">sage: </span><span class="n">loadable_module_extension</span><span class="p">()</span> <span class="ow">in</span> <span class="n">EXTENSION_SUFFIXES</span>
<span class="go">doctest:warning...</span>
<span class="go">DeprecationWarning: loadable_module_extension is deprecated; use importlib.machinery.EXTENSION_SUFFIXES instead</span>
<span class="go">See https://github.com/sagemath/sage/issues/33636 for details.</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.sageinspect.sage_formatargspec">
<span class="sig-prename descclassname"><span class="pre">sage.misc.sageinspect.</span></span><span class="sig-name descname"><span class="pre">sage_formatargspec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varargs=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varkw=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">defaults=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwonlyargs=()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwonlydefaults=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotations={}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">formatarg=&lt;class</span> <span class="pre">'str'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">formatvarargs=&lt;function</span> <span class="pre">&lt;lambda&gt;</span> <span class="pre">at</span> <span class="pre">0x7f487a845fc0&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">formatvarkw=&lt;function</span> <span class="pre">&lt;lambda&gt;</span> <span class="pre">at</span> <span class="pre">0x7f487a846050&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">formatvalue=&lt;function</span> <span class="pre">&lt;lambda&gt;</span> <span class="pre">at</span> <span class="pre">0x7f487a8460e0&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">formatreturns=&lt;function</span> <span class="pre">&lt;lambda&gt;</span> <span class="pre">at</span> <span class="pre">0x7f487a846170&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">formatannotation=&lt;function</span> <span class="pre">formatannotation</span> <span class="pre">at</span> <span class="pre">0x7f487a845f30&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.sage_formatargspec" title="Permalink to this definition">#</a></dt>
<dd><p>Format an argument spec from the values returned by getfullargspec.</p>
<p>The first seven arguments are (args, varargs, varkw, defaults,
kwonlyargs, kwonlydefaults, annotations).  The other five arguments
are the corresponding optional formatting functions that are called to
turn names and values into strings.  The last argument is an optional
function to format the sequence of arguments.</p>
<p>This is taken from Python 3.7’s inspect.py, where it is
deprecated. The only change, aside from documentation (this
paragraph and the next, plus doctests), is to remove the
deprecation warning.</p>
<p>Sage uses this function to format arguments, as obtained by
<a class="reference internal" href="#sage.misc.sageinspect.sage_getargspec" title="sage.misc.sageinspect.sage_getargspec"><code class="xref py py-func docutils literal notranslate"><span class="pre">sage_getargspec()</span></code></a>. Since <a class="reference internal" href="#sage.misc.sageinspect.sage_getargspec" title="sage.misc.sageinspect.sage_getargspec"><code class="xref py py-func docutils literal notranslate"><span class="pre">sage_getargspec()</span></code></a> works for
Cython functions while Python’s inspect module does not, it makes
sense to keep this function for formatting instances of
<code class="docutils literal notranslate"><span class="pre">inspect.FullArgSpec</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_formatargspec</span>
<span class="gp">sage: </span><span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">defaults</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">sage_formatargspec</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">defaults</span><span class="o">=</span><span class="n">defaults</span><span class="p">)</span>
<span class="go">&#39;(a, b, c=3)&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.sageinspect.sage_getargspec">
<span class="sig-prename descclassname"><span class="pre">sage.misc.sageinspect.</span></span><span class="sig-name descname"><span class="pre">sage_getargspec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.sage_getargspec" title="Permalink to this definition">#</a></dt>
<dd><p>Return the names and default values of a function’s arguments.</p>
<p>INPUT:</p>
<p><code class="docutils literal notranslate"><span class="pre">obj</span></code>, any callable object</p>
<p>OUTPUT:</p>
<p>An <code class="docutils literal notranslate"><span class="pre">ArgSpec</span></code> is returned. This is a named tuple
<code class="docutils literal notranslate"><span class="pre">(args,</span> <span class="pre">varargs,</span> <span class="pre">keywords,</span> <span class="pre">defaults)</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">args</span></code> is a list of the argument names (it may contain nested lists).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">varargs</span></code> and <code class="docutils literal notranslate"><span class="pre">keywords</span></code> are the names of the <code class="docutils literal notranslate"><span class="pre">*</span></code> and <code class="docutils literal notranslate"><span class="pre">**</span></code>
arguments or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">defaults</span></code> is an <span class="math notranslate nohighlight">\(n\)</span>-tuple of the default values of the last <span class="math notranslate nohighlight">\(n\)</span> arguments.</p></li>
</ul>
<p>NOTE:</p>
<p>If the object has a method <code class="docutils literal notranslate"><span class="pre">_sage_argspec_</span></code> then the output of
that method is transformed into a named tuple and then returned.</p>
<p>If a class instance has a method <code class="docutils literal notranslate"><span class="pre">_sage_src_</span></code> then its output
is  studied to determine the argspec. This is because currently
the <a class="reference internal" href="cachefunc.html#sage.misc.cachefunc.CachedMethod" title="sage.misc.cachefunc.CachedMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">CachedMethod</span></code></a> decorator has
no <code class="docutils literal notranslate"><span class="pre">_sage_argspec_</span></code> method.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getargspec</span>
<span class="gp">sage: </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">keywords</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">pass</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="go">FullArgSpec(args=[&#39;x&#39;, &#39;y&#39;, &#39;z&#39;, &#39;t&#39;], varargs=&#39;args&#39;, varkw=&#39;keywords&#39;, defaults=(1, 2), kwonlyargs=[], kwonlydefaults=None, annotations={})</span>
</pre></div>
</div>
<p>We now run sage_getargspec on some functions from the Sage library:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">identity_matrix</span><span class="p">)</span>
<span class="go">FullArgSpec(args=[&#39;ring&#39;, &#39;n&#39;, &#39;sparse&#39;], varargs=None, varkw=None, defaults=(0, False), kwonlyargs=[], kwonlydefaults=None, annotations={})</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">factor</span><span class="p">)</span>
<span class="go">FullArgSpec(args=[&#39;n&#39;, &#39;proof&#39;, &#39;int_&#39;, &#39;algorithm&#39;, &#39;verbose&#39;], varargs=None, varkw=&#39;kwds&#39;, defaults=(None, False, &#39;pari&#39;, 0), kwonlyargs=[], kwonlydefaults=None, annotations={})</span>
</pre></div>
</div>
<p>In the case of a class or a class instance, the <code class="docutils literal notranslate"><span class="pre">ArgSpec</span></code> of the
<code class="docutils literal notranslate"><span class="pre">__new__</span></code>, <code class="docutils literal notranslate"><span class="pre">__init__</span></code> or <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method is returned:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">P</span><span class="o">.&lt;</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[]</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
<span class="go">FullArgSpec(args=[&#39;base_ring&#39;, &#39;n&#39;, &#39;names&#39;, &#39;order&#39;], varargs=None, varkw=None, defaults=(&#39;degrevlex&#39;,), kwonlyargs=[], kwonlydefaults=None, annotations={})</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">P</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>
<span class="go">FullArgSpec(args=[&#39;self&#39;, &#39;x&#39;], varargs=&#39;args&#39;, varkw=&#39;kwds&#39;, defaults=(0,), kwonlyargs=[], kwonlydefaults=None, annotations={})</span>
</pre></div>
</div>
<p>The following tests against various bugs that were fixed in
<a class="reference external" href="https://github.com/sagemath/sage/issues/9976">github issue #9976</a>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.rings.polynomial.real_roots</span> <span class="kn">import</span> <span class="n">bernstein_polynomial_factory_ratlist</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">bernstein_polynomial_factory_ratlist</span><span class="o">.</span><span class="n">coeffs_bitsize</span><span class="p">)</span>
<span class="go">FullArgSpec(args=[&#39;self&#39;], varargs=None, varkw=None, defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={})</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.rings.polynomial.pbori.pbori</span> <span class="kn">import</span> <span class="n">BooleanMonomialMonoid</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">BooleanMonomialMonoid</span><span class="o">.</span><span class="n">gen</span><span class="p">)</span>
<span class="go">FullArgSpec(args=[&#39;self&#39;, &#39;i&#39;], varargs=None, varkw=None, defaults=(0,), kwonlyargs=[], kwonlydefaults=None, annotations={})</span>
<span class="gp">sage: </span><span class="n">I</span> <span class="o">=</span> <span class="n">P</span><span class="o">*</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">I</span><span class="o">.</span><span class="n">groebner_basis</span><span class="p">)</span>
<span class="go">FullArgSpec(args=[&#39;self&#39;, &#39;algorithm&#39;, &#39;deg_bound&#39;, &#39;mult_bound&#39;, &#39;prot&#39;],</span>
<span class="go">varargs=&#39;args&#39;, varkw=&#39;kwds&#39;, defaults=(&#39;&#39;, None, None, False), kwonlyargs=[], kwonlydefaults=None, annotations={})</span>
<span class="gp">sage: </span><span class="n">cython</span><span class="p">(</span><span class="s2">&quot;cpdef int foo(x,y) except -1: return 1&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="go">FullArgSpec(args=[&#39;x&#39;, &#39;y&#39;], varargs=None, varkw=None, defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={})</span>
</pre></div>
</div>
<p>If a <code class="docutils literal notranslate"><span class="pre">functools.partial</span></code> instance is involved, we see no other meaningful solution
than to return the argspec of the underlying function:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">+</span><span class="n">c</span><span class="o">+</span><span class="n">d</span>
<span class="gp">sage: </span><span class="kn">import</span> <span class="nn">functools</span>
<span class="gp">sage: </span><span class="n">f1</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">f1</span><span class="p">)</span>
<span class="go">FullArgSpec(args=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;], varargs=None, varkw=None, defaults=(1,), kwonlyargs=[], kwonlydefaults=None, annotations={})</span>
</pre></div>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li><p>William Stein: a modified version of inspect.getargspec from the
Python Standard Library, which was taken from IPython for use in Sage.</p></li>
<li><p>Extensions by Nick Alexander</p></li>
<li><p>Simon King: Return an <code class="docutils literal notranslate"><span class="pre">ArgSpec</span></code>, fix some bugs.</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.sageinspect.sage_getdef">
<span class="sig-prename descclassname"><span class="pre">sage.misc.sageinspect.</span></span><span class="sig-name descname"><span class="pre">sage_getdef</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.sage_getdef" title="Permalink to this definition">#</a></dt>
<dd><p>Return the definition header for any callable object.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">obj</span></code> - function</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">obj_name</span></code> - string (optional, default ‘’)</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">obj_name</span></code> is prepended to the output.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getdef</span>
<span class="gp">sage: </span><span class="n">sage_getdef</span><span class="p">(</span><span class="n">identity_matrix</span><span class="p">)</span>
<span class="go">&#39;(ring, n=0, sparse=False)&#39;</span>
<span class="gp">sage: </span><span class="n">sage_getdef</span><span class="p">(</span><span class="n">identity_matrix</span><span class="p">,</span> <span class="s1">&#39;identity_matrix&#39;</span><span class="p">)</span>
<span class="go">&#39;identity_matrix(ring, n=0, sparse=False)&#39;</span>
</pre></div>
</div>
<p>Check that <a class="reference external" href="https://github.com/sagemath/sage/issues/6848">github issue #6848</a> has been fixed:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sage_getdef</span><span class="p">(</span><span class="n">RDF</span><span class="o">.</span><span class="n">random_element</span><span class="p">)</span>
<span class="go">&#39;(min=-1, max=1)&#39;</span>
</pre></div>
</div>
<p>If an exception is generated, None is returned instead and the
exception is suppressed.</p>
<p>AUTHORS:</p>
<ul class="simple">
<li><p>William Stein</p></li>
<li><p>extensions by Nick Alexander</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.sageinspect.sage_getdoc">
<span class="sig-prename descclassname"><span class="pre">sage.misc.sageinspect.</span></span><span class="sig-name descname"><span class="pre">sage_getdoc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">embedded</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.sage_getdoc" title="Permalink to this definition">#</a></dt>
<dd><p>Return the docstring associated to <code class="docutils literal notranslate"><span class="pre">obj</span></code> as a string.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">obj</span></code> is a Cython object with an embedded position in its
docstring, the embedded position is stripped.</p>
<p>The optional boolean argument <code class="docutils literal notranslate"><span class="pre">embedded</span></code> controls the
string formatting. It is False by default.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">obj</span></code> – a function, module, etc.: something with a docstring.</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getdoc</span>
<span class="gp">sage: </span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">identity_matrix</span><span class="p">)[</span><span class="mi">87</span><span class="p">:</span><span class="mi">124</span><span class="p">]</span>
<span class="go">&#39;Return the n x n identity matrix over&#39;</span>
<span class="gp">sage: </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span> <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">+</span><span class="n">c</span><span class="o">+</span><span class="n">d</span>
<span class="go">...</span>
<span class="gp">sage: </span><span class="kn">import</span> <span class="nn">functools</span>
<span class="gp">sage: </span><span class="n">f1</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">f</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;original documentation&quot;</span>
<span class="gp">sage: </span><span class="n">f1</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;specialised documentation&quot;</span>
<span class="gp">sage: </span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="go">&#39;original documentation\n&#39;</span>
<span class="gp">sage: </span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">f1</span><span class="p">)</span>
<span class="go">&#39;specialised documentation\n&#39;</span>
</pre></div>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li><p>William Stein</p></li>
<li><p>extensions by Nick Alexander</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.sageinspect.sage_getdoc_original">
<span class="sig-prename descclassname"><span class="pre">sage.misc.sageinspect.</span></span><span class="sig-name descname"><span class="pre">sage_getdoc_original</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.sage_getdoc_original" title="Permalink to this definition">#</a></dt>
<dd><p>Return the unformatted docstring associated to <code class="docutils literal notranslate"><span class="pre">obj</span></code> as a
string.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">obj</span></code> is a Cython object with an embedded position or signature in
its docstring, the embedded information is stripped. If the stripped
docstring is empty, then the stripped docstring of <code class="docutils literal notranslate"><span class="pre">obj.__init__</span></code> is
returned instead.</p>
<p>Feed the results from this into the function
<a class="reference internal" href="sagedoc.html#sage.misc.sagedoc.format" title="sage.misc.sagedoc.format"><code class="xref py py-func docutils literal notranslate"><span class="pre">sage.misc.sagedoc.format()</span></code></a> for printing to the screen.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">obj</span></code> – a function, module, etc.: something with a docstring.</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getdoc_original</span>
</pre></div>
</div>
<p>Here is a class that has its own docstring:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="nb">print</span><span class="p">(</span><span class="n">sage_getdoc_original</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">integer</span><span class="o">.</span><span class="n">Integer</span><span class="p">))</span>

<span class="go">    The :class:`Integer` class represents arbitrary precision</span>
<span class="go">    integers. It derives from the :class:`Element` class, so</span>
<span class="go">    integers can be used as ring elements anywhere in Sage.</span>
<span class="go">...</span>
</pre></div>
</div>
<p>If the class does not have a docstring, the docstring of the
<code class="docutils literal notranslate"><span class="pre">__init__</span></code> method is used, but not the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method
of the base class (this was fixed in <a class="reference external" href="https://github.com/sagemath/sage/issues/24936">github issue #24936</a>):</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.categories.category</span> <span class="kn">import</span> <span class="n">Category</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="n">Category</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="sd">&#39;&#39;&#39;The __init__ docstring&#39;&#39;&#39;</span>
<span class="gp">sage: </span><span class="n">sage_getdoc_original</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="go">&#39;The __init__ docstring&#39;</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">Category</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">pass</span>
<span class="gp">sage: </span><span class="n">sage_getdoc_original</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<span class="go">&#39;&#39;</span>
</pre></div>
</div>
<p>Old-style classes are supported:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">class</span> <span class="nc">OldStyleClass</span><span class="p">:</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="sd">&#39;&#39;&#39;The __init__ docstring&#39;&#39;&#39;</span>
<span class="gp">....: </span>        <span class="k">pass</span>
<span class="gp">sage: </span><span class="nb">print</span><span class="p">(</span><span class="n">sage_getdoc_original</span><span class="p">(</span><span class="n">OldStyleClass</span><span class="p">))</span>
<span class="go">The __init__ docstring</span>
</pre></div>
</div>
<p>When there is no <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method, we just get an empty string:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">class</span> <span class="nc">OldStyleClass</span><span class="p">:</span>
<span class="gp">....: </span>    <span class="k">pass</span>
<span class="gp">sage: </span><span class="n">sage_getdoc_original</span><span class="p">(</span><span class="n">OldStyleClass</span><span class="p">)</span>
<span class="go">&#39;&#39;</span>
</pre></div>
</div>
<p>If an instance of a class does not have its own docstring, the docstring
of its class results:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sage_getdoc_original</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">aliceblue</span><span class="p">)</span> <span class="o">==</span> <span class="n">sage_getdoc_original</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Color</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.sageinspect.sage_getfile">
<span class="sig-prename descclassname"><span class="pre">sage.misc.sageinspect.</span></span><span class="sig-name descname"><span class="pre">sage_getfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.sage_getfile" title="Permalink to this definition">#</a></dt>
<dd><p>Get the full file name associated to <code class="docutils literal notranslate"><span class="pre">obj</span></code> as a string.</p>
<p>INPUT: <code class="docutils literal notranslate"><span class="pre">obj</span></code>, a Sage object, module, etc.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getfile</span>
<span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="p">)</span>
<span class="go">&#39;...sage/rings/rational.pyx&#39;</span>
<span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">Sq</span><span class="p">)</span>
<span class="go">&#39;...sage/algebras/steenrod/steenrod_algebra.py&#39;</span>
<span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">&#39;...sage/symbolic/expression.pyx&#39;</span>
</pre></div>
</div>
<p>The following tests against some bugs fixed in <a class="reference external" href="https://github.com/sagemath/sage/issues/9976">github issue #9976</a>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">obj</span> <span class="o">=</span> <span class="n">sage</span><span class="o">.</span><span class="n">combinat</span><span class="o">.</span><span class="n">partition_algebra</span><span class="o">.</span><span class="n">SetPartitionsAk</span>
<span class="gp">sage: </span><span class="n">obj</span> <span class="o">=</span> <span class="n">sage</span><span class="o">.</span><span class="n">combinat</span><span class="o">.</span><span class="n">partition_algebra</span><span class="o">.</span><span class="n">SetPartitionsAk</span>
<span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="go">&#39;...sage/combinat/partition_algebra.py&#39;</span>
</pre></div>
</div>
<p>And here is another bug, fixed in <a class="reference external" href="https://github.com/sagemath/sage/issues/11298">github issue #11298</a>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">P</span><span class="o">.&lt;</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[]</span>
<span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
<span class="go">&#39;...sage/rings/polynomial/multi_polynomial_libsingular...&#39;</span>
</pre></div>
</div>
<p>A problem fixed in <a class="reference external" href="https://github.com/sagemath/sage/issues/16309">github issue #16309</a>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">cython</span><span class="p">(</span>                           <span class="c1"># optional - sage.misc.cython</span>
<span class="gp">....: </span><span class="sd">&#39;&#39;&#39;</span>
<span class="gp">....: </span><span class="sd">class Bar: pass</span>
<span class="gp">....: </span><span class="sd">cdef class Foo: pass</span>
<span class="gp">....: </span><span class="sd">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">Bar</span><span class="p">)</span>                 <span class="c1"># optional - sage.misc.cython</span>
<span class="go">&#39;...pyx&#39;</span>
<span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">Foo</span><span class="p">)</span>                 <span class="c1"># optional - sage.misc.cython</span>
<span class="go">&#39;...pyx&#39;</span>
</pre></div>
</div>
<p>By <a class="reference external" href="https://github.com/sagemath/sage/issues/18249">github issue #18249</a>, we return an empty string for Python builtins. In that
way, there is no error when the user types, for example, <code class="docutils literal notranslate"><span class="pre">range?</span></code>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="nb">range</span><span class="p">)</span>
<span class="go">&#39;&#39;</span>
</pre></div>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li><p>Nick Alexander</p></li>
<li><p>Simon King</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.sageinspect.sage_getfile_relative">
<span class="sig-prename descclassname"><span class="pre">sage.misc.sageinspect.</span></span><span class="sig-name descname"><span class="pre">sage_getfile_relative</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.sage_getfile_relative" title="Permalink to this definition">#</a></dt>
<dd><p>Get the file name associated to <code class="docutils literal notranslate"><span class="pre">obj</span></code> as a string.</p>
<p>This is the same as <a class="reference internal" href="#sage.misc.sageinspect.sage_getfile" title="sage.misc.sageinspect.sage_getfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">sage_getfile()</span></code></a>, but
if the source file is part of the <code class="docutils literal notranslate"><span class="pre">sage.*</span></code> namespace, it
makes the file name relative so that it starts with <code class="docutils literal notranslate"><span class="pre">sage/</span></code>.</p>
<p>INPUT: <code class="docutils literal notranslate"><span class="pre">obj</span></code>, a Sage object, module, etc.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getfile_relative</span>
<span class="gp">sage: </span><span class="n">sage_getfile_relative</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="p">)</span>
<span class="go">&#39;sage/rings/rational.pyx&#39;</span>
<span class="gp">sage: </span><span class="n">sage_getfile_relative</span><span class="p">(</span><span class="n">Sq</span><span class="p">)</span>
<span class="go">&#39;sage/algebras/steenrod/steenrod_algebra.py&#39;</span>
<span class="gp">sage: </span><span class="n">sage_getfile_relative</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">&#39;sage/symbolic/expression.pyx&#39;</span>
<span class="gp">sage: </span><span class="n">sage_getfile_relative</span><span class="p">(</span><span class="nb">range</span><span class="p">)</span>
<span class="go">&#39;&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.sageinspect.sage_getsource">
<span class="sig-prename descclassname"><span class="pre">sage.misc.sageinspect.</span></span><span class="sig-name descname"><span class="pre">sage_getsource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.sage_getsource" title="Permalink to this definition">#</a></dt>
<dd><p>Return the source code associated to obj as a string, or None.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">obj</span></code> – function, etc.</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getsource</span>
<span class="gp">sage: </span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">identity_matrix</span><span class="p">)[</span><span class="mi">19</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span>
<span class="go">&#39;identity_matrix(ring, n=0, sparse=False):&#39;</span>
<span class="gp">sage: </span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">identity_matrix</span><span class="p">)[</span><span class="mi">19</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span>
<span class="go">&#39;identity_matrix(ring, n=0, sparse=False):&#39;</span>
</pre></div>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li><p>William Stein</p></li>
<li><p>extensions by Nick Alexander</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.sageinspect.sage_getsourcelines">
<span class="sig-prename descclassname"><span class="pre">sage.misc.sageinspect.</span></span><span class="sig-name descname"><span class="pre">sage_getsourcelines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.sage_getsourcelines" title="Permalink to this definition">#</a></dt>
<dd><p>Return a pair ([source_lines], starting line number) of the source
code associated to obj, or None.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">obj</span></code> – function, etc.</p></li>
</ul>
<p>OUTPUT:</p>
<p>(source_lines, lineno) or None: <code class="docutils literal notranslate"><span class="pre">source_lines</span></code> is a list of
strings, and <code class="docutils literal notranslate"><span class="pre">lineno</span></code> is an integer.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getsourcelines</span>
<span class="gp">sage: </span><span class="n">sage_getsourcelines</span><span class="p">(</span><span class="n">matrix</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">21</span>
<span class="gp">sage: </span><span class="n">sage_getsourcelines</span><span class="p">(</span><span class="n">matrix</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&#39;def matrix(*args, **kwds):\n&#39;</span>
</pre></div>
</div>
<p>Some classes customize this using a <code class="docutils literal notranslate"><span class="pre">_sage_src_lines_</span></code> method,
which gives the source lines of a class instance, but not the class
itself. We demonstrate this for <a class="reference internal" href="cachefunc.html#sage.misc.cachefunc.CachedFunction" title="sage.misc.cachefunc.CachedFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">CachedFunction</span></code></a>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">cachedfib</span> <span class="o">=</span> <span class="n">cached_function</span><span class="p">(</span><span class="n">fibonacci</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sage_getsourcelines</span><span class="p">(</span><span class="n">cachedfib</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&#39;def fibonacci(n, algorithm=&quot;pari&quot;) -&gt; Integer:\n&#39;</span>
<span class="gp">sage: </span><span class="n">sage_getsourcelines</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">cachedfib</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&#39;cdef class CachedFunction():\n&#39;</span>
</pre></div>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li><p>William Stein</p></li>
<li><p>Extensions by Nick Alexander</p></li>
<li><p>Extension to interactive Cython code by Simon King</p></li>
<li><p>Simon King: If a class has no docstring then let the class
definition be found starting from the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method.</p></li>
<li><p>Simon King: Get source lines for dynamic classes.</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.sageinspect.sage_getvariablename">
<span class="sig-prename descclassname"><span class="pre">sage.misc.sageinspect.</span></span><span class="sig-name descname"><span class="pre">sage_getvariablename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">omit_underscore_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.sageinspect.sage_getvariablename" title="Permalink to this definition">#</a></dt>
<dd><p>Attempt to get the name of a Sage object.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">self</span></code> – any object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">omit_underscore_names</span></code> – boolean, default <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
<p>OUTPUT:</p>
<p>If the user has assigned an object <code class="docutils literal notranslate"><span class="pre">obj</span></code> to a variable name,
then return that variable name.  If several variables point to
<code class="docutils literal notranslate"><span class="pre">obj</span></code>, return a sorted list of those names.  If
<code class="docutils literal notranslate"><span class="pre">omit_underscore_names</span></code> is True (the default) then omit names
starting with an underscore “_”.</p>
<p>This is a modified version of code taken from
<a class="reference external" href="http://pythonic.pocoo.org/2009/5/30/finding-objects-names">http://pythonic.pocoo.org/2009/5/30/finding-objects-names</a>,
written by Georg Brandl.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getvariablename</span>
<span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">random_matrix</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sage_getvariablename</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="go">&#39;A&#39;</span>
<span class="gp">sage: </span><span class="n">B</span> <span class="o">=</span> <span class="n">A</span>
<span class="gp">sage: </span><span class="n">sage_getvariablename</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="go">[&#39;A&#39;, &#39;B&#39;]</span>
</pre></div>
</div>
<p>If an object is not assigned to a variable, an empty list is returned:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">sage_getvariablename</span><span class="p">(</span><span class="n">random_matrix</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span> <span class="mi">60</span><span class="p">))</span>
<span class="go">[]</span>
</pre></div>
</div>
</dd></dl>

</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="edit_module.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Edit the source code of Sage interactively</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../docs/instancedoc.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Dynamic documentation for instances of classes</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2005--2023, The Sage Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Inspect Python, Sage, and Cython objects</a><ul>
<li><a class="reference internal" href="#sage.misc.sageinspect.BlockFinder"><code class="docutils literal notranslate"><span class="pre">BlockFinder</span></code></a><ul>
<li><a class="reference internal" href="#sage.misc.sageinspect.BlockFinder.tokeneater"><code class="docutils literal notranslate"><span class="pre">tokeneater()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sage.misc.sageinspect.SageArgSpecVisitor"><code class="docutils literal notranslate"><span class="pre">SageArgSpecVisitor</span></code></a><ul>
<li><a class="reference internal" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_BinOp"><code class="docutils literal notranslate"><span class="pre">visit_BinOp()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_BoolOp"><code class="docutils literal notranslate"><span class="pre">visit_BoolOp()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_Compare"><code class="docutils literal notranslate"><span class="pre">visit_Compare()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_Dict"><code class="docutils literal notranslate"><span class="pre">visit_Dict()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_List"><code class="docutils literal notranslate"><span class="pre">visit_List()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_Name"><code class="docutils literal notranslate"><span class="pre">visit_Name()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_NameConstant"><code class="docutils literal notranslate"><span class="pre">visit_NameConstant()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_Num"><code class="docutils literal notranslate"><span class="pre">visit_Num()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_Str"><code class="docutils literal notranslate"><span class="pre">visit_Str()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_Tuple"><code class="docutils literal notranslate"><span class="pre">visit_Tuple()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_UnaryOp"><code class="docutils literal notranslate"><span class="pre">visit_UnaryOp()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_arg"><code class="docutils literal notranslate"><span class="pre">visit_arg()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sage.misc.sageinspect.formatannotation"><code class="docutils literal notranslate"><span class="pre">formatannotation()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.is_function_or_cython_function"><code class="docutils literal notranslate"><span class="pre">is_function_or_cython_function()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.isclassinstance"><code class="docutils literal notranslate"><span class="pre">isclassinstance()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.loadable_module_extension"><code class="docutils literal notranslate"><span class="pre">loadable_module_extension()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.sage_formatargspec"><code class="docutils literal notranslate"><span class="pre">sage_formatargspec()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.sage_getargspec"><code class="docutils literal notranslate"><span class="pre">sage_getargspec()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.sage_getdef"><code class="docutils literal notranslate"><span class="pre">sage_getdef()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.sage_getdoc"><code class="docutils literal notranslate"><span class="pre">sage_getdoc()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.sage_getdoc_original"><code class="docutils literal notranslate"><span class="pre">sage_getdoc_original()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.sage_getfile"><code class="docutils literal notranslate"><span class="pre">sage_getfile()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.sage_getfile_relative"><code class="docutils literal notranslate"><span class="pre">sage_getfile_relative()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.sage_getsource"><code class="docutils literal notranslate"><span class="pre">sage_getsource()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.sage_getsourcelines"><code class="docutils literal notranslate"><span class="pre">sage_getsourcelines()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.sageinspect.sage_getvariablename"><code class="docutils literal notranslate"><span class="pre">sage_getvariablename()</span></code></a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>window.MathJax = {"tex": {"macros": {"ZZ": "\\Bold{Z}", "NN": "\\Bold{N}", "RR": "\\Bold{R}", "CC": "\\Bold{C}", "QQ": "\\Bold{Q}", "QQbar": "\\overline{\\QQ}", "GF": ["\\Bold{F}_{#1}", 1], "Zp": ["\\Bold{Z}_{#1}", 1], "Qp": ["\\Bold{Q}_{#1}", 1], "Zmod": ["\\ZZ/#1\\ZZ", 1], "CDF": "\\Bold{C}", "CIF": "\\Bold{C}", "CLF": "\\Bold{C}", "RDF": "\\Bold{R}", "RIF": "\\Bold{I} \\Bold{R}", "RLF": "\\Bold{R}", "SL": "\\mathrm{SL}", "PSL": "\\mathrm{PSL}", "lcm": "\\mathop{\\operatorname{lcm}}", "Bold": ["\\mathbf{#1}", 1]}, "inlineMath": [["$", "$"], ["\\(", "\\)"]], "maxBuffer": 51200, "autoload": {"color": [], "colorv2": ["color"]}}}</script>
    <script defer="defer" src="../../../_static/mathjax/tex-chtml.js"></script>
    </body>
</html>