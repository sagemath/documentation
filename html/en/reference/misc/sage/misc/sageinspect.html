<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Inspect Python, Sage, and Cython objects &mdash; Sage Reference Manual v6.10: Utilities</title>
    
    <link rel="stylesheet" href="../../../_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '6.10',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="top" title="Sage Reference Manual v6.10: Utilities" href="../../index.html" />
    <link rel="next" title="Edit the source code of Sage interactively" href="edit_module.html" />
    <link rel="prev" title="C Function Profiler Using Google Perftools" href="gperftools.html" />
    <link rel="icon" href="../../../_static/sageicon.png" type="image/x-icon" />

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="edit_module.html" title="Edit the source code of Sage interactively"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="gperftools.html" title="C Function Profiler Using Google Perftools"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="../../index.html">Utilities</a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="inspect-python-sage-and-cython-objects">
<span id="sage-misc-sageinspect"></span><h1>Inspect Python, Sage, and Cython objects<a class="headerlink" href="#inspect-python-sage-and-cython-objects" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-sage.misc.sageinspect"></span><p>This module extends parts of Python&#8217;s inspect module to Cython objects.</p>
<p>AUTHORS:</p>
<ul class="simple">
<li>originally taken from Fernando Perez&#8217;s IPython</li>
<li>William Stein (extensive modifications)</li>
<li>Nick Alexander (extensions)</li>
<li>Nick Alexander (testing)</li>
<li>Simon King (some extension for Cython, generalisation of SageArgSpecVisitor)</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>Test introspection of modules defined in Python and Cython files:</p>
<p>Cython modules:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="p">)</span>
<span class="go">&#39;.../rational.pyx&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span>
<span class="go">&#39;Rational Numbers...&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="p">)[</span><span class="mi">5</span><span class="p">:]</span>
<span class="go">&#39;Rational Numbers...&#39;</span>
</pre></div>
</div>
<p>Python modules:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="p">)</span>
<span class="go">&#39;.../sageinspect.py&#39;</span>

<span class="gp">sage: </span><span class="k">print</span> <span class="n">sage_getdoc</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()[:</span><span class="mi">40</span><span class="p">]</span>
<span class="go">Inspect Python, Sage, and Cython objects</span>

<span class="gp">sage: </span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()[</span><span class="mi">5</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="go">&#39;Inspect Python, Sage, and Cython objects...&#39;</span>
</pre></div>
</div>
<p>Test introspection of classes defined in Python and Cython files:</p>
<p>Cython classes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="o">.</span><span class="n">Rational</span><span class="p">)</span>
<span class="go">&#39;.../rational.pyx&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="o">.</span><span class="n">Rational</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span>
<span class="go">&#39;A rational number...&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="o">.</span><span class="n">Rational</span><span class="p">)</span>
<span class="go">&#39;cdef class Rational...&#39;</span>
</pre></div>
</div>
<p>Python classes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">BlockFinder</span><span class="p">)</span>
<span class="go">&#39;.../sage/misc/sageinspect.py&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">BlockFinder</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span>
<span class="go">&#39;Provide a tokeneater() method to detect the...&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">BlockFinder</span><span class="p">)</span>
<span class="go">&#39;class BlockFinder:...&#39;</span>
</pre></div>
</div>
<p>Test introspection of functions defined in Python and Cython files:</p>
<p>Cython functions:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">sage_getdef</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="o">.</span><span class="n">make_rational</span><span class="p">,</span> <span class="n">obj_name</span><span class="o">=</span><span class="s">&#39;mr&#39;</span><span class="p">)</span>
<span class="go">&#39;mr(s)&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="o">.</span><span class="n">make_rational</span><span class="p">)</span>
<span class="go">&#39;.../rational.pyx&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="o">.</span><span class="n">make_rational</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span>
<span class="go">&#39;Make a rational number ...&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="o">.</span><span class="n">make_rational</span><span class="p">)[</span><span class="mi">4</span><span class="p">:]</span>
<span class="go">&#39;make_rational(s):...&#39;</span>
</pre></div>
</div>
<p>Python functions:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">sage_getdef</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="o">.</span><span class="n">sage_getfile</span><span class="p">,</span> <span class="n">obj_name</span><span class="o">=</span><span class="s">&#39;sage_getfile&#39;</span><span class="p">)</span>
<span class="go">&#39;sage_getfile(obj)&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="o">.</span><span class="n">sage_getfile</span><span class="p">)</span>
<span class="go">&#39;.../sageinspect.py&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="o">.</span><span class="n">sage_getfile</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span>
<span class="go">&#39;Get the full file name associated to &quot;obj&quot; as a string...&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="o">.</span><span class="n">sage_getfile</span><span class="p">)[</span><span class="mi">4</span><span class="p">:]</span>
<span class="go">&#39;sage_getfile(obj):...&#39;</span>
</pre></div>
</div>
<p>Unfortunately, no argspec is extractable from builtins. Hence, we use a
generic argspec:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">sage_getdef</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">find</span><span class="p">,</span> <span class="s">&#39;find&#39;</span><span class="p">)</span>
<span class="go">&#39;find(*args, **kwds)&#39;</span>

<span class="gp">sage: </span><span class="n">sage_getdef</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">find</span><span class="p">,</span> <span class="s">&#39;find&#39;</span><span class="p">)</span>
<span class="go">&#39;find(*args, **kwds)&#39;</span>
</pre></div>
</div>
<p>By <a class="reference external" href="http://trac.sagemath.org/9976">trac ticket #9976</a> and <a class="reference external" href="http://trac.sagemath.org/14017">trac ticket #14017</a>, introspection also works for interactively
defined Cython code, and with rather tricky argument lines:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">cython</span><span class="p">(</span><span class="s">&#39;def foo(unsigned int x=1, a=</span><span class="se">\&#39;</span><span class="s">)&quot;</span><span class="se">\&#39;</span><span class="s">, b={not (2+1==3):</span><span class="se">\&#39;</span><span class="s">bar</span><span class="se">\&#39;</span><span class="s">}, *args, **kwds): return&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="k">print</span> <span class="n">sage_getsource</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="go">def foo(unsigned int x=1, a=&#39;)&quot;&#39;, b={not (2+1==3):&#39;bar&#39;}, *args, **kwds): return</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;x&#39;, &#39;a&#39;, &#39;b&#39;], varargs=&#39;args&#39;, keywords=&#39;kwds&#39;, defaults=(1, &#39;)&quot;&#39;, {False: &#39;bar&#39;}))</span>
</pre></div>
</div>
<dl class="class">
<dt id="sage.misc.sageinspect.BlockFinder">
<em class="property">class </em><tt class="descclassname">sage.misc.sageinspect.</tt><tt class="descname">BlockFinder</tt><a class="headerlink" href="#sage.misc.sageinspect.BlockFinder" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide a tokeneater() method to detect the end of a code block.</p>
<p>This is the Python library&#8217;s <tt class="xref py py-class docutils literal"><span class="pre">inspect.BlockFinder</span></tt> modified
to recognize Cython definitions.</p>
<dl class="method">
<dt id="sage.misc.sageinspect.BlockFinder.tokeneater">
<tt class="descname">tokeneater</tt><big>(</big><em>type</em>, <em>token</em>, <em>srow_scol</em>, <em>erow_ecol</em>, <em>line</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.BlockFinder.tokeneater" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.misc.sageinspect.SageArgSpecVisitor">
<em class="property">class </em><tt class="descclassname">sage.misc.sageinspect.</tt><tt class="descname">SageArgSpecVisitor</tt><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/library/ast.html#ast.NodeVisitor" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">ast.NodeVisitor</span></tt></a></p>
<p>A simple visitor class that walks an abstract-syntax tree (AST)
for a Python function&#8217;s argspec.  It returns the contents of nodes
representing the basic Python types: None, booleans, numbers,
strings, lists, tuples, and dictionaries.  We use this class in
<tt class="xref py py-func docutils literal"><span class="pre">_sage_getargspec_from_ast()</span></tt> to extract an argspec from a
function&#8217;s or method&#8217;s source code.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">visitor</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;[1,2,3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="go">[1, 2, 3]</span>
<span class="gp">sage: </span><span class="n">visitor</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&quot;{&#39;a&#39;:(&#39;e&#39;,2,[None,({False:True},&#39;pi&#39;)]), 37.0:&#39;temp&#39;}&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="go">{37.0: &#39;temp&#39;, &#39;a&#39;: (&#39;e&#39;, 2, [None, ({False: True}, &#39;pi&#39;)])}</span>
<span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&quot;jc = [&#39;veni&#39;, &#39;vidi&#39;, &#39;vici&#39;]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="n">v</span>
<span class="go">&lt;_ast.Assign object at ...&gt;</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;__&#39;</span><span class="p">)]</span>
<span class="go">[&#39;_attributes&#39;, &#39;_fields&#39;, &#39;col_offset&#39;, &#39;lineno&#39;, &#39;targets&#39;, &#39;value&#39;]</span>
<span class="gp">sage: </span><span class="n">visitor</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">targets</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="go">&#39;jc&#39;</span>
<span class="gp">sage: </span><span class="n">visitor</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="go">[&#39;veni&#39;, &#39;vidi&#39;, &#39;vici&#39;]</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.misc.sageinspect.SageArgSpecVisitor.visit_BinOp">
<tt class="descname">visit_BinOp</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_BinOp" title="Permalink to this definition">¶</a></dt>
<dd><p>Visit a Python AST <tt class="xref py py-class docutils literal"><span class="pre">ast.BinOp</span></tt> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">node</span></tt> - the node instance to visit</li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li>The result that <tt class="docutils literal"><span class="pre">node</span></tt> represents</li>
</ul>
<p>AUTHOR:</p>
<ul class="simple">
<li>Simon King</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;(3+(2*4))&#39;</span><span class="p">,</span> <span class="s">&#39;7|8&#39;</span><span class="p">,</span> <span class="s">&#39;5^3&#39;</span><span class="p">,</span> <span class="s">&#39;7/3&#39;</span><span class="p">,</span> <span class="s">&#39;7//3&#39;</span><span class="p">,</span> <span class="s">&#39;3&lt;&lt;4&#39;</span><span class="p">]]</span> <span class="c">#indirect doctest</span>
<span class="go">[11, 15, 6, 2, 2, 48]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sageinspect.SageArgSpecVisitor.visit_BoolOp">
<tt class="descname">visit_BoolOp</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_BoolOp" title="Permalink to this definition">¶</a></dt>
<dd><p>Visit a Python AST <tt class="xref py py-class docutils literal"><span class="pre">ast.BoolOp</span></tt> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">node</span></tt> - the node instance to visit</li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li>The result that <tt class="docutils literal"><span class="pre">node</span></tt> represents</li>
</ul>
<p>AUTHOR:</p>
<ul class="simple">
<li>Simon King</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;True and 1&#39;</span><span class="p">,</span> <span class="s">&#39;False or 3 or None&#39;</span><span class="p">,</span> <span class="s">&#39;3 and 4&#39;</span><span class="p">]]</span> <span class="c">#indirect doctest</span>
<span class="go">[1, 3, 4]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sageinspect.SageArgSpecVisitor.visit_Compare">
<tt class="descname">visit_Compare</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_Compare" title="Permalink to this definition">¶</a></dt>
<dd><p>Visit a Python AST <tt class="xref py py-class docutils literal"><span class="pre">ast.Compare</span></tt> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">node</span></tt> - the node instance to visit</li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li>The result that <tt class="docutils literal"><span class="pre">node</span></tt> represents</li>
</ul>
<p>AUTHOR:</p>
<ul class="simple">
<li>Simon King</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit_Compare</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;1&lt;2==2!=3&#39;</span><span class="p">,</span> <span class="s">&#39;1==1&gt;2&#39;</span><span class="p">,</span> <span class="s">&#39;1&lt;2&gt;1&#39;</span><span class="p">,</span> <span class="s">&#39;1&lt;3&lt;2&lt;4&#39;</span><span class="p">]]</span>
<span class="go">[True, False, True, False]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sageinspect.SageArgSpecVisitor.visit_Dict">
<tt class="descname">visit_Dict</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_Dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Visit a Python AST <tt class="xref py py-class docutils literal"><span class="pre">ast.Dict</span></tt> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">node</span></tt> - the node instance to visit</li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li>the dictionary the <tt class="docutils literal"><span class="pre">node</span></tt> represents</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit_Dict</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;{}&#39;</span><span class="p">,</span> <span class="s">&quot;{1:one, &#39;two&#39;:2, other:bother}&quot;</span><span class="p">]]</span>
<span class="go">[{}, {1: &#39;one&#39;, &#39;other&#39;: &#39;bother&#39;, &#39;two&#39;: 2}]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sageinspect.SageArgSpecVisitor.visit_List">
<tt class="descname">visit_List</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_List" title="Permalink to this definition">¶</a></dt>
<dd><p>Visit a Python AST <tt class="xref py py-class docutils literal"><span class="pre">ast.List</span></tt> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">node</span></tt> - the node instance to visit</li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li>the list the <tt class="docutils literal"><span class="pre">node</span></tt> represents</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit_List</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;[]&#39;</span><span class="p">,</span> <span class="s">&quot;[&#39;s&#39;, &#39;t&#39;, &#39;u&#39;]&quot;</span><span class="p">,</span> <span class="s">&#39;[[e], [], [pi]]&#39;</span><span class="p">]]</span>
<span class="go">[[], [&#39;s&#39;, &#39;t&#39;, &#39;u&#39;], [[&#39;e&#39;], [], [&#39;pi&#39;]]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sageinspect.SageArgSpecVisitor.visit_Name">
<tt class="descname">visit_Name</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_Name" title="Permalink to this definition">¶</a></dt>
<dd><p>Visit a Python AST <tt class="xref py py-class docutils literal"><span class="pre">ast.Name</span></tt> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">node</span></tt> - the node instance to visit</li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li>None, True, False, or the <tt class="docutils literal"><span class="pre">node</span></tt>&#8216;s name as a string.</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit_Name</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;True&#39;</span><span class="p">,</span> <span class="s">&#39;False&#39;</span><span class="p">,</span> <span class="s">&#39;None&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">]]</span>
<span class="go">[True, False, None, &#39;foo&#39;, &#39;bar&#39;]</span>
<span class="gp">sage: </span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="n">vis</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;True&#39;</span><span class="p">,</span> <span class="s">&#39;False&#39;</span><span class="p">,</span> <span class="s">&#39;None&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">]]</span>
<span class="go">[&lt;type &#39;bool&#39;&gt;, &lt;type &#39;bool&#39;&gt;, &lt;type &#39;NoneType&#39;&gt;, &lt;type &#39;str&#39;&gt;, &lt;type &#39;str&#39;&gt;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sageinspect.SageArgSpecVisitor.visit_Num">
<tt class="descname">visit_Num</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_Num" title="Permalink to this definition">¶</a></dt>
<dd><p>Visit a Python AST <tt class="xref py py-class docutils literal"><span class="pre">ast.Num</span></tt> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">node</span></tt> - the node instance to visit</li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li>the number the <tt class="docutils literal"><span class="pre">node</span></tt> represents</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit_Num</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;123&#39;</span><span class="p">,</span> <span class="s">&#39;0.0&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="n">pi</span><span class="o">.</span><span class="n">n</span><span class="p">())]]</span>
<span class="go">[123, 0.0, -3.14159265358979]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sageinspect.SageArgSpecVisitor.visit_Str">
<tt class="descname">visit_Str</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_Str" title="Permalink to this definition">¶</a></dt>
<dd><p>Visit a Python AST <tt class="xref py py-class docutils literal"><span class="pre">ast.Str</span></tt> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">node</span></tt> - the node instance to visit</li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li>the string the <tt class="docutils literal"><span class="pre">node</span></tt> represents</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit_Str</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;&quot;abstract&quot;&#39;</span><span class="p">,</span> <span class="s">&quot;u&#39;syntax&#39;&quot;</span><span class="p">,</span> <span class="s">&#39;&#39;&#39;r&quot;tr\ee&quot;&#39;&#39;&#39;</span><span class="p">]]</span>
<span class="go">[&#39;abstract&#39;, u&#39;syntax&#39;, &#39;tr\\ee&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sageinspect.SageArgSpecVisitor.visit_Tuple">
<tt class="descname">visit_Tuple</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_Tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>Visit a Python AST <tt class="xref py py-class docutils literal"><span class="pre">ast.Tuple</span></tt> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">node</span></tt> - the node instance to visit</li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li>the tuple the <tt class="docutils literal"><span class="pre">node</span></tt> represents</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit_Tuple</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;()&#39;</span><span class="p">,</span> <span class="s">&#39;(x,y)&#39;</span><span class="p">,</span> <span class="s">&#39;(&quot;Au&quot;, &quot;Al&quot;, &quot;Cu&quot;)&#39;</span><span class="p">]]</span>
<span class="go">[(), (&#39;x&#39;, &#39;y&#39;), (&#39;Au&#39;, &#39;Al&#39;, &#39;Cu&#39;)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.misc.sageinspect.SageArgSpecVisitor.visit_UnaryOp">
<tt class="descname">visit_UnaryOp</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.SageArgSpecVisitor.visit_UnaryOp" title="Permalink to this definition">¶</a></dt>
<dd><p>Visit a Python AST <tt class="xref py py-class docutils literal"><span class="pre">ast.BinOp</span></tt> node.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">node</span></tt> - the node instance to visit</li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li>The result that <tt class="docutils literal"><span class="pre">node</span></tt> represents</li>
</ul>
<p>AUTHOR:</p>
<ul class="simple">
<li>Simon King</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">ast</span><span class="o">,</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">as</span> <span class="nn">sms</span>
<span class="gp">sage: </span><span class="n">visitor</span> <span class="o">=</span> <span class="n">sms</span><span class="o">.</span><span class="n">SageArgSpecVisitor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">vis</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">visitor</span><span class="o">.</span><span class="n">visit_UnaryOp</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">vis</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;+(3*2)&#39;</span><span class="p">,</span> <span class="s">&#39;-(3*2)&#39;</span><span class="p">]]</span>
<span class="go">[6, -6]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="sage.misc.sageinspect.isclassinstance">
<tt class="descclassname">sage.misc.sageinspect.</tt><tt class="descname">isclassinstance</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.isclassinstance" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if argument is instance of non built-in class</p>
<p>INPUT: <tt class="docutils literal"><span class="pre">obj</span></tt> - object</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">isclassinstance</span>
<span class="gp">sage: </span><span class="n">isclassinstance</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">isclassinstance</span><span class="p">(</span><span class="n">FreeModule</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">myclass</span><span class="p">:</span> <span class="k">pass</span>
<span class="gp">sage: </span><span class="n">isclassinstance</span><span class="p">(</span><span class="n">myclass</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">mymetaclass</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">myclass2</span><span class="p">:</span>
<span class="gp">... </span>      <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">mymetaclass</span>
<span class="gp">sage: </span><span class="n">isclassinstance</span><span class="p">(</span><span class="n">myclass2</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="sage.misc.sageinspect.loadable_module_extension">
<tt class="descclassname">sage.misc.sageinspect.</tt><tt class="descname">loadable_module_extension</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.loadable_module_extension" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the filename extension of loadable modules, including the dot.
It is &#8216;.dll&#8217; on cygwin, &#8216;.so&#8217; otherwise.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">loadable_module_extension</span>
<span class="gp">sage: </span><span class="n">sage</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">sage_object</span><span class="o">.</span><span class="n">__file__</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">loadable_module_extension</span><span class="p">())</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="sage.misc.sageinspect.sage_getargspec">
<tt class="descclassname">sage.misc.sageinspect.</tt><tt class="descname">sage_getargspec</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.sage_getargspec" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the names and default values of a function&#8217;s arguments.</p>
<p>INPUT:</p>
<p><tt class="docutils literal"><span class="pre">obj</span></tt>, any callable object</p>
<p>OUTPUT:</p>
<p>An <tt class="docutils literal"><span class="pre">ArgSpec</span></tt> is returned. This is a named tuple
<tt class="docutils literal"><span class="pre">(args,</span> <span class="pre">varargs,</span> <span class="pre">keywords,</span> <span class="pre">defaults)</span></tt>.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">args</span></tt> is a list of the argument names (it may contain nested lists).</li>
<li><tt class="docutils literal"><span class="pre">varargs</span></tt> and <tt class="docutils literal"><span class="pre">keywords</span></tt> are the names of the <tt class="docutils literal"><span class="pre">*</span></tt> and <tt class="docutils literal"><span class="pre">**</span></tt>
arguments or <tt class="docutils literal"><span class="pre">None</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">defaults</span></tt> is an <span class="math">\(n\)</span>-tuple of the default values of the last <span class="math">\(n\)</span> arguments.</li>
</ul>
<p>NOTE:</p>
<p>If the object has a method <tt class="docutils literal"><span class="pre">_sage_argspec_</span></tt> then the output of
that method is transformed into a named tuple and then returned.</p>
<p>If a class instance has a method <tt class="docutils literal"><span class="pre">_sage_src_</span></tt> then its output
is  studied to determine the argspec. This is because currently
the <a class="reference internal" href="cachefunc.html#sage.misc.cachefunc.CachedMethod" title="sage.misc.cachefunc.CachedMethod"><tt class="xref py py-class docutils literal"><span class="pre">CachedMethod</span></tt></a> decorator has
no <tt class="docutils literal"><span class="pre">_sage_argspec_</span></tt> method.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getargspec</span>
<span class="gp">sage: </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">keywords</span><span class="p">):</span>
<span class="gp">... </span>      <span class="k">pass</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;x&#39;, &#39;y&#39;, &#39;z&#39;, &#39;t&#39;], varargs=&#39;args&#39;, keywords=&#39;keywords&#39;, defaults=(1, 2))</span>
</pre></div>
</div>
<p>We now run sage_getargspec on some functions from the Sage library:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">identity_matrix</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;ring&#39;, &#39;n&#39;, &#39;sparse&#39;], varargs=None, keywords=None, defaults=(0, False))</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">factor</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;n&#39;, &#39;proof&#39;, &#39;int_&#39;, &#39;algorithm&#39;, &#39;verbose&#39;], varargs=None, keywords=&#39;kwds&#39;, defaults=(None, False, &#39;pari&#39;, 0))</span>
</pre></div>
</div>
<p>In the case of a class or a class instance, the <tt class="docutils literal"><span class="pre">ArgSpec</span></tt> of the
<tt class="docutils literal"><span class="pre">__new__</span></tt>, <tt class="docutils literal"><span class="pre">__init__</span></tt> or <tt class="docutils literal"><span class="pre">__call__</span></tt> method is returned:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">P</span><span class="o">.&lt;</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[]</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;self&#39;, &#39;x&#39;], varargs=&#39;args&#39;, keywords=&#39;kwds&#39;, defaults=(0,))</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">P</span><span class="o">.</span><span class="n">__class__</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;self&#39;, &#39;x&#39;], varargs=&#39;args&#39;, keywords=&#39;kwds&#39;, defaults=(0,))</span>
</pre></div>
</div>
<p>The following tests against various bugs that were fixed in
<a class="reference external" href="http://trac.sagemath.org/9976">trac ticket #9976</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.rings.polynomial.real_roots</span> <span class="kn">import</span> <span class="n">bernstein_polynomial_factory_ratlist</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">bernstein_polynomial_factory_ratlist</span><span class="o">.</span><span class="n">coeffs_bitsize</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;self&#39;], varargs=None, keywords=None, defaults=None)</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.rings.polynomial.pbori</span> <span class="kn">import</span> <span class="n">BooleanMonomialMonoid</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">BooleanMonomialMonoid</span><span class="o">.</span><span class="n">gen</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;self&#39;, &#39;i&#39;], varargs=None, keywords=None, defaults=(0,))</span>
<span class="gp">sage: </span><span class="n">I</span> <span class="o">=</span> <span class="n">P</span><span class="o">*</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">I</span><span class="o">.</span><span class="n">groebner_basis</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;self&#39;, &#39;algorithm&#39;, &#39;deg_bound&#39;, &#39;mult_bound&#39;, &#39;prot&#39;],</span>
<span class="go">varargs=&#39;args&#39;, keywords=&#39;kwds&#39;, defaults=(&#39;&#39;, None, None, False))</span>
<span class="gp">sage: </span><span class="n">cython</span><span class="p">(</span><span class="s">&quot;cpdef int foo(x,y) except -1: return 1&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;x&#39;, &#39;y&#39;], varargs=None, keywords=None, defaults=None)</span>
</pre></div>
</div>
<p>If a <tt class="docutils literal"><span class="pre">functools.partial</span></tt> instance is involved, we see no other meaningful solution
than to return the argspec of the underlying function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span> <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">+</span><span class="n">c</span><span class="o">+</span><span class="n">d</span>
<span class="gp">...</span>
<span class="gp">sage: </span><span class="kn">import</span> <span class="nn">functools</span>
<span class="gp">sage: </span><span class="n">f1</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">f1</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;], varargs=None, keywords=None, defaults=(1,))</span>
</pre></div>
</div>
<p>TESTS:</p>
<p>By <a class="reference external" href="http://trac.sagemath.org/9976">trac ticket #9976</a>, rather complicated cases work. In the
following example, we dynamically create an extension class
that returns some source code, and the example shows that
the source code is taken for granted, i.e., the argspec of
an instance of that class does not coincide with the argspec
of its call method. That behaviour is intended, since a
decorated method appears to have the generic signature
<tt class="docutils literal"><span class="pre">*args,**kwds</span></tt>, but in fact it is only supposed to be called
with the arguments requested by the underlying undecorated
method. We saw an easy example above, namely <tt class="docutils literal"><span class="pre">I.groebner_basis</span></tt>.
Here is a more difficult one:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">cython_code</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span><span class="s">&#39;cdef class MyClass:&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s">&#39;    def _sage_src_(self):&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s">&#39;        return &quot;def foo(x, a=</span><span class="se">\\\&#39;</span><span class="s">)</span><span class="se">\\\&quot;\\\&#39;</span><span class="s">, b={(2+1):</span><span class="se">\\\&#39;</span><span class="s">bar</span><span class="se">\\\&#39;</span><span class="s">, not 1:3, 3&lt;&lt;4:5}): return</span><span class="se">\\</span><span class="s">n&quot;&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s">&#39;    def __call__(self, m,n): return &quot;something&quot;&#39;</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">cython</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cython_code</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">O</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">sage: </span><span class="k">print</span> <span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="o">.</span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>
<span class="go">def foo(x, a=&#39;)&quot;&#39;, b={(2+1):&#39;bar&#39;, not 1:3, 3&lt;&lt;4:5}): return</span>
<span class="gp">sage: </span><span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="o">.</span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">O</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;x&#39;, &#39;a&#39;, &#39;b&#39;], varargs=None, keywords=None, defaults=(&#39;)&quot;&#39;, {False: 3, 48: 5, 3: &#39;bar&#39;}))</span>
<span class="gp">sage: </span><span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="o">.</span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">O</span><span class="o">.</span><span class="n">__call__</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;self&#39;, &#39;m&#39;, &#39;n&#39;], varargs=None, keywords=None, defaults=None)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">cython</span><span class="p">(</span><span class="s">&#39;def foo(x, a=</span><span class="se">\&#39;\\\&#39;</span><span class="s">)&quot;</span><span class="se">\&#39;</span><span class="s">, b={not (2+1==3):</span><span class="se">\&#39;</span><span class="s">bar</span><span class="se">\&#39;</span><span class="s">}): return&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="k">print</span> <span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="o">.</span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="go">def foo(x, a=&#39;\&#39;)&quot;&#39;, b={not (2+1==3):&#39;bar&#39;}): return</span>

<span class="gp">sage: </span><span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="o">.</span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;x&#39;, &#39;a&#39;, &#39;b&#39;], varargs=None, keywords=None, defaults=(&#39;\&#39;)&quot;&#39;, {False: &#39;bar&#39;}))</span>
</pre></div>
</div>
<p>The following produced a syntax error before the patch at <a class="reference external" href="http://trac.sagemath.org/11913">trac ticket #11913</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">sage</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">sageinspect</span><span class="o">.</span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">lm</span><span class="p">)</span>
</pre></div>
</div>
<p>The following was fixed in <a class="reference external" href="http://trac.sagemath.org/16309">trac ticket #16309</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">cython</span><span class="p">(</span><span class="s">&#39;&#39;&#39;</span>
<span class="go">....: class Foo:</span>
<span class="go">....:     @staticmethod</span>
<span class="go">....:     def join(categories, bint as_list = False, tuple ignore_axioms=(), tuple axioms=()): pass</span>
<span class="go">....: cdef class Bar:</span>
<span class="go">....:     @staticmethod</span>
<span class="go">....:     def join(categories, bint as_list = False, tuple ignore_axioms=(), tuple axioms=()): pass</span>
<span class="go">....:     cpdef meet(categories, bint as_list = False, tuple ignore_axioms=(), tuple axioms=()): pass</span>
<span class="go">....: &#39;&#39;&#39;)</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">Foo</span><span class="o">.</span><span class="n">join</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;categories&#39;, &#39;as_list&#39;, &#39;ignore_axioms&#39;, &#39;axioms&#39;], varargs=None, keywords=None, defaults=(False, (), ()))</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">Bar</span><span class="o">.</span><span class="n">join</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;categories&#39;, &#39;as_list&#39;, &#39;ignore_axioms&#39;, &#39;axioms&#39;], varargs=None, keywords=None, defaults=(False, (), ()))</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">Bar</span><span class="o">.</span><span class="n">meet</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;categories&#39;, &#39;as_list&#39;, &#39;ignore_axioms&#39;, &#39;axioms&#39;], varargs=None, keywords=None, defaults=(False, (), ()))</span>
</pre></div>
</div>
<p>Test that <a class="reference external" href="http://trac.sagemath.org/17009">trac ticket #17009</a> is fixed:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">gap</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;self&#39;, &#39;x&#39;, &#39;name&#39;], varargs=None, keywords=None, defaults=(None,))</span>
</pre></div>
</div>
<p>By <a class="reference external" href="http://trac.sagemath.org/17814">trac ticket #17814</a>, the following gives the correct answer (previously, the
defaults would have been found <tt class="docutils literal"><span class="pre">None</span></tt>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.nested_class</span> <span class="kn">import</span> <span class="n">MainClass</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="n">MainClass</span><span class="o">.</span><span class="n">NestedClass</span><span class="o">.</span><span class="n">NestedSubClass</span><span class="o">.</span><span class="n">dummy</span><span class="p">)</span>
<span class="go">ArgSpec(args=[&#39;self&#39;, &#39;x&#39;, &#39;r&#39;], varargs=&#39;args&#39;, keywords=&#39;kwds&#39;, defaults=((1, 2, 3.4),))</span>
</pre></div>
</div>
<p>In <a class="reference external" href="http://trac.sagemath.org/18249">trac ticket #18249</a> was decided to return a generic signature for Python
builtin functions, rather than to raise an error (which is what Python&#8217;s
inspect module does):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">import</span> <span class="nn">inspect</span>
<span class="gp">sage: </span><span class="n">inspect</span><span class="o">.</span><span class="n">getargspec</span><span class="p">(</span><span class="nb">range</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">TypeError</span>: <span class="n">&lt;built-in function range&gt; is not a Python function</span>
<span class="gp">sage: </span><span class="n">sage_getargspec</span><span class="p">(</span><span class="nb">range</span><span class="p">)</span>
<span class="go">ArgSpec(args=[], varargs=&#39;args&#39;, keywords=&#39;kwds&#39;, defaults=None)</span>
</pre></div>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li>William Stein: a modified version of inspect.getargspec from the
Python Standard Library, which was taken from IPython for use in Sage.</li>
<li>Extensions by Nick Alexander</li>
<li>Simon King: Return an <tt class="docutils literal"><span class="pre">ArgSpec</span></tt>, fix some bugs.</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="sage.misc.sageinspect.sage_getdef">
<tt class="descclassname">sage.misc.sageinspect.</tt><tt class="descname">sage_getdef</tt><big>(</big><em>obj</em>, <em>obj_name=''</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.sage_getdef" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the definition header for any callable object.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">obj</span></tt> - function</li>
<li><tt class="docutils literal"><span class="pre">obj_name</span></tt> - string (optional, default &#8216;&#8217;)</li>
</ul>
<p><tt class="docutils literal"><span class="pre">obj_name</span></tt> is prepended to the output.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getdef</span>
<span class="gp">sage: </span><span class="n">sage_getdef</span><span class="p">(</span><span class="n">identity_matrix</span><span class="p">)</span>
<span class="go">&#39;(ring, n=0, sparse=False)&#39;</span>
<span class="gp">sage: </span><span class="n">sage_getdef</span><span class="p">(</span><span class="n">identity_matrix</span><span class="p">,</span> <span class="s">&#39;identity_matrix&#39;</span><span class="p">)</span>
<span class="go">&#39;identity_matrix(ring, n=0, sparse=False)&#39;</span>
</pre></div>
</div>
<p>Check that <a class="reference external" href="http://trac.sagemath.org/6848">trac ticket #6848</a> has been fixed:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">sage_getdef</span><span class="p">(</span><span class="n">RDF</span><span class="o">.</span><span class="n">random_element</span><span class="p">)</span>
<span class="go">&#39;(min=-1, max=1)&#39;</span>
</pre></div>
</div>
<p>If an exception is generated, None is returned instead and the
exception is suppressed.</p>
<p>AUTHORS:</p>
<ul class="simple">
<li>William Stein</li>
<li>extensions by Nick Alexander</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="sage.misc.sageinspect.sage_getdoc">
<tt class="descclassname">sage.misc.sageinspect.</tt><tt class="descname">sage_getdoc</tt><big>(</big><em>obj</em>, <em>obj_name=''</em>, <em>embedded_override=False</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.sage_getdoc" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the docstring associated to <tt class="docutils literal"><span class="pre">obj</span></tt> as a string.</p>
<p>If <tt class="docutils literal"><span class="pre">obj</span></tt> is a Cython object with an embedded position in its
docstring, the embedded position is stripped.</p>
<p>If optional argument <tt class="docutils literal"><span class="pre">embedded_override</span></tt> is False (its default
value), then the string is formatted according to the value of
EMBEDDED_MODE.  If this argument is True, then it is formatted as
if EMBEDDED_MODE were True.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">obj</span></tt> &#8211; a function, module, etc.: something with a docstring.</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getdoc</span>
<span class="gp">sage: </span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">identity_matrix</span><span class="p">)[</span><span class="mi">87</span><span class="p">:</span><span class="mi">124</span><span class="p">]</span>
<span class="go">&#39;Return the n x n identity matrix over&#39;</span>
<span class="gp">sage: </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span> <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">+</span><span class="n">c</span><span class="o">+</span><span class="n">d</span>
<span class="gp">...</span>
<span class="gp">sage: </span><span class="kn">import</span> <span class="nn">functools</span>
<span class="gp">sage: </span><span class="n">f1</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">f</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="s">&quot;original documentation&quot;</span>
<span class="gp">sage: </span><span class="n">f1</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="s">&quot;specialised documentation&quot;</span>
<span class="gp">sage: </span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="go">&#39;original documentation\n&#39;</span>
<span class="gp">sage: </span><span class="n">sage_getdoc</span><span class="p">(</span><span class="n">f1</span><span class="p">)</span>
<span class="go">&#39;specialised documentation\n&#39;</span>
</pre></div>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li>William Stein</li>
<li>extensions by Nick Alexander</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="sage.misc.sageinspect.sage_getdoc_original">
<tt class="descclassname">sage.misc.sageinspect.</tt><tt class="descname">sage_getdoc_original</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.sage_getdoc_original" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the unformatted docstring associated to <tt class="docutils literal"><span class="pre">obj</span></tt> as a
string.</p>
<p>If <tt class="docutils literal"><span class="pre">obj</span></tt> is a Cython object with an embedded position or signature in
its docstring, the embedded information is stripped. If the stripped
docstring is empty, then the stripped docstring of <tt class="docutils literal"><span class="pre">obj.__init__</span></tt> is
returned instead.</p>
<p>Feed the results from this into the function
<a class="reference internal" href="sagedoc.html#sage.misc.sagedoc.format" title="sage.misc.sagedoc.format"><tt class="xref py py-func docutils literal"><span class="pre">sage.misc.sagedoc.format()</span></tt></a> for printing to the screen.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">obj</span></tt> &#8211; a function, module, etc.: something with a docstring.</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getdoc_original</span>
</pre></div>
</div>
<p>Here is a class that has its own docstring:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="k">print</span> <span class="n">sage_getdoc_original</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">integer</span><span class="o">.</span><span class="n">Integer</span><span class="p">)</span>

<span class="go">    The ``Integer`` class represents arbitrary precision</span>
<span class="go">    integers. It derives from the ``Element`` class, so</span>
<span class="go">    integers can be used as ring elements anywhere in Sage.</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>Here is a class that does not have its own docstring, so that the
docstring of the <tt class="docutils literal"><span class="pre">__init__</span></tt> method is used:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="k">print</span> <span class="n">sage_getdoc_original</span><span class="p">(</span><span class="n">Parent</span><span class="p">)</span>

<span class="go">Base class for all parents.</span>

<span class="go">Parents are the Sage/mathematical analogues of container</span>
<span class="go">objects in computer science.</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>Old-style classes are supported:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="k">class</span> <span class="nc">OldStyleClass</span><span class="p">:</span>
<span class="go">....:     def __init__(self):</span>
<span class="go">....:         &#39;&#39;&#39;The __init__ docstring&#39;&#39;&#39;</span>
<span class="go">....:         pass</span>
<span class="gp">sage: </span><span class="k">print</span> <span class="n">sage_getdoc_original</span><span class="p">(</span><span class="n">OldStyleClass</span><span class="p">)</span>
<span class="go">The __init__ docstring</span>
</pre></div>
</div>
<p>When there is no <tt class="docutils literal"><span class="pre">__init__</span></tt> method, we just get an empty string:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="k">class</span> <span class="nc">OldStyleClass</span><span class="p">:</span>
<span class="go">....:     pass</span>
<span class="gp">sage: </span><span class="n">sage_getdoc_original</span><span class="p">(</span><span class="n">OldStyleClass</span><span class="p">)</span>
<span class="go">&#39;&#39;</span>
</pre></div>
</div>
<p>If an instance of a class does not have its own docstring, the docstring
of its class results:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">sage_getdoc_original</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">aliceblue</span><span class="p">)</span> <span class="o">==</span> <span class="n">sage_getdoc_original</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Color</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="sage.misc.sageinspect.sage_getfile">
<tt class="descclassname">sage.misc.sageinspect.</tt><tt class="descname">sage_getfile</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.sage_getfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the full file name associated to <tt class="docutils literal"><span class="pre">obj</span></tt> as a string.</p>
<p>INPUT: <tt class="docutils literal"><span class="pre">obj</span></tt>, a Sage object, module, etc.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getfile</span>
<span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">rings</span><span class="o">.</span><span class="n">rational</span><span class="p">)[</span><span class="o">-</span><span class="mi">23</span><span class="p">:]</span>
<span class="go">&#39;sage/rings/rational.pyx&#39;</span>
<span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">Sq</span><span class="p">)[</span><span class="o">-</span><span class="mi">42</span><span class="p">:]</span>
<span class="go">&#39;sage/algebras/steenrod/steenrod_algebra.py&#39;</span>
</pre></div>
</div>
<p>The following tests against some bugs fixed in <a class="reference external" href="http://trac.sagemath.org/9976">trac ticket #9976</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">obj</span> <span class="o">=</span> <span class="n">sage</span><span class="o">.</span><span class="n">combinat</span><span class="o">.</span><span class="n">partition_algebra</span><span class="o">.</span><span class="n">SetPartitionsAk</span>
<span class="gp">sage: </span><span class="n">obj</span> <span class="o">=</span> <span class="n">sage</span><span class="o">.</span><span class="n">combinat</span><span class="o">.</span><span class="n">partition_algebra</span><span class="o">.</span><span class="n">SetPartitionsAk</span>
<span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="go">&#39;...sage/combinat/partition_algebra.py&#39;</span>
</pre></div>
</div>
<p>And here is another bug, fixed in <a class="reference external" href="http://trac.sagemath.org/11298">trac ticket #11298</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">P</span><span class="o">.&lt;</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[]</span>
<span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
<span class="go">&#39;...sage/rings/polynomial/multi_polynomial_libsingular.pyx&#39;</span>
</pre></div>
</div>
<p>A problem fixed in <a class="reference external" href="http://trac.sagemath.org/16309">trac ticket #16309</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">cython</span><span class="p">(</span><span class="s">&#39;&#39;&#39;</span>
<span class="go">....: class Bar: pass</span>
<span class="go">....: cdef class Foo: pass</span>
<span class="go">....: &#39;&#39;&#39;)</span>
<span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">Bar</span><span class="p">)</span>
<span class="go">&#39;...pyx&#39;</span>
<span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="n">Foo</span><span class="p">)</span>
<span class="go">&#39;...pyx&#39;</span>
</pre></div>
</div>
<p>By <a class="reference external" href="http://trac.sagemath.org/18249">trac ticket #18249</a>, we return an empty string for Python builtins. In that
way, there is no error when the user types, for example, <tt class="docutils literal"><span class="pre">range?</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">sage_getfile</span><span class="p">(</span><span class="nb">range</span><span class="p">)</span>
<span class="go">&#39;&#39;</span>
</pre></div>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li>Nick Alexander</li>
<li>Simon King</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="sage.misc.sageinspect.sage_getsource">
<tt class="descclassname">sage.misc.sageinspect.</tt><tt class="descname">sage_getsource</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.sage_getsource" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the source code associated to obj as a string, or None.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">obj</span></tt> &#8211; function, etc.</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getsource</span>
<span class="gp">sage: </span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">identity_matrix</span><span class="p">)[</span><span class="mi">19</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span>
<span class="go">&#39;identity_matrix(ring, n=0, sparse=False):&#39;</span>
<span class="gp">sage: </span><span class="n">sage_getsource</span><span class="p">(</span><span class="n">identity_matrix</span><span class="p">)[</span><span class="mi">19</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span>
<span class="go">&#39;identity_matrix(ring, n=0, sparse=False):&#39;</span>
</pre></div>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li>William Stein</li>
<li>extensions by Nick Alexander</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="sage.misc.sageinspect.sage_getsourcelines">
<tt class="descclassname">sage.misc.sageinspect.</tt><tt class="descname">sage_getsourcelines</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.sage_getsourcelines" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a pair ([source_lines], starting line number) of the source
code associated to obj, or None.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">obj</span></tt> &#8211; function, etc.</li>
</ul>
<p>OUTPUT:</p>
<p>(source_lines, lineno) or None: <tt class="docutils literal"><span class="pre">source_lines</span></tt> is a list of
strings, and <tt class="docutils literal"><span class="pre">lineno</span></tt> is an integer.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getsourcelines</span>
<span class="gp">sage: </span><span class="n">sage_getsourcelines</span><span class="p">(</span><span class="n">matrix</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">732</span>
<span class="gp">sage: </span><span class="n">sage_getsourcelines</span><span class="p">(</span><span class="n">matrix</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">6</span><span class="p">:]</span>
<span class="go">&#39;MatrixFactory(object):\n&#39;</span>
</pre></div>
</div>
<p>TESTS:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">cython</span><span class="p">(</span><span class="s">&#39;&#39;&#39;cpdef test_funct(x,y): return&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sage_getsourcelines</span><span class="p">(</span><span class="n">test_funct</span><span class="p">)</span>
<span class="go">([&#39;cpdef test_funct(x,y): return\n&#39;], 6)</span>
</pre></div>
</div>
<p>The following tests that an instance of <tt class="docutils literal"><span class="pre">functools.partial</span></tt> is correctly
dealt with (see <a class="reference external" href="http://trac.sagemath.org/9976">trac ticket #9976</a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">obj</span> <span class="o">=</span> <span class="n">sage</span><span class="o">.</span><span class="n">combinat</span><span class="o">.</span><span class="n">partition_algebra</span><span class="o">.</span><span class="n">SetPartitionsAk</span>
<span class="gp">sage: </span><span class="n">sage_getsourcelines</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="go">([&#39;def create_set_partition_function(letter, k):\n&#39;,</span>
<span class="gp">...</span>
<span class="go">&#39;    raise ValueError(&quot;k must be an integer or an integer + 1/2&quot;)\n&#39;], 34)</span>
</pre></div>
</div>
<p>Here are some cases that were covered in :trac`11298`;
note that line numbers may easily change, and therefore we do
not test them:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">P</span><span class="o">.&lt;</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[]</span>
<span class="gp">sage: </span><span class="n">I</span> <span class="o">=</span> <span class="n">P</span><span class="o">*</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">sage_getsourcelines</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
<span class="go">([&#39;cdef class MPolynomialRing_libsingular(MPolynomialRing_generic):\n&#39;,</span>
<span class="go">  &#39;\n&#39;,</span>
<span class="go">  &#39;    def __cinit__(self):\n&#39;,</span>
<span class="go">...)</span>
<span class="gp">sage: </span><span class="n">sage_getsourcelines</span><span class="p">(</span><span class="n">I</span><span class="p">)</span>
<span class="go">([&#39;class MPolynomialIdeal( MPolynomialIdeal_singular_repr, \\\n&#39;,</span>
<span class="go">...)</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">var</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sage_getsourcelines</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">([&#39;cdef class Expression(CommutativeRingElement):\n&#39;,</span>
<span class="go">  &#39;    cpdef object pyobject(self):\n&#39;,</span>
<span class="go">...)</span>
<span class="gp">sage: </span><span class="n">sage_getsourcelines</span><span class="p">(</span><span class="n">x</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>    <span class="c"># last line</span>
<span class="go">&#39;        return S\n&#39;</span>
</pre></div>
</div>
<p>We show some enhancements provided by <a class="reference external" href="http://trac.sagemath.org/11768">trac ticket #11768</a>. First, we
use a dummy parent class that has defined an element class by a
nested class definition:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.nested_class_test</span> <span class="kn">import</span> <span class="n">TestNestedParent</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getsource</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">TestNestedParent</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">E</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">element_class</span>
<span class="gp">sage: </span><span class="n">E</span><span class="o">.</span><span class="n">__bases__</span>
<span class="go">(&lt;class sage.misc.nested_class_test.TestNestedParent.Element at ...&gt;,</span>
<span class="go"> &lt;class &#39;sage.categories.sets_cat.Sets.element_class&#39;&gt;)</span>
<span class="gp">sage: </span><span class="k">print</span> <span class="n">sage_getsource</span><span class="p">(</span><span class="n">E</span><span class="p">)</span>
<span class="go">    class Element:</span>
<span class="go">        &quot;This is a dummy element class&quot;</span>
<span class="go">        pass</span>
<span class="gp">sage: </span><span class="k">print</span> <span class="n">sage_getsource</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
<span class="go">class TestNestedParent(UniqueRepresentation, Parent):</span>
<span class="go">    ...</span>
<span class="go">    class Element:</span>
<span class="go">        &quot;This is a dummy element class&quot;</span>
<span class="go">        pass</span>
</pre></div>
</div>
<p>Here is another example that relies on a nested class definition
in the background:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">C</span> <span class="o">=</span> <span class="n">AdditiveMagmas</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">HC</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">Homsets</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">sage_getsourcelines</span><span class="p">(</span><span class="n">HC</span><span class="p">)</span>
<span class="go">([&#39;    class Homsets(HomsetsCategory):\n&#39;, ...], ...)</span>
</pre></div>
</div>
<p>Testing against a bug that has occured during work on #11768:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">P</span><span class="o">.&lt;</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[]</span>
<span class="gp">sage: </span><span class="n">I</span> <span class="o">=</span> <span class="n">P</span><span class="o">*</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">sage_getsourcelines</span><span class="p">(</span><span class="n">I</span><span class="p">)</span>
<span class="go">([&#39;class MPolynomialIdeal( MPolynomialIdeal_singular_repr, \\\n&#39;,</span>
<span class="go">  &#39;                        MPolynomialIdeal_macaulay2_repr, \\\n&#39;,</span>
<span class="go">  &#39;                        MPolynomialIdeal_magma_repr, \\\n&#39;,</span>
<span class="go">  &#39;                        Ideal_generic ):\n&#39;,</span>
<span class="go">  &#39;    def __init__(self, ring, gens, coerce=True):\n&#39;,</span>
<span class="go">  ...)</span>
</pre></div>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li>William Stein</li>
<li>Extensions by Nick Alexander</li>
<li>Extension to interactive Cython code by Simon King</li>
<li>Simon King: If a class has no docstring then let the class
definition be found starting from the <tt class="docutils literal"><span class="pre">__init__</span></tt> method.</li>
<li>Simon King: Get source lines for dynamic classes.</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="sage.misc.sageinspect.sage_getvariablename">
<tt class="descclassname">sage.misc.sageinspect.</tt><tt class="descname">sage_getvariablename</tt><big>(</big><em>self</em>, <em>omit_underscore_names=True</em><big>)</big><a class="headerlink" href="#sage.misc.sageinspect.sage_getvariablename" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to get the name of a Sage object.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">self</span></tt> &#8211; any object.</li>
<li><tt class="docutils literal"><span class="pre">omit_underscore_names</span></tt> &#8211; boolean, default <tt class="docutils literal"><span class="pre">True</span></tt>.</li>
</ul>
<p>OUTPUT:</p>
<p>If the user has assigned an object <tt class="docutils literal"><span class="pre">obj</span></tt> to a variable name,
then return that variable name.  If several variables point to
<tt class="docutils literal"><span class="pre">obj</span></tt>, return a sorted list of those names.  If
<tt class="docutils literal"><span class="pre">omit_underscore_names</span></tt> is True (the default) then omit names
starting with an underscore &#8220;_&#8221;.</p>
<p>This is a modified version of code taken from
<a class="reference external" href="http://pythonic.pocoo.org/2009/5/30/finding-objects-names">http://pythonic.pocoo.org/2009/5/30/finding-objects-names</a>,
written by Georg Brandl.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.sageinspect</span> <span class="kn">import</span> <span class="n">sage_getvariablename</span>
<span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">random_matrix</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sage_getvariablename</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="go">&#39;A&#39;</span>
<span class="gp">sage: </span><span class="n">B</span> <span class="o">=</span> <span class="n">A</span>
<span class="gp">sage: </span><span class="n">sage_getvariablename</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="go">[&#39;A&#39;, &#39;B&#39;]</span>
</pre></div>
</div>
<p>If an object is not assigned to a variable, an empty list is returned:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">sage_getvariablename</span><span class="p">(</span><span class="n">random_matrix</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span> <span class="mi">60</span><span class="p">))</span>
<span class="go">[]</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h4>Previous topic</h4>
            <p class="topless"><a href="gperftools.html"
                                  title="previous chapter">C Function Profiler Using Google Perftools</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="edit_module.html"
                                  title="next chapter">Edit the source code of Sage interactively</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/sage/misc/sageinspect.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../../../search.html" method="get">
                <input type="text" name="q" size="18" />
               <!-- The shading of the "Go" button should be consistent -->
               <!-- with the colour of the header and footer. See the file -->
               <!-- doc/common/themes/sage/theme.conf for colours used by -->
               <!-- the Sage theme. -->
                <input type="submit" style="background-color: #B8B9F6" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="edit_module.html" title="Edit the source code of Sage interactively"
             >next</a> |</li>
        <li class="right" >
          <a href="gperftools.html" title="C Function Profiler Using Google Perftools"
             >previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="../../index.html">Utilities</a> &raquo;</li>
 
      </ul>
    </div>
    
    <div class="footer">
        &copy; Copyright 2005--2015, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
  </body>
</html>