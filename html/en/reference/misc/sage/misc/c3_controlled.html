<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="prev" title="The C3 algorithm" href="c3.html" />

    <meta name="generator" content="sphinx-5.2.3, furo 2022.09.29"/>
        <title>The C3 algorithm, under control of a total order - Utilities</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=d81277517bee4d6b0349d71bb2661d4890b5617c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom-furo.css" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  --color-brand-primary: #0f0fff;
  --color-brand-content: #0f0fff;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Utilities</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../../_static/logo_sagemath_black.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../../../_static/logo_sagemath_white.svg" alt="Dark Logo"/>
  </div>
  
      <span class="sidebar-brand-text">Sage 10.0 Reference Manual</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-home">
  <div class="sidebar-tree">
    <ul><li class="toctree-l1">
      <a class="reference internal" href="../../index.html">Home - Utilities</a>
    </li></ul>
  </div>
</div><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="defaults.html">Default Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="functional.html">Functional notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="randstate.html">Random Number States</a></li>
<li class="toctree-l1"><a class="reference internal" href="prandom.html">Random Numbers with Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="unknown.html">The Unknown truth value</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="abstract_method.html">Abstract methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="bindable_class.html">Bindable classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="decorators.html">Decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="constant_function.html">Constant functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="classcall_metaclass.html">Special Methods for Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="inherit_comparison.html">Metaclass for inheriting comparison functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="method_decorator.html">Base Class to Support Method Decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="object_multiplexer.html">Multiplex calls to one object to calls to many objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="fast_methods.html">Fast methods via Cython</a></li>
<li class="toctree-l1"><a class="reference internal" href="call.html">Attribute and method calling</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="callable_dict.html">Callable dictionaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="converting_dict.html">Converting Dictionary</a></li>
<li class="toctree-l1"><a class="reference internal" href="flatten.html">Flatten nested lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="search.html">Searching a sorted list</a></li>
<li class="toctree-l1"><a class="reference internal" href="mrange.html">Multidimensional enumeration</a></li>
<li class="toctree-l1"><a class="reference internal" href="multireplace.html">multi_replace</a></li>
<li class="toctree-l1"><a class="reference internal" href="map_threaded.html">Threaded map function</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arith/srange.html">Ranges and the <code class="docutils literal notranslate"><span class="pre">[1,2,..,n]</span></code> notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="element_with_label.html">Elements with labels.</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="temporary_file.html">Temporary file handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="remote_file.html">get_remote_file</a></li>
<li class="toctree-l1"><a class="reference internal" href="messaging.html">Message delivery</a></li>
<li class="toctree-l1"><a class="reference internal" href="sage_ostools.html">Miscellaneous operating system functions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../databases/sql_db.html">Relational (sqlite) Databases Module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../structure/graphics_file.html">Wrapper for Graphics Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../media/wav.html">Work with WAV files</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="stopgap.html">Stopgaps</a></li>
<li class="toctree-l1"><a class="reference internal" href="superseded.html">Handling Superseded Functionality</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="misc.html">Miscellaneous functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc_c.html">Miscellaneous functions (Cython)</a></li>
<li class="toctree-l1"><a class="reference internal" href="verbose.html">Verbosity System and Logging in SageMath</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="lazy_attribute.html">Lazy attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="lazy_format.html">Lazy format strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="lazy_import.html">Lazy imports</a></li>
<li class="toctree-l1"><a class="reference internal" href="lazy_import_cache.html">Lazy import cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="lazy_list.html">Lazy lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="lazy_string.html">Lazy strings</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cachefunc.html">Cached Functions and Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="weak_dict.html">Fast and safe weak value dictionary</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ext/fast_callable.html">Fast Expression Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ext/fast_eval.html">Fast Numerical Evaluation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Testing for features of the environment at runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/join_feature.html">Join features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/all.html">Enumeration of all defined features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/sagemath.html">Features for testing the presence of Python modules in the Sage library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/pkg_systems.html">Features for testing the presence of package systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/bliss.html">Features for testing the presence of <code class="docutils literal notranslate"><span class="pre">bliss</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/csdp.html">Feature for testing the presence of <code class="docutils literal notranslate"><span class="pre">csdp</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/databases.html">Features for testing the presence of various databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/dvipng.html">Feature for testing the presence of <code class="docutils literal notranslate"><span class="pre">dvipng</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/ffmpeg.html">Feature for testing the presence of <code class="docutils literal notranslate"><span class="pre">ffmpeg</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/four_ti_2.html">Features for testing the presence of <code class="docutils literal notranslate"><span class="pre">4ti2</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/gap.html">Features for testing the presence of GAP packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/graph_generators.html">Features for testing the presence of various graph generator programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/graphviz.html">Features for testing the presence of <code class="docutils literal notranslate"><span class="pre">graphviz</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/imagemagick.html">Feature for testing the presence of <code class="docutils literal notranslate"><span class="pre">imagemagick</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/interfaces.html">Features for testing whether interpreter interfaces are functional</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/internet.html">Feature for testing if the Internet is available</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/kenzo.html">Feature for testing the presence of <code class="docutils literal notranslate"><span class="pre">kenzo</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/latex.html">Features for testing the presence of <code class="docutils literal notranslate"><span class="pre">latex</span></code> and equivalent programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/latte.html">Features for testing the presence of <code class="docutils literal notranslate"><span class="pre">latte_int</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/lrs.html">Feature for testing the presence of <code class="docutils literal notranslate"><span class="pre">lrslib</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/mcqd.html">Features for testing the presence of <code class="docutils literal notranslate"><span class="pre">mcqd</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/meataxe.html">Feature for testing the presence of <code class="docutils literal notranslate"><span class="pre">meataxe</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/mip_backends.html">Features for testing the presence of <code class="xref py py-class docutils literal notranslate"><span class="pre">MixedIntegerLinearProgram</span></code> backends</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/normaliz.html">Feature for testing the presence of <code class="docutils literal notranslate"><span class="pre">pynormaliz</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/pandoc.html">Feature for testing the presence of <code class="docutils literal notranslate"><span class="pre">pandoc</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/pdf2svg.html">Feature for testing the presence of <code class="docutils literal notranslate"><span class="pre">pdf2svg</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/polymake.html">Feature for testing the presence of the Python interface to polymake</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/rubiks.html">Features for testing the presence of <code class="docutils literal notranslate"><span class="pre">rubiks</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/tdlib.html">Features for testing the presence of <code class="docutils literal notranslate"><span class="pre">tdlib</span></code></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cython.html">Cython support functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="inline_fortran.html">Fortran compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="parser.html">A parser for symbolic equations and expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Evaluating Python code without any preparsing</a></li>
<li class="toctree-l1"><a class="reference internal" href="sage_eval.html">Evaluating a String in Sage</a></li>
<li class="toctree-l1"><a class="reference internal" href="sh.html">Evaluating shell scripts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../typeset/symbols.html">Symbols for Character Art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../typeset/character_art.html">Base Class for Character-Based Art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../typeset/character_art_factory.html">Factory for Character-Based Art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../typeset/ascii_art.html">ASCII Art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../typeset/unicode_art.html">Unicode Art</a></li>
<li class="toctree-l1"><a class="reference internal" href="../typeset/unicode_characters.html">Unicode Characters</a></li>
<li class="toctree-l1"><a class="reference internal" href="repr.html">Repr formatting support</a></li>
<li class="toctree-l1"><a class="reference internal" href="sage_input.html">Sage Input Formatting</a></li>
<li class="toctree-l1"><a class="reference internal" href="table.html">Tables</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="html.html">HTML Fragments</a></li>
<li class="toctree-l1"><a class="reference internal" href="mathml.html">MathML output support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sagetex.html">Installing and using SageTeX</a></li>
<li class="toctree-l1"><a class="reference internal" href="latex.html">LaTeX printing support</a></li>
<li class="toctree-l1"><a class="reference internal" href="latex_macros.html">LaTeX macros</a></li>
<li class="toctree-l1"><a class="reference internal" href="latex_standalone.html">Standalone LaTeX Document class and TikzPicture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="func_persist.html">Support for persistent functions in .sage files</a></li>
<li class="toctree-l1"><a class="reference internal" href="persist.html">Object persistence</a></li>
<li class="toctree-l1"><a class="reference internal" href="fpickle.html">Function pickling</a></li>
<li class="toctree-l1"><a class="reference internal" href="explain_pickle.html">A tool for inspecting Python pickles</a></li>
<li class="toctree-l1"><a class="reference internal" href="nested_class.html">Fixing pickle for nested classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="session.html">Loading and saving sessions and listing all variables</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="banner.html">SageMath version and banner info</a></li>
<li class="toctree-l1"><a class="reference internal" href="reset.html">Interpreter reset</a></li>
<li class="toctree-l1"><a class="reference internal" href="viewer.html">Determination of programs for viewing web pages, etc.</a></li>
<li class="toctree-l1"><a class="reference internal" href="pager.html">Pager for showing strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="sagedoc.html">Format Sage documentation for viewing with IPython and the notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="sagedoc_conf.html">Sphinx configuration shared by sage.misc.sphinxify and sage_docbuild</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinxify.html">Process docstrings with Sphinx</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="package.html">Listing Sage packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="dist.html">Installing shortcut scripts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="citation.html">Dependency usage tracking for citations</a></li>
<li class="toctree-l1"><a class="reference internal" href="copying.html">License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sage_unittest.html">Unit testing for Sage objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="random_testing.html">Random testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="test_nested_class.html">Test for nested class Parent</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="benchmark.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="sage_timeit.html">Accurate timing information for Sage commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="sage_timeit_class.html">The <code class="docutils literal notranslate"><span class="pre">timeit</span></code> command</a></li>
<li class="toctree-l1"><a class="reference internal" href="profiler.html">Simple profiling tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="gperftools.html">C Function Profiler Using Google Perftools</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../docs/instancedoc.html">Dynamic documentation for instances of classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="sageinspect.html">Inspect Python, Sage, and Cython objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="edit_module.html">Edit the source code of Sage interactively</a></li>
<li class="toctree-l1"><a class="reference internal" href="classgraph.html">Class inheritance graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev_tools.html">Some tools for developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="function_mangling.html">Function Mangling</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest_index_of_methods.html">ReST index of functions</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ext/memory.html">Low-level memory allocation functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="c3.html">The C3 algorithm</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">The C3 algorithm, under control of a total order</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="the-c3-algorithm-under-control-of-a-total-order">
<span id="sage-misc-c3-controlled"></span><h1>The C3 algorithm, under control of a total order<a class="headerlink" href="#the-c3-algorithm-under-control-of-a-total-order" title="Permalink to this heading">#</a></h1>
<span class="target" id="module-sage.misc.c3_controlled"></span><section id="abstract">
<h2>Abstract<a class="headerlink" href="#abstract" title="Permalink to this heading">#</a></h2>
<p>Python handles multiple inheritance by computing, for each class,
a linear extension of the poset of all its super classes (the Method
Resolution Order, MRO). The MRO is calculated recursively from local
information (the <em>ordered</em> list of the direct super classes), with
the so-called <code class="docutils literal notranslate"><span class="pre">C3</span></code> algorithm. This algorithm can fail if the local
information is not consistent; worst, there exist hierarchies of
classes with provably no consistent local information.</p>
<p>For large hierarchy of classes, like those derived from categories in
Sage, maintaining consistent local information by hand does not scale
and leads to unpredictable <code class="docutils literal notranslate"><span class="pre">C3</span></code> failures (the dreaded “could not
find a consistent method resolution order”); a maintenance nightmare.</p>
<p>This module implements a final solution to this problem. Namely, it
allows for building automatically the local information from the bare
class hierarchy in such a way that guarantees that the <code class="docutils literal notranslate"><span class="pre">C3</span></code>
algorithm will never fail.</p>
<p>Err, but you said that this was provably impossible? Well, not if one
relaxes a bit the hypotheses; but that’s not something one would want
to do by hand :-)</p>
</section>
<section id="the-problem">
<h2>The problem<a class="headerlink" href="#the-problem" title="Permalink to this heading">#</a></h2>
<p>Consider the following hierarchy of classes:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">class</span> <span class="nc">A1</span><span class="p">():</span> <span class="k">pass</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">A2</span><span class="p">():</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="mi">2</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">A3</span><span class="p">():</span> <span class="k">pass</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">A4</span><span class="p">():</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="mi">4</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">A5</span><span class="p">(</span><span class="n">A2</span><span class="p">,</span> <span class="n">A1</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="mi">5</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">A6</span><span class="p">(</span><span class="n">A4</span><span class="p">,</span> <span class="n">A3</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">A7</span><span class="p">(</span><span class="n">A6</span><span class="p">,</span> <span class="n">A5</span><span class="p">):</span> <span class="k">pass</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">a</span></code> is an instance of <code class="docutils literal notranslate"><span class="pre">A7</span></code>, then Python needs to choose which
implementation to use upon calling <code class="docutils literal notranslate"><span class="pre">a.foo()</span></code>: that of <code class="docutils literal notranslate"><span class="pre">A4</span></code> or
<code class="docutils literal notranslate"><span class="pre">A5</span></code>, but obviously not that of <code class="docutils literal notranslate"><span class="pre">A2</span></code>. In Python, like in many
other dynamic object oriented languages, this is achieved by
calculating once for all a specific linear extension of the hierarchy
of the super classes of each class, called its Method Resolution Order
(MRO):</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="p">[</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">A7</span><span class="o">.</span><span class="n">mro</span><span class="p">()]</span>
<span class="go">[&#39;A7&#39;, &#39;A6&#39;, &#39;A4&#39;, &#39;A3&#39;, &#39;A5&#39;, &#39;A2&#39;, &#39;A1&#39;, &#39;object&#39;]</span>
</pre></div>
</div>
<p>Thus, in our example, the implementation in <code class="docutils literal notranslate"><span class="pre">A4</span></code> is chosen:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">A7</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">foo</span><span class="p">()</span>
<span class="go">4</span>
</pre></div>
</div>
<p>Specifically, the MRO is calculated using the so-called <code class="docutils literal notranslate"><span class="pre">C3</span></code>
algorithm which guarantees that the MRO respects not only inheritance,
but also the order in which the bases (direct super classes) are given
for each class.</p>
<p>However, for large hierarchies of classes with lots of multiple
inheritance, like those derived from categories in Sage, this
algorithm easily fails if the order of the bases is not chosen
consistently (here for <code class="docutils literal notranslate"><span class="pre">A2</span></code> w.r.t. <code class="docutils literal notranslate"><span class="pre">A1</span></code>):</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">class</span> <span class="nc">B6</span><span class="p">(</span><span class="n">A1</span><span class="p">,</span><span class="n">A2</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">B7</span><span class="p">(</span><span class="n">B6</span><span class="p">,</span><span class="n">A5</span><span class="p">):</span> <span class="k">pass</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">TypeError: Cannot create a consistent method resolution</span>
<span class="go">order (MRO) for bases A1, A2</span>
</pre></div>
</div>
<p>There actually exist hierarchies of classes for which <code class="docutils literal notranslate"><span class="pre">C3</span></code> fails
whatever order of the bases is chosen; the smallest such example,
admittedly artificial, has ten classes (see below). Still, this
highlights that this problem has to be tackled in a systematic way.</p>
<p>Fortunately, one can trick <code class="docutils literal notranslate"><span class="pre">C3</span></code>, without changing the inheritance
semantic, by adding some super classes of <code class="docutils literal notranslate"><span class="pre">A</span></code> to the bases of
<code class="docutils literal notranslate"><span class="pre">A</span></code>. In the following example, we completely force a given MRO by
specifying <em>all</em> the super classes of <code class="docutils literal notranslate"><span class="pre">A</span></code> as bases:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">class</span> <span class="nc">A7</span><span class="p">(</span><span class="n">A6</span><span class="p">,</span> <span class="n">A5</span><span class="p">,</span> <span class="n">A4</span><span class="p">,</span> <span class="n">A3</span><span class="p">,</span> <span class="n">A2</span><span class="p">,</span> <span class="n">A1</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">sage: </span><span class="p">[</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">A7</span><span class="o">.</span><span class="n">mro</span><span class="p">()]</span>
<span class="go">[&#39;A7&#39;, &#39;A6&#39;, &#39;A5&#39;, &#39;A4&#39;, &#39;A3&#39;, &#39;A2&#39;, &#39;A1&#39;, &#39;object&#39;]</span>
</pre></div>
</div>
<p>Luckily this can be optimized; here it is sufficient to add a single
base to enforce the same MRO:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">class</span> <span class="nc">A7</span><span class="p">(</span><span class="n">A6</span><span class="p">,</span> <span class="n">A5</span><span class="p">,</span> <span class="n">A4</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">sage: </span><span class="p">[</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">A7</span><span class="o">.</span><span class="n">mro</span><span class="p">()]</span>
<span class="go">[&#39;A7&#39;, &#39;A6&#39;, &#39;A5&#39;, &#39;A4&#39;, &#39;A3&#39;, &#39;A2&#39;, &#39;A1&#39;, &#39;object&#39;]</span>
</pre></div>
</div>
</section>
<section id="a-strategy-to-solve-the-problem">
<h2>A strategy to solve the problem<a class="headerlink" href="#a-strategy-to-solve-the-problem" title="Permalink to this heading">#</a></h2>
<p>We should recall at this point a design decision that we took for the
hierarchy of classes derived from categories: <em>the semantic shall only
depend on the inheritance order</em>, not on the specific MRO, and in
particular not on the order of the bases (see
<a class="reference external" href="../../../categories/sage/categories/primer.html#category-primer-category-order" title="(in Category Framework v10.0)"><span class="xref std std-ref">On the order of super categories</span></a>).</p>
<p>If a choice needs to be made (for example for efficiency reasons),
then this should be done explicitly, on a method-by-method basis. In
practice this design goal is not yet met.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When managing large hierarchies of classes in other contexts this
may be too strong a design decision.</p>
</div>
<p>The strategy we use for hierarchies of classes derived from categories
is then:</p>
<ol class="arabic simple">
<li><p>To choose a global total order on the whole hierarchy of classes.</p></li>
<li><p>To control <code class="docutils literal notranslate"><span class="pre">C3</span></code> to get it to return MROs that follow this total order.</p></li>
</ol>
<p>A basic approach for point 1., that will work for any hierarchy of
classes, is to enumerate the classes while they are constructed
(making sure that the bases of each class are enumerated before that
class), and to order the classes according to that enumeration. A more
conceptual ordering may be desirable, in particular to get
deterministic and reproducible results. In the context of Sage, this
is mostly relevant for those doctests displaying all the categories or
classes that an object inherits from.</p>
</section>
<section id="getting-fine-control-on-c3">
<h2>Getting fine control on C3<a class="headerlink" href="#getting-fine-control-on-c3" title="Permalink to this heading">#</a></h2>
<p>This module is about point 2.</p>
<p>The natural approach would be to change the algorithm used by Python
to compute the MRO. However, changing Python’s default algorithm just
for our needs is obviously not an option, and there is currently no
hook to customize specific classes to use a different algorithm.
Pushing the addition of such a hook into stock Python would take too
much time and effort.</p>
<p>Another approach would be to use the “adding bases” trick
straightforwardly, putting the list of <em>all</em> the super classes of a
class as its bases. However, this would have several drawbacks:</p>
<ul>
<li><p>It is not so elegant, in particular because it duplicates
information: we already know through <code class="docutils literal notranslate"><span class="pre">A5</span></code> that <code class="docutils literal notranslate"><span class="pre">A7</span></code> is a
subclass of <code class="docutils literal notranslate"><span class="pre">A1</span></code>. This duplication could be acceptable in our
context because the hierarchy of classes is generated automatically
from a conceptual hierarchy (the categories) which serves as single
point of truth for calculating the bases of each class.</p></li>
<li><p>It increases the complexity of the calculation of the MRO with
<code class="docutils literal notranslate"><span class="pre">C3</span></code>. For example, for a linear hierachy of classes, the
complexity goes from <span class="math notranslate nohighlight">\(O(n^2)\)</span> to <span class="math notranslate nohighlight">\(O(n^3)\)</span> which is not acceptable.</p></li>
<li><p>It increases the complexity of inspecting the classes. For example,
the current implementation of the <code class="docutils literal notranslate"><span class="pre">dir</span></code> command in Python has no
cache, and its complexity is linear in the number of maximal paths
in the class hierarchy graph as defined by the bases. For a linear
hierarchy, this is of complexity <span class="math notranslate nohighlight">\(O(p_n)\)</span> where <span class="math notranslate nohighlight">\(p_n\)</span> is the number
of integer partitions of <span class="math notranslate nohighlight">\(n\)</span>, which is exponential. And indeed,
running <code class="docutils literal notranslate"><span class="pre">dir</span></code> for a typical class like
<code class="docutils literal notranslate"><span class="pre">GradedHopfAlgebrasWithBasis(QQ).parent_class</span></code> with <code class="docutils literal notranslate"><span class="pre">37</span></code> super
classes took <span class="math notranslate nohighlight">\(18\)</span> seconds with this approach.</p>
<p>Granted: this mostly affects the <code class="docutils literal notranslate"><span class="pre">dir</span></code> command and could be blamed
on its current implementation. With appropriate caching, it could be
reimplemented to have a complexity roughly linear in the number of
classes in the hierarchy. But this won’t happen any time soon in a
stock Python.</p>
</li>
</ul>
<p>This module refines this approach to make it acceptable, if not
seamless. Given a hierarchy and a total order on this hierarchy, it
calculates for each element of the hierarchy the smallest list of
additional bases that forces <code class="docutils literal notranslate"><span class="pre">C3</span></code> to return the desired MRO. This is
achieved by implementing an instrumented variant of the <code class="docutils literal notranslate"><span class="pre">C3</span></code>
algorithm (which we call <em>instrumented</em> <code class="docutils literal notranslate"><span class="pre">C3</span></code>) that detects when
<code class="docutils literal notranslate"><span class="pre">C3</span></code> is about to take a wrong decision and adds one base to force
the right decision. Then, running the standard <code class="docutils literal notranslate"><span class="pre">C3</span></code> algorithm with
the updated list of bases (which we call <em>controlled</em> <code class="docutils literal notranslate"><span class="pre">C3</span></code>) yields
the desired MRO.</p>
<p>EXAMPLES:</p>
<p>As an experimentation and testing tool, we use a class
<a class="reference internal" href="#sage.misc.c3_controlled.HierarchyElement" title="sage.misc.c3_controlled.HierarchyElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">HierarchyElement</span></code></a> whose instances can be constructed from a
hierarchy described by a poset, a digraph, or more generally a
successor relation. By default, the desired MRO is sorted
decreasingly. Another total order can be specified using a sorting
key.</p>
<p>We consider the smallest poset describing a class hierarchy admitting
no MRO whatsoever:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">Poset</span><span class="p">({</span><span class="mi">10</span><span class="p">:</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">],</span> <span class="mi">9</span><span class="p">:[</span><span class="mi">6</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="mi">8</span><span class="p">:[</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="mi">7</span><span class="p">:[</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="mi">6</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="mi">5</span><span class="p">:[</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="mi">4</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="p">},</span> <span class="n">linear_extension</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">facade</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>And build a <a class="reference internal" href="#sage.misc.c3_controlled.HierarchyElement" title="sage.misc.c3_controlled.HierarchyElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">HierarchyElement</span></code></a> from it:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.c3_controlled</span> <span class="kn">import</span> <span class="n">HierarchyElement</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
</pre></div>
</div>
<p>Here are its bases:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span><span class="o">.</span><span class="n">_bases</span>
<span class="go">[9, 8, 7]</span>
</pre></div>
</div>
<p>Using the standard <code class="docutils literal notranslate"><span class="pre">C3</span></code> algorithm fails:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro_standard</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: Cannot merge the items 3, 3, 2.</span>
</pre></div>
</div>
<p>We also get a failure when we relabel <span class="math notranslate nohighlight">\(P\)</span> according to another linear
extension. For easy relabelling, we first need to set an appropriate
default linear extension for <span class="math notranslate nohighlight">\(P\)</span>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">linear_extension</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">IntegerRange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">)))</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">with_linear_extension</span><span class="p">(</span><span class="n">linear_extension</span><span class="p">)</span>
<span class="gp">sage: </span><span class="nb">list</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
<span class="go">[10, 9, 8, 7, 6, 5, 4, 3, 2, 1]</span>
</pre></div>
</div>
<p>Now we play with a specific linear extension of <span class="math notranslate nohighlight">\(P\)</span>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">Q</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">linear_extension</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span><span class="o">.</span><span class="n">to_poset</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">Q</span><span class="o">.</span><span class="n">cover_relations</span><span class="p">()</span>
<span class="go">[[10, 9], [10, 8], [10, 7], [9, 6], [9, 3], [8, 5], [8, 2], [7, 4], [7, 1], [6, 2], [6, 1], [5, 3], [5, 1], [4, 3], [4, 2]]</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">Q</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro_standard</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: Cannot merge the items 2, 3, 3.</span>
</pre></div>
</div>
<p>On the other hand, both the instrumented <code class="docutils literal notranslate"><span class="pre">C3</span></code> algorithm, and the
controlled <code class="docutils literal notranslate"><span class="pre">C3</span></code> algorithm give the desired MRO:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro</span>
<span class="go">[10, 9, 8, 7, 6, 5, 4, 3, 2, 1]</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro_controlled</span>
<span class="go">[10, 9, 8, 7, 6, 5, 4, 3, 2, 1]</span>
</pre></div>
</div>
<p>The above checks, and more, can be run with:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">_test_mro</span><span class="p">()</span>
</pre></div>
</div>
<p>In practice, the control was achieved by adding the following bases:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">_bases</span>
<span class="go">[9, 8, 7]</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">_bases_controlled</span>
<span class="go">[9, 8, 7, 6, 5]</span>
</pre></div>
</div>
<p>Altogether, four bases were added for control:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="nb">sum</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">HierarchyElement</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">Q</span><span class="p">)</span><span class="o">.</span><span class="n">_bases</span><span class="p">)</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">Q</span><span class="p">)</span>
<span class="go">15</span>
<span class="gp">sage: </span><span class="nb">sum</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">HierarchyElement</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">Q</span><span class="p">)</span><span class="o">.</span><span class="n">_bases_controlled</span><span class="p">)</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">Q</span><span class="p">)</span>
<span class="go">19</span>
</pre></div>
</div>
<p>This information can also be recovered with:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">all_bases_len</span><span class="p">()</span>
<span class="go">15</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">all_bases_controlled_len</span><span class="p">()</span>
<span class="go">19</span>
</pre></div>
</div>
<p>We now check that the <code class="docutils literal notranslate"><span class="pre">C3</span></code> algorithm fails for all linear extensions
<span class="math notranslate nohighlight">\(l\)</span> of this poset, whereas both the instrumented and controlled <code class="docutils literal notranslate"><span class="pre">C3</span></code>
algorithms succeed; along the way, we collect some statistics:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">L</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">linear_extensions</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">stats</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">sage: </span><span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">L</span><span class="p">:</span>
<span class="gp">....: </span>    <span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">to_poset</span><span class="p">())</span>
<span class="gp">....: </span>    <span class="k">try</span><span class="p">:</span> <span class="c1"># Check that x.mro_standard always fails with a ValueError</span>
<span class="gp">....: </span>        <span class="n">x</span><span class="o">.</span><span class="n">mro_standard</span>
<span class="gp">....: </span>    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
<span class="gp">....: </span>        <span class="k">pass</span>
<span class="gp">....: </span>    <span class="k">else</span><span class="p">:</span>
<span class="gp">....: </span>        <span class="k">assert</span> <span class="kc">False</span>
<span class="gp">....: </span>    <span class="k">assert</span> <span class="n">x</span><span class="o">.</span><span class="n">mro</span>            <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="k">assert</span> <span class="n">x</span><span class="o">.</span><span class="n">mro_controlled</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="k">assert</span> <span class="n">x</span><span class="o">.</span><span class="n">all_bases_len</span><span class="p">()</span> <span class="o">==</span> <span class="mi">15</span>
<span class="gp">....: </span>    <span class="n">stats</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">all_bases_controlled_len</span><span class="p">()</span><span class="o">-</span><span class="n">x</span><span class="o">.</span><span class="n">all_bases_len</span><span class="p">())</span>
</pre></div>
</div>
<p>Depending on the linear extension <span class="math notranslate nohighlight">\(l\)</span> it was necessary to add between
one and five bases for control; for example, <span class="math notranslate nohighlight">\(216\)</span> linear extensions
required the addition of four bases:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="nb">sorted</span><span class="p">(</span><span class="n">Word</span><span class="p">(</span><span class="n">stats</span><span class="p">)</span><span class="o">.</span><span class="n">evaluation_sparse</span><span class="p">())</span>
<span class="go">[(1, 36), (2, 108), (3, 180), (4, 216), (5, 180)]</span>
</pre></div>
</div>
<p>We now consider a hierarchy of categories:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">attrgetter</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="n">Groups</span><span class="p">(),</span> <span class="n">attrcall</span><span class="p">(</span><span class="s2">&quot;super_categories&quot;</span><span class="p">),</span> <span class="n">attrgetter</span><span class="p">(</span><span class="s2">&quot;_cmp_key&quot;</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro</span>
<span class="go">[Category of groups, Category of monoids, Category of semigroups,</span>
<span class="go"> Category of inverse unital magmas, Category of unital magmas, Category of magmas,</span>
<span class="go"> Category of sets, Category of sets with partial maps, Category of objects]</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro_standard</span>
<span class="go">[Category of groups, Category of monoids, Category of semigroups,</span>
<span class="go"> Category of inverse unital magmas, Category of unital magmas, Category of magmas,</span>
<span class="go"> Category of sets, Category of sets with partial maps, Category of objects]</span>
</pre></div>
</div>
<p>For a typical category, few bases, if any, need to be added to force
<code class="docutils literal notranslate"><span class="pre">C3</span></code> to give the desired order:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">C</span> <span class="o">=</span> <span class="n">FiniteFields</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">attrcall</span><span class="p">(</span><span class="s2">&quot;super_categories&quot;</span><span class="p">),</span> <span class="n">attrgetter</span><span class="p">(</span><span class="s2">&quot;_cmp_key&quot;</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro</span> <span class="o">==</span> <span class="n">x</span><span class="o">.</span><span class="n">mro_standard</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">all_bases_len</span><span class="p">()</span>
<span class="go">70</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">all_bases_controlled_len</span><span class="p">()</span>
<span class="go">74</span>

<span class="gp">sage: </span><span class="n">C</span> <span class="o">=</span> <span class="n">GradedHopfAlgebrasWithBasis</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">attrcall</span><span class="p">(</span><span class="s2">&quot;super_categories&quot;</span><span class="p">),</span> <span class="n">attrgetter</span><span class="p">(</span><span class="s2">&quot;_cmp_key&quot;</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">_test_mro</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro</span> <span class="o">==</span> <span class="n">x</span><span class="o">.</span><span class="n">mro_standard</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">all_bases_len</span><span class="p">()</span>
<span class="go">114</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">all_bases_controlled_len</span><span class="p">()</span>
<span class="go">117</span>
</pre></div>
</div>
<p>The following can be used to search through the Sage named categories
for any that requires the addition of some bases. The output may
change a bit when the category hierarchy is changed. As long as the
list below does not change radically, it’s fine to just update this
doctest:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.categories.category</span> <span class="kn">import</span> <span class="n">category_sample</span>
<span class="gp">sage: </span><span class="nb">sorted</span><span class="p">([</span><span class="n">C</span> <span class="k">for</span> <span class="n">C</span> <span class="ow">in</span> <span class="n">category_sample</span><span class="p">()</span>
<span class="gp">....: </span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">_super_categories_for_classes</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">super_categories</span><span class="p">())],</span>
<span class="gp">....: </span>       <span class="n">key</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
<span class="go">[Category of affine weyl groups,</span>
<span class="go"> Category of fields,</span>
<span class="go"> Category of finite dimensional algebras with basis over Rational Field,</span>
<span class="go"> Category of finite dimensional hopf algebras with basis over Rational Field,</span>
<span class="go"> Category of finite enumerated permutation groups,</span>
<span class="go"> Category of finite weyl groups,</span>
<span class="go"> Category of number fields]</span>
</pre></div>
</div>
<p>AUTHOR:</p>
<ul class="simple">
<li><p>Nicolas M. Thiery (2012-09): initial version.</p></li>
</ul>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.c3_controlled.C3_merge">
<span class="sig-prename descclassname"><span class="pre">sage.misc.c3_controlled.</span></span><span class="sig-name descname"><span class="pre">C3_merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lists</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.c3_controlled.C3_merge" title="Permalink to this definition">#</a></dt>
<dd><p>Return the input lists merged using the <code class="docutils literal notranslate"><span class="pre">C3</span></code> algorithm.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.c3_controlled</span> <span class="kn">import</span> <span class="n">C3_merge</span>
<span class="gp">sage: </span><span class="n">C3_merge</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="go">[4, 3, 2, 1]</span>
<span class="gp">sage: </span><span class="n">C3_merge</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="go">[3, 2, 4, 1]</span>
</pre></div>
</div>
<p>This function is only used for testing and experimenting purposes,
but exercised quite some by the other doctests in this file.</p>
<p>It is an extract of <a class="reference internal" href="c3.html#sage.misc.c3.C3_algorithm" title="sage.misc.c3.C3_algorithm"><code class="xref py py-func docutils literal notranslate"><span class="pre">sage.misc.c3.C3_algorithm()</span></code></a>; the latter
could be possibly rewritten to use this one to avoid duplication.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.c3_controlled.C3_sorted_merge">
<span class="sig-prename descclassname"><span class="pre">sage.misc.c3_controlled.</span></span><span class="sig-name descname"><span class="pre">C3_sorted_merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lists</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'identity'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.c3_controlled.C3_sorted_merge" title="Permalink to this definition">#</a></dt>
<dd><p>Return the sorted input lists merged using the <code class="docutils literal notranslate"><span class="pre">C3</span></code> algorithm, with a twist.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">lists</span></code> – a non empty list (or iterable) of lists (or
iterables), each sorted strictly decreasingly according
to <code class="docutils literal notranslate"><span class="pre">key</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code> – a function</p></li>
</ul>
<p>OUTPUT: a pair <code class="docutils literal notranslate"><span class="pre">(result,</span> <span class="pre">suggestion)</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">result</span></code> is the sorted list obtained by merging the lists in
<code class="docutils literal notranslate"><span class="pre">lists</span></code> while removing duplicates, and <code class="docutils literal notranslate"><span class="pre">suggestion</span></code> is a list
such that applying <code class="docutils literal notranslate"><span class="pre">C3</span></code> on <code class="docutils literal notranslate"><span class="pre">lists</span></code> with its last list replaced
by <code class="docutils literal notranslate"><span class="pre">suggestion</span></code> would return <code class="docutils literal notranslate"><span class="pre">result</span></code>.</p>
<p>EXAMPLES:</p>
<p>With the following input, <a class="reference internal" href="#sage.misc.c3_controlled.C3_merge" title="sage.misc.c3_controlled.C3_merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">C3_merge()</span></code></a> returns right away a
sorted list:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.c3_controlled</span> <span class="kn">import</span> <span class="n">C3_merge</span>
<span class="gp">sage: </span><span class="n">C3_merge</span><span class="p">([[</span><span class="mi">2</span><span class="p">],[</span><span class="mi">1</span><span class="p">]])</span>
<span class="go">[2, 1]</span>
</pre></div>
</div>
<p>In that case, <a class="reference internal" href="#sage.misc.c3_controlled.C3_sorted_merge" title="sage.misc.c3_controlled.C3_sorted_merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">C3_sorted_merge()</span></code></a> returns the same result,
with the last line unchanged:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.c3_controlled</span> <span class="kn">import</span> <span class="n">C3_sorted_merge</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge</span><span class="p">([[</span><span class="mi">2</span><span class="p">],[</span><span class="mi">1</span><span class="p">]])</span>
<span class="go">([2, 1], [1])</span>
</pre></div>
</div>
<p>On the other hand, with the following input, <a class="reference internal" href="#sage.misc.c3_controlled.C3_merge" title="sage.misc.c3_controlled.C3_merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">C3_merge()</span></code></a>
returns a non sorted list:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">C3_merge</span><span class="p">([[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">]])</span>
<span class="go">[1, 2]</span>
</pre></div>
</div>
<p>Then, <a class="reference internal" href="#sage.misc.c3_controlled.C3_sorted_merge" title="sage.misc.c3_controlled.C3_sorted_merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">C3_sorted_merge()</span></code></a> returns a sorted list, and suggests
to replace the last line by <code class="docutils literal notranslate"><span class="pre">[2,1]</span></code>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">C3_sorted_merge</span><span class="p">([[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">]])</span>
<span class="go">([2, 1], [2, 1])</span>
</pre></div>
</div>
<p>And indeed <a class="reference internal" href="#sage.misc.c3_controlled.C3_merge" title="sage.misc.c3_controlled.C3_merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">C3_merge()</span></code></a> now returns the desired result:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">C3_merge</span><span class="p">([[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="go">[2, 1]</span>
</pre></div>
</div>
<p>From now on, we use this little wrapper that checks that
<a class="reference internal" href="#sage.misc.c3_controlled.C3_merge" title="sage.misc.c3_controlled.C3_merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">C3_merge()</span></code></a>, with the suggestion of <a class="reference internal" href="#sage.misc.c3_controlled.C3_sorted_merge" title="sage.misc.c3_controlled.C3_sorted_merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">C3_sorted_merge()</span></code></a>,
returns a sorted list:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">C3_sorted_merge_check</span><span class="p">(</span><span class="n">lists</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="n">result</span><span class="p">,</span> <span class="n">suggestion</span> <span class="o">=</span> <span class="n">C3_sorted_merge</span><span class="p">(</span><span class="n">lists</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="n">C3_merge</span><span class="p">(</span><span class="n">lists</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">suggestion</span><span class="p">])</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="n">result</span><span class="p">,</span> <span class="n">suggestion</span>
</pre></div>
</div>
<p>Base cases:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([])</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: The input should be a non empty list of lists (or iterables)</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[]])</span>
<span class="go">([], [])</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">1</span><span class="p">]])</span>
<span class="go">([1], [1])</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="go">([3, 2, 1], [3, 2, 1])</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">1</span><span class="p">]])</span>
<span class="go">([1], [1])</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="go">([3, 2, 1], [3, 2, 1])</span>
</pre></div>
</div>
<p>Exercise different states for the last line:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">],[]])</span>
<span class="go">([2, 1], [2, 1])</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
<span class="go">([2, 1], [2, 1])</span>
</pre></div>
</div>
<p>Explore (all?) the different execution branches:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">]])</span>
<span class="go">([4, 3, 2, 1], [4, 3, 2, 1])</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">]])</span>
<span class="go">([4, 3, 2, 1], [3, 2, 1])</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="go">([4, 3, 2, 1], [4, 3, 1])</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">]])</span>
<span class="go">([4, 3, 2, 1], [4, 3, 2, 1])</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[]])</span>
<span class="go">([3, 2, 1], [2, 1])</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[]])</span>
<span class="go">([4, 3, 2, 1], [2, 1])</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
<span class="go">([4, 3, 2, 1], [2, 1])</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">2</span><span class="p">],[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">4</span><span class="p">],[</span><span class="mi">3</span><span class="p">]])</span>
<span class="go">([4, 3, 2, 1], [3, 2, 1])</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">2</span><span class="p">],[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">4</span><span class="p">],[]])</span>
<span class="go">([4, 2, 1], [4, 2, 1])</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">2</span><span class="p">],[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">]])</span>
<span class="go">([4, 3, 2, 1], [4, 3, 2, 1])</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">2</span><span class="p">],[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">3</span><span class="p">]])</span>
<span class="go">([3, 2, 1], [3])</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">2</span><span class="p">],[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">3</span><span class="p">]])</span>
<span class="go">([3, 2, 1], [3, 2])</span>
</pre></div>
</div>
<p>Exercises adding one item when the last list has a single element;
the second example comes from an actual poset:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="go">([5, 4, 3, 2, 1], [5, 4, 3, 2, 1])</span>
<span class="gp">sage: </span><span class="n">C3_sorted_merge_check</span><span class="p">([[</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="go">([6, 5, 4, 3, 2, 1], [6, 5, 4, 3, 2, 1])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.misc.c3_controlled.CmpKey">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.misc.c3_controlled.</span></span><span class="sig-name descname"><span class="pre">CmpKey</span></span><a class="headerlink" href="#sage.misc.c3_controlled.CmpKey" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class implements the lazy attribute <code class="docutils literal notranslate"><span class="pre">Category._cmp_key</span></code>.</p>
<p>The comparison key <code class="docutils literal notranslate"><span class="pre">A._cmp_key</span></code> of a category is used to define
an (almost) total order on non-join categories by setting, for two
categories <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(B\)</span>, <span class="math notranslate nohighlight">\(A&lt;B\)</span> if <code class="docutils literal notranslate"><span class="pre">A._cmp_key</span> <span class="pre">&gt;</span> <span class="pre">B._cmp_key</span></code>. This
order in turn is used to give a normal form to join’s, and help
toward having a consistent method resolution order for
parent/element classes.</p>
<p>The comparison key should satisfy the following properties:</p>
<ul class="simple">
<li><p>If <span class="math notranslate nohighlight">\(A\)</span> is a subcategory of <span class="math notranslate nohighlight">\(B\)</span>, then <span class="math notranslate nohighlight">\(A &lt; B\)</span> (so that
<code class="docutils literal notranslate"><span class="pre">A._cmp_key</span> <span class="pre">&gt;</span> <span class="pre">B._cmp_key</span></code>). In particular,
<a class="reference external" href="../../../categories/sage/categories/objects.html#sage.categories.objects.Objects" title="(in Category Framework v10.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Objects()</span></code></a> is the largest category.</p></li>
<li><p>If <span class="math notranslate nohighlight">\(A != B\)</span> and taking the join of <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(B\)</span> makes sense
(e.g. taking the join of <code class="docutils literal notranslate"><span class="pre">Algebras(GF(5))</span></code> and
<code class="docutils literal notranslate"><span class="pre">Algebras(QQ)</span></code> does not make sense), then <span class="math notranslate nohighlight">\(A&lt;B\)</span> or <span class="math notranslate nohighlight">\(B&lt;A\)</span>.</p></li>
</ul>
<p>The rationale for the inversion above between <span class="math notranslate nohighlight">\(A&lt;B\)</span> and
<code class="docutils literal notranslate"><span class="pre">A._cmp_key</span> <span class="pre">&gt;</span> <span class="pre">B._cmp_key</span></code> is that we want the order to
be compatible with inclusion of categories, yet it’s easier in
practice to create keys that get bigger and bigger while we go
down the category hierarchy.</p>
<p>This implementation applies to join-irreducible categories
(i.e. categories that are not join categories). It returns a
pair of integers <code class="docutils literal notranslate"><span class="pre">(flags,</span> <span class="pre">i)</span></code>, where <code class="docutils literal notranslate"><span class="pre">flags</span></code> is to be
interpreted as a bit vector. The first bit is set if <code class="docutils literal notranslate"><span class="pre">self</span></code>
is a facade set. The second bit is set if <code class="docutils literal notranslate"><span class="pre">self</span></code> is finite.
And so on. The choice of the flags is adhoc and was primarily
crafted so that the order between categories would not change
too much upon integration of <a class="reference external" href="https://github.com/sagemath/sage/issues/13589">github issue #13589</a> and would be
reasonably session independent. The number <code class="docutils literal notranslate"><span class="pre">i</span></code> is there
to resolve ambiguities; it is session dependent, and is
assigned increasingly when new categories are created.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is currently not implemented using a
<a class="reference internal" href="lazy_attribute.html#sage.misc.lazy_attribute.lazy_attribute" title="sage.misc.lazy_attribute.lazy_attribute"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_attribute</span></code></a> for speed reasons only (the code is in
Cython and takes advantage of the fact that Category objects
always have a <code class="docutils literal notranslate"><span class="pre">__dict__</span></code> dictionary)</p>
</div>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>Handle nicely (covariant) functorial constructions and axioms</p></li>
</ul>
</div>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">Objects</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(0, 0)</span>
<span class="gp">sage: </span><span class="n">SetsWithPartialMaps</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(0, 1)</span>
<span class="gp">sage: </span><span class="n">Sets</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(0, 2)</span>
<span class="gp">sage: </span><span class="n">Sets</span><span class="p">()</span><span class="o">.</span><span class="n">Facade</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(1, ...)</span>
<span class="gp">sage: </span><span class="n">Sets</span><span class="p">()</span><span class="o">.</span><span class="n">Finite</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(2, ...)</span>
<span class="gp">sage: </span><span class="n">Sets</span><span class="p">()</span><span class="o">.</span><span class="n">Infinite</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(4, ...)</span>
<span class="gp">sage: </span><span class="n">EnumeratedSets</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(8, ...)</span>
<span class="gp">sage: </span><span class="n">FiniteEnumeratedSets</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(10, ...)</span>
<span class="gp">sage: </span><span class="n">SetsWithGrading</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(16, ...)</span>
<span class="gp">sage: </span><span class="n">Posets</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(32, ...)</span>
<span class="gp">sage: </span><span class="n">LatticePosets</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(96, ...)</span>
<span class="gp">sage: </span><span class="n">Crystals</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(136, ...)</span>
<span class="gp">sage: </span><span class="n">AdditiveMagmas</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(256, ...)</span>
<span class="gp">sage: </span><span class="n">Magmas</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(4096, ...)</span>
<span class="gp">sage: </span><span class="n">CommutativeAdditiveSemigroups</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(256, ...)</span>
<span class="gp">sage: </span><span class="n">Rings</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(225536, ...)</span>
<span class="gp">sage: </span><span class="n">Algebras</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(225536, ...)</span>
<span class="gp">sage: </span><span class="n">AlgebrasWithBasis</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(227584, ...)</span>
<span class="gp">sage: </span><span class="n">GradedAlgebras</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(226560, ...)</span>
<span class="gp">sage: </span><span class="n">GradedAlgebrasWithBasis</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">(228608, ...)</span>
</pre></div>
</div>
<p>For backward compatibility we currently want the following comparisons:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">EnumeratedSets</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span> <span class="o">&gt;</span> <span class="n">Sets</span><span class="p">()</span><span class="o">.</span><span class="n">Facade</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">AdditiveMagmas</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span> <span class="o">&gt;</span> <span class="n">EnumeratedSets</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">True</span>

<span class="gp">sage: </span><span class="n">Category</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">EnumeratedSets</span><span class="p">(),</span> <span class="n">Sets</span><span class="p">()</span><span class="o">.</span><span class="n">Facade</span><span class="p">()])</span><span class="o">.</span><span class="n">parent_class</span><span class="o">.</span><span class="n">_an_element_</span><span class="o">.</span><span class="vm">__module__</span>
<span class="go">&#39;sage.categories.enumerated_sets&#39;</span>

<span class="gp">sage: </span><span class="n">CommutativeAdditiveSemigroups</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span> <span class="o">&lt;</span> <span class="n">Magmas</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">VectorSpaces</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span><span class="o">.</span><span class="n">_cmp_key</span> <span class="o">&lt;</span> <span class="n">Rings</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">VectorSpaces</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span><span class="o">.</span><span class="n">_cmp_key</span> <span class="o">&lt;</span> <span class="n">Magmas</span><span class="p">()</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.misc.c3_controlled.CmpKeyNamed">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.misc.c3_controlled.</span></span><span class="sig-name descname"><span class="pre">CmpKeyNamed</span></span><a class="headerlink" href="#sage.misc.c3_controlled.CmpKeyNamed" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class implements the lazy attribute <code class="docutils literal notranslate"><span class="pre">CategoryWithParameters._cmp_key</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="#sage.misc.c3_controlled.CmpKey" title="sage.misc.c3_controlled.CmpKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">CmpKey</span></code></a></p></li>
<li><p><a class="reference internal" href="lazy_attribute.html#sage.misc.lazy_attribute.lazy_attribute" title="sage.misc.lazy_attribute.lazy_attribute"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_attribute</span></code></a></p></li>
<li><p><a class="reference external" href="../../../categories/sage/categories/category.html#sage.categories.category.CategoryWithParameters" title="(in Category Framework v10.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.categories.category.CategoryWithParameters</span></code></a>.</p></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The value of the attribute depends only on the parameters of
this category.</p></li>
<li><p>This is currently not implemented using a
<a class="reference internal" href="lazy_attribute.html#sage.misc.lazy_attribute.lazy_attribute" title="sage.misc.lazy_attribute.lazy_attribute"><code class="xref py py-class docutils literal notranslate"><span class="pre">lazy_attribute</span></code></a> for speed reasons only.</p></li>
</ul>
</div>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">Algebras</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">_cmp_key</span> <span class="o">==</span> <span class="n">Algebras</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span><span class="o">.</span><span class="n">_cmp_key</span>  <span class="c1"># indirect doctest</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">Algebras</span><span class="p">(</span><span class="n">ZZ</span><span class="p">)</span><span class="o">.</span><span class="n">_cmp_key</span> <span class="o">!=</span> <span class="n">Algebras</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span><span class="o">.</span><span class="n">_cmp_key</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.misc.c3_controlled.HierarchyElement">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.misc.c3_controlled.</span></span><span class="sig-name descname"><span class="pre">HierarchyElement</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bases</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">from_value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.c3_controlled.HierarchyElement" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class for elements in a hierarchy.</p>
<p>This class is for testing and experimenting with various variants
of the <code class="docutils literal notranslate"><span class="pre">C3</span></code> algorithm to compute a linear extension of the
elements above an element in a hierarchy. Given the topic at hand,
we use the following naming conventions. For <span class="math notranslate nohighlight">\(x\)</span> an element of the
hierarchy, we call the elements just above <span class="math notranslate nohighlight">\(x\)</span> its <em>bases</em>, and
the linear extension of all elements above <span class="math notranslate nohighlight">\(x\)</span> its <em>MRO</em>.</p>
<p>By convention, the bases are given as lists of instances of
<a class="reference internal" href="#sage.misc.c3_controlled.HierarchyElement" title="sage.misc.c3_controlled.HierarchyElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">HierarchyElement</span></code></a>, and MROs are given a list of the
corresponding values.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code> – an object</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">succ</span></code> – a successor function, poset or digraph from which
one can recover the successors of <code class="docutils literal notranslate"><span class="pre">value</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code> – a function taking values as input (default: the
identity) this function is used to compute comparison keys for
sorting elements of the hierarchy.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Constructing a <a class="reference internal" href="#sage.misc.c3_controlled.HierarchyElement" title="sage.misc.c3_controlled.HierarchyElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">HierarchyElement</span></code></a> immediately constructs the
whole hierarchy above it.</p>
</div>
<p>EXAMPLES:</p>
<p>See the introduction of this module <a class="reference internal" href="#module-sage.misc.c3_controlled" title="sage.misc.c3_controlled"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sage.misc.c3_controlled</span></code></a>
for many examples. Here we consider a large example, originaly
taken from the hierarchy of categories above
<a class="reference external" href="../../../categories/sage/categories/hopf_algebras_with_basis.html#sage.categories.hopf_algebras_with_basis.HopfAlgebrasWithBasis" title="(in Category Framework v10.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">HopfAlgebrasWithBasis</span></code></a>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.c3_controlled</span> <span class="kn">import</span> <span class="n">HierarchyElement</span>
<span class="gp">sage: </span><span class="n">G</span> <span class="o">=</span> <span class="n">DiGraph</span><span class="p">({</span>
<span class="gp">....: </span>    <span class="mi">44</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">43</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">43</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">42</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">42</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">36</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">41</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">40</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">40</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">36</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">39</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">38</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">38</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">37</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">37</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">36</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">35</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">35</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">29</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">34</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">33</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">33</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">32</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">32</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">31</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">30</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">29</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">29</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">28</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">28</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">27</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">27</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">26</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">25</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">24</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">24</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">23</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">22</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">22</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">21</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">21</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">20</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">19</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">18</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">18</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">17</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">17</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">16</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">15</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">14</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">14</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">13</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">12</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">11</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">10</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">9</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">8</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">7</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">6</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">5</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">4</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">3</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">2</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">1</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="gp">....: </span>    <span class="mi">0</span> <span class="p">:</span>  <span class="p">[],</span>
<span class="gp">....: </span>    <span class="p">})</span>

<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">44</span><span class="p">,</span> <span class="n">G</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro</span>
<span class="go">[44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26, 25, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0]</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">cls</span>
<span class="go">&lt;class &#39;44.cls&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">cls</span><span class="o">.</span><span class="n">mro</span><span class="p">()</span>
<span class="go">[&lt;class &#39;44.cls&#39;&gt;, &lt;class &#39;43.cls&#39;&gt;, &lt;class &#39;42.cls&#39;&gt;, &lt;class &#39;41.cls&#39;&gt;, &lt;class &#39;40.cls&#39;&gt;, &lt;class &#39;39.cls&#39;&gt;, &lt;class &#39;38.cls&#39;&gt;, &lt;class &#39;37.cls&#39;&gt;, &lt;class &#39;36.cls&#39;&gt;, &lt;class &#39;35.cls&#39;&gt;, &lt;class &#39;34.cls&#39;&gt;, &lt;class &#39;33.cls&#39;&gt;, &lt;class &#39;32.cls&#39;&gt;, &lt;class &#39;31.cls&#39;&gt;, &lt;class &#39;30.cls&#39;&gt;, &lt;class &#39;29.cls&#39;&gt;, &lt;class &#39;28.cls&#39;&gt;, &lt;class &#39;27.cls&#39;&gt;, &lt;class &#39;26.cls&#39;&gt;, &lt;class &#39;25.cls&#39;&gt;, &lt;class &#39;24.cls&#39;&gt;, &lt;class &#39;23.cls&#39;&gt;, &lt;class &#39;22.cls&#39;&gt;, &lt;class &#39;21.cls&#39;&gt;, &lt;class &#39;20.cls&#39;&gt;, &lt;class &#39;19.cls&#39;&gt;, &lt;class &#39;18.cls&#39;&gt;, &lt;class &#39;17.cls&#39;&gt;, &lt;class &#39;16.cls&#39;&gt;, &lt;class &#39;15.cls&#39;&gt;, &lt;class &#39;14.cls&#39;&gt;, &lt;class &#39;13.cls&#39;&gt;, &lt;class &#39;12.cls&#39;&gt;, &lt;class &#39;11.cls&#39;&gt;, &lt;class &#39;10.cls&#39;&gt;, &lt;class &#39;9.cls&#39;&gt;, &lt;class &#39;8.cls&#39;&gt;, &lt;class &#39;7.cls&#39;&gt;, &lt;class &#39;6.cls&#39;&gt;, &lt;class &#39;5.cls&#39;&gt;, &lt;class &#39;4.cls&#39;&gt;, &lt;class &#39;3.cls&#39;&gt;, &lt;class &#39;2.cls&#39;&gt;, &lt;class &#39;1.cls&#39;&gt;, &lt;class &#39;0.cls&#39;&gt;, &lt;... &#39;object&#39;&gt;]</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.c3_controlled.HierarchyElement.all_bases">
<span class="sig-name descname"><span class="pre">all_bases</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.c3_controlled.HierarchyElement.all_bases" title="Permalink to this definition">#</a></dt>
<dd><p>Return the set of all instances of <a class="reference internal" href="#sage.misc.c3_controlled.HierarchyElement" title="sage.misc.c3_controlled.HierarchyElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">HierarchyElement</span></code></a> above
<code class="docutils literal notranslate"><span class="pre">self</span></code>, <code class="docutils literal notranslate"><span class="pre">self</span></code> included.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.c3_controlled</span> <span class="kn">import</span> <span class="n">HierarchyElement</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">Poset</span><span class="p">((</span><span class="n">divisors</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">y</span><span class="o">.</span><span class="n">divides</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="n">facade</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span><span class="o">.</span><span class="n">all_bases</span><span class="p">()</span>
<span class="go">{1}</span>
<span class="gp">sage: </span><span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span><span class="o">.</span><span class="n">all_bases</span><span class="p">()</span>  <span class="c1"># random output</span>
<span class="go">{10, 5, 2, 1}</span>
<span class="gp">sage: </span><span class="nb">sorted</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span><span class="o">.</span><span class="n">all_bases</span><span class="p">()])</span>
<span class="go">[1, 2, 5, 10]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.c3_controlled.HierarchyElement.all_bases_controlled_len">
<span class="sig-name descname"><span class="pre">all_bases_controlled_len</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.c3_controlled.HierarchyElement.all_bases_controlled_len" title="Permalink to this definition">#</a></dt>
<dd><p>Return the cumulated size of the controlled bases of the elements above <code class="docutils literal notranslate"><span class="pre">self</span></code> in the hierarchy.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.c3_controlled</span> <span class="kn">import</span> <span class="n">HierarchyElement</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">Poset</span><span class="p">((</span><span class="n">divisors</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">y</span><span class="o">.</span><span class="n">divides</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="n">facade</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span><span class="o">.</span><span class="n">all_bases_controlled_len</span><span class="p">()</span>
<span class="go">13</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.c3_controlled.HierarchyElement.all_bases_len">
<span class="sig-name descname"><span class="pre">all_bases_len</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.c3_controlled.HierarchyElement.all_bases_len" title="Permalink to this definition">#</a></dt>
<dd><p>Return the cumulated size of the bases of the elements above <code class="docutils literal notranslate"><span class="pre">self</span></code> in the hierarchy.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.c3_controlled</span> <span class="kn">import</span> <span class="n">HierarchyElement</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">Poset</span><span class="p">((</span><span class="n">divisors</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">y</span><span class="o">.</span><span class="n">divides</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="n">facade</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span><span class="o">.</span><span class="n">all_bases_len</span><span class="p">()</span>
<span class="go">12</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.c3_controlled.HierarchyElement.bases">
<span class="sig-name descname"><span class="pre">bases</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.c3_controlled.HierarchyElement.bases" title="Permalink to this definition">#</a></dt>
<dd><p>The bases of <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<p>The bases are given as a list of instances of
<a class="reference internal" href="#sage.misc.c3_controlled.HierarchyElement" title="sage.misc.c3_controlled.HierarchyElement"><code class="xref py py-class docutils literal notranslate"><span class="pre">HierarchyElement</span></code></a>, sorted decreasingly according to
the <code class="docutils literal notranslate"><span class="pre">key</span></code> function.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.c3_controlled</span> <span class="kn">import</span> <span class="n">HierarchyElement</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">Poset</span><span class="p">((</span><span class="n">divisors</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">y</span><span class="o">.</span><span class="n">divides</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="n">facade</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">bases</span>
<span class="go">[5, 2]</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">bases</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="go">&lt;class &#39;sage.misc.c3_controlled.HierarchyElement&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro</span>
<span class="go">[10, 5, 2, 1]</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">_bases_controlled</span>
<span class="go">[5, 2]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.c3_controlled.HierarchyElement.cls">
<span class="sig-name descname"><span class="pre">cls</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.c3_controlled.HierarchyElement.cls" title="Permalink to this definition">#</a></dt>
<dd><p>Return a Python class with inheritance graph parallel to the hierarchy above <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.c3_controlled</span> <span class="kn">import</span> <span class="n">HierarchyElement</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">Poset</span><span class="p">((</span><span class="n">divisors</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">y</span><span class="o">.</span><span class="n">divides</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="n">facade</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">cls</span>
<span class="go">&lt;class &#39;1.cls&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">cls</span><span class="o">.</span><span class="n">mro</span><span class="p">()</span>
<span class="go">[&lt;class &#39;1.cls&#39;&gt;, &lt;... &#39;object&#39;&gt;]</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">cls</span>
<span class="go">&lt;class &#39;30.cls&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">cls</span><span class="o">.</span><span class="n">mro</span><span class="p">()</span>
<span class="go">[&lt;class &#39;30.cls&#39;&gt;, &lt;class &#39;15.cls&#39;&gt;, &lt;class &#39;10.cls&#39;&gt;, &lt;class &#39;6.cls&#39;&gt;, &lt;class &#39;5.cls&#39;&gt;, &lt;class &#39;3.cls&#39;&gt;, &lt;class &#39;2.cls&#39;&gt;, &lt;class &#39;1.cls&#39;&gt;, &lt;... &#39;object&#39;&gt;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.c3_controlled.HierarchyElement.mro">
<span class="sig-name descname"><span class="pre">mro</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.c3_controlled.HierarchyElement.mro" title="Permalink to this definition">#</a></dt>
<dd><p>The MRO for this object, calculated with <a class="reference internal" href="#sage.misc.c3_controlled.C3_sorted_merge" title="sage.misc.c3_controlled.C3_sorted_merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">C3_sorted_merge()</span></code></a>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.c3_controlled</span> <span class="kn">import</span> <span class="n">HierarchyElement</span><span class="p">,</span> <span class="n">C3_sorted_merge</span><span class="p">,</span> <span class="n">identity</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">Poset</span><span class="p">({</span><span class="mi">7</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="mi">5</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="mi">6</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]},</span> <span class="n">facade</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro</span>
<span class="go">[5, 2, 1]</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro</span>
<span class="go">[6, 4, 3]</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro</span>
<span class="go">[7, 6, 5, 4, 3, 2, 1]</span>

<span class="gp">sage: </span><span class="n">C3_sorted_merge</span><span class="p">([[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">]],</span> <span class="n">identity</span><span class="p">)</span>
<span class="go">([6, 5, 4, 3, 2, 1], [6, 5, 4])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.c3_controlled.HierarchyElement.mro_controlled">
<span class="sig-name descname"><span class="pre">mro_controlled</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.c3_controlled.HierarchyElement.mro_controlled" title="Permalink to this definition">#</a></dt>
<dd><p>The MRO for this object, calculated with <a class="reference internal" href="#sage.misc.c3_controlled.C3_merge" title="sage.misc.c3_controlled.C3_merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">C3_merge()</span></code></a>, under
control of <a class="reference internal" href="#sage.misc.c3_controlled.C3_sorted_merge" title="sage.misc.c3_controlled.C3_sorted_merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">C3_sorted_merge()</span></code></a></p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.c3_controlled</span> <span class="kn">import</span> <span class="n">HierarchyElement</span><span class="p">,</span> <span class="n">C3_merge</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">Poset</span><span class="p">({</span><span class="mi">7</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="mi">5</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="mi">6</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]},</span> <span class="n">facade</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro_controlled</span>
<span class="go">[5, 2, 1]</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro_controlled</span>
<span class="go">[6, 4, 3]</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro_controlled</span>
<span class="go">[7, 6, 5, 4, 3, 2, 1]</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">_bases</span>
<span class="go">[6, 5]</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">_bases_controlled</span>
<span class="go">[6, 5, 4]</span>
<span class="gp">sage: </span><span class="n">C3_merge</span><span class="p">([[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">]])</span>
<span class="go">[6, 4, 3, 5, 2, 1]</span>
<span class="gp">sage: </span><span class="n">C3_merge</span><span class="p">([[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])</span>
<span class="go">[6, 5, 4, 3, 2, 1]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.misc.c3_controlled.HierarchyElement.mro_standard">
<span class="sig-name descname"><span class="pre">mro_standard</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.c3_controlled.HierarchyElement.mro_standard" title="Permalink to this definition">#</a></dt>
<dd><p>The MRO for this object, calculated with <a class="reference internal" href="#sage.misc.c3_controlled.C3_merge" title="sage.misc.c3_controlled.C3_merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">C3_merge()</span></code></a></p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.c3_controlled</span> <span class="kn">import</span> <span class="n">HierarchyElement</span><span class="p">,</span> <span class="n">C3_merge</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">Poset</span><span class="p">({</span><span class="mi">7</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="mi">5</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="mi">6</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]},</span> <span class="n">facade</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro_standard</span>
<span class="go">[5, 2, 1]</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro_standard</span>
<span class="go">[6, 4, 3]</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">HierarchyElement</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">mro_standard</span>
<span class="go">[7, 6, 4, 3, 5, 2, 1]</span>
<span class="gp">sage: </span><span class="n">C3_merge</span><span class="p">([[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">]])</span>
<span class="go">[6, 4, 3, 5, 2, 1]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.misc.c3_controlled.identity">
<span class="sig-prename descclassname"><span class="pre">sage.misc.c3_controlled.</span></span><span class="sig-name descname"><span class="pre">identity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.misc.c3_controlled.identity" title="Permalink to this definition">#</a></dt>
<dd><p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.c3_controlled</span> <span class="kn">import</span> <span class="n">identity</span>
<span class="gp">sage: </span><span class="n">identity</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">10</span>
</pre></div>
</div>
</dd></dl>

</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          <a class="prev-page" href="c3.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">The C3 algorithm</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2005--2023, The Sage Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">The C3 algorithm, under control of a total order</a><ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#the-problem">The problem</a></li>
<li><a class="reference internal" href="#a-strategy-to-solve-the-problem">A strategy to solve the problem</a></li>
<li><a class="reference internal" href="#getting-fine-control-on-c3">Getting fine control on C3</a></li>
<li><a class="reference internal" href="#sage.misc.c3_controlled.C3_merge"><code class="docutils literal notranslate"><span class="pre">C3_merge()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.c3_controlled.C3_sorted_merge"><code class="docutils literal notranslate"><span class="pre">C3_sorted_merge()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.c3_controlled.CmpKey"><code class="docutils literal notranslate"><span class="pre">CmpKey</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.c3_controlled.CmpKeyNamed"><code class="docutils literal notranslate"><span class="pre">CmpKeyNamed</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.c3_controlled.HierarchyElement"><code class="docutils literal notranslate"><span class="pre">HierarchyElement</span></code></a><ul>
<li><a class="reference internal" href="#sage.misc.c3_controlled.HierarchyElement.all_bases"><code class="docutils literal notranslate"><span class="pre">all_bases()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.c3_controlled.HierarchyElement.all_bases_controlled_len"><code class="docutils literal notranslate"><span class="pre">all_bases_controlled_len()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.c3_controlled.HierarchyElement.all_bases_len"><code class="docutils literal notranslate"><span class="pre">all_bases_len()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.c3_controlled.HierarchyElement.bases"><code class="docutils literal notranslate"><span class="pre">bases()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.c3_controlled.HierarchyElement.cls"><code class="docutils literal notranslate"><span class="pre">cls()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.c3_controlled.HierarchyElement.mro"><code class="docutils literal notranslate"><span class="pre">mro()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.c3_controlled.HierarchyElement.mro_controlled"><code class="docutils literal notranslate"><span class="pre">mro_controlled()</span></code></a></li>
<li><a class="reference internal" href="#sage.misc.c3_controlled.HierarchyElement.mro_standard"><code class="docutils literal notranslate"><span class="pre">mro_standard()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sage.misc.c3_controlled.identity"><code class="docutils literal notranslate"><span class="pre">identity()</span></code></a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>window.MathJax = {"tex": {"macros": {"ZZ": "\\Bold{Z}", "NN": "\\Bold{N}", "RR": "\\Bold{R}", "CC": "\\Bold{C}", "QQ": "\\Bold{Q}", "QQbar": "\\overline{\\QQ}", "GF": ["\\Bold{F}_{#1}", 1], "Zp": ["\\Bold{Z}_{#1}", 1], "Qp": ["\\Bold{Q}_{#1}", 1], "Zmod": ["\\ZZ/#1\\ZZ", 1], "CDF": "\\Bold{C}", "CIF": "\\Bold{C}", "CLF": "\\Bold{C}", "RDF": "\\Bold{R}", "RIF": "\\Bold{I} \\Bold{R}", "RLF": "\\Bold{R}", "SL": "\\mathrm{SL}", "PSL": "\\mathrm{PSL}", "Bold": ["\\mathbf{#1}", 1]}, "inlineMath": [["$", "$"], ["\\(", "\\)"]], "maxBuffer": 51200, "autoload": {"color": [], "colorv2": ["color"]}}}</script>
    <script defer="defer" src="../../../_static/mathjax/tex-chtml.js"></script>
    </body>
</html>