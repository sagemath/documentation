<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=600, initial-scale=1">
    <title>Relational (sqlite) Databases Module &mdash; Sage Reference Manual v7.3: Utilities</title>
    
    <link rel="stylesheet" href="../../../_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '7.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="top" title="Sage Reference Manual v7.3: Utilities" href="../../index.html" />
    <link rel="next" title="Wrapper for Graphics Files" href="../structure/graphics_file.html" />
    <link rel="prev" title="Miscellaneous operating system functions" href="../misc/sage_ostools.html" />
    <link rel="icon" href="../../../_static/sageicon.png" type="image/x-icon" />

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../structure/graphics_file.html" title="Wrapper for Graphics Files"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../misc/sage_ostools.html" title="Miscellaneous operating system functions"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../index.html">Utilities</a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="relational-sqlite-databases-module">
<span id="sage-databases-sql-db"></span><h1>Relational (sqlite) Databases Module<a class="headerlink" href="#relational-sqlite-databases-module" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-sage.databases.sql_db"></span><p>INFO:</p>
<blockquote>
<div><p>This module implements classes (SQLDatabase and SQLQuery (pythonic
implementation for the user with little or no knowledge of sqlite))
that wrap the basic functionality of sqlite.</p>
<p>Databases are constructed via a triple indexed dictionary called a
skeleton. A skeleton should be constructed to fit the following format:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>| - skeleton -- a triple-indexed dictionary
|     - outer key -- table name
|         - inner key -- column name
|             - inner inner key -- one of the following:
|                 - ``primary_key`` -- boolean, whether column has been set as
                    primary key
|                 - ``index`` -- boolean, whether column has been set as index
|                 - ``unique`` -- boolean, whether column has been set as unique
|                 - ``sql`` -- one of ``&#39;TEXT&#39;``, ``&#39;BOOLEAN&#39;``, ``&#39;INTEGER&#39;``,
                    ``&#39;REAL&#39;``, or other user defined type
</pre></div>
</div>
<p>An example skeleton of a database with one table, that table with one
column:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;table1&#39;</span><span class="p">:{</span><span class="s1">&#39;col1&#39;</span><span class="p">:{</span><span class="s1">&#39;primary_key&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;REAL&#39;</span><span class="p">}}}</span>
</pre></div>
</div>
<p>SQLDatabases can also be constructed via the add, drop, and commit
functions. The vacuum function is also useful for restoring hard disk space
after a database has shrunk in size.</p>
<p>A SQLQuery can be constructed by providing a query_dict, which is a
dictionary with the following sample format:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;table_name&#39;</span><span class="p">:</span> <span class="s1">&#39;tblname&#39;</span><span class="p">,</span> <span class="s1">&#39;display_cols&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;col1&#39;</span><span class="p">,</span> <span class="s1">&#39;col2&#39;</span><span class="p">,</span> <span class="s1">&#39;col3&#39;</span><span class="p">],</span> <span class="s1">&#39;expression&#39;</span><span class="p">:[</span><span class="n">col</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">value</span><span class="p">]}</span>
</pre></div>
</div>
<p>Finally a SQLQuery also allows the user to directly input the query
string for a database, and also supports the &#8216;?&#8217; syntax by allowing an
argument for a tuple of parameters to query.</p>
<p>For full details, please see the tutorial. sage.graphs.graph_database.py
is an example of implementing a database class in Sage using this
interface.</p>
</div></blockquote>
<p>AUTHORS:</p>
<ul class="simple">
<li>R. Andrew Ohana (2011-07-16):  refactored and rewrote most of the code;
merged the Generic classes into the non-Generic versions; changed the
skeleton format to include a boolean indicating whether the column stores
unique keys; changed the index names so as to avoid potential ambiguity</li>
<li>Emily A. Kirkman (2008-09-20): added functionality to generate plots and
reformat output in show</li>
<li>Emily A. Kirkman and Robert L. Miller (2007-06-17): initial version</li>
</ul>
<dl class="class">
<dt id="sage.databases.sql_db.SQLDatabase">
<em class="property">class </em><code class="descclassname">sage.databases.sql_db.</code><code class="descname">SQLDatabase</code><span class="sig-paren">(</span><em>filename=None</em>, <em>read_only=None</em>, <em>skeleton=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="../../../structure/sage/structure/sage_object.html#sage.structure.sage_object.SageObject" title="(in Sage Reference Manual: Basic Structures v7.3)"><code class="xref py py-class docutils literal"><span class="pre">sage.structure.sage_object.SageObject</span></code></a></p>
<p>A SQL Database object corresponding to a database file.</p>
<p>INPUT:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">filename</span></code> &#8211; a string</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">skeleton</span></code> &#8211; a triple-indexed dictionary:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>| - outer key -- table name
|   - inner key -- column name
|     - inner inner key -- one of the following:
|       - ``primary_key`` -- boolean, whether column has been set
          as primary key
|       - ``index`` -- boolean, whether column has been set as
          index
|       - ``unique`` -- boolean, whether column has been set as
          unique
|       - ``sql`` -- one of ``&#39;TEXT&#39;``, ``&#39;BOOLEAN&#39;``,
          ``&#39;INTEGER&#39;``, ``&#39;REAL&#39;``, or other user defined type
</pre></div>
</div>
</li>
</ul>
<p>TUTORIAL:</p>
<p>The <code class="docutils literal"><span class="pre">SQLDatabase</span></code> class is for interactively building databases
intended for queries. This may sound redundant, but it is important. If
you want a database intended for quick lookup of entries in very large
tables, much like a hash table (such as a Python dictionary), a
<code class="docutils literal"><span class="pre">SQLDatabase</span></code> may not be what you are looking for. The strength of
<code class="docutils literal"><span class="pre">SQLDatabases</span></code> is in queries, searches through the database with
complicated criteria.</p>
<p>For example, we create a new database for storing isomorphism classes
of simple graphs:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">D</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
</pre></div>
</div>
<p>In order to generate representatives for the classes, we will import a
function which generates all labeled graphs (noting that this is not
the optimal way):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.groups.perm_gps.partn_ref.refinement_graphs</span> <span class="kn">import</span> <span class="n">all_labeled_graphs</span>
</pre></div>
</div>
<p>We will need a table in the database in which to store the graphs, and
we specify its structure with a Python dictionary, each of whose keys
is the name of a column:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">table_skeleton</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span><span class="s1">&#39;graph6&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;TEXT&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span> <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
<span class="gp">... </span><span class="s1">&#39;vertices&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">},</span>
<span class="gp">... </span><span class="s1">&#39;edges&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">}</span>
</pre></div>
</div>
<p>Then we create the table:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="n">table_skeleton</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span>
<span class="go">edges                graph6               vertices</span>
<span class="go">------------------------------------------------------------</span>
</pre></div>
</div>
<p>Now that we have the table, we will begin to populate the table with
rows. First, add the graph on zero vertices.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">G</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span> <span class="n">G</span><span class="o">.</span><span class="n">graph6_string</span><span class="p">(),</span> <span class="mi">0</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span>
<span class="go">edges                graph6               vertices</span>
<span class="go">------------------------------------------------------------</span>
<span class="go">0                    ?                    0</span>
</pre></div>
</div>
<p>Next, add the graph on one vertex.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">add_vertex</span><span class="p">()</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span> <span class="n">G</span><span class="o">.</span><span class="n">graph6_string</span><span class="p">(),</span> <span class="mi">1</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span>
<span class="go">edges                graph6               vertices</span>
<span class="go">------------------------------------------------------------</span>
<span class="go">0                    ?                    0</span>
<span class="go">0                    @                    1</span>
</pre></div>
</div>
<p>Say we want a database of graphs on four or less vertices:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">labels</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">sage: </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
<span class="gp">... </span>      <span class="n">labels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">... </span>      <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">all_labeled_graphs</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
<span class="gp">... </span>          <span class="n">g</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">canonical_label</span><span class="p">()</span>
<span class="gp">... </span>          <span class="k">if</span> <span class="n">g</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
<span class="gp">... </span>              <span class="n">labels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="gp">... </span>              <span class="n">D</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">g</span><span class="o">.</span><span class="n">graph6_string</span><span class="p">(),</span> <span class="n">g</span><span class="o">.</span><span class="n">order</span><span class="p">()))</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span> <span class="c1"># random</span>
<span class="go">edges                graph6               vertices</span>
<span class="go">------------------------------------------------------------</span>
<span class="go">0                    ?                    0</span>
<span class="go">0                    @                    1</span>
<span class="go">0                    A?                   2</span>
<span class="go">1                    A_                   2</span>
<span class="go">0                    B?                   3</span>
<span class="go">1                    BG                   3</span>
<span class="go">2                    BW                   3</span>
<span class="go">3                    Bw                   3</span>
<span class="go">0                    C?                   4</span>
<span class="go">1                    C@                   4</span>
<span class="go">2                    CB                   4</span>
<span class="go">3                    CF                   4</span>
<span class="go">3                    CJ                   4</span>
<span class="go">2                    CK                   4</span>
<span class="go">3                    CL                   4</span>
<span class="go">4                    CN                   4</span>
<span class="go">4                    C]                   4</span>
<span class="go">5                    C^                   4</span>
<span class="go">6                    C~                   4</span>
</pre></div>
</div>
<p>We can then query the database &#8211; let&#8217;s ask for all the graphs on four
vertices with three edges. We do so by creating two queries and asking
for rows that satisfy them both:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">Q</span> <span class="o">=</span> <span class="n">SQLQuery</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;table_name&#39;</span><span class="p">:</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="s1">&#39;display_cols&#39;</span><span class="p">:[</span><span class="s1">&#39;graph6&#39;</span><span class="p">],</span> <span class="s1">&#39;expression&#39;</span><span class="p">:[</span><span class="s1">&#39;vertices&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">]})</span>
<span class="gp">sage: </span><span class="n">Q2</span> <span class="o">=</span> <span class="n">SQLQuery</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;table_name&#39;</span><span class="p">:</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="s1">&#39;display_cols&#39;</span><span class="p">:[</span><span class="s1">&#39;graph6&#39;</span><span class="p">],</span> <span class="s1">&#39;expression&#39;</span><span class="p">:[</span><span class="s1">&#39;edges&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">]})</span>
<span class="gp">sage: </span><span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">Q2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="nb">len</span><span class="p">(</span><span class="n">Q</span><span class="o">.</span><span class="n">query_results</span><span class="p">())</span>
<span class="go">3</span>
<span class="gp">sage: </span><span class="n">Q</span><span class="o">.</span><span class="n">query_results</span><span class="p">()</span> <span class="c1"># random</span>
<span class="go">[(u&#39;CF&#39;, u&#39;CF&#39;), (u&#39;CJ&#39;, u&#39;CJ&#39;), (u&#39;CL&#39;, u&#39;CL&#39;)]</span>
</pre></div>
</div>
<p>NOTE: The values of <code class="docutils literal"><span class="pre">display_cols</span></code> are always concatenated in
intersections and unions.</p>
<p>Of course, we can save the database to file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">replace_with_your_own_filepath</span> <span class="o">=</span> <span class="n">tmp_dir</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">replace_with_your_own_filepath</span> <span class="o">+</span> <span class="s1">&#39;simon.db&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now the database&#8217;s hard link is to this file, and not the temporary db
file. For example, let&#8217;s say we open the same file with another class
instance. We can load the file as an immutable database:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">E</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">(</span><span class="n">replace_with_your_own_filepath</span> <span class="o">+</span> <span class="s1">&#39;simon.db&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">E</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span> <span class="c1"># random</span>
<span class="go">edges                graph6               vertices</span>
<span class="go">------------------------------------------------------------</span>
<span class="go">0                    ?                    0</span>
<span class="go">0                    @                    1</span>
<span class="go">0                    A?                   2</span>
<span class="go">1                    A_                   2</span>
<span class="go">0                    B?                   3</span>
<span class="go">1                    BG                   3</span>
<span class="go">2                    BW                   3</span>
<span class="go">3                    Bw                   3</span>
<span class="go">0                    C?                   4</span>
<span class="go">1                    C@                   4</span>
<span class="go">2                    CB                   4</span>
<span class="go">3                    CF                   4</span>
<span class="go">3                    CJ                   4</span>
<span class="go">2                    CK                   4</span>
<span class="go">3                    CL                   4</span>
<span class="go">4                    CN                   4</span>
<span class="go">4                    C]                   4</span>
<span class="go">5                    C^                   4</span>
<span class="go">6                    C~                   4</span>
<span class="gp">sage: </span><span class="n">E</span><span class="o">.</span><span class="n">drop_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">RuntimeError</span>: <span class="n">Cannot drop tables from a read only database.</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.add_column">
<code class="descname">add_column</code><span class="sig-paren">(</span><em>table_name</em>, <em>col_name</em>, <em>col_dict</em>, <em>default='NULL'</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.add_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a column named <code class="docutils literal"><span class="pre">col_name</span></code> to table <code class="docutils literal"><span class="pre">table_name</span></code>, whose data
types are described by <code class="docutils literal"><span class="pre">col_dict</span></code>. The format for this is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;col1&#39;</span><span class="p">:{</span><span class="s1">&#39;primary_key&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;REAL&#39;</span><span class="p">}}</span>
</pre></div>
</div>
<p>INPUT:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">col_dict</span></code> &#8211; a dictionary:</p>
<blockquote>
<div><ul>
<li><p class="first">key &#8211; column name</p>
<blockquote>
<div><ul>
<li><p class="first">inner key &#8211; one of the following:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">primary_key</span></code> &#8211; boolean, whether column has been set
as primary key</li>
<li><code class="docutils literal"><span class="pre">index</span></code> &#8211; boolean, whether column has been set as
index</li>
<li><code class="docutils literal"><span class="pre">unique</span></code> &#8211; boolean, weather column has been set as
unique</li>
<li><code class="docutils literal"><span class="pre">sql</span></code> &#8211; one of <code class="docutils literal"><span class="pre">'TEXT'</span></code>, <code class="docutils literal"><span class="pre">'BOOLEAN'</span></code>,
<code class="docutils literal"><span class="pre">'INTEGER'</span></code>, <code class="docutils literal"><span class="pre">'REAL'</span></code>, or other user defined type</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">MonicPolys</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;n&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span> <span class="n">MonicPolys</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">n</span><span class="p">,))</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="s1">&#39;n_squared&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">},</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span>
<span class="go">n_squared            n</span>
<span class="go">----------------------------------------</span>
<span class="go">0                    0</span>
<span class="go">0                    1</span>
<span class="go">0                    2</span>
<span class="go">0                    3</span>
<span class="go">0                    4</span>
<span class="go">0                    5</span>
<span class="go">0                    6</span>
<span class="go">0                    7</span>
<span class="go">0                    8</span>
<span class="go">0                    9</span>
<span class="go">0                    10</span>
<span class="go">0                    11</span>
<span class="go">0                    12</span>
<span class="go">0                    13</span>
<span class="go">0                    14</span>
<span class="go">0                    15</span>
<span class="go">0                    16</span>
<span class="go">0                    17</span>
<span class="go">0                    18</span>
<span class="go">0                    19</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.add_data">
<code class="descname">add_data</code><span class="sig-paren">(</span><em>table_name</em>, <em>rows</em>, <em>entry_order=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.add_data" title="Permalink to this definition">¶</a></dt>
<dd><p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">rows</span></code> &#8211; a list of tuples that represent one row of data to add
(types should match col types in order)</li>
<li><code class="docutils literal"><span class="pre">entry_order</span></code> &#8211;  an ordered list or tuple overrides normal order
with user defined order</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">DB</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,{</span><span class="s1">&#39;a1&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;bool&#39;</span><span class="p">},</span> <span class="s1">&#39;b2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;int&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_rows</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_rows</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">)],</span> <span class="p">[</span><span class="s1">&#39;b2&#39;</span><span class="p">,</span><span class="s1">&#39;a1&#39;</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">cur</span> <span class="o">=</span> <span class="n">DB</span><span class="o">.</span><span class="n">get_cursor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="p">(</span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;select * from simon&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="go">[(0, 0), (1, 1), (1, 2), (0, 0), (0, 4), (1, 5)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.add_row">
<code class="descname">add_row</code><span class="sig-paren">(</span><em>table_name</em>, <em>values</em>, <em>entry_order=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.add_row" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the row described by <code class="docutils literal"><span class="pre">values</span></code> to the table <code class="docutils literal"><span class="pre">table_name</span></code>. Values
should be a tuple, of same length and order as columns in given table.</p>
<p>NOTE:</p>
<p>If <code class="docutils literal"><span class="pre">values</span></code> is of length one, be sure to specify that it is a tuple of
length one, by using a comma, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">values</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span><span class="p">,)</span>
</pre></div>
</div>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">DB</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,{</span><span class="s1">&#39;a1&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;bool&#39;</span><span class="p">},</span> <span class="s1">&#39;b2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;int&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">cur</span> <span class="o">=</span> <span class="n">DB</span><span class="o">.</span><span class="n">get_cursor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="p">(</span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;select * from simon&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="go">[(0, 1)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.add_rows">
<code class="descname">add_rows</code><span class="sig-paren">(</span><em>table_name</em>, <em>rows</em>, <em>entry_order=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.add_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">rows</span></code> &#8211; a list of tuples that represent one row of data to add
(types should match col types in order)</li>
<li><code class="docutils literal"><span class="pre">entry_order</span></code> &#8211;  an ordered list or tuple overrides normal order
with user defined order</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">DB</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,{</span><span class="s1">&#39;a1&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;bool&#39;</span><span class="p">},</span> <span class="s1">&#39;b2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;int&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_rows</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_rows</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">)],</span> <span class="p">[</span><span class="s1">&#39;b2&#39;</span><span class="p">,</span><span class="s1">&#39;a1&#39;</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">cur</span> <span class="o">=</span> <span class="n">DB</span><span class="o">.</span><span class="n">get_cursor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="p">(</span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;select * from simon&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="go">[(0, 0), (1, 1), (1, 2), (0, 0), (0, 4), (1, 5)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.commit">
<code class="descname">commit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commits changes to file.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">DB</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,{</span><span class="s1">&#39;a1&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;bool&#39;</span><span class="p">},</span> <span class="s1">&#39;b2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;int&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">)],</span> <span class="p">[</span><span class="s1">&#39;b2&#39;</span><span class="p">,</span><span class="s1">&#39;a1&#39;</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">drop_column</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span><span class="s1">&#39;b2&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">vacuum</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.create_table">
<code class="descname">create_table</code><span class="sig-paren">(</span><em>table_name</em>, <em>table_skeleton</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.create_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new table in the database.</p>
<p>To create a table, a column structure must be specified. The form for
this is a Python dict, for example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;col1&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;unique&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">},</span> <span class="o">...</span><span class="p">}</span>
</pre></div>
</div>
<p>INPUT:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">table_name</span></code> &#8211; a string</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">table_skeleton</span></code> &#8211; a double-indexed dictionary</p>
<blockquote>
<div><ul>
<li><p class="first">outer key &#8211; column name</p>
<blockquote>
<div><ul>
<li><p class="first">inner key &#8211; one of the following:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">primary_key</span></code> &#8211; boolean, whether column has been set
asprimary key</li>
<li><code class="docutils literal"><span class="pre">index</span></code> &#8211; boolean, whether column has been set as
index</li>
<li><code class="docutils literal"><span class="pre">unique</span></code> &#8211; boolean, whether column has been set as
unique</li>
<li><code class="docutils literal"><span class="pre">sql</span></code> &#8211; one of <code class="docutils literal"><span class="pre">'TEXT'</span></code>, <code class="docutils literal"><span class="pre">'BOOLEAN'</span></code>,
<code class="docutils literal"><span class="pre">'INTEGER'</span></code>, <code class="docutils literal"><span class="pre">'REAL'</span></code>, or other user defined type</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>NOTE:</p>
<p>Some SQL features, such as automatically incrementing primary key,
require the full word <code class="docutils literal"><span class="pre">'INTEGER'</span></code>, not just <code class="docutils literal"><span class="pre">'INT'</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">D</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">table_skeleton</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span><span class="s1">&#39;graph6&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;TEXT&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span> <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
<span class="gp">... </span><span class="s1">&#39;vertices&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">},</span>
<span class="gp">... </span><span class="s1">&#39;edges&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">}</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="n">table_skeleton</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span>
<span class="go">edges                graph6               vertices</span>
<span class="go">------------------------------------------------------------</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.delete_rows">
<code class="descname">delete_rows</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.delete_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses a <code class="docutils literal"><span class="pre">SQLQuery</span></code> instance to modify (delete rows from) the
database.</p>
<p><code class="docutils literal"><span class="pre">SQLQuery</span></code> must have no join statements.  (As of now, you can only
delete from one table at a time &#8211; ideas and patches are welcome).</p>
<p>To remove all data that satisfies a <code class="docutils literal"><span class="pre">SQLQuery</span></code>, send the query as an
argument to <code class="docutils literal"><span class="pre">delete_rows</span></code>.  Be careful, test your query first.</p>
<p>Recommended use:  have some kind of row identification primary
key column that you use as a parameter in the query.  (See example
below).</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">query</span></code> &#8211; a <code class="docutils literal"><span class="pre">SQLQuery</span></code> (Delete the rows returned when query is
run).</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">DB</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;lucy&#39;</span><span class="p">,{</span><span class="s1">&#39;id&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">,</span> <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span> <span class="s1">&#39;a1&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;bool&#39;</span><span class="p">},</span> <span class="s1">&#39;b2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;int&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_rows</span><span class="p">(</span><span class="s1">&#39;lucy&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">384</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">978932</span><span class="p">)],[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;a1&#39;</span><span class="p">,</span><span class="s1">&#39;b2&#39;</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;lucy&#39;</span><span class="p">)</span>
<span class="go">a1                   id                   b2</span>
<span class="go">------------------------------------------------------------</span>
<span class="go">1                    0                    1</span>
<span class="go">1                    1                    4</span>
<span class="go">0                    2                    7</span>
<span class="go">1                    3                    384</span>
<span class="go">1                    4                    978932</span>
<span class="gp">sage: </span><span class="n">Q</span> <span class="o">=</span> <span class="n">SQLQuery</span><span class="p">(</span><span class="n">DB</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;table_name&#39;</span><span class="p">:</span><span class="s1">&#39;lucy&#39;</span><span class="p">,</span> <span class="s1">&#39;display_cols&#39;</span><span class="p">:[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;a1&#39;</span><span class="p">,</span><span class="s1">&#39;b2&#39;</span><span class="p">],</span> <span class="s1">&#39;expression&#39;</span><span class="p">:[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">]})</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">delete_rows</span><span class="p">(</span><span class="n">Q</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;lucy&#39;</span><span class="p">)</span>
<span class="go">a1                   id                   b2</span>
<span class="go">------------------------------------------------------------</span>
<span class="go">1                    0                    1</span>
<span class="go">1                    1                    4</span>
<span class="go">0                    2                    7</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.drop_column">
<code class="descname">drop_column</code><span class="sig-paren">(</span><em>table_name</em>, <em>col_name</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.drop_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Drop the column <code class="docutils literal"><span class="pre">col_name</span></code> from table <code class="docutils literal"><span class="pre">table_name</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">MonicPolys</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;n&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span> <span class="n">MonicPolys</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">n</span><span class="p">,))</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="s1">&#39;n_squared&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">},</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">drop_column</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="s1">&#39;n_squared&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span>
<span class="go">n</span>
<span class="go">--------------------</span>
<span class="go">0</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">4</span>
<span class="go">5</span>
<span class="go">6</span>
<span class="go">7</span>
<span class="go">8</span>
<span class="go">9</span>
<span class="go">10</span>
<span class="go">11</span>
<span class="go">12</span>
<span class="go">13</span>
<span class="go">14</span>
<span class="go">15</span>
<span class="go">16</span>
<span class="go">17</span>
<span class="go">18</span>
<span class="go">19</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.drop_data_from_table">
<code class="descname">drop_data_from_table</code><span class="sig-paren">(</span><em>table_name</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.drop_data_from_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes all rows from <code class="docutils literal"><span class="pre">table_name</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">D</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,{</span><span class="s1">&#39;col1&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,(</span><span class="mi">9</span><span class="p">,))</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span>
<span class="go">col1</span>
<span class="go">--------------------</span>
<span class="go">9</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">drop_data_from_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span>
<span class="go">col1</span>
<span class="go">--------------------</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.drop_index">
<code class="descname">drop_index</code><span class="sig-paren">(</span><em>table_name</em>, <em>index_name</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.drop_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the column <code class="docutils literal"><span class="pre">index_name</span></code> in table <code class="docutils literal"><span class="pre">table_name</span></code> to not be an
index. See <code class="docutils literal"><span class="pre">make_index()</span></code></p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">MonicPolys</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;n&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span> <span class="s1">&#39;n2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">drop_index</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">get_skeleton</span><span class="p">()</span>
<span class="go">{&#39;simon&#39;: {&#39;n&#39;: {&#39;index&#39;: False,</span>
<span class="go">   &#39;primary_key&#39;: False,</span>
<span class="go">   &#39;sql&#39;: &#39;INTEGER&#39;,</span>
<span class="go">   &#39;unique&#39;: False},</span>
<span class="go">  &#39;n2&#39;: {&#39;index&#39;: False,</span>
<span class="go">   &#39;primary_key&#39;: False,</span>
<span class="go">   &#39;sql&#39;: &#39;INTEGER&#39;,</span>
<span class="go">   &#39;unique&#39;: False}}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.drop_primary_key">
<code class="descname">drop_primary_key</code><span class="sig-paren">(</span><em>table_name</em>, <em>col_name</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.drop_primary_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the column <code class="docutils literal"><span class="pre">col_name</span></code> in table <code class="docutils literal"><span class="pre">table_name</span></code> not to be a primary
key.</p>
<p>A primary key is something like an index, but its main purpose is to
link different tables together. This allows searches to be executed on
multiple tables that represent maybe different data about the same
objects.</p>
<p>NOTE:</p>
<p>This function only changes the column to be non-primary, it does not
delete it.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">MonicPolys</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;n&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span> <span class="s1">&#39;n2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">make_primary_key</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">drop_primary_key</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">get_skeleton</span><span class="p">()</span>
<span class="go">{&#39;simon&#39;: {&#39;n&#39;: {&#39;index&#39;: True,</span>
<span class="go">   &#39;primary_key&#39;: False,</span>
<span class="go">   &#39;sql&#39;: &#39;INTEGER&#39;,</span>
<span class="go">   &#39;unique&#39;: False},</span>
<span class="go">  &#39;n2&#39;: {&#39;index&#39;: False,</span>
<span class="go">   &#39;primary_key&#39;: False,</span>
<span class="go">   &#39;sql&#39;: &#39;INTEGER&#39;,</span>
<span class="go">   &#39;unique&#39;: True}}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.drop_table">
<code class="descname">drop_table</code><span class="sig-paren">(</span><em>table_name</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.drop_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete table <code class="docutils literal"><span class="pre">table_name</span></code> from database.</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">table_name</span></code> &#8211; a string</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">D</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,{</span><span class="s1">&#39;col1&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span>
<span class="go">col1</span>
<span class="go">--------------------</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">drop_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">get_skeleton</span><span class="p">()</span>
<span class="go">{}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.drop_unique">
<code class="descname">drop_unique</code><span class="sig-paren">(</span><em>table_name</em>, <em>col_name</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.drop_unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the column <code class="docutils literal"><span class="pre">col_name</span></code> in table <code class="docutils literal"><span class="pre">table_name</span></code> not store unique
values.</p>
<p>NOTE:</p>
<p>This function only removes the requirement for entries in <code class="docutils literal"><span class="pre">col_name</span></code>
to be unique, it does not delete it.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">MonicPolys</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;n&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span> <span class="s1">&#39;n2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">make_unique</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">drop_unique</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">get_skeleton</span><span class="p">()</span>
<span class="go">{&#39;simon&#39;: {&#39;n&#39;: {&#39;index&#39;: True,</span>
<span class="go">   &#39;primary_key&#39;: False,</span>
<span class="go">   &#39;sql&#39;: &#39;INTEGER&#39;,</span>
<span class="go">   &#39;unique&#39;: False},</span>
<span class="go">  &#39;n2&#39;: {&#39;index&#39;: False,</span>
<span class="go">   &#39;primary_key&#39;: False,</span>
<span class="go">   &#39;sql&#39;: &#39;INTEGER&#39;,</span>
<span class="go">   &#39;unique&#39;: False}}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.get_connection">
<code class="descname">get_connection</code><span class="sig-paren">(</span><em>ignore_warning=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.get_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a pysqlite connection to the database.</p>
<p>You most likely want <code class="docutils literal"><span class="pre">get_cursor()</span></code> instead, which is used for
executing sqlite commands on the database.</p>
<p>Recommended for more advanced users only.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">D</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">(</span><span class="n">read_only</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">con</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">get_connection</span><span class="p">()</span>
<span class="go">doctest:...: RuntimeWarning: Database is read only, using the connection can alter the stored data. Set self.ignore_warnings to True in order to mute future warnings.</span>
<span class="gp">sage: </span><span class="n">con</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">get_connection</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">ignore_warnings</span> <span class="o">=</span> <span class="bp">True</span>
<span class="gp">sage: </span><span class="n">con</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">get_connection</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">t</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE simon(n INTEGER, n2 INTEGER)&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">t</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;INSERT INTO simon VALUES(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="o">^</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span>
<span class="go">n                    n2</span>
<span class="go">----------------------------------------</span>
<span class="go">0                    0</span>
<span class="go">1                    1</span>
<span class="go">2                    4</span>
<span class="go">3                    9</span>
<span class="go">4                    16</span>
<span class="go">5                    25</span>
<span class="go">6                    36</span>
<span class="go">7                    49</span>
<span class="go">8                    64</span>
<span class="go">9                    81</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.get_cursor">
<code class="descname">get_cursor</code><span class="sig-paren">(</span><em>ignore_warning=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.get_cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a pysqlite cursor for the database connection.</p>
<p>A cursor is an input from which you can execute sqlite commands on the
database.</p>
<p>Recommended for more advanced users only.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">DB</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,{</span><span class="s1">&#39;a1&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;bool&#39;</span><span class="p">},</span> <span class="s1">&#39;b2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;int&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_rows</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_rows</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">)],</span> <span class="p">[</span><span class="s1">&#39;b2&#39;</span><span class="p">,</span><span class="s1">&#39;a1&#39;</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">cur</span> <span class="o">=</span> <span class="n">DB</span><span class="o">.</span><span class="n">get_cursor</span><span class="p">()</span>
<span class="gp">sage: </span><span class="p">(</span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;select * from simon&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="go">[(0, 1), (0, 0), (1, 1), (1, 2), (0, 0), (0, 4), (1, 5)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.get_skeleton">
<code class="descname">get_skeleton</code><span class="sig-paren">(</span><em>check=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.get_skeleton" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary representing the hierarchical structure of the
database, in the following format:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>| - skeleton -- a triple-indexed dictionary
|   - outer key -- table name
|     - inner key -- column name
|       - inner inner key -- one of the following:
|         - ``primary_key`` -- boolean, whether column has been set as
            primary key
|         - ``index`` -- boolean, whether column has been set as index
|         - ``unique`` -- boolean, whether column has been set as unique
|         - ``sql`` -- one of ``&#39;TEXT&#39;``, ``&#39;BOOLEAN&#39;``, ``&#39;INTEGER&#39;``,
            ``&#39;REAL&#39;``, or other user defined type
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;table1&#39;</span><span class="p">:{</span><span class="s1">&#39;col1&#39;</span><span class="p">:{</span><span class="s1">&#39;primary_key&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;REAL&#39;</span><span class="p">}}}</span>
</pre></div>
</div>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">check</span></code> &#8211; if True, checks to make sure the database&#8217;s actual
structure matches the skeleton on record.</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">GDB</span> <span class="o">=</span> <span class="n">GraphDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">GDB</span><span class="o">.</span><span class="n">get_skeleton</span><span class="p">()</span>             <span class="c1"># slightly random output</span>
<span class="go">{u&#39;aut_grp&#39;: {u&#39;aut_grp_size&#39;: {&#39;index&#39;: True,</span>
<span class="go">                                &#39;unique&#39;: False,</span>
<span class="go">                                &#39;primary_key&#39;: False,</span>
<span class="go">                                &#39;sql&#39;: u&#39;INTEGER&#39;},</span>
<span class="go">              ...</span>
<span class="go">              u&#39;num_vertices&#39;: {&#39;index&#39;: True,</span>
<span class="go">                                &#39;unique&#39;: False,</span>
<span class="go">                                &#39;primary_key&#39;: False,</span>
<span class="go">                                &#39;sql&#39;: u&#39;INTEGER&#39;}}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.make_index">
<code class="descname">make_index</code><span class="sig-paren">(</span><em>col_name</em>, <em>table_name</em>, <em>unique=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.make_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the column <code class="docutils literal"><span class="pre">col_name</span></code> in table <code class="docutils literal"><span class="pre">table_name</span></code> to be an index,
that is, a column set up to do quick searches on.</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">col_name</span></code> &#8211; a string</li>
<li><code class="docutils literal"><span class="pre">table_name</span></code> &#8211; a string</li>
<li><code class="docutils literal"><span class="pre">unique</span></code> &#8211; requires that there are no multiple entries in the
column, makes searching faster</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">MonicPolys</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;n&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span> <span class="s1">&#39;n2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">make_index</span><span class="p">(</span><span class="s1">&#39;n2&#39;</span><span class="p">,</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">get_skeleton</span><span class="p">()</span>
<span class="go">{&#39;simon&#39;: {&#39;n&#39;: {&#39;index&#39;: True,</span>
<span class="go">   &#39;primary_key&#39;: False,</span>
<span class="go">   &#39;sql&#39;: &#39;INTEGER&#39;,</span>
<span class="go">   &#39;unique&#39;: False},</span>
<span class="go">  &#39;n2&#39;: {&#39;index&#39;: True,</span>
<span class="go">   &#39;primary_key&#39;: False,</span>
<span class="go">   &#39;sql&#39;: &#39;INTEGER&#39;,</span>
<span class="go">   &#39;unique&#39;: False}}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.make_primary_key">
<code class="descname">make_primary_key</code><span class="sig-paren">(</span><em>table_name</em>, <em>col_name</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.make_primary_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the column <code class="docutils literal"><span class="pre">col_name</span></code> in table <code class="docutils literal"><span class="pre">table_name</span></code> to be a primary key.</p>
<p>A primary key is something like an index, but its main purpose is to
link different tables together. This allows searches to be executed on
multiple tables that represent maybe different data about the same
objects.</p>
<p>NOTE:</p>
<p>Some SQL features, such as automatically incrementing primary key,
require the full word <code class="docutils literal"><span class="pre">'INTEGER'</span></code>, not just <code class="docutils literal"><span class="pre">'INT'</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">MonicPolys</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;n&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span> <span class="s1">&#39;n2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">make_primary_key</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">get_skeleton</span><span class="p">()</span>
<span class="go">{&#39;simon&#39;: {&#39;n&#39;: {&#39;index&#39;: True,</span>
<span class="go">   &#39;primary_key&#39;: False,</span>
<span class="go">   &#39;sql&#39;: &#39;INTEGER&#39;,</span>
<span class="go">   &#39;unique&#39;: False},</span>
<span class="go">  &#39;n2&#39;: {&#39;index&#39;: False,</span>
<span class="go">   &#39;primary_key&#39;: True,</span>
<span class="go">   &#39;sql&#39;: &#39;INTEGER&#39;,</span>
<span class="go">   &#39;unique&#39;: True}}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.make_unique">
<code class="descname">make_unique</code><span class="sig-paren">(</span><em>table_name</em>, <em>col_name</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.make_unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the column <code class="docutils literal"><span class="pre">col_name</span></code> in table <code class="docutils literal"><span class="pre">table_name</span></code> to store unique
values.</p>
<p>NOTE:</p>
<p>This function only adds the requirement for entries in <code class="docutils literal"><span class="pre">col_name</span></code> to
be unique, it does not change the values.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">MonicPolys</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;n&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span> <span class="s1">&#39;n2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">make_unique</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">get_skeleton</span><span class="p">()</span>
<span class="go">{&#39;simon&#39;: {&#39;n&#39;: {&#39;index&#39;: True,</span>
<span class="go">   &#39;primary_key&#39;: False,</span>
<span class="go">   &#39;sql&#39;: &#39;INTEGER&#39;,</span>
<span class="go">   &#39;unique&#39;: False},</span>
<span class="go">  &#39;n2&#39;: {&#39;index&#39;: False,</span>
<span class="go">   &#39;primary_key&#39;: False,</span>
<span class="go">   &#39;sql&#39;: &#39;INTEGER&#39;,</span>
<span class="go">   &#39;unique&#39;: True}}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.query">
<code class="descname">query</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <code class="docutils literal"><span class="pre">SQLQuery</span></code> on this database.  For full class details,
type <code class="docutils literal"><span class="pre">SQLQuery?</span></code> and press shift+enter.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">D</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;wolf&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;BOOLEAN&#39;</span><span class="p">},</span> <span class="s1">&#39;tag&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">q</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">query</span><span class="p">({</span><span class="s1">&#39;table_name&#39;</span><span class="p">:</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="s1">&#39;display_cols&#39;</span><span class="p">:[</span><span class="s1">&#39;tag&#39;</span><span class="p">],</span> <span class="s1">&#39;expression&#39;</span><span class="p">:[</span><span class="s1">&#39;wolf&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">]})</span>
<span class="gp">sage: </span><span class="n">q</span><span class="o">.</span><span class="n">get_query_string</span><span class="p">()</span>
<span class="go">&#39;SELECT simon.tag FROM simon WHERE simon.wolf = ?&#39;</span>
<span class="gp">sage: </span><span class="n">q</span><span class="o">.</span><span class="n">__param_tuple__</span>
<span class="go">(&#39;1&#39;,)</span>
<span class="gp">sage: </span><span class="n">q</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">query_string</span><span class="o">=</span><span class="s1">&#39;SELECT tag FROM simon WHERE wolf=?&#39;</span><span class="p">,</span><span class="n">param_tuple</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,))</span>
<span class="gp">sage: </span><span class="n">q</span><span class="o">.</span><span class="n">get_query_string</span><span class="p">()</span>
<span class="go">&#39;SELECT tag FROM simon WHERE wolf=?&#39;</span>
<span class="gp">sage: </span><span class="n">q</span><span class="o">.</span><span class="n">__param_tuple__</span>
<span class="go">(&#39;1&#39;,)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.rename_table">
<code class="descname">rename_table</code><span class="sig-paren">(</span><em>table_name</em>, <em>new_name</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.rename_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Renames the table <code class="docutils literal"><span class="pre">table_name</span></code> to <code class="docutils literal"><span class="pre">new_name</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">D</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,{</span><span class="s1">&#39;col1&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span>
<span class="go">col1</span>
<span class="go">--------------------</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">rename_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="s1">&#39;lucy&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">RuntimeError</span>: <span class="n">Failure to fetch data.</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;lucy&#39;</span><span class="p">)</span>
<span class="go">col1</span>
<span class="go">--------------------</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the database to the specified location.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">MonicPolys</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;n&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span> <span class="n">MonicPolys</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">n</span><span class="p">,))</span>
<span class="gp">sage: </span><span class="n">tmp</span> <span class="o">=</span> <span class="n">tmp_dir</span><span class="p">()</span> <span class="c1"># replace with your own file path</span>
<span class="gp">sage: </span><span class="n">MonicPolys</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">tmp</span><span class="o">+</span><span class="s1">&#39;sage.db&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">N</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">(</span><span class="n">tmp</span><span class="o">+</span><span class="s1">&#39;sage.db&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">N</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span>
<span class="go">n</span>
<span class="go">--------------------</span>
<span class="go">0</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">4</span>
<span class="go">5</span>
<span class="go">6</span>
<span class="go">7</span>
<span class="go">8</span>
<span class="go">9</span>
<span class="go">10</span>
<span class="go">11</span>
<span class="go">12</span>
<span class="go">13</span>
<span class="go">14</span>
<span class="go">15</span>
<span class="go">16</span>
<span class="go">17</span>
<span class="go">18</span>
<span class="go">19</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.show">
<code class="descname">show</code><span class="sig-paren">(</span><em>table_name</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.show" title="Permalink to this definition">¶</a></dt>
<dd><p>Show an entire table from the database.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">DB</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,{</span><span class="s1">&#39;a1&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;bool&#39;</span><span class="p">},</span> <span class="s1">&#39;b2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;int&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">)</span>
<span class="go">a1                   b2</span>
<span class="go">----------------------------------------</span>
<span class="go">0                    0</span>
<span class="go">1                    1</span>
<span class="go">1                    2</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLDatabase.vacuum">
<code class="descname">vacuum</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLDatabase.vacuum" title="Permalink to this definition">¶</a></dt>
<dd><p>Cleans the extra hard disk space used up by a database that has
recently shrunk.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">DB</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,{</span><span class="s1">&#39;a1&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;bool&#39;</span><span class="p">},</span> <span class="s1">&#39;b2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;int&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">)],</span> <span class="p">[</span><span class="s1">&#39;b2&#39;</span><span class="p">,</span><span class="s1">&#39;a1&#39;</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">drop_column</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span><span class="s1">&#39;b2&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">vacuum</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.databases.sql_db.SQLQuery">
<em class="property">class </em><code class="descclassname">sage.databases.sql_db.</code><code class="descname">SQLQuery</code><span class="sig-paren">(</span><em>database</em>, <em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLQuery" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="../../../structure/sage/structure/sage_object.html#sage.structure.sage_object.SageObject" title="(in Sage Reference Manual: Basic Structures v7.3)"><code class="xref py py-class docutils literal"><span class="pre">sage.structure.sage_object.SageObject</span></code></a></p>
<p>A query for a SQLite database.</p>
<p>INPUT:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">database</span></code> &#8211; a SQLDatabase object</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">query_dict</span></code> &#8211; a dictionary specifying the query itself. The
format is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;table_name&#39;</span><span class="p">:</span><span class="s1">&#39;tblname&#39;</span><span class="p">,</span> <span class="s1">&#39;display_cols&#39;</span><span class="p">:[</span><span class="s1">&#39;col1&#39;</span><span class="p">,</span> <span class="s1">&#39;col2&#39;</span><span class="p">,</span><span class="s1">&#39;col3&#39;</span><span class="p">],</span> <span class="s1">&#39;expression&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">col</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">value</span><span class="p">]}</span>
</pre></div>
</div>
</li>
</ul>
<dl class="docutils">
<dt>NOTE:</dt>
<dd>Every SQL type we are using is ultimately represented as a string,
so if you wish to save actual strings to a database, you actually
need to do something like: &#8216;&#8220;value&#8221;&#8217;.</dd>
</dl>
<p>See the documentation of <code class="docutils literal"><span class="pre">SQLDatabase</span></code> for an introduction to using
SQLite in Sage.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">D</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,{</span><span class="s1">&#39;a1&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;bool&#39;</span><span class="p">,</span> <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">},</span> <span class="s1">&#39;b2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;int&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">D</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">r</span> <span class="o">=</span> <span class="n">SQLQuery</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;table_name&#39;</span><span class="p">:</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="s1">&#39;display_cols&#39;</span><span class="p">:[</span><span class="s1">&#39;a1&#39;</span><span class="p">],</span> <span class="s1">&#39;expression&#39;</span><span class="p">:[</span><span class="s1">&#39;b2&#39;</span><span class="p">,</span><span class="s1">&#39;&lt;=&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>
<span class="gp">sage: </span><span class="n">r</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="go">a1</span>
<span class="go">--------------------</span>
<span class="go">0</span>
<span class="go">1</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.databases.sql_db.SQLQuery.get_query_string">
<code class="descname">get_query_string</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLQuery.get_query_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a copy of the query string.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">G</span> <span class="o">=</span> <span class="n">GraphDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">q</span> <span class="o">=</span> <span class="s1">&#39;SELECT graph_id,graph6,num_vertices,num_edges FROM graph_data WHERE graph_id&lt;=(?) AND num_vertices=(?)&#39;</span>
<span class="gp">sage: </span><span class="n">param</span> <span class="o">=</span> <span class="p">(</span><span class="mi">22</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">SQLQuery</span><span class="p">(</span><span class="n">G</span><span class="p">,</span><span class="n">q</span><span class="p">,</span><span class="n">param</span><span class="p">)</span><span class="o">.</span><span class="n">get_query_string</span><span class="p">()</span>
<span class="go">&#39;SELECT graph_id,graph6,num_vertices,num_edges FROM graph_data</span>
<span class="go">WHERE graph_id&lt;=(?) AND num_vertices=(?)&#39;</span>
<span class="gp">sage: </span><span class="n">r</span> <span class="o">=</span> <span class="s1">&#39;SELECT graph6 FROM graph_data WHERE num_vertices&lt;=3&#39;</span>
<span class="gp">sage: </span><span class="n">SQLQuery</span><span class="p">(</span><span class="n">G</span><span class="p">,</span><span class="n">r</span><span class="p">)</span><span class="o">.</span><span class="n">get_query_string</span><span class="p">()</span>
<span class="go">&#39;SELECT graph6 FROM graph_data WHERE num_vertices&lt;=3&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLQuery.intersect">
<code class="descname">intersect</code><span class="sig-paren">(</span><em>other</em>, <em>join_table=None</em>, <em>join_dict=None</em>, <em>in_place=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLQuery.intersect" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <code class="docutils literal"><span class="pre">SQLQuery</span></code> that is the intersection of <code class="docutils literal"><span class="pre">self</span></code> and
<code class="docutils literal"><span class="pre">other</span></code>. <code class="docutils literal"><span class="pre">join_table</span></code> and <code class="docutils literal"><span class="pre">join_dict</span></code> can be <code class="docutils literal"><span class="pre">None</span></code> iff the
two queries only search one table in the database. All display columns
will be concatenated in order: self display cols + other display cols.</p>
<p>INPUT:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">other</span></code> &#8211; the <code class="docutils literal"><span class="pre">SQLQuery</span></code> to intersect with</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">join_table</span></code> &#8211; base table to join on (This table should have at
least one column in each table to join on).</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">join_dict</span></code> &#8211; a dictionary that represents the join structure for
the new query. (Must include a mapping for all tables, including
those previously joined in either query). Structure is given by:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;join_table1&#39;</span><span class="p">:(</span><span class="s1">&#39;corr_base_col1&#39;</span><span class="p">,</span> <span class="s1">&#39;col1&#39;</span><span class="p">),</span> <span class="s1">&#39;join_table2&#39;</span><span class="p">:(</span><span class="s1">&#39;corr_base_col2&#39;</span><span class="p">,</span> <span class="s1">&#39;col2&#39;</span><span class="p">)}</span>
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">join_table1</span></code> is to be joined with <code class="docutils literal"><span class="pre">join_table</span></code> on
<code class="docutils literal"><span class="pre">join_table.corr_base_col1</span> <span class="pre">=</span> <span class="pre">join_table1.col1</span></code></p>
</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">DB</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,{</span><span class="s1">&#39;a1&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;bool&#39;</span><span class="p">},</span> <span class="s1">&#39;b2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;int&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;lucy&#39;</span><span class="p">,{</span><span class="s1">&#39;a1&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;bool&#39;</span><span class="p">},</span> <span class="s1">&#39;b2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;int&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s1">&#39;lucy&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">q</span> <span class="o">=</span> <span class="n">SQLQuery</span><span class="p">(</span><span class="n">DB</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;table_name&#39;</span><span class="p">:</span><span class="s1">&#39;lucy&#39;</span><span class="p">,</span> <span class="s1">&#39;display_cols&#39;</span><span class="p">:[</span><span class="s1">&#39;b2&#39;</span><span class="p">],</span> <span class="s1">&#39;expression&#39;</span><span class="p">:[</span><span class="s1">&#39;a1&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">]})</span>
<span class="gp">sage: </span><span class="n">r</span> <span class="o">=</span> <span class="n">SQLQuery</span><span class="p">(</span><span class="n">DB</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;table_name&#39;</span><span class="p">:</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="s1">&#39;display_cols&#39;</span><span class="p">:[</span><span class="s1">&#39;a1&#39;</span><span class="p">],</span> <span class="s1">&#39;expression&#39;</span><span class="p">:[</span><span class="s1">&#39;b2&#39;</span><span class="p">,</span><span class="s1">&#39;&lt;=&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">]})</span>
<span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;lucy&#39;</span><span class="p">:(</span><span class="s1">&#39;a1&#39;</span><span class="p">,</span><span class="s1">&#39;a1&#39;</span><span class="p">)})</span>
<span class="gp">sage: </span><span class="n">s</span><span class="o">.</span><span class="n">get_query_string</span><span class="p">()</span>
<span class="go">&#39;SELECT lucy.b2,simon.a1 FROM simon INNER JOIN lucy ON</span>
<span class="go">simon.a1=lucy.a1 WHERE ( lucy.a1 = ? ) AND ( simon.b2 &lt;= ? )&#39;</span>
<span class="gp">sage: </span><span class="n">s</span><span class="o">.</span><span class="n">query_results</span><span class="p">()</span>
<span class="go">[(1, 1), (4, 1)]</span>
<span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Input queries query different tables but join</span>
<span class="go">    parameters are NoneType</span>
<span class="gp">sage: </span><span class="n">s</span><span class="o">.</span><span class="n">__query_string__</span> <span class="o">==</span> <span class="n">q</span><span class="o">.</span><span class="n">__query_string__</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">q</span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;lucy&#39;</span><span class="p">:(</span><span class="s1">&#39;a1&#39;</span><span class="p">,</span><span class="s1">&#39;a1&#39;</span><span class="p">)},</span> <span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">q</span><span class="o">.</span><span class="n">__query_string__</span> <span class="o">==</span> <span class="n">s</span><span class="o">.</span><span class="n">__query_string__</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLQuery.query_results">
<code class="descname">query_results</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLQuery.query_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the query by executing the <code class="docutils literal"><span class="pre">__query_string__</span></code>. Returns the
results of the query in a list.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">G</span> <span class="o">=</span> <span class="n">GraphDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">q</span> <span class="o">=</span> <span class="s1">&#39;SELECT graph_id,graph6,num_vertices,num_edges FROM graph_data WHERE graph_id&lt;=(?) AND num_vertices=(?)&#39;</span>
<span class="gp">sage: </span><span class="n">param</span> <span class="o">=</span> <span class="p">(</span><span class="mi">22</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">Q</span> <span class="o">=</span> <span class="n">SQLQuery</span><span class="p">(</span><span class="n">G</span><span class="p">,</span><span class="n">q</span><span class="p">,</span><span class="n">param</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">Q</span><span class="o">.</span><span class="n">query_results</span><span class="p">()</span>
<span class="go">[(18, u&#39;D??&#39;, 5, 0), (19, u&#39;D?C&#39;, 5, 1), (20, u&#39;D?K&#39;, 5, 2),</span>
<span class="go"> (21, u&#39;D@O&#39;, 5, 2), (22, u&#39;D?[&#39;, 5, 3)]</span>
<span class="gp">sage: </span><span class="n">R</span> <span class="o">=</span> <span class="n">SQLQuery</span><span class="p">(</span><span class="n">G</span><span class="p">,{</span><span class="s1">&#39;table_name&#39;</span><span class="p">:</span><span class="s1">&#39;graph_data&#39;</span><span class="p">,</span> <span class="s1">&#39;display_cols&#39;</span><span class="p">:[</span><span class="s1">&#39;graph6&#39;</span><span class="p">],</span> <span class="s1">&#39;expression&#39;</span><span class="p">:[</span><span class="s1">&#39;num_vertices&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">]})</span>
<span class="gp">sage: </span><span class="n">R</span><span class="o">.</span><span class="n">query_results</span><span class="p">()</span>
<span class="go">[(u&#39;C?&#39;,), (u&#39;C@&#39;,), (u&#39;CB&#39;,), (u&#39;CK&#39;,), (u&#39;CF&#39;,), (u&#39;CJ&#39;,),</span>
<span class="go"> (u&#39;CL&#39;,), (u&#39;CN&#39;,), (u&#39;C]&#39;,), (u&#39;C^&#39;,), (u&#39;C~&#39;,)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLQuery.show">
<code class="descname">show</code><span class="sig-paren">(</span><em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLQuery.show" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays the result of the query in table format.</p>
<p>KEYWORDS:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">max_field_size</span></code> &#8211; how wide each field can be</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">format_cols</span></code> &#8211; a dictionary that allows the user to specify the
format of a column&#8217;s output by supplying a function. The format of
the dictionary is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;column_name&#39;</span><span class="p">:(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">format_function</span><span class="p">(</span><span class="n">x</span><span class="p">))}</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">plot_cols</span></code> &#8211; a dictionary that allows the user to specify that a
plot should be drawn by the object generated by a data slice. Note
that plot kwds are permitted. The dictionary format is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;column_name&#39;</span><span class="p">:((</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">plot_function</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span><span class="o">**</span><span class="n">kwds</span><span class="p">)}</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">relabel_cols</span></code> &#8211; a dictionary to specify a relabeling of column
headers. The dictionary format is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;table_name&#39;</span><span class="p">:{</span><span class="s1">&#39;old_col_name&#39;</span><span class="p">:</span><span class="s1">&#39;new_col_name&#39;</span><span class="p">}}</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">id_col</span></code> &#8211; reference to a column that can be used as an object
identifier for each row</p>
</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">DB</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,{</span><span class="s1">&#39;a1&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;bool&#39;</span><span class="p">,</span> <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">},</span> <span class="s1">&#39;b2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;int&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">r</span> <span class="o">=</span> <span class="n">SQLQuery</span><span class="p">(</span><span class="n">DB</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;table_name&#39;</span><span class="p">:</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="s1">&#39;display_cols&#39;</span><span class="p">:[</span><span class="s1">&#39;a1&#39;</span><span class="p">],</span> <span class="s1">&#39;expression&#39;</span><span class="p">:[</span><span class="s1">&#39;b2&#39;</span><span class="p">,</span><span class="s1">&#39;&lt;=&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">]})</span>
<span class="gp">sage: </span><span class="n">r</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="go">a1</span>
<span class="go">--------------------</span>
<span class="go">0</span>
<span class="go">1</span>
<span class="go">1</span>
<span class="gp">sage: </span><span class="n">D</span> <span class="o">=</span> <span class="n">GraphDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.graph_database</span> <span class="kn">import</span> <span class="n">valid_kwds</span><span class="p">,</span> <span class="n">data_to_degseq</span>
<span class="gp">sage: </span><span class="n">relabel</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">sage: </span><span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">valid_kwds</span><span class="p">:</span>
<span class="gp">... </span>      <span class="n">relabel</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">word</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">col</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">q</span> <span class="o">=</span> <span class="n">GraphQuery</span><span class="p">(</span><span class="n">display_cols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;graph6&#39;</span><span class="p">,</span><span class="s1">&#39;degree_sequence&#39;</span><span class="p">],</span> <span class="n">num_vertices</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">SQLQuery</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">format_cols</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;degree_sequence&#39;</span><span class="p">:(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">data_to_degseq</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))},</span> <span class="n">relabel_cols</span><span class="o">=</span><span class="n">relabel</span><span class="p">,</span> <span class="n">id_col</span><span class="o">=</span><span class="s1">&#39;graph6&#39;</span><span class="p">)</span>
<span class="go">Graph6               Degree Sequence</span>
<span class="go">----------------------------------------</span>
<span class="go">C?                   [0, 0, 0, 0]</span>
<span class="go">C@                   [0, 0, 1, 1]</span>
<span class="go">CB                   [0, 1, 1, 2]</span>
<span class="go">CF                   [1, 1, 1, 3]</span>
<span class="go">CJ                   [0, 2, 2, 2]</span>
<span class="go">CK                   [1, 1, 1, 1]</span>
<span class="go">CL                   [1, 1, 2, 2]</span>
<span class="go">CN                   [1, 2, 2, 3]</span>
<span class="go">C]                   [2, 2, 2, 2]</span>
<span class="go">C^                   [2, 2, 3, 3]</span>
<span class="go">C~                   [3, 3, 3, 3]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.databases.sql_db.SQLQuery.union">
<code class="descname">union</code><span class="sig-paren">(</span><em>other</em>, <em>join_table=None</em>, <em>join_dict=None</em>, <em>in_place=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.SQLQuery.union" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <code class="docutils literal"><span class="pre">SQLQuery</span></code> that is the union of self and other.
<code class="docutils literal"><span class="pre">join_table</span></code> and <code class="docutils literal"><span class="pre">join_dict</span></code> can be <code class="docutils literal"><span class="pre">None</span></code> iff the two queries
only search one table in the database. All display columns will be
concatenated in order: self display cols + other display cols.</p>
<p>INPUT:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">other</span></code> &#8211; the <code class="docutils literal"><span class="pre">SQLQuery</span></code> to union with</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">join_table</span></code> &#8211; base table to join on (This table should have at
least one column in each table to join on).</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">join_dict</span></code> &#8211; a dictionary that represents the join structure for
the new query. (Must include a mapping for all tables, including
those previously joined in either query). Structure is given by:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;join_table1&#39;</span><span class="p">:(</span><span class="s1">&#39;corr_base_col1&#39;</span><span class="p">,</span> <span class="s1">&#39;col1&#39;</span><span class="p">),</span> <span class="s1">&#39;join_table2&#39;</span><span class="p">:(</span><span class="s1">&#39;corr_base_col2&#39;</span><span class="p">,</span> <span class="s1">&#39;col2&#39;</span><span class="p">)}</span>
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">join_table1`</span> <span class="pre">is</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">joined</span> <span class="pre">with</span> <span class="pre">``join_table</span></code> on
<code class="docutils literal"><span class="pre">join_table.corr_base_col1=join_table1.col1</span></code></p>
</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">DB</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,{</span><span class="s1">&#39;a1&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;bool&#39;</span><span class="p">},</span> <span class="s1">&#39;b2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;int&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="s1">&#39;lucy&#39;</span><span class="p">,{</span><span class="s1">&#39;a1&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;bool&#39;</span><span class="p">},</span> <span class="s1">&#39;b2&#39;</span><span class="p">:{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;int&#39;</span><span class="p">}})</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">DB</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s1">&#39;lucy&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">q</span> <span class="o">=</span> <span class="n">SQLQuery</span><span class="p">(</span><span class="n">DB</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;table_name&#39;</span><span class="p">:</span><span class="s1">&#39;lucy&#39;</span><span class="p">,</span> <span class="s1">&#39;display_cols&#39;</span><span class="p">:[</span><span class="s1">&#39;b2&#39;</span><span class="p">],</span> <span class="s1">&#39;expression&#39;</span><span class="p">:[</span><span class="s1">&#39;a1&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">]})</span>
<span class="gp">sage: </span><span class="n">r</span> <span class="o">=</span> <span class="n">SQLQuery</span><span class="p">(</span><span class="n">DB</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;table_name&#39;</span><span class="p">:</span><span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="s1">&#39;display_cols&#39;</span><span class="p">:[</span><span class="s1">&#39;a1&#39;</span><span class="p">],</span> <span class="s1">&#39;expression&#39;</span><span class="p">:[</span><span class="s1">&#39;b2&#39;</span><span class="p">,</span><span class="s1">&#39;&lt;=&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">]})</span>
<span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s1">&#39;simon&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;lucy&#39;</span><span class="p">:(</span><span class="s1">&#39;a1&#39;</span><span class="p">,</span><span class="s1">&#39;a1&#39;</span><span class="p">)})</span>
<span class="gp">sage: </span><span class="n">s</span><span class="o">.</span><span class="n">get_query_string</span><span class="p">()</span>
<span class="go">&#39;SELECT lucy.b2,simon.a1 FROM simon INNER JOIN lucy ON</span>
<span class="go">simon.a1=lucy.a1 WHERE ( lucy.a1 = ? ) OR ( simon.b2 &lt;= ? )&#39;</span>
<span class="gp">sage: </span><span class="n">s</span><span class="o">.</span><span class="n">query_results</span><span class="p">()</span>
<span class="go">[(1, 1), (4, 1)]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="sage.databases.sql_db.construct_skeleton">
<code class="descclassname">sage.databases.sql_db.</code><code class="descname">construct_skeleton</code><span class="sig-paren">(</span><em>database</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.construct_skeleton" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a database skeleton from the sql data.  The skeleton data
structure is a triple indexed dictionary of the following format:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>| - skeleton -- a triple-indexed dictionary
|   - outer key -- table name
|     - inner key -- column name
|       - inner inner key -- one of the following:
|         - ``primary_key`` -- boolean, whether column has been set as
            primary key
|         - ``index`` -- boolean, whether column has been set as index
|         - ``unique`` -- boolean, whether column has been set as unique
|         - ``sql`` -- one of ``&#39;TEXT&#39;``, ``&#39;BOOLEAN&#39;``, ``&#39;INTEGER&#39;``,
            ``&#39;REAL&#39;``, or other user defined type
</pre></div>
</div>
<p>An example skeleton of a database with one table, that table with one
column:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;table1&#39;</span><span class="p">:{</span><span class="s1">&#39;col1&#39;</span><span class="p">:{</span><span class="s1">&#39;primary_key&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;REAL&#39;</span><span class="p">}}}</span>
</pre></div>
</div>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">G</span> <span class="o">=</span> <span class="n">SQLDatabase</span><span class="p">(</span><span class="n">GraphDatabase</span><span class="p">()</span><span class="o">.</span><span class="n">__dblocation__</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.databases.sql_db</span> <span class="kn">import</span> <span class="n">construct_skeleton</span>
<span class="gp">sage: </span><span class="n">construct_skeleton</span><span class="p">(</span><span class="n">G</span><span class="p">)</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[u&#39;aut_grp&#39;, u&#39;degrees&#39;, u&#39;spectrum&#39;, u&#39;misc&#39;, u&#39;graph_data&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="sage.databases.sql_db.regexp">
<code class="descclassname">sage.databases.sql_db.</code><code class="descname">regexp</code><span class="sig-paren">(</span><em>expr</em>, <em>item</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.regexp" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to define regular expressions in pysqlite.
Returns <code class="docutils literal"><span class="pre">True</span></code> if parameter <code class="docutils literal"><span class="pre">item</span></code> matches the regular expression
parameter <code class="docutils literal"><span class="pre">expr</span></code>.
Returns <code class="docutils literal"><span class="pre">False</span></code> otherwise (i.e.: no match).</p>
<p>REFERENCES:</p>
<table class="docutils citation" frame="void" id="gh2005" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[GH2005]</td><td>Gerhard Haring. [Online] Available:
<a class="reference external" href="http://lists.initd.org/pipermail/pysqlite/2005-November/000253.html">http://lists.initd.org/pipermail/pysqlite/2005-November/000253.html</a></td></tr>
</tbody>
</table>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.databases.sql_db</span> <span class="kn">import</span> <span class="n">regexp</span>
<span class="gp">sage: </span><span class="n">regexp</span><span class="p">(</span><span class="s1">&#39;.s.*&#39;</span><span class="p">,</span><span class="s1">&#39;cs&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">regexp</span><span class="p">(</span><span class="s1">&#39;.s.*&#39;</span><span class="p">,</span><span class="s1">&#39;ccs&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">regexp</span><span class="p">(</span><span class="s1">&#39;.s.*&#39;</span><span class="p">,</span><span class="s1">&#39;cscccc&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="sage.databases.sql_db.verify_column">
<code class="descclassname">sage.databases.sql_db.</code><code class="descname">verify_column</code><span class="sig-paren">(</span><em>col_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.verify_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify that <code class="docutils literal"><span class="pre">col_dict</span></code> is in proper format, and return a dict with
default values filled in. Proper format:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;primary_key&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;REAL&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.databases.sql_db</span> <span class="kn">import</span> <span class="n">verify_column</span>
<span class="gp">sage: </span><span class="n">col</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;BOOLEAN&#39;</span><span class="p">}</span>
<span class="gp">sage: </span><span class="n">verify_column</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
<span class="go">{&#39;index&#39;: False, &#39;primary_key&#39;: False, &#39;sql&#39;: &#39;BOOLEAN&#39;, &#39;unique&#39;: False}</span>
<span class="gp">sage: </span><span class="n">col</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;primary_key&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span> <span class="s1">&#39;sql&#39;</span><span class="p">:</span><span class="s1">&#39;INTEGER&#39;</span><span class="p">}</span>
<span class="gp">sage: </span><span class="n">verify_column</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
<span class="go">{&#39;index&#39;: True, &#39;primary_key&#39;: True, &#39;sql&#39;: &#39;INTEGER&#39;, &#39;unique&#39;: True}</span>
<span class="gp">sage: </span><span class="n">verify_column</span><span class="p">({})</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">SQL type must be declared, e.g. {&#39;sql&#39;:&#39;REAL&#39;}.</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="sage.databases.sql_db.verify_operator">
<code class="descclassname">sage.databases.sql_db.</code><code class="descname">verify_operator</code><span class="sig-paren">(</span><em>operator</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.verify_operator" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that <code class="docutils literal"><span class="pre">operator</span></code> is one of the allowed strings.
Legal operators include the following strings:</p>
<ul class="simple">
<li>&#8216;=&#8217;</li>
<li>&#8216;&lt;=&#8217;</li>
<li>&#8216;&gt;=&#8217;</li>
<li>&#8216;&lt;&#8217;</li>
<li>&#8216;&gt;&#8217;</li>
<li>&#8216;&lt;&gt;&#8217;</li>
<li>&#8216;like&#8217;</li>
<li>&#8216;regexp&#8217;</li>
<li>&#8216;is null&#8217;</li>
<li>&#8216;is not null&#8217;</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.databases.sql_db</span> <span class="kn">import</span> <span class="n">verify_operator</span>
<span class="gp">sage: </span><span class="n">verify_operator</span><span class="p">(</span><span class="s1">&#39;&lt;=&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">verify_operator</span><span class="p">(</span><span class="s1">&#39;regexp&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">verify_operator</span><span class="p">(</span><span class="s1">&#39;is null&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">verify_operator</span><span class="p">(</span><span class="s1">&#39;not_an_operator&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">TypeError</span>: <span class="n">not_an_operator is not a legal operator.</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="sage.databases.sql_db.verify_type">
<code class="descclassname">sage.databases.sql_db.</code><code class="descname">verify_type</code><span class="sig-paren">(</span><em>type</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.databases.sql_db.verify_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify that the specified <code class="docutils literal"><span class="pre">type</span></code> is one of the allowed strings.</p>
<p>EXAMPLES:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.databases.sql_db</span> <span class="kn">import</span> <span class="n">verify_type</span>
<span class="gp">sage: </span><span class="n">verify_type</span><span class="p">(</span><span class="s1">&#39;INT&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">verify_type</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">verify_type</span><span class="p">(</span><span class="s1">&#39;float&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">TypeError</span>: <span class="n">float is not a legal type.</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <h4>Previous topic</h4>
            <p class="topless"><a href="../misc/sage_ostools.html"
                                  title="previous chapter">Miscellaneous operating system functions</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="../structure/graphics_file.html"
                                  title="next chapter">Wrapper for Graphics Files</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/sage/databases/sql_db.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../../../search.html" method="get">
                <input type="text" name="q" size="18" />
               <!-- The shading of the "Go" button should be consistent -->
               <!-- with the colour of the header and footer. See the file -->
               <!-- doc/common/themes/sage/theme.conf for colours used by -->
               <!-- the Sage theme. -->
                <input type="submit" style="background-color: #B8B9F6" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../structure/graphics_file.html" title="Wrapper for Graphics Files"
             >next</a> |</li>
        <li class="right" >
          <a href="../misc/sage_ostools.html" title="Miscellaneous operating system functions"
             >previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../index.html">Utilities</a> &raquo;</li>
 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &copy; Copyright 2005--2016, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.4.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66100-14', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>