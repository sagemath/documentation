
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="viewport" content="width=600, initial-scale=1">
    <title>PQ-Trees &#8212; Sage Reference Manual v8.7: Graph Theory</title>
    <link rel="stylesheet" href="../../../_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Generation of trees" href="trees.html" />
    <link rel="prev" title="Spanning trees" href="spanning_tree.html" />
    <link rel="icon" href="../../../_static/sageicon.png" type="image/x-icon" />
    <script src="../../../_static/thebe.js" type="text/javascript"></script>
    <script src="../../../_static/thebe-sage.js" type="text/javascript"></script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="trees.html" title="Generation of trees"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="spanning_tree.html" title="Spanning trees"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../index.html">Graph Theory</a> &#187;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pq-trees">
<span id="sage-graphs-pq-trees"></span><h1>PQ-Trees<a class="headerlink" href="#pq-trees" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-sage.graphs.pq_trees"></span><p>This module implements PQ-Trees, a data structure use to represent all
permutations of the columns of a matrix which satisfy the <em>consecutive ones</em>
<em>property</em>:</p>
<blockquote>
<div><p>A binary matrix satisfies the <em>consecutive ones property</em> if the 1s are
contiguous in each of its rows (or equivalently, if no row contains the regexp
pattern <span class="math notranslate nohighlight">\(10^+1\)</span>).</p>
<p>Alternatively, one can say that a sequence of sets <span class="math notranslate nohighlight">\(S_1,...,S_n\)</span> satisfies the
<em>consecutive ones property</em> if for any <span class="math notranslate nohighlight">\(x\)</span> the indices of the sets containing
<span class="math notranslate nohighlight">\(x\)</span> is an interval of <span class="math notranslate nohighlight">\([1,n]\)</span>.</p>
</div></blockquote>
<p>This module is used for the recognition of Interval Graphs (see
<a class="reference internal" href="generic_graph.html#sage.graphs.generic_graph.GenericGraph.is_interval" title="sage.graphs.generic_graph.GenericGraph.is_interval"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_interval()</span></code></a>).</p>
<p><strong>P-tree and Q-tree</strong></p>
<ul>
<li><p class="first">A <span class="math notranslate nohighlight">\(P\)</span>-tree with children <span class="math notranslate nohighlight">\(c_1,...,c_k\)</span> (which can be <span class="math notranslate nohighlight">\(P\)</span>-trees, <span class="math notranslate nohighlight">\(Q\)</span>-trees, or
actual sets of points) indicates that all <span class="math notranslate nohighlight">\(k!\)</span> permutations of the children
are allowed.</p>
<p>Example: <span class="math notranslate nohighlight">\(\{1,2\},\{3,4\},\{5,6\}\)</span> (disjoint sets can be permuted in any way)</p>
</li>
<li><p class="first">A <span class="math notranslate nohighlight">\(Q\)</span>-tree with children <span class="math notranslate nohighlight">\(c_1,...,c_k\)</span> (which can be <span class="math notranslate nohighlight">\(P\)</span>-trees, <span class="math notranslate nohighlight">\(Q\)</span>-trees, or
actual sets of points) indicates that only two permutations of its children
are allowed: <span class="math notranslate nohighlight">\(c_1,...,c_k\)</span> or <span class="math notranslate nohighlight">\(c_k,...,c_1\)</span>.</p>
<p>Example: <span class="math notranslate nohighlight">\(\{1,2\},\{2,3\},\{3,4\},\{4,5\},\{5,6\}\)</span> (only two permutations of
these sets have the <em>consecutive ones property</em>).</p>
</li>
</ul>
<p><strong>Computation of all possible orderings</strong></p>
<ol class="arabic">
<li><p class="first">In order to compute all permutations of a sequence of sets <span class="math notranslate nohighlight">\(S_1,...,S_k\)</span>
satisfying the <em>consecutive ones property</em>, we initialize <span class="math notranslate nohighlight">\(T\)</span> as a <span class="math notranslate nohighlight">\(P\)</span>-tree
whose children are all the <span class="math notranslate nohighlight">\(S_1,...,S_k\)</span>, thus representing the set of all
<span class="math notranslate nohighlight">\(k!\)</span> permutations of them.</p>
</li>
<li><p class="first">We select some element <span class="math notranslate nohighlight">\(x\)</span> and update the data structure <span class="math notranslate nohighlight">\(T\)</span> to restrict the
permutations it describes to those that keep the occurrences of <span class="math notranslate nohighlight">\(x\)</span> on an
interval of <span class="math notranslate nohighlight">\([1,...,k]\)</span>. This will result in a new <span class="math notranslate nohighlight">\(P\)</span>-tree whose children
are:</p>
<ul class="simple">
<li>all <span class="math notranslate nohighlight">\(\bar c_x\)</span> sets <span class="math notranslate nohighlight">\(S_i\)</span> which do <em>not</em> contain <span class="math notranslate nohighlight">\(x\)</span>.</li>
<li>a new <span class="math notranslate nohighlight">\(P\)</span>-tree whose children are the <span class="math notranslate nohighlight">\(c_x\)</span> sets <span class="math notranslate nohighlight">\(S_i\)</span> containing <span class="math notranslate nohighlight">\(x\)</span>.</li>
</ul>
<p>This describes the set of all <span class="math notranslate nohighlight">\(c_x!\times \bar c'_x!\)</span> permutations of
<span class="math notranslate nohighlight">\(S_1,...,S_k\)</span> that keep the sets containing <span class="math notranslate nohighlight">\(x\)</span> on an interval.</p>
</li>
<li><p class="first">We take a second element <span class="math notranslate nohighlight">\(x'\)</span> and update the data structure <span class="math notranslate nohighlight">\(T\)</span> to restrict
the permutations it describes to those that keep <span class="math notranslate nohighlight">\(x'\)</span> on an interval of
<span class="math notranslate nohighlight">\([1,...,k]\)</span>. The sets <span class="math notranslate nohighlight">\(S_1,...,S_k\)</span> belong to 4 categories:</p>
<ul class="simple">
<li>The family <span class="math notranslate nohighlight">\(S_{00}\)</span> of sets which do not contain any of
<span class="math notranslate nohighlight">\(x,x'\)</span>.</li>
<li>The family <span class="math notranslate nohighlight">\(S_{01}\)</span> of sets which contain <span class="math notranslate nohighlight">\(x'\)</span> but do not contain
<span class="math notranslate nohighlight">\(x\)</span>.</li>
<li>The family <span class="math notranslate nohighlight">\(S_{10}\)</span> of sets which contain <span class="math notranslate nohighlight">\(x\)</span> but do not contain
<span class="math notranslate nohighlight">\(x'\)</span>.</li>
<li>The family <span class="math notranslate nohighlight">\(S_{11}\)</span> of sets which contain <span class="math notranslate nohighlight">\(x'\)</span> and <span class="math notranslate nohighlight">\(x'\)</span>.</li>
</ul>
<p>With these notations, the permutations of <span class="math notranslate nohighlight">\(S_1,...,S_k\)</span> which keep the
occurrences of <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(x'\)</span> on an interval are of two forms:</p>
<ul class="simple">
<li>&lt;some sets <span class="math notranslate nohighlight">\(S_{00}\)</span>&gt;, &lt;sets from <span class="math notranslate nohighlight">\(S_{10}\)</span>&gt;, &lt;sets from <span class="math notranslate nohighlight">\(S_{11}\)</span>&gt;, &lt;sets from <span class="math notranslate nohighlight">\(S_{01}\)</span>&gt;, &lt;other sets from <span class="math notranslate nohighlight">\(S_{00}\)</span>&gt;</li>
<li>&lt;some sets <span class="math notranslate nohighlight">\(S_{00}\)</span>&gt;, &lt;sets from <span class="math notranslate nohighlight">\(S_{01}\)</span>&gt;, &lt;sets from <span class="math notranslate nohighlight">\(S_{11}\)</span>&gt;, &lt;sets from <span class="math notranslate nohighlight">\(S_{10}\)</span>&gt;, &lt;other sets from <span class="math notranslate nohighlight">\(S_{00}\)</span>&gt;</li>
</ul>
<p>These permutations can be modeled with the following <span class="math notranslate nohighlight">\(PQ\)</span>-tree:</p>
<ul class="simple">
<li>A <span class="math notranslate nohighlight">\(P\)</span>-tree whose children are:<ul>
<li>All sets from <span class="math notranslate nohighlight">\(S_{00}\)</span></li>
<li>A <span class="math notranslate nohighlight">\(Q\)</span>-tree whose children are:<ul>
<li>A <span class="math notranslate nohighlight">\(P\)</span>-tree with whose children are the sets from <span class="math notranslate nohighlight">\(S_{10}\)</span></li>
<li>A <span class="math notranslate nohighlight">\(P\)</span>-tree with whose children are the sets from <span class="math notranslate nohighlight">\(S_{11}\)</span></li>
<li>A <span class="math notranslate nohighlight">\(P\)</span>-tree with whose children are the sets from <span class="math notranslate nohighlight">\(S_{01}\)</span></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p class="first">One at a time, we update the data structure with each element until they are
all exhausted, or until we reach a proof that no permutation satisfying the
<em>consecutive ones property</em> exists.</p>
<p>Using these two types of tree, and exploring the different cases of
intersection, it is possible to represent all the possible permutations of
our sets satisfying our constraints, or to prove that no such ordering
exists. This is the whole purpose of this module, and is explained with more
details in many places, for example in the following document from Hajiaghayi
<a class="reference internal" href="#haj" id="id1">[Haj]</a>.</p>
</li>
</ol>
<p>REFERENCES:</p>
<table class="docutils citation" frame="void" id="haj" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[Haj]</a></td><td>M. Hajiaghayi
<a class="reference external" href="http://www-math.mit.edu/~hajiagha/pp11.ps">http://www-math.mit.edu/~hajiagha/pp11.ps</a></td></tr>
</tbody>
</table>
<p>Authors:</p>
<p>Nathann Cohen (initial implementation)</p>
<div class="section" id="methods-and-functions">
<h2>Methods and functions<a class="headerlink" href="#methods-and-functions" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="sage.graphs.pq_trees.P">
<em class="property">class </em><code class="descclassname">sage.graphs.pq_trees.</code><code class="descname">P</code><span class="sig-paren">(</span><em>seq</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.P" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.graphs.pq_trees.PQ" title="sage.graphs.pq_trees.PQ"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.graphs.pq_trees.PQ</span></code></a></p>
<p>A P-Tree is a PQ-Tree whose children can be permuted in any way.</p>
<p>For more information, see the documentation of <a class="reference internal" href="#module-sage.graphs.pq_trees" title="sage.graphs.pq_trees"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sage.graphs.pq_trees</span></code></a>.</p>
<dl class="method">
<dt id="sage.graphs.pq_trees.P.cardinality">
<code class="descname">cardinality</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.P.cardinality" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of orderings allowed by the structure.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#sage.graphs.pq_trees.P.orderings" title="sage.graphs.pq_trees.P.orderings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">orderings()</span></code></a> – iterate over all admissible orderings</p>
</div>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.pq_trees</span> <span class="kn">import</span> <span class="n">P</span><span class="p">,</span> <span class="n">Q</span>
<span class="gp">sage: </span><span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">]])</span>
<span class="gp">sage: </span><span class="n">p</span><span class="o">.</span><span class="n">cardinality</span><span class="p">()</span>
<span class="go">5040</span>
<span class="gp">sage: </span><span class="n">p</span><span class="o">.</span><span class="n">set_contiguous</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">(1, True)</span>
<span class="gp">sage: </span><span class="n">p</span><span class="o">.</span><span class="n">cardinality</span><span class="p">()</span>
<span class="go">1440</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.graphs.pq_trees.P.orderings">
<code class="descname">orderings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.P.orderings" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all orderings of the sets allowed by the structure.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#sage.graphs.pq_trees.P.cardinality" title="sage.graphs.pq_trees.P.cardinality"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cardinality()</span></code></a> – return the number of orderings</p>
</div>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.pq_trees</span> <span class="kn">import</span> <span class="n">P</span><span class="p">,</span> <span class="n">Q</span>
<span class="gp">sage: </span><span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">]])</span>
<span class="gp">sage: </span><span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">orderings</span><span class="p">():</span>
<span class="go">....:    print(o)</span>
<span class="go">({2, 4}, {1, 2}, {0, 8}, {0, 5})</span>
<span class="go">({2, 4}, {1, 2}, {0, 5}, {0, 8})</span>
<span class="go">({2, 4}, {0, 8}, {1, 2}, {0, 5})</span>
<span class="go">({2, 4}, {0, 8}, {0, 5}, {1, 2})</span>
<span class="gp">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.graphs.pq_trees.P.set_contiguous">
<code class="descname">set_contiguous</code><span class="sig-paren">(</span><em>v</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.P.set_contiguous" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates <code class="docutils literal notranslate"><span class="pre">self</span></code> so that the sets containing <code class="docutils literal notranslate"><span class="pre">v</span></code> are
contiguous for any admissible permutation of its subtrees.</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">v</span></code> – an element of the ground set</li>
</ul>
<p>OUTPUT:</p>
<p>According to the cases :</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">(EMPTY,</span> <span class="pre">ALIGNED)</span></code> if no set of the tree contains
an occurrence of <code class="docutils literal notranslate"><span class="pre">v</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">(FULL,</span> <span class="pre">ALIGNED)</span></code> if all the sets of the tree contain
<code class="docutils literal notranslate"><span class="pre">v</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">(PARTIAL,</span> <span class="pre">ALIGNED)</span></code> if some (but not all) of the sets
contain <code class="docutils literal notranslate"><span class="pre">v</span></code>, all of which are aligned
to the right of the ordering at the end when the function ends</li>
<li><code class="docutils literal notranslate"><span class="pre">(PARTIAL,</span> <span class="pre">UNALIGNED)</span></code> if some (but not all) of the
sets contain <code class="docutils literal notranslate"><span class="pre">v</span></code>, though it is impossible to align them
all to the right</li>
</ul>
</div></blockquote>
<p>In any case, the sets containing <code class="docutils literal notranslate"><span class="pre">v</span></code> are contiguous when this
function ends. If there is no possibility of doing so, the function
raises a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> exception.</p>
<p>EXAMPLES:</p>
<p>Ensuring the sets containing <code class="docutils literal notranslate"><span class="pre">0</span></code> are continuous:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.pq_trees</span> <span class="kn">import</span> <span class="n">P</span><span class="p">,</span> <span class="n">Q</span>
<span class="gp">sage: </span><span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">]])</span>
<span class="gp">sage: </span><span class="n">p</span><span class="o">.</span><span class="n">set_contiguous</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(1, True)</span>
<span class="gp">sage: </span><span class="k">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="go">(&#39;P&#39;, [{1, 2}, {2, 3}, {2, 4}, {8, 2}, {9, 2}, (&#39;P&#39;, [{0, 3}, {0, 4}])])</span>
</pre></div>
</div>
<p>Impossible situation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">sage: </span><span class="n">p</span><span class="o">.</span><span class="n">set_contiguous</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(1, True)</span>
<span class="gp">sage: </span><span class="n">p</span><span class="o">.</span><span class="n">set_contiguous</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">(1, True)</span>
<span class="gp">sage: </span><span class="n">p</span><span class="o">.</span><span class="n">set_contiguous</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">(1, True)</span>
<span class="gp">sage: </span><span class="n">p</span><span class="o">.</span><span class="n">set_contiguous</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Impossible</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.graphs.pq_trees.PQ">
<em class="property">class </em><code class="descclassname">sage.graphs.pq_trees.</code><code class="descname">PQ</code><span class="sig-paren">(</span><em>seq</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.PQ" title="Permalink to this definition">¶</a></dt>
<dd><p>PQ-Trees</p>
<p>This class should not be instantiated by itself: it is extended by
<a class="reference internal" href="#sage.graphs.pq_trees.P" title="sage.graphs.pq_trees.P"><code class="xref py py-class docutils literal notranslate"><span class="pre">P</span></code></a> and <a class="reference internal" href="#sage.graphs.pq_trees.Q" title="sage.graphs.pq_trees.Q"><code class="xref py py-class docutils literal notranslate"><span class="pre">Q</span></code></a>. See the documentation of
<a class="reference internal" href="#module-sage.graphs.pq_trees" title="sage.graphs.pq_trees"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sage.graphs.pq_trees</span></code></a> for more information.</p>
<p>AUTHOR : Nathann Cohen</p>
<dl class="method">
<dt id="sage.graphs.pq_trees.PQ.flatten">
<code class="descname">flatten</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.PQ.flatten" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a flattened copy of <code class="docutils literal notranslate"><span class="pre">self</span></code></p>
<p>If self has only one child, we may as well consider its
child’s children, as <code class="docutils literal notranslate"><span class="pre">self</span></code> encodes no information. This
method recursively “flattens” trees having only on PQ-tree
child, and returns it.</p>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.pq_trees</span> <span class="kn">import</span> <span class="n">P</span><span class="p">,</span> <span class="n">Q</span>
<span class="gp">sage: </span><span class="n">p</span> <span class="o">=</span> <span class="n">Q</span><span class="p">([</span><span class="n">P</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">]])])</span>
<span class="gp">sage: </span><span class="n">p</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="go">(&#39;P&#39;, [{2, 4}, {8, 2}, {9, 2}])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.graphs.pq_trees.PQ.number_of_children">
<code class="descname">number_of_children</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.PQ.number_of_children" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of children of <code class="docutils literal notranslate"><span class="pre">self</span></code></p>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.pq_trees</span> <span class="kn">import</span> <span class="n">P</span><span class="p">,</span> <span class="n">Q</span>
<span class="gp">sage: </span><span class="n">p</span> <span class="o">=</span> <span class="n">Q</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">P</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">]])])</span>
<span class="gp">sage: </span><span class="n">p</span><span class="o">.</span><span class="n">number_of_children</span><span class="p">()</span>
<span class="go">3</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.graphs.pq_trees.PQ.ordering">
<code class="descname">ordering</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.PQ.ordering" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current ordering given by listing the leaves from
left to right.</p>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.pq_trees</span> <span class="kn">import</span> <span class="n">P</span><span class="p">,</span> <span class="n">Q</span>
<span class="gp">sage: </span><span class="n">p</span> <span class="o">=</span> <span class="n">Q</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">P</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">]])])</span>
<span class="gp">sage: </span><span class="n">p</span><span class="o">.</span><span class="n">ordering</span><span class="p">()</span>
<span class="go">[{1, 2}, {2, 3}, {2, 4}, {8, 2}, {9, 2}]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.graphs.pq_trees.PQ.reverse">
<code class="descname">reverse</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.PQ.reverse" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively reverses <code class="docutils literal notranslate"><span class="pre">self</span></code> and its children</p>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.pq_trees</span> <span class="kn">import</span> <span class="n">P</span><span class="p">,</span> <span class="n">Q</span>
<span class="gp">sage: </span><span class="n">p</span> <span class="o">=</span> <span class="n">Q</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">P</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">]])])</span>
<span class="gp">sage: </span><span class="n">p</span><span class="o">.</span><span class="n">ordering</span><span class="p">()</span>
<span class="go">[{1, 2}, {2, 3}, {2, 4}, {8, 2}, {9, 2}]</span>
<span class="gp">sage: </span><span class="n">p</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">p</span><span class="o">.</span><span class="n">ordering</span><span class="p">()</span>
<span class="go">[{9, 2}, {8, 2}, {2, 4}, {2, 3}, {1, 2}]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.graphs.pq_trees.PQ.simplify">
<code class="descname">simplify</code><span class="sig-paren">(</span><em>v</em>, <em>left=False</em>, <em>right=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.PQ.simplify" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a simplified copy of self according to the element <code class="docutils literal notranslate"><span class="pre">v</span></code></p>
<p>If <code class="docutils literal notranslate"><span class="pre">self</span></code> is a partial P-tree for <code class="docutils literal notranslate"><span class="pre">v</span></code>, we would like to
restrict the permutations of its children to permutations
keeping the children containing <code class="docutils literal notranslate"><span class="pre">v</span></code> contiguous. This
function also “locks” all the elements not containing <code class="docutils literal notranslate"><span class="pre">v</span></code>
inside a <span class="math notranslate nohighlight">\(P\)</span>-tree, which is useful when one want to keep the
elements containing <code class="docutils literal notranslate"><span class="pre">v</span></code> on one side (which is the case when
this method is called).</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">left,</span> <span class="pre">right</span></code> (boolean) – whether <code class="docutils literal notranslate"><span class="pre">v</span></code> is aligned to the
right or to the left</li>
<li><code class="docutils literal notranslate"><span class="pre">v</span></code>– an element of the ground set</li>
</ul>
<p>OUTPUT:</p>
<p>If <code class="docutils literal notranslate"><span class="pre">self</span></code> is a <span class="math notranslate nohighlight">\(Q\)</span>-Tree, the sequence of its children is
returned. If <code class="docutils literal notranslate"><span class="pre">self</span></code> is a <span class="math notranslate nohighlight">\(P\)</span>-tree, 2 <span class="math notranslate nohighlight">\(P\)</span>-tree are returned,
namely the two <span class="math notranslate nohighlight">\(P\)</span>-tree defined above and restricting the
permutations, in the order implied by <code class="docutils literal notranslate"><span class="pre">left,</span> <span class="pre">right</span></code> (if
<code class="docutils literal notranslate"><span class="pre">right</span> <span class="pre">=True</span></code>, the second <span class="math notranslate nohighlight">\(P\)</span>-tree will be the one gathering
the elements containing <code class="docutils literal notranslate"><span class="pre">v</span></code>, if <code class="docutils literal notranslate"><span class="pre">left=True</span></code>, the
opposite).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method is assumes that <code class="docutils literal notranslate"><span class="pre">self</span></code> is partial for <code class="docutils literal notranslate"><span class="pre">v</span></code>,
and aligned to the side indicated by <code class="docutils literal notranslate"><span class="pre">left,</span> <span class="pre">right</span></code>.</p>
</div>
<p>EXAMPLES:</p>
<p>A <span class="math notranslate nohighlight">\(P\)</span>-Tree</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.pq_trees</span> <span class="kn">import</span> <span class="n">P</span><span class="p">,</span> <span class="n">Q</span>
<span class="gp">sage: </span><span class="n">p</span> <span class="o">=</span> <span class="n">P</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">]])</span>
<span class="gp">sage: </span><span class="n">p</span><span class="o">.</span><span class="n">simplify</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="go">[(&#39;P&#39;, [{2, 4}, {1, 2}]), (&#39;P&#39;, [{0, 8}, {0, 5}])]</span>
</pre></div>
</div>
<p>A <span class="math notranslate nohighlight">\(Q\)</span>-Tree</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">]])</span>
<span class="gp">sage: </span><span class="n">q</span><span class="o">.</span><span class="n">simplify</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="go">[{2, 4}, {1, 2}, {0, 8}, {0, 5}]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.graphs.pq_trees.Q">
<em class="property">class </em><code class="descclassname">sage.graphs.pq_trees.</code><code class="descname">Q</code><span class="sig-paren">(</span><em>seq</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.Q" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.graphs.pq_trees.PQ" title="sage.graphs.pq_trees.PQ"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.graphs.pq_trees.PQ</span></code></a></p>
<p>A Q-Tree is a PQ-Tree whose children are ordered up to reversal</p>
<p>For more information, see the documentation of <a class="reference internal" href="#module-sage.graphs.pq_trees" title="sage.graphs.pq_trees"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sage.graphs.pq_trees</span></code></a>.</p>
<dl class="method">
<dt id="sage.graphs.pq_trees.Q.cardinality">
<code class="descname">cardinality</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.Q.cardinality" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of orderings allowed by the structure.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#sage.graphs.pq_trees.Q.orderings" title="sage.graphs.pq_trees.Q.orderings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">orderings()</span></code></a> – iterate over all admissible orderings</p>
</div>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.pq_trees</span> <span class="kn">import</span> <span class="n">P</span><span class="p">,</span> <span class="n">Q</span>
<span class="gp">sage: </span><span class="n">q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">]])</span>
<span class="gp">sage: </span><span class="n">q</span><span class="o">.</span><span class="n">cardinality</span><span class="p">()</span>
<span class="go">2</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.graphs.pq_trees.Q.orderings">
<code class="descname">orderings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.Q.orderings" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterates over all orderings of the sets allowed by the structure</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#sage.graphs.pq_trees.Q.cardinality" title="sage.graphs.pq_trees.Q.cardinality"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cardinality()</span></code></a> – return the number of orderings</p>
</div>
<p>EXAMPLES:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.pq_trees</span> <span class="kn">import</span> <span class="n">P</span><span class="p">,</span> <span class="n">Q</span>
<span class="gp">sage: </span><span class="n">q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">]])</span>
<span class="gp">sage: </span><span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">q</span><span class="o">.</span><span class="n">orderings</span><span class="p">():</span>
<span class="go">....:    print(o)</span>
<span class="go">({2, 4}, {1, 2}, {0, 8}, {0, 5})</span>
<span class="go">({0, 5}, {0, 8}, {1, 2}, {2, 4})</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.graphs.pq_trees.Q.set_contiguous">
<code class="descname">set_contiguous</code><span class="sig-paren">(</span><em>v</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.Q.set_contiguous" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates <code class="docutils literal notranslate"><span class="pre">self</span></code> so that the sets containing <code class="docutils literal notranslate"><span class="pre">v</span></code> are
contiguous for any admissible permutation of its subtrees.</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">v</span></code> – an element of the ground set</li>
</ul>
<p>OUTPUT:</p>
<p>According to the cases :</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">(EMPTY,</span> <span class="pre">ALIGNED)</span></code> if no set of the tree contains
an occurrence of <code class="docutils literal notranslate"><span class="pre">v</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">(FULL,</span> <span class="pre">ALIGNED)</span></code> if all the sets of the tree contain
<code class="docutils literal notranslate"><span class="pre">v</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">(PARTIAL,</span> <span class="pre">ALIGNED)</span></code> if some (but not all) of the sets
contain <code class="docutils literal notranslate"><span class="pre">v</span></code>, all of which are aligned
to the right of the ordering at the end when the function ends</li>
<li><code class="docutils literal notranslate"><span class="pre">(PARTIAL,</span> <span class="pre">UNALIGNED)</span></code> if some (but not all) of the
sets contain <code class="docutils literal notranslate"><span class="pre">v</span></code>, though it is impossible to align them
all to the right</li>
</ul>
</div></blockquote>
<p>In any case, the sets containing <code class="docutils literal notranslate"><span class="pre">v</span></code> are contiguous when this
function ends. If there is no possibility of doing so, the function
raises a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> exception.</p>
<p>EXAMPLES:</p>
<p>Ensuring the sets containing <code class="docutils literal notranslate"><span class="pre">0</span></code> are continuous:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.pq_trees</span> <span class="kn">import</span> <span class="n">P</span><span class="p">,</span> <span class="n">Q</span>
<span class="gp">sage: </span><span class="n">q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">Q</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">Q</span><span class="p">([[</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]])])</span>
<span class="gp">sage: </span><span class="n">q</span><span class="o">.</span><span class="n">set_contiguous</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(1, False)</span>
<span class="gp">sage: </span><span class="k">print</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
<span class="go">(&#39;Q&#39;, [{2, 3}, {1, 3}, {0, 3}, {0, 4}, {4, 5}])</span>
</pre></div>
</div>
<p>Impossible situation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">p</span> <span class="o">=</span> <span class="n">Q</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">sage: </span><span class="n">p</span><span class="o">.</span><span class="n">set_contiguous</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Impossible</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="sage.graphs.pq_trees.flatten">
<code class="descclassname">sage.graphs.pq_trees.</code><code class="descname">flatten</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.flatten" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="sage.graphs.pq_trees.new_P">
<code class="descclassname">sage.graphs.pq_trees.</code><code class="descname">new_P</code><span class="sig-paren">(</span><em>liste</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.new_P" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="sage.graphs.pq_trees.new_Q">
<code class="descclassname">sage.graphs.pq_trees.</code><code class="descname">new_Q</code><span class="sig-paren">(</span><em>liste</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.new_Q" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="sage.graphs.pq_trees.reorder_sets">
<code class="descclassname">sage.graphs.pq_trees.</code><code class="descname">reorder_sets</code><span class="sig-paren">(</span><em>sets</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.reorder_sets" title="Permalink to this definition">¶</a></dt>
<dd><p>Reorders a collection of sets such that each element appears on an
interval.</p>
<p>Given a collection of sets <span class="math notranslate nohighlight">\(C = S_1,...,S_k\)</span> on a ground set <span class="math notranslate nohighlight">\(X\)</span>,
this function attempts to reorder them in such a way that <span class="math notranslate nohighlight">\(\forall
x \in X\)</span> and <span class="math notranslate nohighlight">\(i&lt;j\)</span> with <span class="math notranslate nohighlight">\(x\in S_i, S_j\)</span>, then <span class="math notranslate nohighlight">\(x\in S_l\)</span> for every
<span class="math notranslate nohighlight">\(i&lt;l&lt;j\)</span> if it exists.</p>
<p>INPUT:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">sets</span></code> - a list of instances of <code class="docutils literal notranslate"><span class="pre">list,</span> <span class="pre">Set</span></code> or <code class="docutils literal notranslate"><span class="pre">set</span></code></li>
</ul>
<p>ALGORITHM:</p>
<p>PQ-Trees</p>
<p>EXAMPLES:</p>
<p>There is only one way (up to reversal) to represent contiguously
the sequence ofsets <span class="math notranslate nohighlight">\(\{i-1, i, i+1\}\)</span>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.pq_trees</span> <span class="kn">import</span> <span class="n">reorder_sets</span>
<span class="gp">sage: </span><span class="n">seq</span> <span class="o">=</span> <span class="p">[</span><span class="n">Set</span><span class="p">([</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">15</span><span class="p">)]</span>
</pre></div>
</div>
<p>We apply a random permutation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">p</span> <span class="o">=</span> <span class="n">Permutations</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">seq</span><span class="p">))</span><span class="o">.</span><span class="n">random_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">seq</span> <span class="o">=</span> <span class="p">[</span> <span class="n">seq</span><span class="p">[</span><span class="n">p</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">seq</span><span class="p">))</span> <span class="p">]</span>
<span class="gp">sage: </span><span class="n">ordered</span> <span class="o">=</span> <span class="n">reorder_sets</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span>
<span class="gp">sage: </span><span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="ow">in</span> <span class="n">ordered</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
<span class="go">....:    ordered = ordered.reverse()</span>
<span class="gp">sage: </span><span class="k">print</span><span class="p">(</span><span class="n">ordered</span><span class="p">)</span>
<span class="go">[{0, 1, 2}, {1, 2, 3}, {2, 3, 4}, {3, 4, 5}, {4, 5, 6}, {5, 6, 7}, {8, 6, 7}, {8, 9, 7}, {8, 9, 10}, {9, 10, 11}, {10, 11, 12}, {11, 12, 13}, {12, 13, 14}, {13, 14, 15}]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="sage.graphs.pq_trees.set_contiguous">
<code class="descclassname">sage.graphs.pq_trees.</code><code class="descname">set_contiguous</code><span class="sig-paren">(</span><em>tree</em>, <em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#sage.graphs.pq_trees.set_contiguous" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">PQ-Trees</a><ul>
<li><a class="reference internal" href="#methods-and-functions">Methods and functions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="spanning_tree.html"
                        title="previous chapter">Spanning trees</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="trees.html"
                        title="next chapter">Generation of trees</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/sage/graphs/pq_trees.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="trees.html" title="Generation of trees"
             >next</a> |</li>
        <li class="right" >
          <a href="spanning_tree.html" title="Spanning trees"
             >previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="../../index.html">Graph Theory</a> &#187;</li>
 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005--2019, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66100-14', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>