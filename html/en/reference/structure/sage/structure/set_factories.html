<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Set factories &mdash; Sage Reference Manual v6.10: Basic Structures</title>
    
    <link rel="stylesheet" href="../../../_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '6.10',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="top" title="Sage Reference Manual v6.10: Basic Structures" href="../../index.html" />
    <link rel="next" title="An example of set factory" href="set_factories_example.html" />
    <link rel="prev" title="Subsets of the Real Line" href="../sets/real_set.html" />
    <link rel="icon" href="../../../_static/sageicon.png" type="image/x-icon" />

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="set_factories_example.html" title="An example of set factory"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../sets/real_set.html" title="Subsets of the Real Line"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="../../index.html">Basic Structures</a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="set-factories">
<span id="sage-structure-set-factories"></span><h1>Set factories<a class="headerlink" href="#set-factories" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-sage.structure.set_factories"></span><hr class="docutils" />
<p>A <em>set factory</em> <span class="math">\(F\)</span> is a device for constructing some <a class="reference internal" href="parent.html#sage.structure.parent.Parent" title="sage.structure.parent.Parent"><tt class="xref py py-class docutils literal"><span class="pre">Parent</span></tt></a>
<span class="math">\(P\)</span> that models subsets of a big set <span class="math">\(S\)</span>. Typically, each such parent
is constructed as the subset of <span class="math">\(S\)</span> of all elements satisfying a
certain collection of constraints <span class="math">\(cons\)</span>. In such a hierarchy of
subsets, one needs an easy and flexible control on how elements are
constructed. For example, one may want to construct the elements of
<span class="math">\(P\)</span> in some subclass of the class of the elements of <span class="math">\(S\)</span>. On other
occasions, one also often needs <span class="math">\(P\)</span> to be a facade parent, whose
elements are represented as elements of <span class="math">\(S\)</span> (see
<a class="reference external" href="../../../categories/sage/categories/facade_sets.html#sage.categories.facade_sets.FacadeSets" title="(in Sage Reference Manual: Category Framework v6.10)"><tt class="xref py py-class docutils literal"><span class="pre">FacadeSets</span></tt></a>).</p>
<p>The role of a set factory is twofold:</p>
<ul class="simple">
<li><em>Manage a database</em> of constructors for the different parents <span class="math">\(P = F(cons)\)</span>
depending on the various kinds of constraints <span class="math">\(cons\)</span>. Note: currently there
is no real support for that. We are gathering use cases before fixing the
interface.</li>
<li>Ensure that the elements <span class="math">\(e = P(...)\)</span> created by the different parents
follows a consistent policy concerning their <em>class and parent</em>.</li>
</ul>
<p class="rubric">Basic usage: constructing parents through a factory</p>
<p>The file <a class="reference internal" href="set_factories_example.html#module-sage.structure.set_factories_example" title="sage.structure.set_factories_example"><tt class="xref py py-mod docutils literal"><span class="pre">sage.structure.set_factories_example</span></tt></a> shows an example of a
<a class="reference internal" href="#sage.structure.set_factories.SetFactory" title="sage.structure.set_factories.SetFactory"><tt class="xref py py-class docutils literal"><span class="pre">SetFactory</span></tt></a> together with typical implementation. Note that the
written code is intentionally kept minimal, many things and in particular
several iterators could be written in a more efficient way.</p>
<p>Consider the set <span class="math">\(S\)</span> of couples <span class="math">\((x,y)\)</span> with <span class="math">\(x\)</span> and <span class="math">\(y\)</span> in <span class="math">\(I:=\{0,1,2,3,4\}\)</span>.
We represent an element of <span class="math">\(S\)</span> as a 2-elements tuple, wrapped in a class
<a class="reference internal" href="set_factories_example.html#sage.structure.set_factories_example.XYPair" title="sage.structure.set_factories_example.XYPair"><tt class="xref py py-class docutils literal"><span class="pre">XYPair</span></tt></a> deriving from <a class="reference internal" href="element_wrapper.html#sage.structure.element_wrapper.ElementWrapper" title="sage.structure.element_wrapper.ElementWrapper"><tt class="xref py py-class docutils literal"><span class="pre">ElementWrapper</span></tt></a>.
You can create a <a class="reference internal" href="set_factories_example.html#sage.structure.set_factories_example.XYPair" title="sage.structure.set_factories_example.XYPair"><tt class="xref py py-class docutils literal"><span class="pre">XYPair</span></tt></a> with any
<a class="reference internal" href="parent.html#sage.structure.parent.Parent" title="sage.structure.parent.Parent"><tt class="xref py py-class docutils literal"><span class="pre">Parent</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">sage: </span><span class="n">p</span> <span class="o">=</span> <span class="n">XYPair</span><span class="p">(</span><span class="n">Parent</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">));</span> <span class="n">p</span>
<span class="go">(0, 1)</span>
</pre></div>
</div>
<p>Now, given <span class="math">\((a, b)\in S\)</span> we want to consider the following subsets of
<span class="math">\(S\)</span></p>
<div class="math">
\[S_a := \{(x,y) \in S \mid x = a\},\]\[S^b := \{(x,y) \in S \mid y = b\},\]\[S_a^b := \{(x,y) \in S \mid x = a, y = b\}.\]</div>
<p>The constraints considered here are admittedly trivial. In a realistic
example, there would be much more of them. And for some sets of constraints
no good enumeration algorithms would be known.</p>
<p>In Sage, those sets are constructed by passing the constraints to the
factory. We first create the set with no constraints at all:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">XYPairs</span>
<span class="go">Factory for XY pairs</span>
<span class="gp">sage: </span><span class="n">S</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">();</span> <span class="n">S</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[(0, 0), (1, 0), ..., (4, 0), (0, 1), (1, 1), ..., (3, 4), (4, 4)]</span>
<span class="gp">sage: </span><span class="n">S</span><span class="o">.</span><span class="n">cardinality</span><span class="p">()</span>
<span class="go">25</span>
</pre></div>
</div>
<p>Let us construct <span class="math">\(S_2\)</span>, <span class="math">\(S^3\)</span> and <span class="math">\(S_2^3\)</span>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">Sx2</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">);</span> <span class="n">Sx2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[(2, 0), (2, 1), (2, 2), (2, 3), (2, 4)]</span>
<span class="gp">sage: </span><span class="n">Sy3</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">);</span> <span class="n">Sy3</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[(0, 3), (1, 3), (2, 3), (3, 3), (4, 3)]</span>
<span class="gp">sage: </span><span class="n">S23</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">);</span> <span class="n">S23</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[(2, 3)]</span>
</pre></div>
</div>
<p>Set factories provide an alternative way to build subsets of an
already constructed set: each set constructed by a factory has a
method <a class="reference internal" href="#sage.structure.set_factories.ParentWithSetFactory.subset" title="sage.structure.set_factories.ParentWithSetFactory.subset"><tt class="xref py py-meth docutils literal"><span class="pre">subset()</span></tt></a> which accept new
constraints. Sets constructed by the factory or the
<a class="reference internal" href="#sage.structure.set_factories.ParentWithSetFactory.subset" title="sage.structure.set_factories.ParentWithSetFactory.subset"><tt class="xref py py-meth docutils literal"><span class="pre">subset()</span></tt></a> methods are identical:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">Sx2s</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">);</span> <span class="n">Sx2</span> <span class="ow">is</span> <span class="n">Sx2s</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">Sx2</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="ow">is</span> <span class="n">S23</span>
<span class="go">True</span>
</pre></div>
</div>
<p>It is not possible to change an already given constraint:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">S23</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Duplicate value for constraints &#39;y&#39;: was 3 now 5</span>
</pre></div>
</div>
<p class="rubric">Constructing custom elements: policies</p>
<p>We now come to the point of factories: constructing custom elements. The
writer of <a class="reference internal" href="set_factories_example.html#sage.structure.set_factories_example.XYPairs" title="sage.structure.set_factories_example.XYPairs"><tt class="xref py py-func docutils literal"><span class="pre">XYPairs()</span></tt></a> decided that, by default,
the parents <tt class="docutils literal"><span class="pre">Sx2</span></tt>, <tt class="docutils literal"><span class="pre">Sy3</span></tt> and <tt class="docutils literal"><span class="pre">S23</span></tt> are facade for parent <tt class="docutils literal"><span class="pre">S</span></tt>. This
means that each element constructed by those subsets behaves as if they where
directly constructed by <tt class="docutils literal"><span class="pre">S</span></tt> itself:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">Sx2</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span>
<span class="go">AllPairs</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">Sx2</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">S</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">element_class</span>
<span class="go">True</span>
</pre></div>
</div>
<p>This is not always desirable. The device which decides how to construct an
element is called a <em>policy</em> (see <a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy" title="sage.structure.set_factories.SetFactoryPolicy"><tt class="xref py py-class docutils literal"><span class="pre">SetFactoryPolicy</span></tt></a>). Each factory
should have a default policy. Here is the policy of
<a class="reference internal" href="set_factories_example.html#sage.structure.set_factories_example.XYPairs" title="sage.structure.set_factories_example.XYPairs"><tt class="xref py py-func docutils literal"><span class="pre">XYPairs()</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">XYPairs</span><span class="o">.</span><span class="n">_default_policy</span>
<span class="go">Set factory policy for &lt;class &#39;sage.structure.set_factories_example.XYPair&#39;&gt; with parent AllPairs[=Factory for XY pairs(())]</span>
</pre></div>
</div>
<p>This means that with the current policy, the parent builds elements with class
<tt class="docutils literal"><span class="pre">XYPair</span></tt> and parent <tt class="docutils literal"><span class="pre">AllPairs</span></tt> which is itself constructed by calling the
factory <a class="reference internal" href="set_factories_example.html#sage.structure.set_factories_example.XYPairs" title="sage.structure.set_factories_example.XYPairs"><tt class="xref py py-func docutils literal"><span class="pre">XYPairs()</span></tt></a> with constraints <tt class="docutils literal"><span class="pre">()</span></tt>. There
is a lot of flexibility to change that. We now illustrate how to make a few
different choices.</p>
<p>1 - In a first use case, we want to add some methods to the constructed
elements. As illustration, we add here a new method <tt class="docutils literal"><span class="pre">sum</span></tt> which returns
<span class="math">\(x+y\)</span>. We therefore create a new class for the elements which inherits from
<a class="reference internal" href="set_factories_example.html#sage.structure.set_factories_example.XYPair" title="sage.structure.set_factories_example.XYPair"><tt class="xref py py-class docutils literal"><span class="pre">XYPair</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="k">class</span> <span class="nc">NewXYPair</span><span class="p">(</span><span class="n">XYPair</span><span class="p">):</span>
<span class="go">....:     def sum(self):</span>
<span class="go">....:         return sum(self.value)</span>
</pre></div>
</div>
<p>Here is an instance of this class (with a dummy parent):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">NewXYPair</span><span class="p">(</span><span class="n">Parent</span><span class="p">(),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">5</span>
</pre></div>
</div>
<p>We now want to have subsets generating those new elements while still having a
single real parent (the one with no constraint) for each element. The
corresponding policy is called <a class="reference internal" href="#sage.structure.set_factories.TopMostParentPolicy" title="sage.structure.set_factories.TopMostParentPolicy"><tt class="xref py py-class docutils literal"><span class="pre">TopMostParentPolicy</span></tt></a>. It takes three
parameters:</p>
<ul class="simple">
<li>the factory;</li>
<li>the parameters for void constraint;</li>
<li>the class used for elements.</li>
</ul>
<p>Calling the factory with this policy returns a new set which builds its
elements with the new policy:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">new_policy</span> <span class="o">=</span> <span class="n">TopMostParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="p">(),</span> <span class="n">NewXYPair</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">NewS</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">policy</span><span class="o">=</span><span class="n">new_policy</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">NewS</span><span class="o">.</span><span class="n">an_element</span><span class="p">();</span> <span class="n">el</span>
<span class="go">(0, 0)</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">NewS</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="n">NewXYPair</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Newly constructed subsets inherit the policy:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">NewS2</span> <span class="o">=</span> <span class="n">NewS</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el2</span> <span class="o">=</span> <span class="n">NewS2</span><span class="o">.</span><span class="n">an_element</span><span class="p">();</span> <span class="n">el2</span>
<span class="go">(2, 0)</span>
<span class="gp">sage: </span><span class="n">el2</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">2</span>
<span class="gp">sage: </span><span class="n">el2</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">NewS</span>
<span class="go">True</span>
</pre></div>
</div>
<p>2 - In a second use case, we want the elements to remember which
parent created them. The corresponding policy is called
<a class="reference internal" href="#sage.structure.set_factories.SelfParentPolicy" title="sage.structure.set_factories.SelfParentPolicy"><tt class="xref py py-class docutils literal"><span class="pre">SelfParentPolicy</span></tt></a>. It takes only two parameters:</p>
<ul class="simple">
<li>the factory;</li>
<li>the class used for elements.</li>
</ul>
<p>Here is an example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">selfpolicy</span> <span class="o">=</span> <span class="n">SelfParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">NewXYPair</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">SelfS</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">policy</span><span class="o">=</span><span class="n">selfpolicy</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">SelfS</span><span class="o">.</span><span class="n">an_element</span><span class="p">();</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">SelfS</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Now all subsets are the parent of the elements that they create:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">SelfS2</span> <span class="o">=</span> <span class="n">SelfS</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el2</span> <span class="o">=</span> <span class="n">SelfS2</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">el2</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">NewS</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">el2</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">SelfS2</span>
<span class="go">True</span>
</pre></div>
</div>
<p>3 - Finaly, a common use case is to construct simple python object which are
not Sage <tt class="xref py py-class docutils literal"><span class="pre">sage.structure.Element</span></tt>. As an example, we show how to build
a parent <tt class="docutils literal"><span class="pre">TupleS</span></tt> which construct pairs as tuple. The corresponding policy
is called <a class="reference internal" href="#sage.structure.set_factories.BareFunctionPolicy" title="sage.structure.set_factories.BareFunctionPolicy"><tt class="xref py py-class docutils literal"><span class="pre">BareFunctionPolicy</span></tt></a>. It takes two parameters:</p>
<ul class="simple">
<li>the factory;</li>
<li>the function called to construct the elements.</li>
</ul>
<p>Here is how to do it:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">cons</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">t</span><span class="p">,</span> <span class="n">check</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="c"># ignore the check parameter</span>
<span class="gp">sage: </span><span class="n">tuplepolicy</span> <span class="o">=</span> <span class="n">BareFunctionPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">policy</span><span class="o">=</span><span class="n">tuplepolicy</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[(2, 0), (2, 1), (2, 2), (2, 3), (2, 4)]</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
<span class="go">&lt;type &#39;tuple&#39;&gt;</span>
</pre></div>
</div>
<p>Here are the currently implemented policies:</p>
<ul class="simple">
<li><a class="reference internal" href="#sage.structure.set_factories.FacadeParentPolicy" title="sage.structure.set_factories.FacadeParentPolicy"><tt class="xref py py-class docutils literal"><span class="pre">FacadeParentPolicy</span></tt></a>: reuse an existing parent together with
its element_class</li>
<li><a class="reference internal" href="#sage.structure.set_factories.TopMostParentPolicy" title="sage.structure.set_factories.TopMostParentPolicy"><tt class="xref py py-class docutils literal"><span class="pre">TopMostParentPolicy</span></tt></a>: use a parent created by the factory
itself and provide a class <tt class="docutils literal"><span class="pre">Element</span></tt> for it. In this case, we need
to specify the set of constraints which build this parent taking the
ownership of all elements and the class which will be used for the
<tt class="docutils literal"><span class="pre">Element</span></tt>.</li>
<li><a class="reference internal" href="#sage.structure.set_factories.SelfParentPolicy" title="sage.structure.set_factories.SelfParentPolicy"><tt class="xref py py-class docutils literal"><span class="pre">SelfParentPolicy</span></tt></a>: provide systematically <tt class="docutils literal"><span class="pre">Element</span></tt> and
element_class and ensure that the parent is <tt class="docutils literal"><span class="pre">self</span></tt>.</li>
<li><a class="reference internal" href="#sage.structure.set_factories.BareFunctionPolicy" title="sage.structure.set_factories.BareFunctionPolicy"><tt class="xref py py-class docutils literal"><span class="pre">BareFunctionPolicy</span></tt></a>: instead of calling a class constructor element
are passed to a function provided to the policy.</li>
</ul>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Generalize <a class="reference internal" href="#sage.structure.set_factories.TopMostParentPolicy" title="sage.structure.set_factories.TopMostParentPolicy"><tt class="xref py py-class docutils literal"><span class="pre">TopMostParentPolicy</span></tt></a> to be able to have several
topmost parents.</p>
</div>
<p class="rubric">Technicalities: how policies inform parents</p>
<p>Parents built from factories should inherit from
<a class="reference internal" href="#sage.structure.set_factories.ParentWithSetFactory" title="sage.structure.set_factories.ParentWithSetFactory"><tt class="xref py py-class docutils literal"><span class="pre">ParentWithSetFactory</span></tt></a>. This class provide a few methods
related to factories and policies. The <tt class="docutils literal"><span class="pre">__init__</span></tt> method of
<a class="reference internal" href="#sage.structure.set_factories.ParentWithSetFactory" title="sage.structure.set_factories.ParentWithSetFactory"><tt class="xref py py-class docutils literal"><span class="pre">ParentWithSetFactory</span></tt></a> must be provided with the set of
constraints and the policy. A parent built from a factory must create
elements through a call to the method <tt class="docutils literal"><span class="pre">_element_constructor_</span></tt>. The
current way in which policies inform parents how to builds their elements is
set by a few attributes. So the class must accept attribute
adding. The precise details of which attributes are set may be subject
to change in the future.</p>
<p class="rubric">How to write a set factory</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="set_factories_example.html#module-sage.structure.set_factories_example" title="sage.structure.set_factories_example"><tt class="xref py py-mod docutils literal"><span class="pre">set_factories_example</span></tt></a> for an example of a factory.</p>
</div>
<p>Here are the specifications:</p>
<p>A parent built from a factory should</p>
<ul class="simple">
<li><em>inherit</em> from <a class="reference internal" href="#sage.structure.set_factories.ParentWithSetFactory" title="sage.structure.set_factories.ParentWithSetFactory"><tt class="xref py py-class docutils literal"><span class="pre">ParentWithSetFactory</span></tt></a>. It should accept a
<tt class="docutils literal"><span class="pre">policy</span></tt> argument and pass it verbatim to the <tt class="docutils literal"><span class="pre">__init__</span></tt> method
of <a class="reference internal" href="#sage.structure.set_factories.ParentWithSetFactory" title="sage.structure.set_factories.ParentWithSetFactory"><tt class="xref py py-class docutils literal"><span class="pre">ParentWithSetFactory</span></tt></a> together with the set of
constraints;</li>
<li><em>create its elements</em> through calls to the method
<tt class="docutils literal"><span class="pre">_element_constructor_</span></tt>;</li>
<li><em>define a method</em> <a class="reference internal" href="#sage.structure.set_factories.ParentWithSetFactory.check_element" title="sage.structure.set_factories.ParentWithSetFactory.check_element"><tt class="xref py py-class docutils literal"><span class="pre">ParentWithSetFactory.check_element</span></tt></a> which
checks if a built element indeed belongs to it. The method should
accept an extra keyword parameter called <tt class="docutils literal"><span class="pre">check</span></tt> specifying which
level of check should be performed. It will only be called when
<tt class="docutils literal"><span class="pre">bool(check)</span></tt> evaluates to <tt class="docutils literal"><span class="pre">True</span></tt>.</li>
</ul>
<p>The constructor of the elements of a parent from a factory should:</p>
<ul class="simple">
<li>receive the parent as first mandatory argument;</li>
<li>accept an extra optional keyword parameter called <tt class="docutils literal"><span class="pre">check</span></tt> which is meant
to tell if the input must be checked or not. The precise meaning of
<tt class="docutils literal"><span class="pre">check</span></tt> is intentionally left vague. The only intent is that if
<tt class="docutils literal"><span class="pre">bool(check)</span></tt> evaluates to <tt class="docutils literal"><span class="pre">False</span></tt>, no check is performed at all.</li>
</ul>
<p>A factory should</p>
<ul class="simple">
<li><em>define a method</em> <tt class="docutils literal"><span class="pre">__call__</span></tt> which is responsible for calling the
appropriate parent constructor given the constraints;</li>
<li><em>define a method</em> overloading <a class="reference internal" href="#sage.structure.set_factories.SetFactory.add_constraints" title="sage.structure.set_factories.SetFactory.add_constraints"><tt class="xref py py-meth docutils literal"><span class="pre">SetFactory.add_constraints()</span></tt></a> which is
responsible of computing the union of two sets of constraints;</li>
<li><em>optionally</em> define a method or an attribute <tt class="docutils literal"><span class="pre">_default_policy</span></tt> passed to
the <a class="reference internal" href="#sage.structure.set_factories.ParentWithSetFactory" title="sage.structure.set_factories.ParentWithSetFactory"><tt class="xref py py-class docutils literal"><span class="pre">ParentWithSetFactory</span></tt></a> if no policy is given to the factory.</li>
</ul>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">There is currently no support for dealing with sets of
constraints. The set factory and the parents must cooperate to
consistently handle them. More support, together with a generic mechanism
to select the appropriate parent class from the constraints, will be added
as soon as we have gathered sufficiently enough use-cases.</p>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li>Florent Hivert (2011-2012): initial revision</li>
</ul>
<dl class="class">
<dt id="sage.structure.set_factories.BareFunctionPolicy">
<em class="property">class </em><tt class="descclassname">sage.structure.set_factories.</tt><tt class="descname">BareFunctionPolicy</tt><big>(</big><em>factory</em>, <em>constructor</em><big>)</big><a class="headerlink" href="#sage.structure.set_factories.BareFunctionPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy" title="sage.structure.set_factories.SetFactoryPolicy"><tt class="xref py py-class docutils literal"><span class="pre">sage.structure.set_factories.SetFactoryPolicy</span></tt></a></p>
<p>Policy where element are contructed using a bare function.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">factory</span></tt> &#8211; an instance of <a class="reference internal" href="#sage.structure.set_factories.SetFactory" title="sage.structure.set_factories.SetFactory"><tt class="xref py py-class docutils literal"><span class="pre">SetFactory</span></tt></a></li>
<li><tt class="docutils literal"><span class="pre">contructor</span></tt> &#8211; a function</li>
</ul>
<p>Given a factory <tt class="docutils literal"><span class="pre">F</span></tt> and a function <tt class="docutils literal"><span class="pre">c</span></tt>, returns a policy for
parent <tt class="docutils literal"><span class="pre">P</span></tt> creating element using the function <tt class="docutils literal"><span class="pre">f</span></tt>.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories</span> <span class="kn">import</span> <span class="n">BareFunctionPolicy</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span>
<span class="gp">sage: </span><span class="n">cons</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">t</span><span class="p">,</span> <span class="n">check</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="c"># ignore the check parameter</span>
<span class="gp">sage: </span><span class="n">tuplepolicy</span> <span class="o">=</span> <span class="n">BareFunctionPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">policy</span><span class="o">=</span><span class="n">tuplepolicy</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
<span class="go">&lt;type &#39;tuple&#39;&gt;</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.structure.set_factories.BareFunctionPolicy.element_constructor_attributes">
<tt class="descname">element_constructor_attributes</tt><big>(</big><em>constraints</em><big>)</big><a class="headerlink" href="#sage.structure.set_factories.BareFunctionPolicy.element_constructor_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the element constructor attributes as per
<a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes" title="sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes"><tt class="xref py py-meth docutils literal"><span class="pre">SetFactoryPolicy.element_constructor_attributes()</span></tt></a>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">constraints</span></tt> &#8211; a bunch of constraints</li>
</ul>
<p>TESTS:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories</span> <span class="kn">import</span> <span class="n">BareFunctionPolicy</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span>
<span class="gp">sage: </span><span class="n">pol</span> <span class="o">=</span> <span class="n">BareFunctionPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">pol</span><span class="o">.</span><span class="n">element_constructor_attributes</span><span class="p">(())</span>
<span class="go">{&#39;_element_constructor_&#39;: &lt;type &#39;tuple&#39;&gt;, &#39;_parent_for&#39;: None}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.structure.set_factories.FacadeParentPolicy">
<em class="property">class </em><tt class="descclassname">sage.structure.set_factories.</tt><tt class="descname">FacadeParentPolicy</tt><big>(</big><em>factory</em>, <em>parent</em><big>)</big><a class="headerlink" href="#sage.structure.set_factories.FacadeParentPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy" title="sage.structure.set_factories.SetFactoryPolicy"><tt class="xref py py-class docutils literal"><span class="pre">sage.structure.set_factories.SetFactoryPolicy</span></tt></a></p>
<p>Policy for facade parent.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">factory</span></tt> &#8211; an instance of <a class="reference internal" href="#sage.structure.set_factories.SetFactory" title="sage.structure.set_factories.SetFactory"><tt class="xref py py-class docutils literal"><span class="pre">SetFactory</span></tt></a></li>
<li><tt class="docutils literal"><span class="pre">parent</span></tt> &#8211; an instance of <a class="reference internal" href="parent.html#sage.structure.parent.Parent" title="sage.structure.parent.Parent"><tt class="xref py py-class docutils literal"><span class="pre">Parent</span></tt></a></li>
</ul>
<p>Given a factory <tt class="docutils literal"><span class="pre">F</span></tt> and a class <tt class="docutils literal"><span class="pre">E</span></tt>, returns a policy for
parent <tt class="docutils literal"><span class="pre">P</span></tt> creating elements as if they were created by
<tt class="docutils literal"><span class="pre">parent</span></tt>.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories</span> <span class="kn">import</span> <span class="n">SelfParentPolicy</span><span class="p">,</span> <span class="n">FacadeParentPolicy</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span>
</pre></div>
</div>
<p>We create a custom standard parent <tt class="docutils literal"><span class="pre">P</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">selfpolicy</span> <span class="o">=</span> <span class="n">SelfParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">policy</span><span class="o">=</span><span class="n">selfpolicy</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">pol</span> <span class="o">=</span> <span class="n">FacadeParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P2</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">policy</span><span class="o">=</span><span class="n">pol</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">P2</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">P</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">is</span> <span class="n">P</span><span class="o">.</span><span class="n">element_class</span>
<span class="go">True</span>
</pre></div>
</div>
<p>If <tt class="docutils literal"><span class="pre">parent</span></tt> is itself a facade parent, then transitivity is
correctly applied:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span>  <span class="n">XYPairs</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">P2</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P2</span><span class="o">.</span><span class="n">category</span><span class="p">()</span>
<span class="go">Category of facade finite enumerated sets</span>
<span class="gp">sage: </span><span class="n">pol</span> <span class="o">=</span> <span class="n">FacadeParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P23</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">policy</span><span class="o">=</span><span class="n">pol</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">P2</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">P</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">is</span> <span class="n">P</span><span class="o">.</span><span class="n">element_class</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.structure.set_factories.FacadeParentPolicy.element_constructor_attributes">
<tt class="descname">element_constructor_attributes</tt><big>(</big><em>constraints</em><big>)</big><a class="headerlink" href="#sage.structure.set_factories.FacadeParentPolicy.element_constructor_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the element constructor attributes as per
<a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes" title="sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes"><tt class="xref py py-meth docutils literal"><span class="pre">SetFactoryPolicy.element_constructor_attributes()</span></tt></a>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">constraints</span></tt> &#8211; a bunch of constraints</li>
</ul>
<p>TESTS:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories</span> <span class="kn">import</span> <span class="n">FacadeParentPolicy</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span>
<span class="gp">sage: </span><span class="n">pol</span> <span class="o">=</span> <span class="n">FacadeParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPairs</span><span class="p">())</span>
<span class="gp">sage: </span><span class="n">pol</span><span class="o">.</span><span class="n">element_constructor_attributes</span><span class="p">(())</span>
<span class="go">{&#39;_facade_for&#39;: AllPairs,</span>
<span class="go"> &#39;_parent_for&#39;: AllPairs,</span>
<span class="go"> &#39;element_class&#39;: &lt;class &#39;sage.structure.set_factories_example.AllPairs_with_category.element_class&#39;&gt;}</span>
<span class="gp">sage: </span><span class="n">pol</span><span class="o">.</span><span class="n">element_constructor_attributes</span><span class="p">((</span><span class="mi">1</span><span class="p">))</span>
<span class="go">{&#39;_facade_for&#39;: AllPairs,</span>
<span class="go"> &#39;_parent_for&#39;: AllPairs,</span>
<span class="go"> &#39;element_class&#39;: &lt;class &#39;sage.structure.set_factories_example.AllPairs_with_category.element_class&#39;&gt;}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.structure.set_factories.ParentWithSetFactory">
<em class="property">class </em><tt class="descclassname">sage.structure.set_factories.</tt><tt class="descname">ParentWithSetFactory</tt><big>(</big><em>constraints</em>, <em>policy</em>, <em>category=None</em><big>)</big><a class="headerlink" href="#sage.structure.set_factories.ParentWithSetFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="parent.html#sage.structure.parent.Parent" title="sage.structure.parent.Parent"><tt class="xref py py-class docutils literal"><span class="pre">sage.structure.parent.Parent</span></tt></a></p>
<p>Abstract class for parent belonging to a set factory.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">constraints</span></tt> &#8211; a set of constraints</li>
<li><tt class="docutils literal"><span class="pre">policy</span></tt> &#8211; the policy for element construction</li>
<li><tt class="docutils literal"><span class="pre">category</span></tt> &#8211; the category of the parent (default to <tt class="docutils literal"><span class="pre">None</span></tt>)</li>
</ul>
<p>Depending on the constraints and the policy, initialize the parent
in a proper category to set up element construction.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">PairsX_</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">PairsX_</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">XYPairs</span><span class="o">.</span><span class="n">_default_policy</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="ow">is</span> <span class="n">XYPairs</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">P</span><span class="o">.</span><span class="n">category</span><span class="p">()</span>
<span class="go">Category of facade finite enumerated sets</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.structure.set_factories.ParentWithSetFactory.check_element">
<tt class="descname">check_element</tt><big>(</big><em>x</em>, <em>check</em><big>)</big><a class="headerlink" href="#sage.structure.set_factories.ParentWithSetFactory.check_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that <tt class="docutils literal"><span class="pre">x</span></tt> verifies the constraints of <tt class="docutils literal"><span class="pre">self</span></tt>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">x</span></tt> &#8211; an instance of <tt class="docutils literal"><span class="pre">self.element_class</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">check</span></tt> &#8211; the level of checking to be performed (usually a
boolean).</li>
</ul>
<p>This method may assume that <tt class="docutils literal"><span class="pre">x</span></tt> was properly constructed by
<tt class="docutils literal"><span class="pre">self</span></tt> or a possible super-set of <tt class="docutils literal"><span class="pre">self</span></tt> for which
<tt class="docutils literal"><span class="pre">self</span></tt> is a facade. It should return nothing if <tt class="docutils literal"><span class="pre">x</span></tt>
verifies the constraints and raise a
<a class="reference external" href="https://docs.python.org/library/exceptions.html#exceptions.ValueError" title="(in Python v2.7)"><tt class="xref py py-exc docutils literal"><span class="pre">ValueError</span></tt></a> explaining which constraints
<tt class="docutils literal"><span class="pre">x</span></tt> fails otherwise.</p>
<p>The method should accept an extra parameter check specifying
which level of check should be performed. It will only be
called when <tt class="docutils literal"><span class="pre">bool(check)</span></tt> evaluates to <tt class="docutils literal"><span class="pre">True</span></tt>.</p>
<div class="admonition-todo admonition" id="index-2">
<p class="first admonition-title">Todo</p>
<p class="last">Should we always call check element and let it decide
which check has to be performed ?</p>
</div>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span>
<span class="gp">sage: </span><span class="n">S</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">S</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">S</span><span class="o">.</span><span class="n">check_element</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">check_element</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">check_element</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Wrong first coordinate</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">check_element</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Wrong second coordinate</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.structure.set_factories.ParentWithSetFactory.constraints">
<tt class="descname">constraints</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.structure.set_factories.ParentWithSetFactory.constraints" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the constraints defining <tt class="docutils literal"><span class="pre">self</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently there is no specification on how constraints are
passed as arguments.</p>
</div>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">()</span><span class="o">.</span><span class="n">constraints</span><span class="p">()</span>
<span class="go">()</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">constraints</span><span class="p">()</span>
<span class="go">(3, None)</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">constraints</span><span class="p">()</span>
<span class="go">(None, 2)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.structure.set_factories.ParentWithSetFactory.facade_policy">
<tt class="descname">facade_policy</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.structure.set_factories.ParentWithSetFactory.facade_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the policy for parent facade for <tt class="docutils literal"><span class="pre">self</span></tt>.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories</span> <span class="kn">import</span> <span class="n">SelfParentPolicy</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span>
</pre></div>
</div>
<p>We create a custom standard parent <tt class="docutils literal"><span class="pre">P</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">selfpolicy</span> <span class="o">=</span> <span class="n">SelfParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">policy</span><span class="o">=</span><span class="n">selfpolicy</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P</span><span class="o">.</span><span class="n">facade_policy</span><span class="p">()</span>
<span class="go">Set factory policy for facade parent {(2, b) | b in range(5)}</span>
</pre></div>
</div>
<p>Now passing <tt class="docutils literal"><span class="pre">P.facade_policy()</span></tt> creates parent which are facade for
<tt class="docutils literal"><span class="pre">P</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">P3</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">policy</span><span class="o">=</span><span class="n">P</span><span class="o">.</span><span class="n">facade_policy</span><span class="p">())</span>
<span class="gp">sage: </span><span class="n">P3</span><span class="o">.</span><span class="n">facade_for</span><span class="p">()</span> <span class="o">==</span> <span class="p">(</span><span class="n">P</span><span class="p">,)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">P3</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">P</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.structure.set_factories.ParentWithSetFactory.factory">
<tt class="descname">factory</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.structure.set_factories.ParentWithSetFactory.factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the factory which built <tt class="docutils literal"><span class="pre">self</span></tt>.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">()</span><span class="o">.</span><span class="n">factory</span><span class="p">()</span> <span class="ow">is</span> <span class="n">XYPairs</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">factory</span><span class="p">()</span> <span class="ow">is</span> <span class="n">XYPairs</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.structure.set_factories.ParentWithSetFactory.policy">
<tt class="descname">policy</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.structure.set_factories.ParentWithSetFactory.policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the policy used when <tt class="docutils literal"><span class="pre">self</span></tt> was created.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">()</span><span class="o">.</span><span class="n">policy</span><span class="p">()</span>
<span class="go">Set factory policy for &lt;class &#39;sage.structure.set_factories_example.XYPair&#39;&gt; with parent AllPairs[=Factory for XY pairs(())]</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">policy</span><span class="p">()</span>
<span class="go">Set factory policy for &lt;class &#39;sage.structure.set_factories_example.XYPair&#39;&gt; with parent AllPairs[=Factory for XY pairs(())]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.structure.set_factories.ParentWithSetFactory.subset">
<tt class="descname">subset</tt><big>(</big><em>*args</em>, <em>**options</em><big>)</big><a class="headerlink" href="#sage.structure.set_factories.ParentWithSetFactory.subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a subset of <tt class="docutils literal"><span class="pre">self</span></tt> by adding more constraints.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently there is no specification on how constraints are
passed as arguments.</p>
</div>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span>
<span class="gp">sage: </span><span class="n">S</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">S3</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">S3</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[(3, 0), (3, 1), (3, 2), (3, 3), (3, 4)]</span>
</pre></div>
</div>
<p>TESTS:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">S3</span> <span class="ow">is</span> <span class="n">XYPairs</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">S3</span> <span class="ow">is</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.structure.set_factories.SelfParentPolicy">
<em class="property">class </em><tt class="descclassname">sage.structure.set_factories.</tt><tt class="descname">SelfParentPolicy</tt><big>(</big><em>factory</em>, <em>Element</em><big>)</big><a class="headerlink" href="#sage.structure.set_factories.SelfParentPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy" title="sage.structure.set_factories.SetFactoryPolicy"><tt class="xref py py-class docutils literal"><span class="pre">sage.structure.set_factories.SetFactoryPolicy</span></tt></a></p>
<p>Policy where each parent is a standard parent.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">factory</span></tt> &#8211; an instance of <a class="reference internal" href="#sage.structure.set_factories.SetFactory" title="sage.structure.set_factories.SetFactory"><tt class="xref py py-class docutils literal"><span class="pre">SetFactory</span></tt></a></li>
<li><tt class="docutils literal"><span class="pre">Element</span></tt> &#8211; a subclass of <a class="reference internal" href="element.html#sage.structure.element.Element" title="sage.structure.element.Element"><tt class="xref py py-class docutils literal"><span class="pre">Element</span></tt></a></li>
</ul>
<p>Given a factory <tt class="docutils literal"><span class="pre">F</span></tt> and a class <tt class="docutils literal"><span class="pre">E</span></tt>, returns a policy for
parent <tt class="docutils literal"><span class="pre">P</span></tt> creating elements in class <tt class="docutils literal"><span class="pre">E</span></tt> and parent <tt class="docutils literal"><span class="pre">P</span></tt>
itself.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories</span> <span class="kn">import</span> <span class="n">SelfParentPolicy</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span><span class="p">,</span> <span class="n">Pairs_Y</span>
<span class="gp">sage: </span><span class="n">pol</span> <span class="o">=</span> <span class="n">SelfParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">S</span> <span class="o">=</span> <span class="n">Pairs_Y</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">pol</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">S</span>
<span class="go">True</span>

<span class="gp">sage: </span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">XYPair</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">sage: </span><span class="n">pol</span> <span class="o">=</span> <span class="n">SelfParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">Foo</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">S</span> <span class="o">=</span> <span class="n">Pairs_Y</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">pol</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="n">Foo</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.structure.set_factories.SelfParentPolicy.element_constructor_attributes">
<tt class="descname">element_constructor_attributes</tt><big>(</big><em>constraints</em><big>)</big><a class="headerlink" href="#sage.structure.set_factories.SelfParentPolicy.element_constructor_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the element constructor attributes as per
<a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes" title="sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes"><tt class="xref py py-meth docutils literal"><span class="pre">SetFactoryPolicy.element_constructor_attributes()</span></tt></a></p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">constraints</span></tt> &#8211; a bunch of constraints</li>
</ul>
<p>TESTS:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories</span> <span class="kn">import</span> <span class="n">SelfParentPolicy</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span>
<span class="gp">sage: </span><span class="n">pol</span> <span class="o">=</span> <span class="n">SelfParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">pol</span><span class="o">.</span><span class="n">element_constructor_attributes</span><span class="p">(())</span>
<span class="go">{&#39;Element&#39;: &lt;class &#39;sage.structure.set_factories_example.XYPair&#39;&gt;,</span>
<span class="go"> &#39;_parent_for&#39;: &#39;self&#39;}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.structure.set_factories.SetFactory">
<em class="property">class </em><tt class="descclassname">sage.structure.set_factories.</tt><tt class="descname">SetFactory</tt><a class="headerlink" href="#sage.structure.set_factories.SetFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="unique_representation.html#sage.structure.unique_representation.UniqueRepresentation" title="sage.structure.unique_representation.UniqueRepresentation"><tt class="xref py py-class docutils literal"><span class="pre">sage.structure.unique_representation.UniqueRepresentation</span></tt></a>, <a class="reference internal" href="sage_object.html#sage.structure.sage_object.SageObject" title="sage.structure.sage_object.SageObject"><tt class="xref py py-class docutils literal"><span class="pre">sage.structure.sage_object.SageObject</span></tt></a></p>
<p>This class is currently just a stub that we will be using to add
more structures on factories.</p>
<p>TESTS:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories</span> <span class="kn">import</span> <span class="n">SetFactory</span>
<span class="gp">sage: </span><span class="n">S</span> <span class="o">=</span> <span class="n">SetFactory</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">S</span><span class="o">.</span><span class="n">__call__</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">NotImplementedError</span>: <span class="n">&lt;abstract method __call__ at ...&gt;</span>
<span class="gp">sage: </span><span class="n">S</span><span class="o">.</span><span class="n">add_constraints</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">NotImplementedError</span>: <span class="n">&lt;abstract method add_constraints at ...&gt;</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.structure.set_factories.SetFactory.add_constraints">
<tt class="descname">add_constraints</tt><big>(</big><em>cons</em>, <em>*args</em>, <em>**opts</em><big>)</big><a class="headerlink" href="#sage.structure.set_factories.SetFactory.add_constraints" title="Permalink to this definition">¶</a></dt>
<dd><p>Add constraints to the set of constraints <span class="math">\(cons\)</span>.</p>
<p>Should return a set of constraints.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently there is no specification on how constraints are
passed as arguments.</p>
</div>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="o">.</span><span class="n">add_constraints</span><span class="p">((</span><span class="mi">3</span><span class="p">,),((</span><span class="bp">None</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">{}))</span>
<span class="go">(3, 2)</span>

<span class="gp">sage: </span><span class="n">XYPairs</span><span class="o">.</span><span class="n">add_constraints</span><span class="p">((</span><span class="mi">3</span><span class="p">,),((</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="p">{</span><span class="s">&#39;y&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}))</span>
<span class="go">(3, 2)</span>
</pre></div>
</div>
<p>TESTS:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories</span> <span class="kn">import</span> <span class="n">SetFactory</span>
<span class="gp">sage: </span><span class="n">F</span> <span class="o">=</span> <span class="n">SetFactory</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">F</span><span class="o">.</span><span class="n">add_constraints</span><span class="p">(())</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">NotImplementedError</span>: <span class="n">&lt;abstract method add_constraints at 0x...&gt;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.structure.set_factories.SetFactoryPolicy">
<em class="property">class </em><tt class="descclassname">sage.structure.set_factories.</tt><tt class="descname">SetFactoryPolicy</tt><big>(</big><em>factory</em><big>)</big><a class="headerlink" href="#sage.structure.set_factories.SetFactoryPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="unique_representation.html#sage.structure.unique_representation.UniqueRepresentation" title="sage.structure.unique_representation.UniqueRepresentation"><tt class="xref py py-class docutils literal"><span class="pre">sage.structure.unique_representation.UniqueRepresentation</span></tt></a>, <a class="reference internal" href="sage_object.html#sage.structure.sage_object.SageObject" title="sage.structure.sage_object.SageObject"><tt class="xref py py-class docutils literal"><span class="pre">sage.structure.sage_object.SageObject</span></tt></a></p>
<p>Abstract base class for policies.</p>
<p>A policy is a device which is passed to a parent inheriting from
<a class="reference internal" href="#sage.structure.set_factories.ParentWithSetFactory" title="sage.structure.set_factories.ParentWithSetFactory"><tt class="xref py py-class docutils literal"><span class="pre">ParentWithSetFactory</span></tt></a> in order to set-up the element
construction framework.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">factory</span></tt> &#8211; a <a class="reference internal" href="#sage.structure.set_factories.SetFactory" title="sage.structure.set_factories.SetFactory"><tt class="xref py py-class docutils literal"><span class="pre">SetFactory</span></tt></a></li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This class is a base class for policies, one should not try
to create instances.</p>
</div>
<dl class="method">
<dt id="sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes">
<tt class="descname">element_constructor_attributes</tt><big>(</big><em>constraints</em><big>)</big><a class="headerlink" href="#sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Element constructor attributes.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">constraints</span></tt> &#8211; a bunch of constraints</li>
</ul>
<p>Should return the attributes that are prerequisite for element
construction. This is coordinated with
<tt class="xref py py-meth docutils literal"><span class="pre">ParentWithSetFactory._element_constructor_()</span></tt>. Currently two standard
attributes are provided in
<a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy.facade_element_constructor_attributes" title="sage.structure.set_factories.SetFactoryPolicy.facade_element_constructor_attributes"><tt class="xref py py-meth docutils literal"><span class="pre">facade_element_constructor_attributes()</span></tt></a> and
<a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy.self_element_constructor_attributes" title="sage.structure.set_factories.SetFactoryPolicy.self_element_constructor_attributes"><tt class="xref py py-meth docutils literal"><span class="pre">self_element_constructor_attributes()</span></tt></a>. You should return the
one needed depending on the given constraints.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span>
<span class="gp">sage: </span><span class="n">pol</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="o">.</span><span class="n">_default_policy</span>
<span class="gp">sage: </span><span class="n">pol</span><span class="o">.</span><span class="n">element_constructor_attributes</span><span class="p">(())</span>
<span class="go">{&#39;Element&#39;: &lt;class &#39;sage.structure.set_factories_example.XYPair&#39;&gt;,</span>
<span class="go"> &#39;_parent_for&#39;: &#39;self&#39;}</span>
<span class="gp">sage: </span><span class="n">pol</span><span class="o">.</span><span class="n">element_constructor_attributes</span><span class="p">((</span><span class="mi">1</span><span class="p">))</span>
<span class="go">{&#39;_facade_for&#39;: AllPairs,</span>
<span class="go"> &#39;_parent_for&#39;: AllPairs,</span>
<span class="go"> &#39;element_class&#39;: &lt;class &#39;sage.structure.set_factories_example.AllPairs_with_category.element_class&#39;&gt;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.structure.set_factories.SetFactoryPolicy.facade_element_constructor_attributes">
<tt class="descname">facade_element_constructor_attributes</tt><big>(</big><em>parent</em><big>)</big><a class="headerlink" href="#sage.structure.set_factories.SetFactoryPolicy.facade_element_constructor_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Element Constructor Attributes for facade parent.</p>
<p>The list of attributes which must be set during the init of a
facade parent with factory.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">parent</span></tt> &#8211; the actual parent for the elements</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span>
<span class="gp">sage: </span><span class="n">pol</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="o">.</span><span class="n">_default_policy</span>
<span class="gp">sage: </span><span class="n">pol</span><span class="o">.</span><span class="n">facade_element_constructor_attributes</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">())</span>
<span class="go">{&#39;_facade_for&#39;: AllPairs,</span>
<span class="go"> &#39;_parent_for&#39;: AllPairs,</span>
<span class="go"> &#39;element_class&#39;: &lt;class &#39;sage.structure.set_factories_example.AllPairs_with_category.element_class&#39;&gt;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.structure.set_factories.SetFactoryPolicy.factory">
<tt class="descname">factory</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.structure.set_factories.SetFactoryPolicy.factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the factory for <tt class="docutils literal"><span class="pre">self</span></tt>.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories</span> <span class="kn">import</span> <span class="n">SetFactoryPolicy</span><span class="p">,</span> <span class="n">SelfParentPolicy</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="o">.</span><span class="n">_default_policy</span><span class="o">.</span><span class="n">factory</span><span class="p">()</span>
<span class="go">Factory for XY pairs</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="o">.</span><span class="n">_default_policy</span><span class="o">.</span><span class="n">factory</span><span class="p">()</span> <span class="ow">is</span> <span class="n">XYPairs</span>
<span class="go">True</span>
</pre></div>
</div>
<p>TESTS:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">policy</span> <span class="o">=</span> <span class="n">SetFactoryPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">policy</span><span class="o">.</span><span class="n">factory</span><span class="p">()</span>
<span class="go">Factory for XY pairs</span>
<span class="gp">sage: </span><span class="n">SelfParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span><span class="p">)</span><span class="o">.</span><span class="n">factory</span><span class="p">()</span>
<span class="go">Factory for XY pairs</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.structure.set_factories.SetFactoryPolicy.self_element_constructor_attributes">
<tt class="descname">self_element_constructor_attributes</tt><big>(</big><em>Element</em><big>)</big><a class="headerlink" href="#sage.structure.set_factories.SetFactoryPolicy.self_element_constructor_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Element Constructor Attributes for non facade parent.</p>
<p>The list of attributes which must be set during the init of a
non facade parent with factory.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Element</span></tt> &#8211; the class used for the elements</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span>
<span class="gp">sage: </span><span class="n">pol</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="o">.</span><span class="n">_default_policy</span>
<span class="gp">sage: </span><span class="n">pol</span><span class="o">.</span><span class="n">self_element_constructor_attributes</span><span class="p">(</span><span class="n">XYPair</span><span class="p">)</span>
<span class="go">{&#39;Element&#39;: &lt;class &#39;sage.structure.set_factories_example.XYPair&#39;&gt;,</span>
<span class="go"> &#39;_parent_for&#39;: &#39;self&#39;}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.structure.set_factories.TopMostParentPolicy">
<em class="property">class </em><tt class="descclassname">sage.structure.set_factories.</tt><tt class="descname">TopMostParentPolicy</tt><big>(</big><em>factory</em>, <em>top_constraints</em>, <em>Element</em><big>)</big><a class="headerlink" href="#sage.structure.set_factories.TopMostParentPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy" title="sage.structure.set_factories.SetFactoryPolicy"><tt class="xref py py-class docutils literal"><span class="pre">sage.structure.set_factories.SetFactoryPolicy</span></tt></a></p>
<p>Policy where the parent of the elements is the topmost parent.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">factory</span></tt> &#8211; an instance of <a class="reference internal" href="#sage.structure.set_factories.SetFactory" title="sage.structure.set_factories.SetFactory"><tt class="xref py py-class docutils literal"><span class="pre">SetFactory</span></tt></a></li>
<li><tt class="docutils literal"><span class="pre">top_constraints</span></tt> &#8211; the empty set of constraints.</li>
<li><tt class="docutils literal"><span class="pre">Element</span></tt> &#8211; a subclass of <a class="reference internal" href="element.html#sage.structure.element.Element" title="sage.structure.element.Element"><tt class="xref py py-class docutils literal"><span class="pre">Element</span></tt></a></li>
</ul>
<p>Given a factory <tt class="docutils literal"><span class="pre">F</span></tt> and a class <tt class="docutils literal"><span class="pre">E</span></tt>, returns a policy for
parent <tt class="docutils literal"><span class="pre">P</span></tt> creating element in class <tt class="docutils literal"><span class="pre">E</span></tt> and parent
<tt class="docutils literal"><span class="pre">factory(*top_constraints,</span> <span class="pre">policy)</span></tt>.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">();</span> <span class="n">P</span><span class="o">.</span><span class="n">policy</span><span class="p">()</span>
<span class="go">Set factory policy for &lt;class &#39;sage.structure.set_factories_example.XYPair&#39;&gt; with parent AllPairs[=Factory for XY pairs(())]</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.structure.set_factories.TopMostParentPolicy.element_constructor_attributes">
<tt class="descname">element_constructor_attributes</tt><big>(</big><em>constraints</em><big>)</big><a class="headerlink" href="#sage.structure.set_factories.TopMostParentPolicy.element_constructor_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the element constructor attributes as per
<a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes" title="sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes"><tt class="xref py py-meth docutils literal"><span class="pre">SetFactoryPolicy.element_constructor_attributes()</span></tt></a>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">constraints</span></tt> &#8211; a bunch of constraints</li>
</ul>
<p>TESTS:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories</span> <span class="kn">import</span> <span class="n">TopMostParentPolicy</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span>
<span class="gp">sage: </span><span class="n">pol</span> <span class="o">=</span> <span class="n">TopMostParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="p">(),</span> <span class="n">XYPair</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">pol</span><span class="o">.</span><span class="n">element_constructor_attributes</span><span class="p">(())</span>
<span class="go">{&#39;Element&#39;: &lt;class &#39;sage.structure.set_factories_example.XYPair&#39;&gt;,</span>
<span class="go"> &#39;_parent_for&#39;: &#39;self&#39;}</span>
<span class="gp">sage: </span><span class="n">pol</span><span class="o">.</span><span class="n">element_constructor_attributes</span><span class="p">((</span><span class="mi">1</span><span class="p">))</span>
<span class="go">{&#39;_facade_for&#39;: AllPairs,</span>
<span class="go"> &#39;_parent_for&#39;: AllPairs,</span>
<span class="go"> &#39;element_class&#39;: &lt;class &#39;sage.structure.set_factories_example.AllPairs_with_category.element_class&#39;&gt;}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h4>Previous topic</h4>
            <p class="topless"><a href="../sets/real_set.html"
                                  title="previous chapter">Subsets of the Real Line</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="set_factories_example.html"
                                  title="next chapter">An example of set factory</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/sage/structure/set_factories.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../../../search.html" method="get">
                <input type="text" name="q" size="18" />
               <!-- The shading of the "Go" button should be consistent -->
               <!-- with the colour of the header and footer. See the file -->
               <!-- doc/common/themes/sage/theme.conf for colours used by -->
               <!-- the Sage theme. -->
                <input type="submit" style="background-color: #B8B9F6" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="set_factories_example.html" title="An example of set factory"
             >next</a> |</li>
        <li class="right" >
          <a href="../sets/real_set.html" title="Subsets of the Real Line"
             >previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="../../index.html">Basic Structures</a> &raquo;</li>
 
      </ul>
    </div>
    
    <div class="footer">
        &copy; Copyright 2005--2015, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
  </body>
</html>