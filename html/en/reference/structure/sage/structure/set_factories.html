
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=600, initial-scale=1">
    <title>Set factories &#8212; Parents and Elements</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sage.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/thebelab.css" />
    
    <script data-url_root="../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    <script async="async" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="An example of set factory" href="set_factories_example.html" />
    <link rel="prev" title="Finite Homogeneous Sequences" href="sequence.html" />
  <link rel="icon" href="../../../_static/sageicon.png" type="image/x-icon" />
  <!-- <script src="../../../_static/thebe.js" type="text/javascript"></script> -->
  <!-- <script src="../../../_static/thebe-sage.js" type="text/javascript"></script> -->

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="set_factories_example.html" title="An example of set factory"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="sequence.html" title="Finite Homogeneous Sequences"
             accesskey="P">previous</a> |</li>
  <li class="nav-item nav-item-0">
    <a href="http://www.sagemath.org"><img src="../../../_static/logo_sagemath_black.svg" class="sage-logo" title="Sage Logo"></a>
    
      <a href="../../../../index.html">Sage 9.6 Documentation</a> &#187;
      
      <a href="../../../index.html">Reference Manual</a> &#187;
      
      <a href="../../index.html">Parents and Elements</a> &#187;
    
  </li>

        <li class="nav-item nav-item-this"><a href="">Set factories</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="set-factories">
<span id="sage-structure-set-factories"></span><h1>Set factories<a class="headerlink" href="#set-factories" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-sage.structure.set_factories"></span><hr class="docutils" />
<p>A <em>set factory</em> <span class="math notranslate nohighlight">\(F\)</span> is a device for constructing some <a class="reference internal" href="parent.html#sage.structure.parent.Parent" title="sage.structure.parent.Parent"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parent</span></code></a>
<span class="math notranslate nohighlight">\(P\)</span> that models subsets of a big set <span class="math notranslate nohighlight">\(S\)</span>. Typically, each such parent
is constructed as the subset of <span class="math notranslate nohighlight">\(S\)</span> of all elements satisfying a
certain collection of constraints <span class="math notranslate nohighlight">\(cons\)</span>. In such a hierarchy of
subsets, one needs an easy and flexible control on how elements are
constructed. For example, one may want to construct the elements of
<span class="math notranslate nohighlight">\(P\)</span> in some subclass of the class of the elements of <span class="math notranslate nohighlight">\(S\)</span>. On other
occasions, one also often needs <span class="math notranslate nohighlight">\(P\)</span> to be a facade parent, whose
elements are represented as elements of <span class="math notranslate nohighlight">\(S\)</span> (see
<a class="reference external" href="../../../categories/sage/categories/facade_sets.html#sage.categories.facade_sets.FacadeSets" title="(in Category Framework v9.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">FacadeSets</span></code></a>).</p>
<p>The role of a set factory is twofold:</p>
<ul class="simple">
<li><p><em>Manage a database</em> of constructors for the different parents <span class="math notranslate nohighlight">\(P = F(cons)\)</span>
depending on the various kinds of constraints <span class="math notranslate nohighlight">\(cons\)</span>. Note: currently there
is no real support for that. We are gathering use cases before fixing the
interface.</p></li>
<li><p>Ensure that the elements <span class="math notranslate nohighlight">\(e = P(...)\)</span> created by the different parents
follows a consistent policy concerning their <em>class and parent</em>.</p></li>
</ul>
<p class="rubric">Basic usage: constructing parents through a factory</p>
<p>The file <a class="reference internal" href="set_factories_example.html#module-sage.structure.set_factories_example" title="sage.structure.set_factories_example"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sage.structure.set_factories_example</span></code></a> shows an example of a
<a class="reference internal" href="#sage.structure.set_factories.SetFactory" title="sage.structure.set_factories.SetFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">SetFactory</span></code></a> together with typical implementation. Note that the
written code is intentionally kept minimal, many things and in particular
several iterators could be written in a more efficient way.</p>
<p>Consider the set <span class="math notranslate nohighlight">\(S\)</span> of couples <span class="math notranslate nohighlight">\((x,y)\)</span> with <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span> in <span class="math notranslate nohighlight">\(I:=\{0,1,2,3,4\}\)</span>.
We represent an element of <span class="math notranslate nohighlight">\(S\)</span> as a 2-elements tuple, wrapped in a class
<a class="reference internal" href="set_factories_example.html#sage.structure.set_factories_example.XYPair" title="sage.structure.set_factories_example.XYPair"><code class="xref py py-class docutils literal notranslate"><span class="pre">XYPair</span></code></a> deriving from <a class="reference internal" href="element_wrapper.html#sage.structure.element_wrapper.ElementWrapper" title="sage.structure.element_wrapper.ElementWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">ElementWrapper</span></code></a>.
You can create a <a class="reference internal" href="set_factories_example.html#sage.structure.set_factories_example.XYPair" title="sage.structure.set_factories_example.XYPair"><code class="xref py py-class docutils literal notranslate"><span class="pre">XYPair</span></code></a> with any
<a class="reference internal" href="parent.html#sage.structure.parent.Parent" title="sage.structure.parent.Parent"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parent</span></code></a>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">sage: </span><span class="n">p</span> <span class="o">=</span> <span class="n">XYPair</span><span class="p">(</span><span class="n">Parent</span><span class="p">(),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">));</span> <span class="n">p</span>
<span class="go">(0, 1)</span>
</pre></div>
</div>
<p>Now, given <span class="math notranslate nohighlight">\((a, b)\in S\)</span> we want to consider the following subsets of
<span class="math notranslate nohighlight">\(S\)</span></p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}S_a := \{(x,y) \in S \mid x = a\},\\S^b := \{(x,y) \in S \mid y = b\},\\S_a^b := \{(x,y) \in S \mid x = a, y = b\}.\end{aligned}\end{align} \]</div>
<p>The constraints considered here are admittedly trivial. In a realistic
example, there would be much more of them. And for some sets of constraints
no good enumeration algorithms would be known.</p>
<p>In Sage, those sets are constructed by passing the constraints to the
factory. We first create the set with no constraints at all:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">XYPairs</span>
<span class="go">Factory for XY pairs</span>
<span class="gp">sage: </span><span class="n">S</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">();</span> <span class="n">S</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[(0, 0), (1, 0), ..., (4, 0), (0, 1), (1, 1), ..., (3, 4), (4, 4)]</span>
<span class="gp">sage: </span><span class="n">S</span><span class="o">.</span><span class="n">cardinality</span><span class="p">()</span>
<span class="go">25</span>
</pre></div>
</div>
<p>Let us construct <span class="math notranslate nohighlight">\(S_2\)</span>, <span class="math notranslate nohighlight">\(S^3\)</span> and <span class="math notranslate nohighlight">\(S_2^3\)</span>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">Sx2</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">);</span> <span class="n">Sx2</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[(2, 0), (2, 1), (2, 2), (2, 3), (2, 4)]</span>
<span class="gp">sage: </span><span class="n">Sy3</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">);</span> <span class="n">Sy3</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[(0, 3), (1, 3), (2, 3), (3, 3), (4, 3)]</span>
<span class="gp">sage: </span><span class="n">S23</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">);</span> <span class="n">S23</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[(2, 3)]</span>
</pre></div>
</div>
<p>Set factories provide an alternative way to build subsets of an
already constructed set: each set constructed by a factory has a
method <a class="reference internal" href="#sage.structure.set_factories.ParentWithSetFactory.subset" title="sage.structure.set_factories.ParentWithSetFactory.subset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subset()</span></code></a> which accept new
constraints. Sets constructed by the factory or the
<a class="reference internal" href="#sage.structure.set_factories.ParentWithSetFactory.subset" title="sage.structure.set_factories.ParentWithSetFactory.subset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subset()</span></code></a> methods are identical:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">Sx2s</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">);</span> <span class="n">Sx2</span> <span class="ow">is</span> <span class="n">Sx2s</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">Sx2</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="ow">is</span> <span class="n">S23</span>
<span class="go">True</span>
</pre></div>
</div>
<p>It is not possible to change an already given constraint:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">S23</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: Duplicate value for constraints &#39;y&#39;: was 3 now 5</span>
</pre></div>
</div>
<p class="rubric">Constructing custom elements: policies</p>
<p>We now come to the point of factories: constructing custom elements. The
writer of <code class="xref py py-func docutils literal notranslate"><span class="pre">XYPairs()</span></code> decided that, by default,
the parents <code class="docutils literal notranslate"><span class="pre">Sx2</span></code>, <code class="docutils literal notranslate"><span class="pre">Sy3</span></code> and <code class="docutils literal notranslate"><span class="pre">S23</span></code> are facade for parent <code class="docutils literal notranslate"><span class="pre">S</span></code>. This
means that each element constructed by those subsets behaves as if they where
directly constructed by <code class="docutils literal notranslate"><span class="pre">S</span></code> itself:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">Sx2</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span>
<span class="go">AllPairs</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">Sx2</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">S</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">is</span> <span class="n">S</span><span class="o">.</span><span class="n">element_class</span>
<span class="go">True</span>
</pre></div>
</div>
<p>This is not always desirable. The device which decides how to construct an
element is called a <em>policy</em> (see <a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy" title="sage.structure.set_factories.SetFactoryPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">SetFactoryPolicy</span></code></a>). Each factory
should have a default policy. Here is the policy of
<code class="xref py py-func docutils literal notranslate"><span class="pre">XYPairs()</span></code>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">XYPairs</span><span class="o">.</span><span class="n">_default_policy</span>
<span class="go">Set factory policy for &lt;class &#39;sage.structure.set_factories_example.XYPair&#39;&gt; with parent AllPairs[=Factory for XY pairs(())]</span>
</pre></div>
</div>
<p>This means that with the current policy, the parent builds elements with class
<code class="docutils literal notranslate"><span class="pre">XYPair</span></code> and parent <code class="docutils literal notranslate"><span class="pre">AllPairs</span></code> which is itself constructed by calling the
factory <code class="xref py py-func docutils literal notranslate"><span class="pre">XYPairs()</span></code> with constraints <code class="docutils literal notranslate"><span class="pre">()</span></code>. There
is a lot of flexibility to change that. We now illustrate how to make a few
different choices.</p>
<p>1 - In a first use case, we want to add some methods to the constructed
elements. As illustration, we add here a new method <code class="docutils literal notranslate"><span class="pre">sum</span></code> which returns
<span class="math notranslate nohighlight">\(x+y\)</span>. We therefore create a new class for the elements which inherits from
<a class="reference internal" href="set_factories_example.html#sage.structure.set_factories_example.XYPair" title="sage.structure.set_factories_example.XYPair"><code class="xref py py-class docutils literal notranslate"><span class="pre">XYPair</span></code></a>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">class</span> <span class="nc">NewXYPair</span><span class="p">(</span><span class="n">XYPair</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="nf">sum</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<p>Here is an instance of this class (with a dummy parent):</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">NewXYPair</span><span class="p">(</span><span class="n">Parent</span><span class="p">(),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">5</span>
</pre></div>
</div>
<p>We now want to have subsets generating those new elements while still having a
single real parent (the one with no constraint) for each element. The
corresponding policy is called <a class="reference internal" href="#sage.structure.set_factories.TopMostParentPolicy" title="sage.structure.set_factories.TopMostParentPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">TopMostParentPolicy</span></code></a>. It takes three
parameters:</p>
<ul class="simple">
<li><p>the factory;</p></li>
<li><p>the parameters for void constraint;</p></li>
<li><p>the class used for elements.</p></li>
</ul>
<p>Calling the factory with this policy returns a new set which builds its
elements with the new policy:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">new_policy</span> <span class="o">=</span> <span class="n">TopMostParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="p">(),</span> <span class="n">NewXYPair</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">NewS</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">policy</span><span class="o">=</span><span class="n">new_policy</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">NewS</span><span class="o">.</span><span class="n">an_element</span><span class="p">();</span> <span class="n">el</span>
<span class="go">(0, 0)</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">NewS</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="n">NewXYPair</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Newly constructed subsets inherit the policy:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">NewS2</span> <span class="o">=</span> <span class="n">NewS</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el2</span> <span class="o">=</span> <span class="n">NewS2</span><span class="o">.</span><span class="n">an_element</span><span class="p">();</span> <span class="n">el2</span>
<span class="go">(2, 0)</span>
<span class="gp">sage: </span><span class="n">el2</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">2</span>
<span class="gp">sage: </span><span class="n">el2</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">NewS</span>
<span class="go">True</span>
</pre></div>
</div>
<p>2 - In a second use case, we want the elements to remember which
parent created them. The corresponding policy is called
<a class="reference internal" href="#sage.structure.set_factories.SelfParentPolicy" title="sage.structure.set_factories.SelfParentPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelfParentPolicy</span></code></a>. It takes only two parameters:</p>
<ul class="simple">
<li><p>the factory;</p></li>
<li><p>the class used for elements.</p></li>
</ul>
<p>Here is an example:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">selfpolicy</span> <span class="o">=</span> <span class="n">SelfParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">NewXYPair</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">SelfS</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">policy</span><span class="o">=</span><span class="n">selfpolicy</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">SelfS</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">SelfS</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Now all subsets are the parent of the elements that they create:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">SelfS2</span> <span class="o">=</span> <span class="n">SelfS</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el2</span> <span class="o">=</span> <span class="n">SelfS2</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">el2</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">NewS</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">el2</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">SelfS2</span>
<span class="go">True</span>
</pre></div>
</div>
<p>3 - Finally, a common use case is to construct simple python object which are
not Sage <code class="xref py py-class docutils literal notranslate"><span class="pre">sage.structure.Element</span></code>. As an example, we show how to build
a parent <code class="docutils literal notranslate"><span class="pre">TupleS</span></code> which construct pairs as tuple. The corresponding policy
is called <a class="reference internal" href="#sage.structure.set_factories.BareFunctionPolicy" title="sage.structure.set_factories.BareFunctionPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">BareFunctionPolicy</span></code></a>. It takes two parameters:</p>
<ul class="simple">
<li><p>the factory;</p></li>
<li><p>the function called to construct the elements.</p></li>
</ul>
<p>Here is how to do it:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">cons</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">t</span><span class="p">,</span> <span class="n">check</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="c1"># ignore the check parameter</span>
<span class="gp">sage: </span><span class="n">tuplepolicy</span> <span class="o">=</span> <span class="n">BareFunctionPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">policy</span><span class="o">=</span><span class="n">tuplepolicy</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[(2, 0), (2, 1), (2, 2), (2, 3), (2, 4)]</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
<span class="go">&lt;... &#39;tuple&#39;&gt;</span>
</pre></div>
</div>
<p>Here are the currently implemented policies:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#sage.structure.set_factories.FacadeParentPolicy" title="sage.structure.set_factories.FacadeParentPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">FacadeParentPolicy</span></code></a>: reuse an existing parent together with
its element_class</p></li>
<li><p><a class="reference internal" href="#sage.structure.set_factories.TopMostParentPolicy" title="sage.structure.set_factories.TopMostParentPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">TopMostParentPolicy</span></code></a>: use a parent created by the factory
itself and provide a class <code class="docutils literal notranslate"><span class="pre">Element</span></code> for it. In this case, we need
to specify the set of constraints which build this parent taking the
ownership of all elements and the class which will be used for the
<code class="docutils literal notranslate"><span class="pre">Element</span></code>.</p></li>
<li><p><a class="reference internal" href="#sage.structure.set_factories.SelfParentPolicy" title="sage.structure.set_factories.SelfParentPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelfParentPolicy</span></code></a>: provide systematically <code class="docutils literal notranslate"><span class="pre">Element</span></code> and
element_class and ensure that the parent is <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p></li>
<li><p><a class="reference internal" href="#sage.structure.set_factories.BareFunctionPolicy" title="sage.structure.set_factories.BareFunctionPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">BareFunctionPolicy</span></code></a>: instead of calling a class constructor element
are passed to a function provided to the policy.</p></li>
</ul>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>Generalize <a class="reference internal" href="#sage.structure.set_factories.TopMostParentPolicy" title="sage.structure.set_factories.TopMostParentPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">TopMostParentPolicy</span></code></a> to be able to have several
topmost parents.</p>
</div>
<p class="rubric">Technicalities: how policies inform parents</p>
<p>Parents built from factories should inherit from
<a class="reference internal" href="#sage.structure.set_factories.ParentWithSetFactory" title="sage.structure.set_factories.ParentWithSetFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParentWithSetFactory</span></code></a>. This class provide a few methods
related to factories and policies. The <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method of
<a class="reference internal" href="#sage.structure.set_factories.ParentWithSetFactory" title="sage.structure.set_factories.ParentWithSetFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParentWithSetFactory</span></code></a> must be provided with the set of
constraints and the policy. A parent built from a factory must create
elements through a call to the method <code class="docutils literal notranslate"><span class="pre">_element_constructor_</span></code>. The
current way in which policies inform parents how to builds their elements is
set by a few attributes. So the class must accept attribute
adding. The precise details of which attributes are set may be subject
to change in the future.</p>
<p class="rubric">How to write a set factory</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="set_factories_example.html#module-sage.structure.set_factories_example" title="sage.structure.set_factories_example"><code class="xref py py-mod docutils literal notranslate"><span class="pre">set_factories_example</span></code></a> for an example of a factory.</p>
</div>
<p>Here are the specifications:</p>
<p>A parent built from a factory should</p>
<ul class="simple">
<li><p><em>inherit</em> from <a class="reference internal" href="#sage.structure.set_factories.ParentWithSetFactory" title="sage.structure.set_factories.ParentWithSetFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParentWithSetFactory</span></code></a>. It should accept a
<code class="docutils literal notranslate"><span class="pre">policy</span></code> argument and pass it verbatim to the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method
of <a class="reference internal" href="#sage.structure.set_factories.ParentWithSetFactory" title="sage.structure.set_factories.ParentWithSetFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParentWithSetFactory</span></code></a> together with the set of
constraints;</p></li>
<li><p><em>create its elements</em> through calls to the method
<code class="docutils literal notranslate"><span class="pre">_element_constructor_</span></code>;</p></li>
<li><p><em>define a method</em> <a class="reference internal" href="#sage.structure.set_factories.ParentWithSetFactory.check_element" title="sage.structure.set_factories.ParentWithSetFactory.check_element"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParentWithSetFactory.check_element</span></code></a> which
checks if a built element indeed belongs to it. The method should
accept an extra keyword parameter called <code class="docutils literal notranslate"><span class="pre">check</span></code> specifying which
level of check should be performed. It will only be called when
<code class="docutils literal notranslate"><span class="pre">bool(check)</span></code> evaluates to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
<p>The constructor of the elements of a parent from a factory should:</p>
<ul class="simple">
<li><p>receive the parent as first mandatory argument;</p></li>
<li><p>accept an extra optional keyword parameter called <code class="docutils literal notranslate"><span class="pre">check</span></code> which is meant
to tell if the input must be checked or not. The precise meaning of
<code class="docutils literal notranslate"><span class="pre">check</span></code> is intentionally left vague. The only intent is that if
<code class="docutils literal notranslate"><span class="pre">bool(check)</span></code> evaluates to <code class="docutils literal notranslate"><span class="pre">False</span></code>, no check is performed at all.</p></li>
</ul>
<p>A factory should</p>
<ul class="simple">
<li><p><em>define a method</em> <code class="docutils literal notranslate"><span class="pre">__call__</span></code> which is responsible for calling the
appropriate parent constructor given the constraints;</p></li>
<li><p><em>define a method</em> overloading <a class="reference internal" href="#sage.structure.set_factories.SetFactory.add_constraints" title="sage.structure.set_factories.SetFactory.add_constraints"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SetFactory.add_constraints()</span></code></a> which is
responsible of computing the union of two sets of constraints;</p></li>
<li><p><em>optionally</em> define a method or an attribute <code class="docutils literal notranslate"><span class="pre">_default_policy</span></code> passed to
the <a class="reference internal" href="#sage.structure.set_factories.ParentWithSetFactory" title="sage.structure.set_factories.ParentWithSetFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParentWithSetFactory</span></code></a> if no policy is given to the factory.</p></li>
</ul>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>There is currently no support for dealing with sets of
constraints. The set factory and the parents must cooperate to
consistently handle them. More support, together with a generic mechanism
to select the appropriate parent class from the constraints, will be added
as soon as we have gathered sufficiently enough use-cases.</p>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li><p>Florent Hivert (2011-2012): initial revision</p></li>
</ul>
<dl class="py class">
<dt class="sig sig-object py" id="sage.structure.set_factories.BareFunctionPolicy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.structure.set_factories.</span></span><span class="sig-name descname"><span class="pre">BareFunctionPolicy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">factory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constructor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.BareFunctionPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy" title="sage.structure.set_factories.SetFactoryPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.structure.set_factories.SetFactoryPolicy</span></code></a></p>
<p>Policy where element are constructed using a bare function.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">factory</span></code> – an instance of <a class="reference internal" href="#sage.structure.set_factories.SetFactory" title="sage.structure.set_factories.SetFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">SetFactory</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">constructor</span></code> – a function</p></li>
</ul>
<p>Given a factory <code class="docutils literal notranslate"><span class="pre">F</span></code> and a function <code class="docutils literal notranslate"><span class="pre">c</span></code>, returns a policy for
parent <code class="docutils literal notranslate"><span class="pre">P</span></code> creating element using the function <code class="docutils literal notranslate"><span class="pre">f</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories</span> <span class="kn">import</span> <span class="n">BareFunctionPolicy</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span>
<span class="gp">sage: </span><span class="n">cons</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">t</span><span class="p">,</span> <span class="n">check</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="c1"># ignore the check parameter</span>
<span class="gp">sage: </span><span class="n">tuplepolicy</span> <span class="o">=</span> <span class="n">BareFunctionPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">cons</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">policy</span><span class="o">=</span><span class="n">tuplepolicy</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
<span class="go">&lt;... &#39;tuple&#39;&gt;</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.set_factories.BareFunctionPolicy.element_constructor_attributes">
<span class="sig-name descname"><span class="pre">element_constructor_attributes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraints</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.BareFunctionPolicy.element_constructor_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the element constructor attributes as per
<a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes" title="sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SetFactoryPolicy.element_constructor_attributes()</span></code></a>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">constraints</span></code> – a bunch of constraints</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.structure.set_factories.FacadeParentPolicy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.structure.set_factories.</span></span><span class="sig-name descname"><span class="pre">FacadeParentPolicy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">factory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.FacadeParentPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy" title="sage.structure.set_factories.SetFactoryPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.structure.set_factories.SetFactoryPolicy</span></code></a></p>
<p>Policy for facade parent.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">factory</span></code> – an instance of <a class="reference internal" href="#sage.structure.set_factories.SetFactory" title="sage.structure.set_factories.SetFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">SetFactory</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parent</span></code> – an instance of <a class="reference internal" href="parent.html#sage.structure.parent.Parent" title="sage.structure.parent.Parent"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parent</span></code></a></p></li>
</ul>
<p>Given a factory <code class="docutils literal notranslate"><span class="pre">F</span></code> and a class <code class="docutils literal notranslate"><span class="pre">E</span></code>, returns a policy for
parent <code class="docutils literal notranslate"><span class="pre">P</span></code> creating elements as if they were created by
<code class="docutils literal notranslate"><span class="pre">parent</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories</span> <span class="kn">import</span> <span class="n">SelfParentPolicy</span><span class="p">,</span> <span class="n">FacadeParentPolicy</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span>
</pre></div>
</div>
<p>We create a custom standard parent <code class="docutils literal notranslate"><span class="pre">P</span></code>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">selfpolicy</span> <span class="o">=</span> <span class="n">SelfParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">policy</span><span class="o">=</span><span class="n">selfpolicy</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">pol</span> <span class="o">=</span> <span class="n">FacadeParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P2</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">policy</span><span class="o">=</span><span class="n">pol</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">P2</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">P</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">is</span> <span class="n">P</span><span class="o">.</span><span class="n">element_class</span>
<span class="go">True</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">parent</span></code> is itself a facade parent, then transitivity is
correctly applied:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span>  <span class="n">XYPairs</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">P2</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P2</span><span class="o">.</span><span class="n">category</span><span class="p">()</span>
<span class="go">Category of facade finite enumerated sets</span>
<span class="gp">sage: </span><span class="n">pol</span> <span class="o">=</span> <span class="n">FacadeParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P23</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">policy</span><span class="o">=</span><span class="n">pol</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">P2</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">P</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">is</span> <span class="n">P</span><span class="o">.</span><span class="n">element_class</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.set_factories.FacadeParentPolicy.element_constructor_attributes">
<span class="sig-name descname"><span class="pre">element_constructor_attributes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraints</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.FacadeParentPolicy.element_constructor_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the element constructor attributes as per
<a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes" title="sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SetFactoryPolicy.element_constructor_attributes()</span></code></a>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">constraints</span></code> – a bunch of constraints</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.structure.set_factories.ParentWithSetFactory">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.structure.set_factories.</span></span><span class="sig-name descname"><span class="pre">ParentWithSetFactory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">category</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.ParentWithSetFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="parent.html#sage.structure.parent.Parent" title="sage.structure.parent.Parent"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.structure.parent.Parent</span></code></a></p>
<p>Abstract class for parent belonging to a set factory.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">constraints</span></code> – a set of constraints</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">policy</span></code> – the policy for element construction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">category</span></code> – the category of the parent (default to <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
</ul>
<p>Depending on the constraints and the policy, initialize the parent
in a proper category to set up element construction.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">PairsX_</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">PairsX_</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">XYPairs</span><span class="o">.</span><span class="n">_default_policy</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="ow">is</span> <span class="n">XYPairs</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">P</span><span class="o">.</span><span class="n">category</span><span class="p">()</span>
<span class="go">Category of facade finite enumerated sets</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.set_factories.ParentWithSetFactory.check_element">
<span class="sig-name descname"><span class="pre">check_element</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.ParentWithSetFactory.check_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that <code class="docutils literal notranslate"><span class="pre">x</span></code> verifies the constraints of <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">x</span></code> – an instance of <code class="docutils literal notranslate"><span class="pre">self.element_class</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">check</span></code> – the level of checking to be performed (usually a
boolean).</p></li>
</ul>
<p>This method may assume that <code class="docutils literal notranslate"><span class="pre">x</span></code> was properly constructed by
<code class="docutils literal notranslate"><span class="pre">self</span></code> or a possible super-set of <code class="docutils literal notranslate"><span class="pre">self</span></code> for which
<code class="docutils literal notranslate"><span class="pre">self</span></code> is a facade. It should return nothing if <code class="docutils literal notranslate"><span class="pre">x</span></code>
verifies the constraints and raise a
<code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code> explaining which constraints
<code class="docutils literal notranslate"><span class="pre">x</span></code> fails otherwise.</p>
<p>The method should accept an extra parameter check specifying
which level of check should be performed. It will only be
called when <code class="docutils literal notranslate"><span class="pre">bool(check)</span></code> evaluates to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<p>Should we always call check element and let it decide
which check has to be performed ?</p>
</div>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span>
<span class="gp">sage: </span><span class="n">S</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">S</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">S</span><span class="o">.</span><span class="n">check_element</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">check_element</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">check_element</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: Wrong first coordinate</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">check_element</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: Wrong second coordinate</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.set_factories.ParentWithSetFactory.constraints">
<span class="sig-name descname"><span class="pre">constraints</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.ParentWithSetFactory.constraints" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the constraints defining <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently there is no specification on how constraints are
passed as arguments.</p>
</div>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">()</span><span class="o">.</span><span class="n">constraints</span><span class="p">()</span>
<span class="go">()</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">constraints</span><span class="p">()</span>
<span class="go">(3, None)</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">constraints</span><span class="p">()</span>
<span class="go">(None, 2)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.set_factories.ParentWithSetFactory.facade_policy">
<span class="sig-name descname"><span class="pre">facade_policy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.ParentWithSetFactory.facade_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the policy for parent facade for <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories</span> <span class="kn">import</span> <span class="n">SelfParentPolicy</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span>
</pre></div>
</div>
<p>We create a custom standard parent <code class="docutils literal notranslate"><span class="pre">P</span></code>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">selfpolicy</span> <span class="o">=</span> <span class="n">SelfParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">policy</span><span class="o">=</span><span class="n">selfpolicy</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">P</span><span class="o">.</span><span class="n">facade_policy</span><span class="p">()</span>
<span class="go">Set factory policy for facade parent {(2, b) | b in range(5)}</span>
</pre></div>
</div>
<p>Now passing <code class="docutils literal notranslate"><span class="pre">P.facade_policy()</span></code> creates parent which are facade for
<code class="docutils literal notranslate"><span class="pre">P</span></code>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">P3</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">policy</span><span class="o">=</span><span class="n">P</span><span class="o">.</span><span class="n">facade_policy</span><span class="p">())</span>
<span class="gp">sage: </span><span class="n">P3</span><span class="o">.</span><span class="n">facade_for</span><span class="p">()</span> <span class="o">==</span> <span class="p">(</span><span class="n">P</span><span class="p">,)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">P3</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">P</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.set_factories.ParentWithSetFactory.factory">
<span class="sig-name descname"><span class="pre">factory</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.ParentWithSetFactory.factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the factory which built <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">()</span><span class="o">.</span><span class="n">factory</span><span class="p">()</span> <span class="ow">is</span> <span class="n">XYPairs</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">factory</span><span class="p">()</span> <span class="ow">is</span> <span class="n">XYPairs</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.set_factories.ParentWithSetFactory.policy">
<span class="sig-name descname"><span class="pre">policy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.ParentWithSetFactory.policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the policy used when <code class="docutils literal notranslate"><span class="pre">self</span></code> was created.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">()</span><span class="o">.</span><span class="n">policy</span><span class="p">()</span>
<span class="go">Set factory policy for &lt;class &#39;sage.structure.set_factories_example.XYPair&#39;&gt; with parent AllPairs[=Factory for XY pairs(())]</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">policy</span><span class="p">()</span>
<span class="go">Set factory policy for &lt;class &#39;sage.structure.set_factories_example.XYPair&#39;&gt; with parent AllPairs[=Factory for XY pairs(())]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.set_factories.ParentWithSetFactory.subset">
<span class="sig-name descname"><span class="pre">subset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.ParentWithSetFactory.subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a subset of <code class="docutils literal notranslate"><span class="pre">self</span></code> by adding more constraints.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently there is no specification on how constraints are
passed as arguments.</p>
</div>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span>
<span class="gp">sage: </span><span class="n">S</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">S3</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">S3</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[(3, 0), (3, 1), (3, 2), (3, 3), (3, 4)]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.structure.set_factories.SelfParentPolicy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.structure.set_factories.</span></span><span class="sig-name descname"><span class="pre">SelfParentPolicy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">factory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Element</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.SelfParentPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy" title="sage.structure.set_factories.SetFactoryPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.structure.set_factories.SetFactoryPolicy</span></code></a></p>
<p>Policy where each parent is a standard parent.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">factory</span></code> – an instance of <a class="reference internal" href="#sage.structure.set_factories.SetFactory" title="sage.structure.set_factories.SetFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">SetFactory</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Element</span></code> – a subclass of <a class="reference internal" href="element.html#sage.structure.element.Element" title="sage.structure.element.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a></p></li>
</ul>
<p>Given a factory <code class="docutils literal notranslate"><span class="pre">F</span></code> and a class <code class="docutils literal notranslate"><span class="pre">E</span></code>, returns a policy for
parent <code class="docutils literal notranslate"><span class="pre">P</span></code> creating elements in class <code class="docutils literal notranslate"><span class="pre">E</span></code> and parent <code class="docutils literal notranslate"><span class="pre">P</span></code>
itself.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories</span> <span class="kn">import</span> <span class="n">SelfParentPolicy</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span><span class="p">,</span> <span class="n">Pairs_Y</span>
<span class="gp">sage: </span><span class="n">pol</span> <span class="o">=</span> <span class="n">SelfParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">S</span> <span class="o">=</span> <span class="n">Pairs_Y</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">pol</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">S</span>
<span class="go">True</span>

<span class="gp">sage: </span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">XYPair</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">sage: </span><span class="n">pol</span> <span class="o">=</span> <span class="n">SelfParentPolicy</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">,</span> <span class="n">Foo</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">S</span> <span class="o">=</span> <span class="n">Pairs_Y</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">pol</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="gp">sage: </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="n">Foo</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.set_factories.SelfParentPolicy.element_constructor_attributes">
<span class="sig-name descname"><span class="pre">element_constructor_attributes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraints</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.SelfParentPolicy.element_constructor_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the element constructor attributes as per
<a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes" title="sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SetFactoryPolicy.element_constructor_attributes()</span></code></a></p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">constraints</span></code> – a bunch of constraints</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.structure.set_factories.SetFactory">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.structure.set_factories.</span></span><span class="sig-name descname"><span class="pre">SetFactory</span></span><a class="headerlink" href="#sage.structure.set_factories.SetFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="unique_representation.html#sage.structure.unique_representation.UniqueRepresentation" title="sage.structure.unique_representation.UniqueRepresentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.structure.unique_representation.UniqueRepresentation</span></code></a>, <a class="reference internal" href="sage_object.html#sage.structure.sage_object.SageObject" title="sage.structure.sage_object.SageObject"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.structure.sage_object.SageObject</span></code></a></p>
<p>This class is currently just a stub that we will be using to add
more structures on factories.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.set_factories.SetFactory.add_constraints">
<span class="sig-name descname"><span class="pre">add_constraints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cons</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">opts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.SetFactory.add_constraints" title="Permalink to this definition">¶</a></dt>
<dd><p>Add constraints to the set of constraints <span class="math notranslate nohighlight">\(cons\)</span>.</p>
<p>Should return a set of constraints.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently there is no specification on how constraints are
passed as arguments.</p>
</div>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="o">.</span><span class="n">add_constraints</span><span class="p">((</span><span class="mi">3</span><span class="p">,),((</span><span class="kc">None</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">{}))</span>
<span class="go">(3, 2)</span>

<span class="gp">sage: </span><span class="n">XYPairs</span><span class="o">.</span><span class="n">add_constraints</span><span class="p">((</span><span class="mi">3</span><span class="p">,),((</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="p">{</span><span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}))</span>
<span class="go">(3, 2)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.structure.set_factories.SetFactoryPolicy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.structure.set_factories.</span></span><span class="sig-name descname"><span class="pre">SetFactoryPolicy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">factory</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.SetFactoryPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="unique_representation.html#sage.structure.unique_representation.UniqueRepresentation" title="sage.structure.unique_representation.UniqueRepresentation"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.structure.unique_representation.UniqueRepresentation</span></code></a>, <a class="reference internal" href="sage_object.html#sage.structure.sage_object.SageObject" title="sage.structure.sage_object.SageObject"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.structure.sage_object.SageObject</span></code></a></p>
<p>Abstract base class for policies.</p>
<p>A policy is a device which is passed to a parent inheriting from
<a class="reference internal" href="#sage.structure.set_factories.ParentWithSetFactory" title="sage.structure.set_factories.ParentWithSetFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParentWithSetFactory</span></code></a> in order to set-up the element
construction framework.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">factory</span></code> – a <a class="reference internal" href="#sage.structure.set_factories.SetFactory" title="sage.structure.set_factories.SetFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">SetFactory</span></code></a></p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This class is a base class for policies, one should not try
to create instances.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes">
<span class="sig-name descname"><span class="pre">element_constructor_attributes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraints</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Element constructor attributes.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">constraints</span></code> – a bunch of constraints</p></li>
</ul>
<p>Should return the attributes that are prerequisite for element
construction. This is coordinated with
<code class="xref py py-meth docutils literal notranslate"><span class="pre">ParentWithSetFactory._element_constructor_()</span></code>. Currently two standard
attributes are provided in
<a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy.facade_element_constructor_attributes" title="sage.structure.set_factories.SetFactoryPolicy.facade_element_constructor_attributes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">facade_element_constructor_attributes()</span></code></a> and
<a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy.self_element_constructor_attributes" title="sage.structure.set_factories.SetFactoryPolicy.self_element_constructor_attributes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">self_element_constructor_attributes()</span></code></a>. You should return the
one needed depending on the given constraints.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span>
<span class="gp">sage: </span><span class="n">pol</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="o">.</span><span class="n">_default_policy</span>
<span class="gp">sage: </span><span class="n">pol</span><span class="o">.</span><span class="n">element_constructor_attributes</span><span class="p">(())</span>
<span class="go">{&#39;Element&#39;: &lt;class &#39;sage.structure.set_factories_example.XYPair&#39;&gt;,</span>
<span class="go"> &#39;_parent_for&#39;: &#39;self&#39;}</span>
<span class="gp">sage: </span><span class="n">pol</span><span class="o">.</span><span class="n">element_constructor_attributes</span><span class="p">((</span><span class="mi">1</span><span class="p">))</span>
<span class="go">{&#39;_facade_for&#39;: AllPairs,</span>
<span class="go"> &#39;_parent_for&#39;: AllPairs,</span>
<span class="go"> &#39;element_class&#39;: &lt;class &#39;sage.structure.set_factories_example.AllPairs_with_category.element_class&#39;&gt;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.set_factories.SetFactoryPolicy.facade_element_constructor_attributes">
<span class="sig-name descname"><span class="pre">facade_element_constructor_attributes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.SetFactoryPolicy.facade_element_constructor_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Element Constructor Attributes for facade parent.</p>
<p>The list of attributes which must be set during the init of a
facade parent with factory.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">parent</span></code> – the actual parent for the elements</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span>
<span class="gp">sage: </span><span class="n">pol</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="o">.</span><span class="n">_default_policy</span>
<span class="gp">sage: </span><span class="n">pol</span><span class="o">.</span><span class="n">facade_element_constructor_attributes</span><span class="p">(</span><span class="n">XYPairs</span><span class="p">())</span>
<span class="go">{&#39;_facade_for&#39;: AllPairs,</span>
<span class="go"> &#39;_parent_for&#39;: AllPairs,</span>
<span class="go"> &#39;element_class&#39;: &lt;class &#39;sage.structure.set_factories_example.AllPairs_with_category.element_class&#39;&gt;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.set_factories.SetFactoryPolicy.factory">
<span class="sig-name descname"><span class="pre">factory</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.SetFactoryPolicy.factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the factory for <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories</span> <span class="kn">import</span> <span class="n">SetFactoryPolicy</span><span class="p">,</span> <span class="n">SelfParentPolicy</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="o">.</span><span class="n">_default_policy</span><span class="o">.</span><span class="n">factory</span><span class="p">()</span>
<span class="go">Factory for XY pairs</span>
<span class="gp">sage: </span><span class="n">XYPairs</span><span class="o">.</span><span class="n">_default_policy</span><span class="o">.</span><span class="n">factory</span><span class="p">()</span> <span class="ow">is</span> <span class="n">XYPairs</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.set_factories.SetFactoryPolicy.self_element_constructor_attributes">
<span class="sig-name descname"><span class="pre">self_element_constructor_attributes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Element</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.SetFactoryPolicy.self_element_constructor_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Element Constructor Attributes for non facade parent.</p>
<p>The list of attributes which must be set during the init of a
non facade parent with factory.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Element</span></code> – the class used for the elements</p></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span>
<span class="gp">sage: </span><span class="n">pol</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="o">.</span><span class="n">_default_policy</span>
<span class="gp">sage: </span><span class="n">pol</span><span class="o">.</span><span class="n">self_element_constructor_attributes</span><span class="p">(</span><span class="n">XYPair</span><span class="p">)</span>
<span class="go">{&#39;Element&#39;: &lt;class &#39;sage.structure.set_factories_example.XYPair&#39;&gt;,</span>
<span class="go"> &#39;_parent_for&#39;: &#39;self&#39;}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.structure.set_factories.TopMostParentPolicy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.structure.set_factories.</span></span><span class="sig-name descname"><span class="pre">TopMostParentPolicy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">factory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_constraints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Element</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.TopMostParentPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy" title="sage.structure.set_factories.SetFactoryPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.structure.set_factories.SetFactoryPolicy</span></code></a></p>
<p>Policy where the parent of the elements is the topmost parent.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">factory</span></code> – an instance of <a class="reference internal" href="#sage.structure.set_factories.SetFactory" title="sage.structure.set_factories.SetFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">SetFactory</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">top_constraints</span></code> – the empty set of constraints.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Element</span></code> – a subclass of <a class="reference internal" href="element.html#sage.structure.element.Element" title="sage.structure.element.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a></p></li>
</ul>
<p>Given a factory <code class="docutils literal notranslate"><span class="pre">F</span></code> and a class <code class="docutils literal notranslate"><span class="pre">E</span></code>, returns a policy for
parent <code class="docutils literal notranslate"><span class="pre">P</span></code> creating element in class <code class="docutils literal notranslate"><span class="pre">E</span></code> and parent
<code class="docutils literal notranslate"><span class="pre">factory(*top_constraints,</span> <span class="pre">policy)</span></code>.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.set_factories_example</span> <span class="kn">import</span> <span class="n">XYPairs</span><span class="p">,</span> <span class="n">XYPair</span>
<span class="gp">sage: </span><span class="n">P</span> <span class="o">=</span> <span class="n">XYPairs</span><span class="p">();</span> <span class="n">P</span><span class="o">.</span><span class="n">policy</span><span class="p">()</span>
<span class="go">Set factory policy for &lt;class &#39;sage.structure.set_factories_example.XYPair&#39;&gt; with parent AllPairs[=Factory for XY pairs(())]</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sage.structure.set_factories.TopMostParentPolicy.element_constructor_attributes">
<span class="sig-name descname"><span class="pre">element_constructor_attributes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraints</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.set_factories.TopMostParentPolicy.element_constructor_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the element constructor attributes as per
<a class="reference internal" href="#sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes" title="sage.structure.set_factories.SetFactoryPolicy.element_constructor_attributes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SetFactoryPolicy.element_constructor_attributes()</span></code></a>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">constraints</span></code> – a bunch of constraints</p></li>
</ul>
</dd></dl>

</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="sequence.html"
                          title="previous chapter">Finite Homogeneous Sequences</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="set_factories_example.html"
                          title="next chapter">An example of set factory</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/sage/structure/set_factories.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="set_factories_example.html" title="An example of set factory"
             >next</a> |</li>
        <li class="right" >
          <a href="sequence.html" title="Finite Homogeneous Sequences"
             >previous</a> |</li>
  <li class="nav-item nav-item-0">
    <a href="http://www.sagemath.org"><img src="../../../_static/logo_sagemath_black.svg" class="sage-logo" title="Sage Logo"></a>
    
      <a href="../../../../index.html">Sage 9.6 Documentation</a> &#187;
      
      <a href="../../../index.html">Reference Manual</a> &#187;
      
      <a href="../../index.html">Parents and Elements</a> &#187;
    
  </li>

        <li class="nav-item nav-item-this"><a href="">Set factories</a></li> 
      </ul>
    </div>
  
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005--2022, The Sage Development Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* The sidebar toggle adapts its height to the bodywrapper height. */
    const resizeObserver = new ResizeObserver(entries => {
        tog.height(bod.height());
    });
    resizeObserver.observe(bod[0]);

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
  </script>
  <script type="text/javascript">
/* detex the document title by removing "\(", "\)", "\", "$" */
document.title = document.title.replace(/\\\(/g, '').replace(/\\\)/g, '').replace(/\\/g, '').replace(/\$/g, '');
  </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66100-14', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>