<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Base class for old-style parent objects" href="parent_old.html" /><link rel="prev" title="Precision management for non-exact objects" href="nonexact.html" />

    <meta name="generator" content="sphinx-5.2.3, furo 2022.09.29"/>
        <title>Global options - Parents and Elements</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=d81277517bee4d6b0349d71bb2661d4890b5617c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom-furo.css" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  --color-brand-primary: #0f0fff;
  --color-brand-content: #0f0fff;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Parents and Elements</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../../_static/logo_sagemath_black.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../../../_static/logo_sagemath_white.svg" alt="Dark Logo"/>
  </div>
  
      <span class="sidebar-brand-text">Sage 10.0 Reference Manual</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-home">
  <div class="sidebar-tree">
    <ul><li class="toctree-l1">
      <a class="reference internal" href="../../index.html">Home - Parents and Elements</a>
    </li></ul>
  </div>
</div><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="sage_object.html">Abstract base class for Sage objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="category_object.html">Base class for objects of a category</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="parent.html">Base class for parent objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="indexed_generators.html">Indexed Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="nonexact.html">Precision management for non-exact objects</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Global options</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="parent_old.html">Base class for old-style parent objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="parent_base.html">Base class for old-style parent objects with a base ring</a></li>
<li class="toctree-l1"><a class="reference internal" href="parent_gens.html">Base class for old-style parent objects with generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="gens_py.html">Pure python code for abstract base class for objects with generators</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="element.html">Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="element_wrapper.html">Element Wrapper</a></li>
<li class="toctree-l1"><a class="reference internal" href="list_clone.html">Elements, Array and Lists With Clone Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="list_clone_demo.html">Elements, Array and Lists With Clone Protocol, demonstration classes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="formal_sum.html">Formal sums</a></li>
<li class="toctree-l1"><a class="reference internal" href="factorization.html">Factorizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="factorization_integer.html">IntegerFactorization objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="sequence.html">Finite Homogeneous Sequences</a></li>
<li class="toctree-l1"><a class="reference internal" href="set_factories.html">Set factories</a></li>
<li class="toctree-l1"><a class="reference internal" href="set_factories_example.html">An example of set factory</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="proof/proof.html">Global proof preferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/proof.html">Whether or not computations are provably correct by default</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="richcmp.html">Cython-like rich comparisons in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="unique_representation.html">Unique Representation</a></li>
<li class="toctree-l1"><a class="reference internal" href="factory.html">Factory for cached representations</a></li>
<li class="toctree-l1"><a class="reference internal" href="dynamic_class.html">Dynamic classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="mutability.html">Mutability Cython Implementation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="debug_options.html">Debug options for the <code class="xref py py-mod docutils literal notranslate"><span class="pre">sage.structure</span></code> modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="list_clone_timings.html">Performance Test for Clone Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="list_clone_timings_cy.html">Cython Functions for Timing Clone Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="test_factory.html">Test of the <code class="xref py py-mod docutils literal notranslate"><span class="pre">factory</span></code> module</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="global-options">
<span id="sage-structure-global-options"></span><h1>Global options<a class="headerlink" href="#global-options" title="Permalink to this heading">#</a></h1>
<span class="target" id="module-sage.structure.global_options"></span><p>The <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a> class provides a generic mechanism for
setting and accessing <strong>global</strong> options for parents in one or several
related classes, typically for customizing the representation of their
elements. This class will eventually also support setting options on a
parent by parent basis.</p>
<p>These options should be “attached” to one or more classes as an options method.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For good examples of <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a> in action see
<a class="reference external" href="../../../combinat/sage/combinat/partition.html#sage.combinat.partition.Partitions.options" title="(in Combinatorics v10.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sage.combinat.partition.Partitions.options</span></code></a> and
<a class="reference external" href="../../../combinat/sage/combinat/tableau.html#sage.combinat.tableau.Tableaux.options" title="(in Combinatorics v10.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sage.combinat.tableau.Tableaux.options</span></code></a>.</p>
</div>
<section id="construction-of-options-classes">
<span id="construction-section"></span><h2>Construction of options classes<a class="headerlink" href="#construction-of-options-classes" title="Permalink to this heading">#</a></h2>
<p>The general setup for creating a set of global options is:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.global_options</span> <span class="kn">import</span> <span class="n">GlobalOptions</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">MyOptions</span><span class="p">(</span><span class="n">GlobalOptions</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="s1">&#39;&#39;&#39;</span>
<span class="gp">....: </span><span class="s1">    Nice options</span>
<span class="gp">....:</span>
<span class="gp">....: </span>    <span class="nd">@OPTIONS</span><span class="o">@</span>
<span class="gp">....: </span>    <span class="s1">&#39;&#39;&#39;</span>
<span class="gp">....: </span><span class="s1">    NAME = &#39;option name&#39;</span>
<span class="gp">....: </span><span class="s1">    module = &#39;sage.some_module.some_file&#39;</span>
<span class="gp">....: </span><span class="s1">    option_class = &#39;name_of_class_controlled_by_options&#39;</span>
<span class="gp">....: </span><span class="s1">    first_option = dict(default=&#39;with_bells&#39;,</span>
<span class="gp">....: </span><span class="s1">                      description=&#39;Changes the functionality of _repr_&#39;,</span>
<span class="gp">....: </span><span class="s1">                      values=dict(with_bells=&#39;causes _repr_ to print with bells&#39;,</span>
<span class="gp">....: </span><span class="s1">                                  with_whistles=&#39;causes _repr_ to print with whistles&#39;),</span>
<span class="gp">....: </span><span class="s1">                      alias=dict(bells=&#39;option1&#39;, whistles=&#39;option2&#39;))</span>
<span class="gp">....: </span><span class="s1">    # second_option = dict(...)</span>
<span class="gp">....: </span><span class="s1">    # third_option = dict(...)</span>
</pre></div>
</div>
<p>Note the syntax using the <code class="docutils literal notranslate"><span class="pre">class</span></code> keyword. However, because of some
metaclass magic, the resulting <code class="docutils literal notranslate"><span class="pre">MyOptions</span></code> object becomes an instance
of <code class="docutils literal notranslate"><span class="pre">GlobalOptions</span></code> instead of a subclass. So, despite the <code class="docutils literal notranslate"><span class="pre">class</span></code>
syntax, <code class="docutils literal notranslate"><span class="pre">MyOptions</span></code> is not a class.</p>
<p>The options constructed by <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a> have to be explicitly
associated to the class that they control using the following arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NAME</span></code> – A descriptive name for the options class. This is
optional; the default is the name of the constructed class.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">module</span></code> – The sage module containing the options class (optional)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">option_class</span></code> – The name of the options class. This is optional and
defaults to <code class="docutils literal notranslate"><span class="pre">NAME</span></code> if not explicitly set.</p></li>
</ul>
<p>It is only possible to pickle a <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a> class if the
corresponding module is specified <em>and</em> if the options are explicitly
attached to the corresponding class as a <em>options</em> method.</p>
<p>Each option is specified as a dictionary which describes the possible
values for the option and its documentation. The possible entries in this
dictionary are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">alias</span></code> – Allows for several option values to do the same thing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alt_name</span></code> – An alternative name for this option.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">checker</span></code> – A validation function which returns whether a user
supplied value is valid or not. This is typically useful for large
lists of legal values such as <code class="xref py py-class docutils literal notranslate"><span class="pre">NN</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code> – Gives the default value for the option.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">description</span></code> – A one line description of the option.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">link_to</span></code> – Links this option to another one in another set of
global options. This is used for example to allow
<a class="reference external" href="../../../combinat/sage/combinat/partition.html#sage.combinat.partition.Partitions" title="(in Combinatorics v10.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Partitions</span></code></a> and <a class="reference external" href="../../../combinat/sage/combinat/tableau.html#sage.combinat.tableau.Tableaux" title="(in Combinatorics v10.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tableaux</span></code></a> to share the same
<code class="docutils literal notranslate"><span class="pre">convention</span></code> option.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setter</span></code> – A function which is called <strong>after</strong> the value of the
option is changed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">values</span></code> – A dictionary assigning each valid value for the option
to a short description of what it does.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">case_sensitive</span></code> – (Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>) <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> depending on
whether the values of the option are case sensitive.</p></li>
</ul>
<p>For each option, either a complete list of possible values, via <code class="docutils literal notranslate"><span class="pre">values</span></code>, or a
validation function, via <code class="docutils literal notranslate"><span class="pre">checker</span></code>, must be given. The values can be quite
arbitrary, including user-defined functions which customize the default
behaviour of the classes such as the output of <code class="docutils literal notranslate"><span class="pre">_repr_</span></code> or <a class="reference external" href="../../../misc/sage/misc/latex.html#sage.misc.latex.latex" title="(in Utilities v10.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">latex()</span></code></a>. See
<a class="reference internal" href="#dispatcher"><span class="std std-ref">Dispatchers</span></a> below, and <code class="xref py py-meth docutils literal notranslate"><span class="pre">_dispatcher()</span></code>, for more
information.</p>
<p>The documentation for the options is automatically constructed from
the docstring of the class by replacing the magic word <code class="docutils literal notranslate"><span class="pre">&#64;OPTIONS&#64;</span></code>
with a description of each option.</p>
<p>The basic structure for defining a <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a> class is best
illustrated by an example:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.global_options</span> <span class="kn">import</span> <span class="n">GlobalOptions</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">Menu</span><span class="p">():</span>
<span class="gp">....: </span>    <span class="k">class</span> <span class="nc">options</span><span class="p">(</span><span class="n">GlobalOptions</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="s1">&#39;&#39;&#39;</span>
<span class="gp">....: </span><span class="s1">        Fancy documentation</span>
<span class="gp">....: </span><span class="s1">        -------------------</span>
<span class="gp">....:</span>
<span class="gp">....: </span>        <span class="nd">@OPTIONS</span><span class="o">@</span>
<span class="gp">....:</span>
<span class="gp">....: </span>        <span class="n">The</span> <span class="n">END</span><span class="err">!</span>
<span class="gp">....: </span>        <span class="s1">&#39;&#39;&#39;</span>
<span class="gp">....: </span><span class="s1">        NAME = &#39;menu&#39;</span>
<span class="gp">....: </span><span class="s1">        entree = dict(default=&#39;soup&#39;,</span>
<span class="gp">....: </span><span class="s1">                    description=&#39;The first course of a meal&#39;,</span>
<span class="gp">....: </span><span class="s1">                    values=dict(soup=&#39;soup of the day&#39;, bread=&#39;oven baked&#39;),</span>
<span class="gp">....: </span><span class="s1">                    alias=dict(rye=&#39;bread&#39;))</span>
<span class="gp">....: </span><span class="s1">        appetizer = dict(alt_name=&#39;entree&#39;)</span>
<span class="gp">....: </span><span class="s1">        main = dict(default=&#39;pizza&#39;, description=&#39;Main meal&#39;,</span>
<span class="gp">....: </span><span class="s1">                  values=dict(pizza=&#39;thick crust&#39;, pasta=&#39;penne arrabiata&#39;),</span>
<span class="gp">....: </span><span class="s1">                  case_sensitive=False)</span>
<span class="gp">....: </span><span class="s1">        dessert = dict(default=&#39;espresso&#39;, description=&#39;Dessert&#39;,</span>
<span class="gp">....: </span><span class="s1">                     values=dict(espresso=&#39;life begins again&#39;,</span>
<span class="gp">....: </span><span class="s1">                                 cake=&#39;waist begins again&#39;,</span>
<span class="gp">....: </span><span class="s1">                                 cream=&#39;fluffy, white stuff&#39;))</span>
<span class="gp">....: </span><span class="s1">        tip = dict(default=10, description=&#39;Reward for good service&#39;,</span>
<span class="gp">....: </span><span class="s1">                   checker = lambda tip: tip in range(0,20))</span>
<span class="gp">sage: </span><span class="s1">Menu.options</span>
<span class="go">Current options for menu</span>
<span class="go">  - dessert: espresso</span>
<span class="go">  - entree:  soup</span>
<span class="go">  - main:    pizza</span>
<span class="go">  - tip:     10</span>
</pre></div>
</div>
<p>In the examples above, the options are constructed when the <code class="docutils literal notranslate"><span class="pre">options</span></code>
object is created. However, it is also possible to construct the options
dynamically using the <code class="xref py py-meth docutils literal notranslate"><span class="pre">GlobalOptions._add_to_options()</span></code> methods.</p>
<p>For more details see <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a>.</p>
</section>
<section id="accessing-and-setting-option-values">
<h2>Accessing and setting option values<a class="headerlink" href="#accessing-and-setting-option-values" title="Permalink to this heading">#</a></h2>
<p>All options and their values, when they are strings, are forced to be lower
case. The values of an options class can be set and accessed by calling the
class or by treating the class as an array.</p>
<p>Continuing the example from <a class="reference internal" href="#construction-section"><span class="std std-ref">Construction of options classes</span></a>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span>
<span class="go">Current options for menu</span>
<span class="go">  - dessert: espresso</span>
<span class="go">  - entree:  soup</span>
<span class="go">  - main:    pizza</span>
<span class="go">  - tip:     10</span>
<span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">dessert</span>
<span class="go">espresso</span>
<span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">dessert</span> <span class="o">=</span> <span class="s1">&#39;cake&#39;</span>
<span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">dessert</span>
<span class="go">cake</span>
</pre></div>
</div>
<p>Note that, provided there is no ambiguity, options and their values can be
abbreviated:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">)</span>
<span class="go">&#39;cake&#39;</span>
<span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span><span class="s1">&#39;t&#39;</span><span class="p">,</span><span class="n">des</span><span class="o">=</span><span class="s1">&#39;esp&#39;</span><span class="p">,</span> <span class="n">ent</span><span class="o">=</span><span class="s1">&#39;sou&#39;</span><span class="p">)</span>  <span class="c1"># get and set several values at once</span>
<span class="go">[&#39;pizza&#39;, 10]</span>
<span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="s1">&#39;tip&#39;</span><span class="p">)</span>
<span class="go">15</span>
<span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">tip</span>
<span class="go">15</span>
<span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">e</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="s1">&#39;Pi&#39;</span><span class="p">);</span> <span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="p">()</span>
<span class="go">Current options for menu</span>
<span class="go">  - dessert: cake</span>
<span class="go">  - entree:  soup</span>
<span class="go">  - main:    pizza</span>
<span class="go">  - tip:     15</span>
<span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="s1">&#39;P&#39;</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: P is not a valid value for main in the options for menu</span>
</pre></div>
</div>
</section>
<section id="setter-functions">
<h2>Setter functions<a class="headerlink" href="#setter-functions" title="Permalink to this heading">#</a></h2>
<p>Each option of a <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a> can be equipped with an optional setter
function which is called <strong>after</strong> the value of the option is changed. In the
following example, setting the option ‘add’ changes the state of the class by
setting an attribute in this class using a <a class="reference external" href="https://docs.python.org/library/functions.html#classmethod" title="(in Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">classmethod()</span></code></a>. Note that the
options object is inserted after the creation of the class in order to access
the <a class="reference external" href="https://docs.python.org/library/functions.html#classmethod" title="(in Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">classmethod()</span></code></a> as <code class="docutils literal notranslate"><span class="pre">A.setter</span></code>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.global_options</span> <span class="kn">import</span> <span class="n">GlobalOptions</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="n">SageObject</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="n">state</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">....: </span>    <span class="nd">@classmethod</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="nf">setter</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="bp">cls</span><span class="o">.</span><span class="n">state</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">options</span><span class="p">(</span><span class="n">GlobalOptions</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="n">NAME</span> <span class="o">=</span> <span class="s2">&quot;A&quot;</span>
<span class="gp">....: </span>    <span class="n">add</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">....: </span>               <span class="n">checker</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">,</span>
<span class="gp">....: </span>               <span class="n">description</span><span class="o">=</span><span class="s1">&#39;An option with a setter&#39;</span><span class="p">,</span>
<span class="gp">....: </span>               <span class="n">setter</span><span class="o">=</span><span class="n">A</span><span class="o">.</span><span class="n">setter</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">A</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">options</span>
<span class="gp">sage: </span><span class="n">A</span><span class="o">.</span><span class="n">options</span>
<span class="go">Current options for A</span>
<span class="go">- add: 1</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">();</span> <span class="n">a</span><span class="o">.</span><span class="n">state</span>
<span class="go">1</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">options</span><span class="p">()</span>
<span class="go">Current options for A</span>
<span class="go">- add: 1</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">add</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">state</span>
<span class="go">5</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">options</span><span class="p">()</span>
<span class="go">Current options for A</span>
<span class="go">- add: 4</span>
</pre></div>
</div>
</section>
<section id="documentation-for-options">
<h2>Documentation for options<a class="headerlink" href="#documentation-for-options" title="Permalink to this heading">#</a></h2>
<p>The documentation for a <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a> is automatically generated from
the supplied options. For example, the generated documentation for the options
<code class="docutils literal notranslate"><span class="pre">menu</span></code> defined in <a class="reference internal" href="#construction-section"><span class="std std-ref">Construction of options classes</span></a> is the following:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Fancy documentation
-------------------

OPTIONS:

- ``appetizer`` -- alternative name for ``entree``
- ``dessert`` -- (default: ``espresso``)
  Dessert

  - ``cake``     -- waist begins again
  - ``cream``    -- fluffy, white stuff
  - ``espresso`` -- life begins again

- ``entree`` -- (default: ``soup``)
  The first course of a meal

  - ``bread`` -- oven baked
  - ``rye``   -- alias for ``bread``
  - ``soup``  -- soup of the day

- ``main`` -- (default: ``pizza``)
  Main meal

  - ``pasta`` -- penne arrabiata
  - ``pizza`` -- thick crust

- ``tip`` -- (default: ``10``)
  Reward for good service



The END!

See :class:`~sage.structure.global_options.GlobalOptions` for more features of these options.
</pre></div>
</div>
<p>In addition, help on each option, and its list of possible values, can be
obtained by (trying to) set the option equal to ‘?’:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">dessert</span><span class="err">?</span>                <span class="c1"># not tested</span>
<span class="go">- ``dessert`` -- (default: ``espresso``)</span>
<span class="go">  Dessert</span>

<span class="go">  - ``cake``     -- waist begins again</span>
<span class="go">  - ``cream``    -- fluffy, white stuff</span>
<span class="go">  - ``espresso`` -- life begins again</span>
</pre></div>
</div>
</section>
<section id="dispatchers">
<span id="dispatcher"></span><h2>Dispatchers<a class="headerlink" href="#dispatchers" title="Permalink to this heading">#</a></h2>
<p>The whole idea of a <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a> class is that the options change the
default behaviour of the associated classes. This can be done either by simply
checking what the current value of the relevant option is. Another possibility
is to use the options class as a dispatcher to associated methods. To use the
dispatcher feature of a <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a> class it is necessary to implement
separate methods for each value of the option where the naming convention for
these methods is that they start with a common prefix and finish with the value
of the option.</p>
<p>If the value of a dispatchable option is set equal to a (user defined) function
then this function is called instead of a class method.</p>
<p>For example, the options <code class="docutils literal notranslate"><span class="pre">MyOptions</span></code> can be used to dispatch the <code class="docutils literal notranslate"><span class="pre">_repr_</span></code>
method of the associated class <code class="docutils literal notranslate"><span class="pre">MyClass</span></code> as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_repr_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">_dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;_repr_&#39;</span><span class="p">,</span><span class="s1">&#39;first_option&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_repr_with_bells</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Bell!&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_repr_with_whistles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Whistles!&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MyOptions</span><span class="p">(</span><span class="n">GlobalOptions</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>In this example, <code class="docutils literal notranslate"><span class="pre">first_option</span></code> is an option of <code class="docutils literal notranslate"><span class="pre">MyOptions</span></code> which takes
values <code class="docutils literal notranslate"><span class="pre">bells</span></code>, <code class="docutils literal notranslate"><span class="pre">whistles</span></code>, and so on. Note that it is necessary to make
<code class="docutils literal notranslate"><span class="pre">self</span></code>, which is an instance of <code class="docutils literal notranslate"><span class="pre">MyClass</span></code>, an argument of the dispatcher
because <code class="xref py py-meth docutils literal notranslate"><span class="pre">_dispatch()</span></code> is a method of <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a>
and not a method of <code class="docutils literal notranslate"><span class="pre">MyClass</span></code>. Apart from <code class="docutils literal notranslate"><span class="pre">MyOptions</span></code>, as it is a method of
this class, the arguments are the attached class (here <code class="docutils literal notranslate"><span class="pre">MyClass</span></code>), the prefix
of the method of <code class="docutils literal notranslate"><span class="pre">MyClass</span></code> being dispatched, the option of <code class="docutils literal notranslate"><span class="pre">MyOptions</span></code>
which controls the dispatching. All other arguments are passed through to the
corresponding methods of <code class="docutils literal notranslate"><span class="pre">MyClass</span></code>. In general, a dispatcher is invoked as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">_dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dispatch_to</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span>
</pre></div>
</div>
<p>Usually this will result in the method
<code class="docutils literal notranslate"><span class="pre">dispatch_to</span> <span class="pre">+</span> <span class="pre">'_'</span> <span class="pre">+</span> <span class="pre">MyOptions(options)</span></code> of <code class="docutils literal notranslate"><span class="pre">self</span></code> being called with
arguments <code class="docutils literal notranslate"><span class="pre">*args</span></code> and <code class="docutils literal notranslate"><span class="pre">**kargs</span></code> (if <code class="docutils literal notranslate"><span class="pre">dispatch_to[-1]</span> <span class="pre">==</span> <span class="pre">'_'</span></code> then the
method <code class="docutils literal notranslate"><span class="pre">dispatch_to</span> <span class="pre">+</span> <span class="pre">MyOptions(options)</span></code> is called).</p>
<p>If <code class="docutils literal notranslate"><span class="pre">MyOptions(options)</span></code> is itself a function then the dispatcher will call
this function instead. In this way, it is possible to allow the user to
customise the default behaviour of this method. See
<code class="xref py py-meth docutils literal notranslate"><span class="pre">_dispatch()</span></code> for an example of how this can be achieved.</p>
<p>The dispatching capabilities of <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a> allows options to be
applied automatically without needing to parse different values of the option
(the cost is that there must be a method for each value). The dispatching
capabilities can also be used to make one option control several methods:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">_dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_le_&#39;</span><span class="p">,</span><span class="s1">&#39;cmp&#39;</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
<span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">_dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_ge_&#39;</span><span class="p">,</span><span class="s1">&#39;cmp&#39;</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_le_option_a</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="k">return</span> <span class="o">...</span>
<span class="k">def</span> <span class="nf">_ge_option_a</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="k">return</span> <span class="o">...</span>
<span class="k">def</span> <span class="nf">_le_option_b</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="k">return</span> <span class="o">...</span>
<span class="k">def</span> <span class="nf">_ge_option_b</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="k">return</span> <span class="o">...</span>
</pre></div>
</div>
<p>See <code class="xref py py-meth docutils literal notranslate"><span class="pre">_dispatch()</span></code> for more details.</p>
</section>
<section id="doc-testing">
<h2>Doc testing<a class="headerlink" href="#doc-testing" title="Permalink to this heading">#</a></h2>
<p>All of the options and their effects should be doc-tested. However, in order
not to break other tests, all options should be returned to their default state
at the end of each test. To make this easier, every <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a> class has
a <code class="xref py py-meth docutils literal notranslate"><span class="pre">_reset()</span></code> method for doing exactly this.</p>
</section>
<section id="pickling">
<h2>Pickling<a class="headerlink" href="#pickling" title="Permalink to this heading">#</a></h2>
<p>Options classes can only be pickled if they are the options for some standard
sage class. In this case the class is specified using the arguments to
<a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a>. For example
<code class="xref py py-meth docutils literal notranslate"><span class="pre">options()</span></code> is defined as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Partitions</span><span class="p">(</span><span class="n">UniqueRepresentation</span><span class="p">,</span> <span class="n">Parent</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="k">class</span> <span class="nc">options</span><span class="p">(</span><span class="n">GlobalOptions</span><span class="p">):</span>
        <span class="n">NAME</span> <span class="o">=</span> <span class="s1">&#39;Partitions&#39;</span>
        <span class="n">module</span> <span class="o">=</span> <span class="s1">&#39;sage.combinat.partition&#39;</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>Here is an example to test the pickling of a <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a> instance:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">TestSuite</span><span class="p">(</span><span class="n">Partitions</span><span class="o">.</span><span class="n">options</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li><p>Andrew Mathas (2013): initial version</p></li>
<li><dl class="simple">
<dt>Andrew Mathas (2016): overhaul making the options attributes, enabling</dt><dd><p>pickling and attaching the options to a class.</p>
</dd>
</dl>
</li>
<li><p>Jeroen Demeyer (2017): use subclassing to create instances</p></li>
</ul>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="sage.structure.global_options.GlobalOptions">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.structure.global_options.</span></span><span class="sig-name descname"><span class="pre">GlobalOptions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">NAME</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">option_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_doc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.global_options.GlobalOptions" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a> class is a generic class for setting and
accessing global options for Sage objects.</p>
<p>While it is possible to create instances of <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a>
the usual way, the recommended syntax is to subclass from
<code class="docutils literal notranslate"><span class="pre">GlobalOptions</span></code>. Thanks to some metaclass magic, this actually
creates an instance of <code class="docutils literal notranslate"><span class="pre">GlobalOptions</span></code> instead of a subclass.</p>
<p>INPUT (as “attributes” of the class):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NAME</span></code> – specifies a name for the options class (optional;
default: class name)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">module</span></code> – gives the module that contains the associated options class</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">option_class</span></code> – gives the name of the associated module class
(default: <code class="docutils literal notranslate"><span class="pre">NAME</span></code>)</p></li>
<li><p>option = <code class="docutils literal notranslate"><span class="pre">dict(...)</span></code> – dictionary specifying an option</p></li>
</ul>
<p>The options are specified by keyword arguments with their values
being a dictionary which describes the option. The
allowed/expected keys in the dictionary are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">alias</span></code> – defines alias/synonym for option values</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alt_name</span></code> – alternative name for an option</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">checker</span></code> – a function for checking whether a particular value for
the option is valid</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code> – the default value of the option</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">description</span></code> – documentation string</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">link_to</span></code> – links to an option for this set of options to an
option in another <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setter</span></code> – a function (class method) which is called whenever this
option changes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">values</span></code> – a dictionary of the legal values for this option (this
automatically defines the corresponding <code class="docutils literal notranslate"><span class="pre">checker</span></code>); this dictionary
gives the possible options, as keys, together with a brief description
of them</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">case_sensitive</span></code> – (default: <code class="docutils literal notranslate"><span class="pre">True</span></code>) <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>
depending on whether the values of the option are case sensitive</p></li>
</ul>
<p>Options and their values can be abbreviated provided that this
abbreviation is a prefix of a unique option.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.global_options</span> <span class="kn">import</span> <span class="n">GlobalOptions</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">Menu</span><span class="p">():</span>
<span class="gp">....: </span>    <span class="k">class</span> <span class="nc">options</span><span class="p">(</span><span class="n">GlobalOptions</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="s1">&#39;&#39;&#39;</span>
<span class="gp">....: </span><span class="s1">        Fancy documentation</span>
<span class="gp">....: </span><span class="s1">        -------------------</span>
<span class="gp">....:</span>
<span class="gp">....: </span>        <span class="nd">@OPTIONS</span><span class="o">@</span>
<span class="gp">....:</span>
<span class="gp">....: </span>        <span class="n">End</span> <span class="n">of</span> <span class="n">Fancy</span> <span class="n">documentation</span>
<span class="gp">....: </span>        <span class="s1">&#39;&#39;&#39;</span>
<span class="gp">....: </span><span class="s1">        NAME = &#39;menu&#39;</span>
<span class="gp">....: </span><span class="s1">        entree = dict(default=&#39;soup&#39;,</span>
<span class="gp">....: </span><span class="s1">                    description=&#39;The first course of a meal&#39;,</span>
<span class="gp">....: </span><span class="s1">                    values=dict(soup=&#39;soup of the day&#39;, bread=&#39;oven baked&#39;),</span>
<span class="gp">....: </span><span class="s1">                    alias=dict(rye=&#39;bread&#39;))</span>
<span class="gp">....: </span><span class="s1">        appetizer = dict(alt_name=&#39;entree&#39;)</span>
<span class="gp">....: </span><span class="s1">        main = dict(default=&#39;pizza&#39;, description=&#39;Main meal&#39;,</span>
<span class="gp">....: </span><span class="s1">                  values=dict(pizza=&#39;thick crust&#39;, pasta=&#39;penne arrabiata&#39;),</span>
<span class="gp">....: </span><span class="s1">                  case_sensitive=False)</span>
<span class="gp">....: </span><span class="s1">        dessert = dict(default=&#39;espresso&#39;, description=&#39;Dessert&#39;,</span>
<span class="gp">....: </span><span class="s1">                     values=dict(espresso=&#39;life begins again&#39;,</span>
<span class="gp">....: </span><span class="s1">                                 cake=&#39;waist begins again&#39;,</span>
<span class="gp">....: </span><span class="s1">                                 cream=&#39;fluffy white stuff&#39;))</span>
<span class="gp">....: </span><span class="s1">        tip = dict(default=10, description=&#39;Reward for good service&#39;,</span>
<span class="gp">....: </span><span class="s1">                 checker=lambda tip: tip in range(0,20))</span>
<span class="gp">sage: </span><span class="s1">Menu.options</span>
<span class="go">Current options for menu</span>
<span class="go">  - dessert: espresso</span>
<span class="go">  - entree:  soup</span>
<span class="go">  - main:    pizza</span>
<span class="go">  - tip:     10</span>
<span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">entree</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>         <span class="c1"># unambiguous abbreviations are allowed</span>
<span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">(</span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s1">&#39;tip&#39;</span><span class="p">],</span> <span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">))</span>
<span class="go">(15, 15)</span>
<span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="p">()</span>
<span class="go">Current options for menu</span>
<span class="go">  - dessert: espresso</span>
<span class="go">  - entree:  soup</span>
<span class="go">  - main:    pizza</span>
<span class="go">  - tip:     15</span>
<span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">_reset</span><span class="p">();</span> <span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="p">()</span>
<span class="go">Current options for menu</span>
<span class="go">  - dessert: espresso</span>
<span class="go">  - entree:  soup</span>
<span class="go">  - main:    pizza</span>
<span class="go">  - tip:     10</span>
<span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">tip</span><span class="o">=</span><span class="mi">40</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: 40 is not a valid value for tip in the options for menu</span>
<span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="s1">&#39;p&#39;</span><span class="p">)</span>           <span class="c1"># ambiguous abbreviations are not allowed</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: p is not a valid value for main in the options for menu</span>
</pre></div>
</div>
<p>The documentation for the options class is automatically generated from the
information which specifies the options:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Fancy documentation
-------------------

OPTIONS:

- dessert:  (default: espresso)
  Dessert

  - ``cake``     -- waist begins again
  - ``cream``    -- fluffy white stuff
  - ``espresso`` -- life begins again

- entree:  (default: soup)
  The first course of a meal

  - ``bread`` -- oven baked
  - ``rye``   -- alias for bread
  - ``soup``  -- soup of the day

- main:  (default: pizza)
  Main meal

  - ``pasta`` -- penne arrabiata
  - ``pizza`` -- thick crust

- tip:  (default: 10)
  Reward for good service

End of Fancy documentation

See :class:`~sage.structure.global_options.GlobalOptions` for more features of these options.
</pre></div>
</div>
<p>The possible values for an individual option can be obtained by
(trying to) set it equal to ‘?’:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">Menu</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">des</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">)</span>
<span class="go">- ``dessert`` -- (default: ``espresso``)</span>
<span class="go">  Dessert</span>

<span class="go">  - ``cake``     -- waist begins again</span>
<span class="go">  - ``cream``    -- fluffy white stuff</span>
<span class="go">  - ``espresso`` -- life begins again</span>

<span class="go">Current value: espresso</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.structure.global_options.GlobalOptionsMeta">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.structure.global_options.</span></span><span class="sig-name descname"><span class="pre">GlobalOptionsMeta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bases</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.global_options.GlobalOptionsMeta" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code></p>
<p>Metaclass for <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a></p>
<p>This class is itself an instance of <a class="reference internal" href="#sage.structure.global_options.GlobalOptionsMetaMeta" title="sage.structure.global_options.GlobalOptionsMetaMeta"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalOptionsMetaMeta</span></code></a>,
which implements the subclass magic.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.structure.global_options.GlobalOptionsMetaMeta">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.structure.global_options.</span></span><span class="sig-name descname"><span class="pre">GlobalOptionsMetaMeta</span></span><a class="headerlink" href="#sage.structure.global_options.GlobalOptionsMetaMeta" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.structure.global_options.Option">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.structure.global_options.</span></span><span class="sig-name descname"><span class="pre">Option</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sage.structure.global_options.Option" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An option.</p>
<p>Each option for an options class is an instance of this class which
implements the magic that allows the options to the attributes of the
options class that can be looked up, set and called.</p>
<p>By way of example, this class implements the following functionality.</p>
<p>EXAMPLES:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">Partitions</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span>
<span class="go">list</span>
<span class="gp">sage: </span><span class="n">Partitions</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">=</span><span class="s1">&#39;compact&#39;</span>
<span class="gp">sage: </span><span class="n">Partitions</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">Partitions</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">_reset</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="parent_old.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Base class for old-style parent objects</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="nonexact.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Precision management for non-exact objects</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2005--2023, The Sage Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Global options</a><ul>
<li><a class="reference internal" href="#construction-of-options-classes">Construction of options classes</a></li>
<li><a class="reference internal" href="#accessing-and-setting-option-values">Accessing and setting option values</a></li>
<li><a class="reference internal" href="#setter-functions">Setter functions</a></li>
<li><a class="reference internal" href="#documentation-for-options">Documentation for options</a></li>
<li><a class="reference internal" href="#dispatchers">Dispatchers</a></li>
<li><a class="reference internal" href="#doc-testing">Doc testing</a></li>
<li><a class="reference internal" href="#pickling">Pickling</a></li>
<li><a class="reference internal" href="#sage.structure.global_options.GlobalOptions"><code class="docutils literal notranslate"><span class="pre">GlobalOptions</span></code></a></li>
<li><a class="reference internal" href="#sage.structure.global_options.GlobalOptionsMeta"><code class="docutils literal notranslate"><span class="pre">GlobalOptionsMeta</span></code></a></li>
<li><a class="reference internal" href="#sage.structure.global_options.GlobalOptionsMetaMeta"><code class="docutils literal notranslate"><span class="pre">GlobalOptionsMetaMeta</span></code></a></li>
<li><a class="reference internal" href="#sage.structure.global_options.Option"><code class="docutils literal notranslate"><span class="pre">Option</span></code></a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    </body>
</html>