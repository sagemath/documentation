<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Symbolic matrices &mdash; Sage Reference Manual v6.6: Matrices and Spaces of Matrices</title>
    
    <link rel="stylesheet" href="../../../_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '6.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="top" title="Sage Reference Manual v6.6: Matrices and Spaces of Matrices" href="../../index.html" />
    <link rel="next" title="Dense matrices over the integer ring" href="matrix_integer_dense.html" />
    <link rel="prev" title="Sparse matrices over \(\ZZ/n\ZZ\) for \(n\) small" href="matrix_modn_sparse.html" />
    <link rel="icon" href="../../../_static/sageicon.png" type="image/x-icon" />

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="matrix_integer_dense.html" title="Dense matrices over the integer ring"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="matrix_modn_sparse.html" title="Sparse matrices over \(\ZZ/n\ZZ\) for \(n\) small"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="../../index.html">Matrices and Spaces of Matrices</a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="symbolic-matrices">
<span id="sage-matrix-matrix-symbolic-dense"></span><h1>Symbolic matrices<a class="headerlink" href="#symbolic-matrices" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-sage.matrix.matrix_symbolic_dense"></span><p>Matrices with symbolic entries.  The underlying representation is a
pointer to a Maxima object.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="go">[0 1]</span>
<span class="go">[2 3]</span>
<span class="gp">sage: </span><span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">var</span><span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">))</span>
<span class="go">[t 0]</span>
<span class="go">[0 t]</span>
</pre></div>
</div>
<p>Arithmetic:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="o">-</span><span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="go">[ 0 -1]</span>
<span class="go">[-2 -3]</span>
<span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.</span><span class="o">.</span><span class="mi">4</span><span class="p">]);</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">m</span>
<span class="go">[  sqrt(2) 2*sqrt(2)]</span>
<span class="go">[3*sqrt(2) 4*sqrt(2)]</span>
<span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.</span><span class="o">.</span><span class="mi">4</span><span class="o">^</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">m</span> <span class="o">*</span> <span class="n">m</span>
<span class="go">[ 90 100 110 120]</span>
<span class="go">[202 228 254 280]</span>
<span class="go">[314 356 398 440]</span>
<span class="go">[426 484 542 600]</span>

<span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span> <span class="n">m</span>
<span class="go">[1]</span>
<span class="go">[2]</span>
<span class="go">[3]</span>
<span class="gp">sage: </span><span class="n">m</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span> <span class="o">*</span> <span class="n">m</span>
<span class="go">[14]</span>
</pre></div>
</div>
<p>Computing inverses:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">var</span><span class="p">(</span><span class="s">&#39;a,b,c,d&#39;</span><span class="p">))</span>
<span class="gp">sage: </span><span class="o">~</span><span class="n">M</span>
<span class="go">[1/a - b*c/(a^2*(b*c/a - d))           b/(a*(b*c/a - d))]</span>
<span class="go">[          c/(a*(b*c/a - d))              -1/(b*c/a - d)]</span>
<span class="gp">sage: </span><span class="p">(</span><span class="o">~</span><span class="n">M</span><span class="o">*</span><span class="n">M</span><span class="p">)</span><span class="o">.</span><span class="n">simplify_rational</span><span class="p">()</span>
<span class="go">[1 0]</span>
<span class="go">[0 1]</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">))</span> <span class="o">-</span> <span class="n">var</span><span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">(</span><span class="o">~</span><span class="n">M</span> <span class="o">*</span> <span class="n">M</span><span class="p">)</span><span class="o">.</span><span class="n">simplify_rational</span><span class="p">()</span>
<span class="go">[1 0 0]</span>
<span class="go">[0 1 0]</span>
<span class="go">[0 0 1]</span>

<span class="gp">sage: </span><span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">inverse</span><span class="p">()</span>
<span class="go">[1]</span>
<span class="gp">sage: </span><span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">inverse</span><span class="p">()</span>
<span class="go">[]</span>
<span class="gp">sage: </span><span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">inverse</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="nc">ArithmeticError</span>: <span class="n-Identifier">self must be a square matrix</span>
</pre></div>
</div>
<p>Transposition:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="n">e</span><span class="o">^</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">m</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="go">[sqrt(2)      pi]</span>
<span class="go">[     -1     e^2]</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">.T</span></tt> is a convenient shortcut for the transpose:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">m</span><span class="o">.</span><span class="n">T</span>
<span class="go">[sqrt(2)      pi]</span>
<span class="go">[     -1     e^2]</span>
</pre></div>
</div>
<p>Test pickling:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="n">e</span><span class="p">]);</span> <span class="n">m</span>
<span class="go">[sqrt(2)       3]</span>
<span class="go">[     pi       e]</span>
<span class="gp">sage: </span><span class="n">TestSuite</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>Comparison:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="n">e</span><span class="p">])</span>
<span class="gp">sage: </span><span class="nb">cmp</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="n">m</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="nb">cmp</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span><span class="mi">2</span><span class="p">,[</span><span class="mf">1.</span><span class="o">.</span><span class="mi">4</span><span class="p">]);</span> <span class="n">n</span> <span class="o">=</span> <span class="n">m</span><span class="o">^</span><span class="mi">2</span>
<span class="gp">sage: </span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="n">m</span><span class="o">+</span><span class="n">n</span><span class="p">)</span> <span class="o">-</span> <span class="n">exp</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="o">*</span><span class="n">exp</span><span class="p">(</span><span class="n">n</span><span class="p">))</span><span class="o">.</span><span class="n">simplify_rational</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span>       <span class="c"># indirect test</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Determinant:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">M</span><span class="o">.</span><span class="n">determinant</span><span class="p">()</span>
<span class="go">4*x - 6</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">M</span><span class="o">.</span><span class="n">det</span><span class="p">()</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="n">t</span> <span class="o">=</span> <span class="n">var</span><span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="o">-</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="n">M</span><span class="o">.</span><span class="n">det</span><span class="p">()</span>
<span class="go">cos(t)^2 + sin(t)^2</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">([[</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="gp">sage: </span><span class="n">det</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>
<span class="go">sqrt(x)</span>
</pre></div>
</div>
<p>Permanents:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">M</span><span class="o">.</span><span class="n">permanent</span><span class="p">()</span>
<span class="go">4*x + 6</span>
</pre></div>
</div>
<p>Rank:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">25</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">M</span><span class="o">.</span><span class="n">rank</span><span class="p">()</span>
<span class="go">2</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">25</span><span class="p">))</span> <span class="o">-</span> <span class="n">var</span><span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">M</span><span class="o">.</span><span class="n">rank</span><span class="p">()</span>
<span class="go">5</span>

<span class="go">.. warning::</span>

<span class="go">    :meth:`rank` may return the wrong answer if it cannot determine that a</span>
<span class="go">    matrix element that is equivalent to zero is indeed so.</span>
</pre></div>
</div>
<p>Copying symbolic matrices:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="n">e</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">n</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">m</span>
<span class="go">[sqrt(2)       3]</span>
<span class="go">[     pi       e]</span>
<span class="gp">sage: </span><span class="n">n</span>
<span class="go">[sin(1)      3]</span>
<span class="go">[    pi      e]</span>
</pre></div>
</div>
<p>Conversion to Maxima:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="n">e</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">m</span><span class="o">.</span><span class="n">_maxima_</span><span class="p">()</span>
<span class="go">matrix([sqrt(2),3],[%pi,%e])</span>
</pre></div>
</div>
<dl class="class">
<dt id="sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense">
<em class="property">class </em><tt class="descclassname">sage.matrix.matrix_symbolic_dense.</tt><tt class="descname">Matrix_symbolic_dense</tt><a class="headerlink" href="#sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="matrix_generic_dense.html#sage.matrix.matrix_generic_dense.Matrix_generic_dense" title="sage.matrix.matrix_generic_dense.Matrix_generic_dense"><tt class="xref py py-class docutils literal"><span class="pre">sage.matrix.matrix_generic_dense.Matrix_generic_dense</span></tt></a></p>
<p>See <tt class="xref py py-class docutils literal"><span class="pre">Matrix_generic_dense</span></tt> for documentation.</p>
<p>TESTS:</p>
<p>We check that the problem related to Trac #9049 is not an issue any
more:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">S</span><span class="o">.&lt;</span><span class="n">t</span><span class="o">&gt;=</span><span class="n">PolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">F</span><span class="o">.&lt;</span><span class="n">q</span><span class="o">&gt;=</span><span class="n">QQ</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="n">t</span><span class="o">^</span><span class="mi">4</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">&gt;=</span><span class="n">PolynomialRing</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">MatrixSpace</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.matrix.matrix_generic_dense</span> <span class="kn">import</span> <span class="n">Matrix_generic_dense</span>
<span class="gp">sage: </span><span class="n">Matrix_generic_dense</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="go">[x y]</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.arguments">
<tt class="descname">arguments</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.arguments" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tuple of the arguments that self can take.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">var</span><span class="p">(</span><span class="s">&#39;x,y,z&#39;</span><span class="p">)</span>
<span class="go">(x, y, z)</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">MatrixSpace</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">M</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">arguments</span><span class="p">()</span>
<span class="go">(x,)</span>
<span class="gp">sage: </span><span class="n">M</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">.</span><span class="n">arguments</span><span class="p">()</span>
<span class="go">(x,)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.charpoly">
<tt class="descname">charpoly</tt><big>(</big><em>var='x'</em>, <em>algorithm=None</em><big>)</big><a class="headerlink" href="#sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.charpoly" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the characteristic polynomial of self, using maxima.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">var</span><span class="p">(</span><span class="s">&#39;a,b,c,d&#39;</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">M</span><span class="o">.</span><span class="n">charpoly</span><span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">)</span>
<span class="go">t^2 + (-a - d)*t - b*c + a*d</span>
<span class="gp">sage: </span><span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.</span><span class="o">.</span><span class="mi">5</span><span class="o">^</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">charpoly</span><span class="p">()</span>
<span class="go">x^5 - 65*x^4 - 250*x^3</span>
</pre></div>
</div>
<p>TESTS:</p>
<p>The cached polynomial should be independent of the <tt class="docutils literal"><span class="pre">var</span></tt>
argument (<a class="reference external" href="http://trac.sagemath.org/12292">trac ticket #12292</a>). We check (indirectly) that the
second call uses the cached value by noting that its result is
not cached:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">MatrixSpace</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">M</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">^</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="go">&lt;type &#39;sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">A</span><span class="o">.</span><span class="n">charpoly</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
<span class="go">x^2 - 3*x - 2</span>
<span class="gp">sage: </span><span class="n">A</span><span class="o">.</span><span class="n">charpoly</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">)</span>
<span class="go">y^2 - 3*y - 2</span>
<span class="gp">sage: </span><span class="n">A</span><span class="o">.</span><span class="n">_cache</span><span class="p">[</span><span class="s">&#39;charpoly&#39;</span><span class="p">]</span>
<span class="go">x^2 - 3*x - 2</span>
</pre></div>
</div>
<p>Ensure the variable name of the polynomial does not conflict
with variables used within the matrix (<a class="reference external" href="http://trac.sagemath.org/14403">trac ticket #14403</a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">Matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="p">[[</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">x</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="n">x</span><span class="p">]])</span><span class="o">.</span><span class="n">charpoly</span><span class="p">()</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[x^(3/2) - x, -x - sqrt(x), 1]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.eigenvalues">
<tt class="descname">eigenvalues</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.eigenvalues" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the eigenvalues by solving the characteristic
polynomial in maxima</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span><span class="o">=</span><span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">eigenvalues</span><span class="p">()</span>
<span class="go">[-1/2*sqrt(33) + 5/2, 1/2*sqrt(33) + 5/2]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.eigenvectors_left">
<tt class="descname">eigenvectors_left</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.eigenvectors_left" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the left eigenvectors of a matrix.</p>
<p>For each distinct eigenvalue, returns a list of the form (e,V,n)
where e is the eigenvalue, V is a list of eigenvectors forming a
basis for the corresponding left eigenspace, and n is the
algebraic multiplicity of the eigenvalue.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">));</span> <span class="n">A</span>
<span class="go">[0 1 2]</span>
<span class="go">[3 4 5]</span>
<span class="go">[6 7 8]</span>
<span class="gp">sage: </span><span class="n">es</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">eigenvectors_left</span><span class="p">();</span> <span class="n">es</span>
<span class="go">[(-3*sqrt(6) + 6, [(1, -1/5*sqrt(6) + 4/5, -2/5*sqrt(3)*sqrt(2) + 3/5)], 1), (3*sqrt(6) + 6, [(1, 1/5*sqrt(6) + 4/5, 2/5*sqrt(3)*sqrt(2) + 3/5)], 1), (0, [(1, -2, 1)], 1)]</span>
<span class="gp">sage: </span><span class="nb">eval</span><span class="p">,</span> <span class="p">[</span><span class="n">evec</span><span class="p">],</span> <span class="n">mult</span> <span class="o">=</span> <span class="n">es</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">delta</span> <span class="o">=</span> <span class="nb">eval</span><span class="o">*</span><span class="n">evec</span> <span class="o">-</span> <span class="n">evec</span><span class="o">*</span><span class="n">A</span>
<span class="gp">sage: </span><span class="nb">abs</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">delta</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mf">1e-10</span>
<span class="go">abs(sqrt(1/25*(3*(2*sqrt(3)*sqrt(2) - 3)*(sqrt(6) - 2) + 16*sqrt(3)*sqrt(2) + 5*sqrt(6) - 54)^2 + 1/25*(3*(sqrt(6) - 2)*(sqrt(6) - 4) + 14*sqrt(3)*sqrt(2) + 4*sqrt(6) - 42)^2 + 144/25*(sqrt(3)*sqrt(2) - sqrt(6))^2)) &lt; (1.00000000000000e-10)</span>
<span class="gp">sage: </span><span class="nb">abs</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">delta</span><span class="p">))</span><span class="o">.</span><span class="n">n</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">1e-10</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">var</span><span class="p">(</span><span class="s">&#39;a,b,c,d&#39;</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">A</span><span class="o">.</span><span class="n">eigenvectors_left</span><span class="p">()</span>
<span class="go">[(1/2*a + 1/2*d - 1/2*sqrt(a^2 + 4*b*c - 2*a*d + d^2), [(1, -1/2*(a - d + sqrt(a^2 + 4*b*c - 2*a*d + d^2))/c)], 1), (1/2*a + 1/2*d + 1/2*sqrt(a^2 + 4*b*c - 2*a*d + d^2), [(1, -1/2*(a - d - sqrt(a^2 + 4*b*c - 2*a*d + d^2))/c)], 1)]</span>
<span class="gp">sage: </span><span class="n">es</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">eigenvectors_left</span><span class="p">();</span> <span class="n">es</span>
<span class="go">[(1/2*a + 1/2*d - 1/2*sqrt(a^2 + 4*b*c - 2*a*d + d^2), [(1, -1/2*(a - d + sqrt(a^2 + 4*b*c - 2*a*d + d^2))/c)], 1), (1/2*a + 1/2*d + 1/2*sqrt(a^2 + 4*b*c - 2*a*d + d^2), [(1, -1/2*(a - d - sqrt(a^2 + 4*b*c - 2*a*d + d^2))/c)], 1)]</span>
<span class="gp">sage: </span><span class="nb">eval</span><span class="p">,</span> <span class="p">[</span><span class="n">evec</span><span class="p">],</span> <span class="n">mult</span> <span class="o">=</span> <span class="n">es</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">delta</span> <span class="o">=</span> <span class="nb">eval</span><span class="o">*</span><span class="n">evec</span> <span class="o">-</span> <span class="n">evec</span><span class="o">*</span><span class="n">A</span>
<span class="gp">sage: </span><span class="n">delta</span><span class="o">.</span><span class="n">apply_map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">full_simplify</span><span class="p">())</span>
<span class="go">(0, 0)</span>
</pre></div>
</div>
<p>This routine calls Maxima and can struggle with even small matrices
with a few variables, such as a <span class="math">\(3\times 3\)</span> matrix with three variables.
However, if the entries are integers or rationals it can produce exact
values in a reasonable time.  These examples create 0-1 matrices from
the adjacency matrices of graphs and illustrate how the format and type
of the results differ when the base ring changes.  First for matrices
over the rational numbers, then the same matrix but viewed as a symbolic
matrix.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">G</span><span class="o">=</span><span class="n">graphs</span><span class="o">.</span><span class="n">CycleGraph</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">am</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">adjacency_matrix</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">spectrum</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">eigenvectors_left</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">qqbar_evalue</span> <span class="o">=</span> <span class="n">spectrum</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">qqbar_evalue</span><span class="p">)</span>
<span class="go">&lt;class &#39;sage.rings.qqbar.AlgebraicNumber&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">qqbar_evalue</span>
<span class="go">0.618033988749895?</span>

<span class="gp">sage: </span><span class="n">am</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">adjacency_matrix</span><span class="p">()</span><span class="o">.</span><span class="n">change_ring</span><span class="p">(</span><span class="n">SR</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">spectrum</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">eigenvectors_left</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">symbolic_evalue</span> <span class="o">=</span> <span class="n">spectrum</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">symbolic_evalue</span><span class="p">)</span>
<span class="go">&lt;type &#39;sage.symbolic.expression.Expression&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">symbolic_evalue</span>
<span class="go">1/2*sqrt(5) - 1/2</span>

<span class="gp">sage: </span><span class="n">qqbar_evalue</span> <span class="o">==</span> <span class="n">symbolic_evalue</span>
<span class="go">True</span>
</pre></div>
</div>
<p>A slightly larger matrix with a &#8220;nice&#8221; spectrum.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">G</span><span class="o">=</span><span class="n">graphs</span><span class="o">.</span><span class="n">CycleGraph</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">am</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">adjacency_matrix</span><span class="p">()</span><span class="o">.</span><span class="n">change_ring</span><span class="p">(</span><span class="n">SR</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">am</span><span class="o">.</span><span class="n">eigenvectors_left</span><span class="p">()</span>
<span class="go">[(-1, [(1, 0, -1, 1, 0, -1), (0, 1, -1, 0, 1, -1)], 2), (1, [(1, 0, -1, -1, 0, 1), (0, 1, 1, 0, -1, -1)], 2), (-2, [(1, -1, 1, -1, 1, -1)], 1), (2, [(1, 1, 1, 1, 1, 1)], 1)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.eigenvectors_right">
<tt class="descname">eigenvectors_right</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.eigenvectors_right" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the right eigenvectors of a matrix.</p>
<p>For each distinct eigenvalue, returns a list of the form (e,V,n)
where e is the eigenvalue, V is a list of eigenvectors forming a
basis for the corresponding right eigenspace, and n is the
algebraic multiplicity of the eigenvalue.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span> <span class="n">A</span>
<span class="go">[0 1]</span>
<span class="go">[2 3]</span>
<span class="gp">sage: </span><span class="n">right</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">eigenvectors_right</span><span class="p">();</span> <span class="n">right</span>
<span class="go">[(-1/2*sqrt(17) + 3/2, [(1, -1/2*sqrt(17) + 3/2)], 1), (1/2*sqrt(17) + 3/2, [(1, 1/2*sqrt(17) + 3/2)], 1)]</span>
</pre></div>
</div>
<p>The right eigenvectors are nothing but the left eigenvectors of the
transpose matrix:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">left</span>  <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">eigenvectors_left</span><span class="p">();</span> <span class="n">left</span>
<span class="go">[(-1/2*sqrt(17) + 3/2, [(1, -1/2*sqrt(17) + 3/2)], 1), (1/2*sqrt(17) + 3/2, [(1, 1/2*sqrt(17) + 3/2)], 1)]</span>
<span class="gp">sage: </span><span class="n">right</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">left</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.exp">
<tt class="descname">exp</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.exp" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the matrix exponential of this matrix <span class="math">\(X\)</span>, which is the matrix</p>
<div class="math">
\[e^X = \sum_{k=0}^{\infty} \frac{X^k}{k!}.\]</div>
<p>This function depends on maxima&#8217;s matrix exponentiation
function, which does not deal well with floating point
numbers.  If the matrix has floating point numbers, they will
be rounded automatically to rational numbers during the
computation.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="mi">0</span><span class="p">]);</span> <span class="n">m</span>
<span class="go">[0 x]</span>
<span class="go">[x 0]</span>
<span class="gp">sage: </span><span class="n">m</span><span class="o">.</span><span class="n">exp</span><span class="p">()</span>
<span class="go">[1/2*(e^(2*x) + 1)*e^(-x) 1/2*(e^(2*x) - 1)*e^(-x)]</span>
<span class="go">[1/2*(e^(2*x) - 1)*e^(-x) 1/2*(e^(2*x) + 1)*e^(-x)]</span>
<span class="gp">sage: </span><span class="n">exp</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">[1/2*(e^(2*x) + 1)*e^(-x) 1/2*(e^(2*x) - 1)*e^(-x)]</span>
<span class="go">[1/2*(e^(2*x) - 1)*e^(-x) 1/2*(e^(2*x) + 1)*e^(-x)]</span>
</pre></div>
</div>
<p>Exp works on 0x0 and 1x1 matrices:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span><span class="mi">0</span><span class="p">,[]);</span> <span class="n">m</span>
<span class="go">[]</span>
<span class="gp">sage: </span><span class="n">m</span><span class="o">.</span><span class="n">exp</span><span class="p">()</span>
<span class="go">[]</span>
<span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span><span class="mi">1</span><span class="p">,[</span><span class="mi">2</span><span class="p">]);</span> <span class="n">m</span>
<span class="go">[2]</span>
<span class="gp">sage: </span><span class="n">m</span><span class="o">.</span><span class="n">exp</span><span class="p">()</span>
<span class="go">[e^2]</span>
</pre></div>
</div>
<p>Commuting matrices <span class="math">\(m, n\)</span> have the property that
<span class="math">\(e^{m+n} = e^m e^n\)</span> (but non-commuting matrices need not):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span><span class="mi">2</span><span class="p">,[</span><span class="mf">1.</span><span class="o">.</span><span class="mi">4</span><span class="p">]);</span> <span class="n">n</span> <span class="o">=</span> <span class="n">m</span><span class="o">^</span><span class="mi">2</span>
<span class="gp">sage: </span><span class="n">m</span><span class="o">*</span><span class="n">n</span>
<span class="go">[ 37  54]</span>
<span class="go">[ 81 118]</span>
<span class="gp">sage: </span><span class="n">n</span><span class="o">*</span><span class="n">m</span>
<span class="go">[ 37  54]</span>
<span class="go">[ 81 118]</span>

<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">exp</span><span class="p">(</span><span class="n">m</span><span class="o">+</span><span class="n">n</span><span class="p">)</span> <span class="o">-</span> <span class="n">exp</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="o">*</span><span class="n">exp</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">simplify_rational</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span>
<span class="go">True</span>
</pre></div>
</div>
<p>The input matrix must be square:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,[</span><span class="mf">1.</span><span class="o">.</span><span class="mi">6</span><span class="p">]);</span> <span class="n">exp</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="nc">ValueError</span>: <span class="n-Identifier">exp only defined on square matrices</span>
</pre></div>
</div>
<p>In this example we take the symbolic answer and make it
numerical at the end:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">exp</span><span class="p">(</span><span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="p">[[</span><span class="mf">1.2</span><span class="p">,</span> <span class="mf">5.6</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]]))</span><span class="o">.</span><span class="n">change_ring</span><span class="p">(</span><span class="n">RDF</span><span class="p">)</span>  <span class="c"># rel tol 1e-15</span>
<span class="go">[ 346.5574872980695  661.7345909344504]</span>
<span class="go">[354.50067371488416  677.4247827652946]</span>
</pre></div>
</div>
<p>Another example involving the reversed identity matrix, which
we clumsily create:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span> <span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">rows</span><span class="p">())))</span> <span class="o">*</span> <span class="n">x</span>
<span class="gp">sage: </span><span class="n">exp</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">[1/2*(e^(2*x) + 1)*e^(-x)                        0                        0 1/2*(e^(2*x) - 1)*e^(-x)]</span>
<span class="go">[                       0 1/2*(e^(2*x) + 1)*e^(-x) 1/2*(e^(2*x) - 1)*e^(-x)                        0]</span>
<span class="go">[                       0 1/2*(e^(2*x) - 1)*e^(-x) 1/2*(e^(2*x) + 1)*e^(-x)                        0]</span>
<span class="go">[1/2*(e^(2*x) - 1)*e^(-x)                        0                        0 1/2*(e^(2*x) + 1)*e^(-x)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.expand">
<tt class="descname">expand</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.expand" title="Permalink to this definition">¶</a></dt>
<dd><p>Operates point-wise on each element.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span> <span class="o">-</span> <span class="n">var</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">M</span><span class="o">*</span><span class="n">M</span>
<span class="go">[      x^2 + 2      -2*x + 3]</span>
<span class="go">[     -4*x + 6 (x - 3)^2 + 2]</span>
<span class="gp">sage: </span><span class="p">(</span><span class="n">M</span><span class="o">*</span><span class="n">M</span><span class="p">)</span><span class="o">.</span><span class="n">expand</span><span class="p">()</span>
<span class="go">[       x^2 + 2       -2*x + 3]</span>
<span class="go">[      -4*x + 6 x^2 - 6*x + 11]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.factor">
<tt class="descname">factor</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.factor" title="Permalink to this definition">¶</a></dt>
<dd><p>Operates point-wise on each element.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="o">^</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span> <span class="n">M</span>
<span class="go">[x^2 - 2*x + 1             0]</span>
<span class="go">[            0 x^2 - 2*x + 1]</span>
<span class="gp">sage: </span><span class="n">M</span><span class="o">.</span><span class="n">factor</span><span class="p">()</span>
<span class="go">[(x - 1)^2         0]</span>
<span class="go">[        0 (x - 1)^2]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.fcp">
<tt class="descname">fcp</tt><big>(</big><em>var='x'</em><big>)</big><a class="headerlink" href="#sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.fcp" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the factorization of the characteristic polynomial of self.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">var</span></tt> - (default: &#8216;x&#8217;) name of variable of charpoly</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">fcp</span><span class="p">()</span>
<span class="go">x^2 - 5*x - 2</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">fcp</span><span class="p">()]</span>
<span class="go">[(x^2 - 5*x - 2, 1)]</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">]])</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">fcp</span><span class="p">()</span>
<span class="go">(x - 2) * (x - 1)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">fcp</span><span class="p">()]</span>
<span class="go">[(x - 2, 1), (x - 1, 1)]</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.</span><span class="o">.</span><span class="mi">5</span><span class="o">^</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">fcp</span><span class="p">()</span>
<span class="go">(x^2 - 65*x - 250) * x^3</span>
<span class="gp">sage: </span><span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">fcp</span><span class="p">())</span>
<span class="go">[(x^2 - 65*x - 250, 1), (x, 3)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.number_of_arguments">
<tt class="descname">number_of_arguments</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.number_of_arguments" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of arguments that self can take.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">var</span><span class="p">(</span><span class="s">&#39;a,b,c,x,y&#39;</span><span class="p">)</span>
<span class="go">(a, b, c, x, y)</span>
<span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">([[</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)],</span> <span class="p">[</span><span class="n">x</span><span class="o">^</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">^</span><span class="mi">2</span><span class="o">+</span><span class="mi">2</span><span class="p">]]);</span> <span class="n">m</span>
<span class="go">[      a       1]</span>
<span class="go">[    x^2 y^2 + 2]</span>
<span class="gp">sage: </span><span class="n">m</span><span class="o">.</span><span class="n">number_of_arguments</span><span class="p">()</span>
<span class="go">3</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.simplify">
<tt class="descname">simplify</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.simplify" title="Permalink to this definition">¶</a></dt>
<dd><p>Simplifies self.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">var</span><span class="p">(</span><span class="s">&#39;x,y,z&#39;</span><span class="p">)</span>
<span class="go">(x, y, z)</span>
<span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">([[</span><span class="n">z</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)],</span> <span class="p">[</span><span class="n">x</span><span class="o">^</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">^</span><span class="mi">2</span><span class="o">+</span><span class="mi">2</span><span class="p">]]);</span> <span class="n">m</span>
<span class="go">[      z       1]</span>
<span class="go">[    x^2 y^2 + 2]</span>
<span class="gp">sage: </span><span class="n">m</span><span class="o">.</span><span class="n">simplify</span><span class="p">()</span>
<span class="go">[      z       1]</span>
<span class="go">[    x^2 y^2 + 2]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.simplify_rational">
<tt class="descname">simplify_rational</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.simplify_rational" title="Permalink to this definition">¶</a></dt>
<dd><p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">))</span> <span class="o">-</span> <span class="n">var</span><span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">(</span><span class="o">~</span><span class="n">M</span><span class="o">*</span><span class="n">M</span><span class="p">)[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="go">t*(3*(2/t + (6/t + 7)/((t - 3/t - 4)*t))*(2/t + (6/t + 5)/((t - 3/t</span>
<span class="go">- 4)*t))/(t - (6/t + 7)*(6/t + 5)/(t - 3/t - 4) - 12/t - 8) + 1/t +</span>
<span class="go">3/((t - 3/t - 4)*t^2)) - 6*(2/t + (6/t + 5)/((t - 3/t - 4)*t))/(t -</span>
<span class="go">(6/t + 7)*(6/t + 5)/(t - 3/t - 4) - 12/t - 8) - 3*(6/t + 7)*(2/t +</span>
<span class="go">(6/t + 5)/((t - 3/t - 4)*t))/((t - (6/t + 7)*(6/t + 5)/(t - 3/t -</span>
<span class="go">4) - 12/t - 8)*(t - 3/t - 4)) - 3/((t - 3/t - 4)*t)</span>
<span class="gp">sage: </span><span class="n">expand</span><span class="p">((</span><span class="o">~</span><span class="n">M</span><span class="o">*</span><span class="n">M</span><span class="p">)[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="go">1</span>
<span class="gp">sage: </span><span class="p">(</span><span class="o">~</span><span class="n">M</span> <span class="o">*</span> <span class="n">M</span><span class="p">)</span><span class="o">.</span><span class="n">simplify_rational</span><span class="p">()</span>
<span class="go">[1 0 0]</span>
<span class="go">[0 1 0]</span>
<span class="go">[0 0 1]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.simplify_trig">
<tt class="descname">simplify_trig</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.simplify_trig" title="Permalink to this definition">¶</a></dt>
<dd><p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">theta</span> <span class="o">=</span> <span class="n">var</span><span class="p">(</span><span class="s">&#39;theta&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">SR</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">),</span> <span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">),</span> <span class="o">-</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">),</span> <span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="o">~</span><span class="n">M</span>
<span class="go">[1/cos(theta) - sin(theta)^2/((sin(theta)^2/cos(theta) + cos(theta))*cos(theta)^2)                   -sin(theta)/((sin(theta)^2/cos(theta) + cos(theta))*cos(theta))]</span>
<span class="go">[                   sin(theta)/((sin(theta)^2/cos(theta) + cos(theta))*cos(theta))                                          1/(sin(theta)^2/cos(theta) + cos(theta))]</span>
<span class="gp">sage: </span><span class="p">(</span><span class="o">~</span><span class="n">M</span><span class="p">)</span><span class="o">.</span><span class="n">simplify_trig</span><span class="p">()</span>
<span class="go">[ cos(theta) -sin(theta)]</span>
<span class="go">[ sin(theta)  cos(theta)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.variables">
<tt class="descname">variables</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.matrix.matrix_symbolic_dense.Matrix_symbolic_dense.variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the variables of self.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">var</span><span class="p">(</span><span class="s">&#39;a,b,c,x,y&#39;</span><span class="p">)</span>
<span class="go">(a, b, c, x, y)</span>
<span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">([[</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">+</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="n">x</span><span class="o">^</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="o">^</span><span class="mi">2</span><span class="o">+</span><span class="mi">2</span><span class="p">]]);</span> <span class="n">m</span>
<span class="go">[      x   x + 2]</span>
<span class="go">[    x^2 x^2 + 2]</span>
<span class="gp">sage: </span><span class="n">m</span><span class="o">.</span><span class="n">variables</span><span class="p">()</span>
<span class="go">(x,)</span>
<span class="gp">sage: </span><span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">([[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">+</span><span class="n">c</span><span class="p">],</span> <span class="p">[</span><span class="n">x</span><span class="o">^</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="o">^</span><span class="mi">2</span><span class="o">+</span><span class="mi">2</span><span class="p">]]);</span> <span class="n">m</span>
<span class="go">[      a   b + c]</span>
<span class="go">[    x^2 y^2 + 2]</span>
<span class="gp">sage: </span><span class="n">m</span><span class="o">.</span><span class="n">variables</span><span class="p">()</span>
<span class="go">(a, b, c, x, y)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h4>Previous topic</h4>
            <p class="topless"><a href="matrix_modn_sparse.html"
                                  title="previous chapter">Sparse matrices over <span class="math">\(\ZZ/n\ZZ\)</span> for <span class="math">\(n\)</span> small</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="matrix_integer_dense.html"
                                  title="next chapter">Dense matrices over the integer ring</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/sage/matrix/matrix_symbolic_dense.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../../../search.html" method="get">
                <input type="text" name="q" size="18" />
               <!-- The shading of the "Go" button should be consistent -->
               <!-- with the colour of the header and footer. See the file -->
               <!-- doc/common/themes/sage/theme.conf for colours used by -->
               <!-- the Sage theme. -->
                <input type="submit" style="background-color: #B8B9F6" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="matrix_integer_dense.html" title="Dense matrices over the integer ring"
             >next</a> |</li>
        <li class="right" >
          <a href="matrix_modn_sparse.html" title="Sparse matrices over \(\ZZ/n\ZZ\) for \(n\) small"
             >previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="../../index.html">Matrices and Spaces of Matrices</a> &raquo;</li>
 
      </ul>
    </div>
    
    <div class="footer">
        &copy; Copyright 2005--2015, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
  </body>
</html>