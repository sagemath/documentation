
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="viewport" content="width=600, initial-scale=1">
    <title>Programming &#8212; Sage Tutorial v9.3</title>
    <link rel="stylesheet" href="_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using SageTeX" href="sagetex.html" />
    <link rel="prev" title="Sage, LaTeX and Friends" href="latex.html" />
    <link rel="icon" href="_static/sageicon.png" type="image/x-icon" />
    <script src="_static/thebe.js" type="text/javascript"></script>
    <script src="_static/thebe-sage.js" type="text/javascript"></script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="sagetex.html" title="Using SageTeX"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="latex.html" title="Sage, LaTeX and Friends"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../index.html"><img src="_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="index.html">Sage Tutorial v9.3</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Programming</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="programming">
<h1>Programming<a class="headerlink" href="#programming" title="Permalink to this headline">¶</a></h1>
<div class="section" id="loading-and-attaching-sage-files">
<span id="section-loadattach"></span><h2>Loading and Attaching Sage files<a class="headerlink" href="#loading-and-attaching-sage-files" title="Permalink to this headline">¶</a></h2>
<p>Next we illustrate how to load programs written in a separate file
into Sage. Create a file called <code class="docutils literal notranslate"><span class="pre">example.sage</span></code> with the following
content:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="mi">2</span><span class="o">^</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>You can read in and execute <code class="docutils literal notranslate"><span class="pre">example.sage</span></code> file using the <code class="docutils literal notranslate"><span class="pre">load</span></code>
command.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;example.sage&quot;</span><span class="p">)</span>
<span class="go">Hello World</span>
<span class="go">8</span>
</pre></div>
</div>
<p>You can also attach a Sage file to a running session using the
<code class="docutils literal notranslate"><span class="pre">attach</span></code> command:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">attach</span><span class="p">(</span><span class="s2">&quot;example.sage&quot;</span><span class="p">)</span>
<span class="go">Hello World</span>
<span class="go">8</span>
</pre></div>
</div>
<p>Now if you change <code class="docutils literal notranslate"><span class="pre">example.sage</span></code> and enter one blank line into Sage
(i.e., hit <code class="docutils literal notranslate"><span class="pre">return</span></code>), then the contents of <code class="docutils literal notranslate"><span class="pre">example.sage</span></code> will be
automatically reloaded into Sage.</p>
<p>In particular, <code class="docutils literal notranslate"><span class="pre">attach</span></code> automatically reloads a file whenever it
changes, which is handy when debugging code, whereas <code class="docutils literal notranslate"><span class="pre">load</span></code> only
loads a file once.</p>
<p>When Sage loads <code class="docutils literal notranslate"><span class="pre">example.sage</span></code> it converts it to Python, which is
then executed by the Python interpreter. This conversion is
minimal; it mainly involves wrapping integer literals in <code class="docutils literal notranslate"><span class="pre">Integer()</span></code>
floating point literals in <code class="docutils literal notranslate"><span class="pre">RealNumber()</span></code>, replacing <code class="docutils literal notranslate"><span class="pre">^</span></code>’s by <code class="docutils literal notranslate"><span class="pre">**</span></code>’s,
and replacing e.g., <code class="docutils literal notranslate"><span class="pre">R.2</span></code> by <code class="docutils literal notranslate"><span class="pre">R.gen(2)</span></code>. The converted version of
<code class="docutils literal notranslate"><span class="pre">example.sage</span></code> is contained in the same directory as <code class="docutils literal notranslate"><span class="pre">example.sage</span></code>
and is called <code class="docutils literal notranslate"><span class="pre">example.sage.py</span></code>. This file contains the following
code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="n">Integer</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<p>Integer literals are wrapped and the <code class="docutils literal notranslate"><span class="pre">^</span></code> is replaced by a <code class="docutils literal notranslate"><span class="pre">**</span></code>.
(In Python <code class="docutils literal notranslate"><span class="pre">^</span></code> means “exclusive or” and <code class="docutils literal notranslate"><span class="pre">**</span></code> means
“exponentiation”.)</p>
<p>(This preparsing is implemented in <code class="docutils literal notranslate"><span class="pre">sage/misc/interpreter.py</span></code>.)</p>
<p>You can paste multi-line indented code into Sage as long as there
are newlines to make new blocks (this is not necessary in files).
However, the best way to enter such code into Sage is to save it to
a file and use <code class="docutils literal notranslate"><span class="pre">attach</span></code>, as described above.</p>
</div>
<div class="section" id="creating-compiled-code">
<span id="section-compile"></span><h2>Creating Compiled Code<a class="headerlink" href="#creating-compiled-code" title="Permalink to this headline">¶</a></h2>
<p>Speed is crucial in mathematical computations. Though Python is a
convenient very high-level language, certain calculations can be
several orders of magnitude faster than in Python if they are
implemented using static types in a compiled language. Some aspects
of Sage would have been too slow if it had been written entirely in
Python. To deal with this, Sage supports a compiled “version” of Python
called Cython (<a class="reference internal" href="bibliography.html#cyt" id="id1"><span>[Cyt]</span></a> and <a class="reference internal" href="bibliography.html#pyr" id="id2"><span>[Pyr]</span></a>). Cython is simultaneously
similar to both Python and C. Most Python constructions, including
list comprehensions, conditional expressions, code like <code class="docutils literal notranslate"><span class="pre">+=</span></code> are
allowed; you can also import code that you have written in other
Python modules. Moreover, you can declare arbitrary C variables,
and arbitrary C library calls can be made directly. The resulting
code is converted to C and compiled using a C compiler.</p>
<p>In order to make your own compiled Sage code, give the file an
<code class="docutils literal notranslate"><span class="pre">.spyx</span></code> extension (instead of <code class="docutils literal notranslate"><span class="pre">.sage</span></code>). If you are working with the
command-line interface, you can attach and load compiled code
exactly like with interpreted code (at the moment, attaching and
loading Cython code is not supported with the notebook interface).
The actual compilation is done “behind the scenes” without your
having to do anything explicit. The compiled shared object library is stored under
<code class="docutils literal notranslate"><span class="pre">$HOME/.sage/temp/hostname/pid/spyx</span></code>. These files are deleted
when you exit Sage.</p>
<p>NO Sage preparsing is applied to spyx files, e.g., <code class="docutils literal notranslate"><span class="pre">1/3</span></code> will result in
0 in a spyx file instead of the rational number <span class="math notranslate nohighlight">\(1/3\)</span>. If
<code class="docutils literal notranslate"><span class="pre">foo</span></code> is a function in the Sage library, to use it from a spyx file
import <code class="docutils literal notranslate"><span class="pre">sage.all</span></code> and use <code class="docutils literal notranslate"><span class="pre">sage.all.foo</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sage.all</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">sage</span><span class="o">.</span><span class="n">all</span><span class="o">.</span><span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="accessing-c-functions-in-separate-files">
<h3>Accessing C Functions in Separate Files<a class="headerlink" href="#accessing-c-functions-in-separate-files" title="Permalink to this headline">¶</a></h3>
<p>It is also easy to access C functions defined in separate *.c
files. Here’s an example. Create files <code class="docutils literal notranslate"><span class="pre">test.c</span></code> and <code class="docutils literal notranslate"><span class="pre">test.spyx</span></code>
in the same directory with contents:</p>
<p>The pure C code: <code class="docutils literal notranslate"><span class="pre">test.c</span></code></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">add_one</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The Cython code: <code class="docutils literal notranslate"><span class="pre">test.spyx</span></code>:</p>
<div class="highlight-cython notranslate"><div class="highlight"><pre><span></span><span class="k">cdef</span> <span class="kr">extern</span> <span class="k">from</span> <span class="s">&quot;test.c&quot;</span><span class="p">:</span>
    <span class="nb">int</span> <span class="n">add_one</span><span class="p">(</span><span class="nb">int</span> <span class="n">n</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">add_one</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
<p>Then the following works:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">attach</span><span class="p">(</span><span class="s2">&quot;test.spyx&quot;</span><span class="p">)</span>
<span class="go">Compiling (...)/test.spyx...</span>
<span class="gp">sage: </span><span class="n">test</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">11</span>
</pre></div>
</div>
<p>If an additional library <code class="docutils literal notranslate"><span class="pre">foo</span></code> is needed to compile the C code
generated from a Cython file, add the line <code class="docutils literal notranslate"><span class="pre">clib</span> <span class="pre">foo</span></code> to the
Cython source. Similarly, an additional C file <code class="docutils literal notranslate"><span class="pre">bar</span></code> can be
included in the compilation with the declaration <code class="docutils literal notranslate"><span class="pre">cfile</span> <span class="pre">bar</span></code>.</p>
</div>
</div>
<div class="section" id="standalone-python-sage-scripts">
<span id="section-standalone"></span><h2>Standalone Python/Sage Scripts<a class="headerlink" href="#standalone-python-sage-scripts" title="Permalink to this headline">¶</a></h2>
<p>The following standalone Sage script factors integers, polynomials,
etc:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env sage</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Usage: </span><span class="si">%s</span><span class="s2"> &lt;n&gt;&quot;</span> <span class="o">%</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Outputs the prime factorization of n.&quot;</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">factor</span><span class="p">(</span><span class="n">sage_eval</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
</pre></div>
</div>
<p>In order to use this script, your <code class="docutils literal notranslate"><span class="pre">SAGE_ROOT</span></code> must be in your PATH.
If the above script is called <code class="docutils literal notranslate"><span class="pre">factor</span></code>, here is an example usage:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ./factor <span class="m">2006</span>
<span class="go">2 * 17 * 59</span>
</pre></div>
</div>
</div>
<div class="section" id="data-types">
<h2>Data Types<a class="headerlink" href="#data-types" title="Permalink to this headline">¶</a></h2>
<p>Every object in Sage has a well-defined type. Python
has a wide range of basic built-in types, and the Sage library adds many
more. Some built-in Python types include strings, lists, tuples,
ints and floats, as illustrated:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;sage&quot;</span><span class="p">;</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&lt;... &#39;str&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;sage&#39;</span><span class="p">;</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>      <span class="c1"># you can use either single or double quotes</span>
<span class="go">&lt;... &#39;str&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">];</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&lt;... &#39;list&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&lt;... &#39;tuple&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">2006</span><span class="p">);</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&lt;... &#39;int&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">2006</span><span class="p">);</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&lt;... &#39;float&#39;&gt;</span>
</pre></div>
</div>
<p>To this, Sage adds many other types. E.g., vector spaces:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">V</span> <span class="o">=</span> <span class="n">VectorSpace</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="mi">1000000</span><span class="p">);</span> <span class="n">V</span>
<span class="go">Vector space of dimension 1000000 over Rational Field</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>
<span class="go">&lt;class &#39;sage.modules.free_module.FreeModule_ambient_field_with_category&#39;&gt;</span>
</pre></div>
</div>
<p>Only certain
functions can be called on <code class="docutils literal notranslate"><span class="pre">V</span></code>. In other math software
systems, these would be called using the “functional” notation
<code class="docutils literal notranslate"><span class="pre">foo(V,...)</span></code>. In Sage, certain functions are attached to the type (or
class) of  <code class="docutils literal notranslate"><span class="pre">V</span></code>, and are called using an object-oriented
syntax like in Java or C++, e.g., <code class="docutils literal notranslate"><span class="pre">V.foo(...)</span></code>. This helps keep the
global namespace from being polluted with tens of thousands of
functions, and means that many different functions with different
behavior can be named foo, without having to use type-checking of
arguments (or case statements) to decide which to call. Also, if
you reuse the name of a function, that function is still available
(e.g., if you call something <code class="docutils literal notranslate"><span class="pre">zeta</span></code>, then want to compute the value
of the Riemann-Zeta function at 0.5, you can still type
<code class="docutils literal notranslate"><span class="pre">s=.5;</span> <span class="pre">s.zeta()</span></code>).</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">zeta</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="gp">sage: </span><span class="n">s</span><span class="o">=.</span><span class="mi">5</span><span class="p">;</span> <span class="n">s</span><span class="o">.</span><span class="n">zeta</span><span class="p">()</span>
<span class="go">-1.46035450880959</span>
</pre></div>
</div>
<p>In some very common cases, the usual functional notation is also
supported for convenience and because mathematical expressions
might look confusing using object-oriented notation. Here are some
examples.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">n</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">n</span><span class="o">.</span><span class="n">sqrt</span><span class="p">()</span>
<span class="go">sqrt(2)</span>
<span class="gp">sage: </span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">sqrt(2)</span>
<span class="gp">sage: </span><span class="n">V</span> <span class="o">=</span> <span class="n">VectorSpace</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">V</span><span class="o">.</span><span class="n">basis</span><span class="p">()</span>
<span class="go">    [</span>
<span class="go">    (1, 0),</span>
<span class="go">    (0, 1)</span>
<span class="go">    ]</span>
<span class="gp">sage: </span><span class="n">basis</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>
<span class="go">    [</span>
<span class="go">    (1, 0),</span>
<span class="go">    (0, 1)</span>
<span class="go">    ]</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">MatrixSpace</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span> <span class="n">M</span>
<span class="go">Full MatrixSpace of 2 by 2 dense matrices over Finite Field of size 7</span>
<span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">M</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]);</span> <span class="n">A</span>
<span class="go">[1 2]</span>
<span class="go">[3 4]</span>
<span class="gp">sage: </span><span class="n">A</span><span class="o">.</span><span class="n">charpoly</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="go">x^2 + 2*x + 5</span>
<span class="gp">sage: </span><span class="n">charpoly</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="go">x^2 + 2*x + 5</span>
</pre></div>
</div>
<p>To list all member functions for <span class="math notranslate nohighlight">\(A\)</span>, use tab completion.
Just type <code class="docutils literal notranslate"><span class="pre">A.</span></code>, then type the <code class="docutils literal notranslate"><span class="pre">[tab]</span></code> key on your keyboard, as
explained in <a class="reference internal" href="interactive_shell.html#section-tabcompletion"><span class="std std-ref">Reverse Search and Tab Completion</span></a>.</p>
</div>
<div class="section" id="lists-tuples-and-sequences">
<h2>Lists, Tuples, and Sequences<a class="headerlink" href="#lists-tuples-and-sequences" title="Permalink to this headline">¶</a></h2>
<p>The list data type stores elements of arbitrary type. Like in C,
C++, etc. (but unlike most standard computer algebra systems), the
elements of the list are indexed starting from <span class="math notranslate nohighlight">\(0\)</span>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">SymmetricGroup</span><span class="p">(</span><span class="mi">3</span><span class="p">)];</span> <span class="n">v</span>
<span class="go">[2, 3, 5, &#39;x&#39;, Symmetric group of order 3! as a permutation group]</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="go">&lt;... &#39;list&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">2</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="go">5</span>
</pre></div>
</div>
<p>(When indexing into a list, it is OK if the index is
not a Python int!)
A Sage Integer (or Rational, or anything with an <code class="docutils literal notranslate"><span class="pre">__index__</span></code> method)
will work just fine.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="go">3</span>
<span class="gp">sage: </span><span class="n">n</span> <span class="o">=</span> <span class="mi">2</span>      <span class="c1"># Sage Integer</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>       <span class="c1"># Perfectly OK!</span>
<span class="go">3</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>  <span class="c1"># Also OK.</span>
<span class="go">3</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">range</span></code> function creates a list of Python int’s (not Sage
Integers):</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>  <span class="c1"># py2</span>
<span class="go">[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]</span>
</pre></div>
</div>
<p>This is useful when using list comprehensions to construct lists:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="n">factor</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">)]</span>
<span class="gp">sage: </span><span class="n">L</span>
<span class="go">[1, 2, 3, 2^2, 5, 2 * 3, 7, 2^3, 3^2, 2 * 5, 11, 2^2 * 3, 13, 2 * 7]</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span>
<span class="go">13</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">L</span><span class="p">[</span><span class="mi">12</span><span class="p">])</span>
<span class="go">&lt;class &#39;sage.structure.factorization_integer.IntegerFactorization&#39;&gt;</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">factor</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span> <span class="k">if</span> <span class="n">is_odd</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
<span class="go">[1, 3, 5, 7, 3^2, 11, 13]</span>
</pre></div>
</div>
<p>For more about how to create lists using list comprehensions, see
<a class="reference internal" href="bibliography.html#pyt" id="id3"><span>[PyT]</span></a>.</p>
<p>List slicing is a wonderful feature. If <code class="docutils literal notranslate"><span class="pre">L</span></code>
is a list, then <code class="docutils literal notranslate"><span class="pre">L[m:n]</span></code> returns the sublist of <code class="docutils literal notranslate"><span class="pre">L</span></code> obtained by
starting at the <span class="math notranslate nohighlight">\(m^{th}\)</span> element and stopping at the
<span class="math notranslate nohighlight">\((n-1)^{st}\)</span> element, as illustrated below.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="n">factor</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">)]</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">9</span><span class="p">]</span>
<span class="go">[5, 2 * 3, 7, 2^3, 3^2]</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
<span class="go">[1, 2, 3, 2^2]</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="mi">14</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="go">[]</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="mi">14</span><span class="p">:]</span>
<span class="go">[3 * 5, 2^4, 17, 2 * 3^2, 19]</span>
</pre></div>
</div>
<p>Tuples are similar to
lists, except they are immutable, meaning once they are created
they can’t be changed.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span> <span class="n">v</span>
<span class="go">(1, 2, 3, 4)</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="go">&lt;... &#39;tuple&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">TypeError: &#39;tuple&#39; object does not support item assignment</span>
</pre></div>
</div>
<p>Sequences are a third list-oriented Sage
type. Unlike lists and tuples, Sequence is not a built-in Python
type. By default, a sequence is mutable, but using the <code class="docutils literal notranslate"><span class="pre">Sequence</span></code>
class method <code class="docutils literal notranslate"><span class="pre">set_immutable</span></code>, it can be set to be immutable, as
the following example illustrates. All elements of a sequence have
a common parent, called the sequences universe.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="n">Sequence</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="o">/</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">v</span>
<span class="go">[1, 2, 3, 4/5]</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="go">&lt;class &#39;sage.structure.sequence.Sequence_generic&#39;&gt;</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">&lt;type &#39;sage.rings.rational.Rational&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">v</span><span class="o">.</span><span class="n">universe</span><span class="p">()</span>
<span class="go">Rational Field</span>
<span class="gp">sage: </span><span class="n">v</span><span class="o">.</span><span class="n">is_immutable</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">v</span><span class="o">.</span><span class="n">set_immutable</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: object is immutable; please change a copy instead.</span>
</pre></div>
</div>
<p>Sequences derive from lists and can be used anywhere a list can be
used:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="n">Sequence</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="o">/</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">sage: </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">list</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="go">[1, 2, 3, 4/5]</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
<span class="go">&lt;... &#39;list&#39;&gt;</span>
</pre></div>
</div>
<p>As another example, basis for vector spaces are immutable
sequences, since it’s important that you don’t change them.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">V</span> <span class="o">=</span> <span class="n">QQ</span><span class="o">^</span><span class="mi">3</span><span class="p">;</span> <span class="n">B</span> <span class="o">=</span> <span class="n">V</span><span class="o">.</span><span class="n">basis</span><span class="p">();</span> <span class="n">B</span>
<span class="go">[</span>
<span class="go">(1, 0, 0),</span>
<span class="go">(0, 1, 0),</span>
<span class="go">(0, 0, 1)</span>
<span class="go">]</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<span class="go">&lt;class &#39;sage.structure.sequence.Sequence_generic&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">B</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">B</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: object is immutable; please change a copy instead.</span>
<span class="gp">sage: </span><span class="n">B</span><span class="o">.</span><span class="n">universe</span><span class="p">()</span>
<span class="go">Vector space of dimension 3 over Rational Field</span>
</pre></div>
</div>
</div>
<div class="section" id="dictionaries">
<h2>Dictionaries<a class="headerlink" href="#dictionaries" title="Permalink to this headline">¶</a></h2>
<p>A dictionary (also sometimes called an associative array) is a
mapping from ‘hashable’ objects (e.g., strings, numbers, and tuples
of such; see the Python documentation
<a class="reference external" href="http://docs.python.org/tut/node7.html">http://docs.python.org/tut/node7.html</a> and
<a class="reference external" href="http://docs.python.org/lib/typesmapping.html">http://docs.python.org/lib/typesmapping.html</a> for details) to
arbitrary objects.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;sage&#39;</span><span class="p">:</span><span class="mi">17</span><span class="p">,</span> <span class="n">ZZ</span><span class="p">:</span><span class="n">GF</span><span class="p">(</span><span class="mi">7</span><span class="p">)}</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">&lt;... &#39;dict&#39;&gt;</span>
<span class="gp">sage: </span><span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="go">[1, &#39;sage&#39;, Integer Ring]</span>
<span class="gp">sage: </span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;sage&#39;</span><span class="p">]</span>
<span class="go">17</span>
<span class="gp">sage: </span><span class="n">d</span><span class="p">[</span><span class="n">ZZ</span><span class="p">]</span>
<span class="go">Finite Field of size 7</span>
<span class="gp">sage: </span><span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">5</span>
</pre></div>
</div>
<p>The third key illustrates that the indexes of a dictionary can be
complicated, e.g., the ring of integers.</p>
<p>You can turn the above dictionary into a list with the same data:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(1, 5), (&#39;sage&#39;, 17), (Integer Ring, Finite Field of size 7)]</span>
</pre></div>
</div>
<p>A common idiom is to iterate through the pairs in a dictionary:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span><span class="mi">16</span><span class="p">}</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">a</span><span class="o">*</span><span class="n">b</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
<span class="go">[8, 27, 64]</span>
</pre></div>
</div>
<p>A dictionary is unordered, as the last output illustrates.</p>
</div>
<div class="section" id="sets">
<h2>Sets<a class="headerlink" href="#sets" title="Permalink to this headline">¶</a></h2>
<p>Python has a built-in set type. The main feature
it offers is very fast lookup of whether an element is in the set
or not, along with standard set-theoretic operations.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">X</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">]);</span>   <span class="n">Y</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">X</span>   <span class="c1"># random sort order</span>
<span class="go">{1, 19, &#39;a&#39;}</span>
<span class="gp">sage: </span><span class="n">X</span> <span class="o">==</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">19</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">Y</span>
<span class="go">{2/3, 1}</span>
<span class="gp">sage: </span><span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">X</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">Y</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">X</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span>
<span class="go">{1}</span>
</pre></div>
</div>
<p>Sage also has its own set type that is (in some cases) implemented using
the built-in Python set type, but has a little bit of extra Sage-related
functionality. Create a Sage set using <code class="docutils literal notranslate"><span class="pre">Set(...)</span></code>.  For
example,</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">X</span> <span class="o">=</span> <span class="n">Set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">]);</span>   <span class="n">Y</span> <span class="o">=</span> <span class="n">Set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">X</span>   <span class="c1"># random sort order</span>
<span class="go">{&#39;a&#39;, 1, 19}</span>
<span class="gp">sage: </span><span class="n">X</span> <span class="o">==</span> <span class="n">Set</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">19</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">Y</span>
<span class="go">{1, 2/3}</span>
<span class="gp">sage: </span><span class="n">X</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span>
<span class="go">{1}</span>
<span class="gp">sage: </span><span class="k">print</span><span class="p">(</span><span class="n">latex</span><span class="p">(</span><span class="n">Y</span><span class="p">))</span>
<span class="go">\left\{1, \frac{2}{3}\right\}</span>
<span class="gp">sage: </span><span class="n">Set</span><span class="p">(</span><span class="n">ZZ</span><span class="p">)</span>
<span class="go">Set of elements of Integer Ring</span>
</pre></div>
</div>
</div>
<div class="section" id="iterators">
<h2>Iterators<a class="headerlink" href="#iterators" title="Permalink to this headline">¶</a></h2>
<p>Iterators are a recent addition to Python that are particularly
useful in mathematics applications. Here are several examples; see
<a class="reference internal" href="bibliography.html#pyt" id="id4"><span>[PyT]</span></a> for more details. We make an iterator over the squares of the
nonnegative integers up to <span class="math notranslate nohighlight">\(10000000\)</span>.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span><span class="o">^</span><span class="mi">2</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">10000000</span><span class="p">))</span>  <span class="c1"># py2</span>
<span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span><span class="o">^</span><span class="mi">2</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000000</span><span class="p">))</span>  <span class="c1"># py3</span>
<span class="gp">sage: </span><span class="nb">next</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="nb">next</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">sage: </span><span class="nb">next</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="go">4</span>
</pre></div>
</div>
<p>We create an iterate over the primes of the form <span class="math notranslate nohighlight">\(4p+1\)</span>
with <span class="math notranslate nohighlight">\(p\)</span> also prime, and look at the first few values.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">w</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">p</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">Primes</span><span class="p">()</span> <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">p</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">w</span>         <span class="c1"># in the next line, 0xb0853d6c is a random 0x number</span>
<span class="go">&lt;generator object at 0xb0853d6c&gt;</span>
<span class="gp">sage: </span><span class="nb">next</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
<span class="go">13</span>
<span class="gp">sage: </span><span class="nb">next</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
<span class="go">29</span>
<span class="gp">sage: </span><span class="nb">next</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
<span class="go">53</span>
</pre></div>
</div>
<p>Certain rings, e.g., finite fields and the integers have iterators
associated to them:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">GF</span><span class="p">(</span><span class="mi">7</span><span class="p">)]</span>
<span class="go">[0, 1, 2, 3, 4, 5, 6]</span>
<span class="gp">sage: </span><span class="n">W</span> <span class="o">=</span> <span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ZZ</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ZZ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="nb">next</span><span class="p">(</span><span class="n">W</span><span class="p">)</span>
<span class="go">(0, 0)</span>
<span class="gp">sage: </span><span class="nb">next</span><span class="p">(</span><span class="n">W</span><span class="p">)</span>
<span class="go">(0, 1)</span>
<span class="gp">sage: </span><span class="nb">next</span><span class="p">(</span><span class="n">W</span><span class="p">)</span>
<span class="go">(0, -1)</span>
</pre></div>
</div>
</div>
<div class="section" id="loops-functions-control-statements-and-comparisons">
<h2>Loops, Functions, Control Statements, and Comparisons<a class="headerlink" href="#loops-functions-control-statements-and-comparisons" title="Permalink to this headline">¶</a></h2>
<p>We have seen a few examples already of some common uses of <code class="docutils literal notranslate"><span class="pre">for</span></code>
loops. In Python, a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop has an indented structure, such as</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">0</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">4</span>
</pre></div>
</div>
<p>Note the colon at the end of the for statement (there is no “do” or
“od” as in GAP or Maple), and the indentation before the “body” of
the loop, namely <code class="docutils literal notranslate"><span class="pre">print(i)</span></code>. This indentation is important. In
Sage, the indentation is automatically put in for you when you hit
<code class="docutils literal notranslate"><span class="pre">enter</span></code> after a “:”, as illustrated below.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>  <span class="c1"># now hit enter twice</span>
<span class="gp">....:</span>
<span class="go">0</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">4</span>
</pre></div>
</div>
<p>The symbol <code class="docutils literal notranslate"><span class="pre">=</span></code> is used for assignment.
The symbol <code class="docutils literal notranslate"><span class="pre">==</span></code> is used to check for equality:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">15</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">if</span> <span class="n">gcd</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="mi">15</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="gp">....: </span>        <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="gp">....:</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">4</span>
<span class="go">7</span>
<span class="go">8</span>
<span class="go">11</span>
<span class="go">13</span>
<span class="go">14</span>
</pre></div>
</div>
<p>Keep in mind how indentation determines the block structure for
<code class="docutils literal notranslate"><span class="pre">if</span></code>, <code class="docutils literal notranslate"><span class="pre">for</span></code>, and <code class="docutils literal notranslate"><span class="pre">while</span></code> statements:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">legendre</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="n">is_sqr_modp</span><span class="o">=-</span><span class="mi">1</span>
<span class="gp">....: </span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="k">if</span> <span class="n">a</span> <span class="o">%</span> <span class="n">p</span> <span class="o">==</span> <span class="n">i</span><span class="o">^</span><span class="mi">2</span> <span class="o">%</span> <span class="n">p</span><span class="p">:</span>
<span class="gp">....: </span>            <span class="n">is_sqr_modp</span><span class="o">=</span><span class="mi">1</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="n">is_sqr_modp</span>

<span class="gp">sage: </span><span class="n">legendre</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">sage: </span><span class="n">legendre</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span>
<span class="go">-1</span>
</pre></div>
</div>
<p>Of course this is not an efficient implementation of the Legendre
symbol! It is meant to illustrate various aspects of Python/Sage
programming. The function {kronecker}, which comes with Sage,
computes the Legendre symbol efficiently via a C-library call to
PARI.</p>
<p>Finally, we note that comparisons, such as <code class="docutils literal notranslate"><span class="pre">==</span></code>,
<code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, between numbers will automatically
convert both numbers into the same type if possible:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="mi">2</span> <span class="o">&lt;</span> <span class="mf">3.1</span><span class="p">;</span> <span class="mf">3.1</span> <span class="o">&lt;=</span> <span class="mi">1</span>
<span class="go">True</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>   <span class="mi">3</span><span class="o">/</span><span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">/</span><span class="mi">1</span>
<span class="go">True</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Use bool for symbolic inequalities:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
<span class="go">x &lt; x + 1</span>
<span class="gp">sage: </span><span class="nb">bool</span><span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>When comparing objects of different types in Sage, in most cases
Sage tries to find a canonical coercion of both objects to a common
parent (see <a class="reference internal" href="tour_coercion.html#section-coercion"><span class="std std-ref">Parents, Conversion and Coercion</span></a> for more details). If successful,
the comparison is performed between the coerced objects; if not successful,
the objects are considered not equal. For testing whether two variables
reference the same object use <code class="docutils literal notranslate"><span class="pre">is</span></code>. As we see in this example,
the Python int <code class="docutils literal notranslate"><span class="pre">1</span></code> is unique, but the Sage Integer <code class="docutils literal notranslate"><span class="pre">1</span></code> is not:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="mi">1</span> <span class="ow">is</span> <span class="mi">2</span><span class="o">/</span><span class="mi">2</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="nb">int</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="nb">int</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>   <span class="c1"># py2</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="mi">1</span> <span class="ow">is</span> <span class="mi">1</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span><span class="o">/</span><span class="mi">2</span>
<span class="go">True</span>
</pre></div>
</div>
<p>In the following two lines, the first equality is <code class="docutils literal notranslate"><span class="pre">False</span></code> because
there is no canonical morphism <span class="math notranslate nohighlight">\(\QQ\to \GF{5}\)</span>, hence no
canonical way to compare the <span class="math notranslate nohighlight">\(1\)</span> in <span class="math notranslate nohighlight">\(\GF{5}\)</span> to the
<span class="math notranslate nohighlight">\(1 \in \QQ\)</span>. In contrast, there is a canonical map
<span class="math notranslate nohighlight">\(\ZZ \to \GF{5}\)</span>, hence the second comparison is <code class="docutils literal notranslate"><span class="pre">True</span></code>. Note
also that the order doesn’t matter.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">GF</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">QQ</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="n">QQ</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">GF</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">False</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">GF</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">ZZ</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="n">ZZ</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">GF</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">ZZ</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">QQ</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>WARNING: Comparison in Sage is more restrictive than in Magma, which
declares the <span class="math notranslate nohighlight">\(1 \in \GF{5}\)</span> equal to <span class="math notranslate nohighlight">\(1 \in \QQ\)</span>.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">magma</span><span class="p">(</span><span class="s1">&#39;GF(5)!1 eq Rationals()!1&#39;</span><span class="p">)</span>            <span class="c1"># optional - magma</span>
<span class="go">true</span>
</pre></div>
</div>
</div>
<div class="section" id="profiling">
<h2>Profiling<a class="headerlink" href="#profiling" title="Permalink to this headline">¶</a></h2>
<p>Section Author: Martin Albrecht (<a class="reference external" href="mailto:malb&#37;&#52;&#48;informatik&#46;uni-bremen&#46;de">malb<span>&#64;</span>informatik<span>&#46;</span>uni-bremen<span>&#46;</span>de</a>)</p>
<blockquote>
<div><p>“Premature optimization is the root of all evil.” - Donald Knuth</p>
</div></blockquote>
<p>Sometimes it is useful to check for bottlenecks in code to
understand which parts take the most computational time; this can
give a good idea of which parts to optimize. Python and therefore
Sage offers several profiling–as this process is called–options.</p>
<p>The simplest to use is the <code class="docutils literal notranslate"><span class="pre">prun</span></code> command in the interactive
shell. It returns a summary describing which functions took how
much computational time. To profile (the currently slow! - as of
version 1.0) matrix multiplication over finite fields, for example,
do:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">k</span><span class="p">,</span><span class="n">a</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">objgen</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,[</span><span class="n">k</span><span class="o">.</span><span class="n">random_element</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="mi">10</span><span class="p">)])</span>
</pre></div>
</div>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="o">%</span><span class="k">prun</span> B = A*A
<span class="go">       32893 function calls in 1.100 CPU seconds</span>

<span class="go">Ordered by: internal time</span>

<span class="go">ncalls tottime percall cumtime percall filename:lineno(function)</span>
<span class="go"> 12127  0.160   0.000   0.160  0.000 :0(isinstance)</span>
<span class="go">  2000  0.150   0.000   0.280  0.000 matrix.py:2235(__getitem__)</span>
<span class="go">  1000  0.120   0.000   0.370  0.000 finite_field_element.py:392(__mul__)</span>
<span class="go">  1903  0.120   0.000   0.200  0.000 finite_field_element.py:47(__init__)</span>
<span class="go">  1900  0.090   0.000   0.220  0.000 finite_field_element.py:376(__compat)</span>
<span class="go">   900  0.080   0.000   0.260  0.000 finite_field_element.py:380(__add__)</span>
<span class="go">     1  0.070   0.070   1.100  1.100 matrix.py:864(__mul__)</span>
<span class="go">  2105  0.070   0.000   0.070  0.000 matrix.py:282(ncols)</span>
<span class="go">  ...</span>
</pre></div>
</div>
<p>Here <code class="docutils literal notranslate"><span class="pre">ncalls</span></code> is the number of calls, <code class="docutils literal notranslate"><span class="pre">tottime</span></code> is the total time
spent in the given function (and excluding time made in calls to
sub-functions), <code class="docutils literal notranslate"><span class="pre">percall</span></code> is the quotient of <code class="docutils literal notranslate"><span class="pre">tottime</span></code> divided by
<code class="docutils literal notranslate"><span class="pre">ncalls</span></code>. <code class="docutils literal notranslate"><span class="pre">cumtime</span></code> is the total time spent in this and all
sub-functions (i.e., from invocation until exit), <code class="docutils literal notranslate"><span class="pre">percall</span></code> is the
quotient of <code class="docutils literal notranslate"><span class="pre">cumtime</span></code> divided by primitive calls, and
<code class="docutils literal notranslate"><span class="pre">filename:lineno(function)</span></code> provides the respective data of each
function. The rule of thumb here is: The higher the function in
that listing, the more expensive it is. Thus it is more interesting
for optimization.</p>
<p>As usual, <code class="docutils literal notranslate"><span class="pre">prun?</span></code> provides details on how to use the profiler and
understand the output.</p>
<p>The profiling data may be written to an object as well to allow
closer examination:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="o">%</span><span class="k">prun</span> -r A*A
<span class="gp">sage: </span><span class="n">stats</span> <span class="o">=</span> <span class="n">_</span>
<span class="gp">sage: </span>stats<span class="o">?</span>
</pre></div>
</div>
<p>Note: entering <code class="docutils literal notranslate"><span class="pre">stats</span> <span class="pre">=</span> <span class="pre">prun</span> <span class="pre">-r</span> <span class="pre">A\*A</span></code> displays a syntax error
message because prun is an IPython shell command, not a regular
function.</p>
<p>For a nice graphical representation of profiling data, you can use
the hotshot profiler, a small script called <code class="docutils literal notranslate"><span class="pre">hotshot2cachetree</span></code> and
the program <code class="docutils literal notranslate"><span class="pre">kcachegrind</span></code> (Unix only). The same example with the
hotshot profiler:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">k</span><span class="p">,</span><span class="n">a</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">objgen</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,[</span><span class="n">k</span><span class="o">.</span><span class="n">random_element</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="mi">10</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="kn">import</span> <span class="nn">hotshot</span>
<span class="gp">sage: </span><span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;pythongrind.prof&quot;</span>
<span class="gp">sage: </span><span class="n">prof</span> <span class="o">=</span> <span class="n">hotshot</span><span class="o">.</span><span class="n">Profile</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">lineevents</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">prof</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;A*A&quot;</span><span class="p">)</span>
<span class="go">&lt;hotshot.Profile instance at 0x414c11ec&gt;</span>
<span class="gp">sage: </span><span class="n">prof</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>This results in a file <code class="docutils literal notranslate"><span class="pre">pythongrind.prof</span></code> in the current working
directory. It can now be converted to the cachegrind format for
visualization.</p>
<p>On a system shell, type</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> hotshot2calltree -o cachegrind.out.42 pythongrind.prof
</pre></div>
</div>
<p>The output file <code class="docutils literal notranslate"><span class="pre">cachegrind.out.42</span></code> can now be examined with
<code class="docutils literal notranslate"><span class="pre">kcachegrind</span></code>. Please note that the naming convention
<code class="docutils literal notranslate"><span class="pre">cachegrind.out.XX</span></code> needs to be obeyed.</p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Programming</a><ul>
<li><a class="reference internal" href="#loading-and-attaching-sage-files">Loading and Attaching Sage files</a></li>
<li><a class="reference internal" href="#creating-compiled-code">Creating Compiled Code</a><ul>
<li><a class="reference internal" href="#accessing-c-functions-in-separate-files">Accessing C Functions in Separate Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#standalone-python-sage-scripts">Standalone Python/Sage Scripts</a></li>
<li><a class="reference internal" href="#data-types">Data Types</a></li>
<li><a class="reference internal" href="#lists-tuples-and-sequences">Lists, Tuples, and Sequences</a></li>
<li><a class="reference internal" href="#dictionaries">Dictionaries</a></li>
<li><a class="reference internal" href="#sets">Sets</a></li>
<li><a class="reference internal" href="#iterators">Iterators</a></li>
<li><a class="reference internal" href="#loops-functions-control-statements-and-comparisons">Loops, Functions, Control Statements, and Comparisons</a></li>
<li><a class="reference internal" href="#profiling">Profiling</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="latex.html"
                        title="previous chapter">Sage, LaTeX and Friends</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="sagetex.html"
                        title="next chapter">Using SageTeX</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/programming.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="sagetex.html" title="Using SageTeX"
             >next</a> |</li>
        <li class="right" >
          <a href="latex.html" title="Sage, LaTeX and Friends"
             >previous</a> |</li>
  
    
      <a href="../index.html"><img src="_static/logo_sagemath_black.svg" height="28" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li class="nav-item nav-item-0"><a href="index.html">Sage Tutorial v9.3</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Programming</a></li> 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005--2021, The Sage Development Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.1.2.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* The sidebar toggle adapts its height to the bodywrapper height. */
    const resizeObserver = new ResizeObserver(entries => {
        tog.height(bod.height());
    });
    resizeObserver.observe(bod[0]);

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66100-14', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>