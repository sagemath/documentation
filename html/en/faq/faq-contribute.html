<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>FAQ: Contributing to Sage &mdash; Sage FAQ v7.0</title>
    
    <link rel="stylesheet" href="_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '7.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Sage FAQ v7.0" href="index.html" />
    <link rel="prev" title="FAQ: Using Sage" href="faq-usage.html" />
    <link rel="icon" href="_static/sageicon.png" type="image/x-icon" />

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="faq-usage.html" title="FAQ: Using Sage"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../index.html"><img src="_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="index.html">Sage FAQ v7.0</a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="faq-contributing-to-sage">
<span id="chapter-faq-contribute"></span><h1>FAQ: Contributing to Sage<a class="headerlink" href="#faq-contributing-to-sage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="how-can-i-start-contributing-to-sage">
<h2>How can I start contributing to Sage?<a class="headerlink" href="#how-can-i-start-contributing-to-sage" title="Permalink to this headline">¶</a></h2>
<p>The first step
is to use Sage and encourage your friends to use Sage. If you find
bugs or confusing documentation along the way, please report your
problems!</p>
<p>Two popular ways to contribute to Sage are to write code and to
create documentation or tutorials. Some steps in each direction
are described below.</p>
</div>
<div class="section" id="i-want-to-contribute-code-to-sage-how-do-i-get-started">
<h2>I want to contribute code to Sage. How do I get started?<a class="headerlink" href="#i-want-to-contribute-code-to-sage-how-do-i-get-started" title="Permalink to this headline">¶</a></h2>
<p>Take a look at the
<a class="reference external" href="http://www.sagemath.org/doc/developer">official development guide</a>
for Sage. At a minimum, the first chapter in that guide is required
reading for any Sage developer. Also pay special attention to the
<a class="reference external" href="http://www.sagemath.org/doc/developer/trac.html">trac guidelines</a>.
You can also join the
<a class="reference external" href="http://groups.google.com/group/sage-devel">sage-devel</a>
mailing list or hang around on the
<tt class="docutils literal"><span class="pre">#sage-devel</span></tt> IRC channel on
<a class="reference external" href="http://freenode.net">freenode</a>. While you are getting to know
the community, grab a copy of the Sage
source and familiarize yourself with the
<a class="reference external" href="http://git-scm.com">git</a> version control system.</p>
<p>The best way to become familiar with the Sage development process is
to choose a ticket from the
<a class="reference external" href="http://trac.sagemath.org">trac server</a>
and review the proposed changes contained in that ticket. If you want
to implement something, it is a good practice to discuss your ideas on
the <tt class="docutils literal"><span class="pre">sage-devel</span></tt> mailing list first, so that other developers have a
chance to comment on your ideas/proposals. They are pretty open to new
ideas, too, as all mathematicians should be.</p>
<p>Sage&#8217;s main programming language is
<a class="reference external" href="http://www.python.org">Python</a>.
Some parts of Sage may be written in other languages, especially the
components that do the heavy number crunching, but most native
functionality is done using Python, including &#8220;glue code&#8221;. One of the
good aspects of Python that Sage inherits is that working code is
considered more valuable than merely fast code. Fast code is valuable,
but clean, readable code is important. In the mathematics community,
inaccurate results are unacceptable. Correctness comes before
optimization. In the following paper</p>
<ul class="simple">
<li>D. Knuth. Structured Programming with go to Statements.
<em>ACM Journal Computing Surveys</em>, 6(4), 1974.</li>
</ul>
<p>Don Knuth observes that: &#8220;We should forget about small efficiencies,
say about 97% of the time: premature optimization is the root of all
evil.&#8221;</p>
<p>If you do not know Python, you should start learning that language. A
good place to start is the
<a class="reference external" href="http://docs.python.org/tutorial">Python Official Tutorial</a>
and other documents in the
<a class="reference external" href="http://docs.python.org">Python standard documentation</a>.
Another good place to take a look at is
<a class="reference external" href="http://www.diveintopython.net">Dive Into Python</a>
by Mark Pilgrim, which may be pretty helpful on some specific topics
such as test-driven development. The book
<a class="reference external" href="http://homepage.mac.com/s_lott/books/python.html">Building Skills in Python</a>
by Steven F. Lott is suitable for anyone who is already comfortable
with programming.</p>
<p>If you want, you can
try to learn Python by using Sage. However,
it is helpful to know what is pure Python and when Sage is doing its
&#8220;magic&#8221;. There are many things that work in Python but not in Sage,
and vice versa. Furthermore, even when the syntax is identical, many
programming concepts are explained more thoroughly in Python-centered
resources than in Sage-centered resources; in the latter,
mathematics is usually the priority.</p>
</div>
<div class="section" id="can-i-contribute-to-sage-using-sagemathcloud">
<h2>Can I contribute to Sage using SageMathCloud?<a class="headerlink" href="#can-i-contribute-to-sage-using-sagemathcloud" title="Permalink to this headline">¶</a></h2>
<p>Absolutely! If you want to write code for Sage or update the
official documentation,
you will need your own installation of Sage on <a class="reference external" href="https://cloud.sagemath.com/">SageMathCloud</a>.
You can find more information in
<a class="reference external" href="https://github.com/sagemathinc/smc/wiki/SageMath-Development-on-SageMathCloud">the SageMathCloud Wiki</a>.</p>
</div>
<div class="section" id="i-m-not-a-programmer-is-there-another-way-i-can-help-out">
<h2>I&#8217;m not a programmer. Is there another way I can help out?<a class="headerlink" href="#i-m-not-a-programmer-is-there-another-way-i-can-help-out" title="Permalink to this headline">¶</a></h2>
<p>Yes. As with any free open source software project, there are numerous
ways in which you could help out within the Sage community, and
programming is only one of many ways to contribute.</p>
<p>Many people like writing technical tutorials. One of the joys of doing
so is that you also learn something new in the process. At the same
time, you communicate your knowledge to beginners, a skill which is
useful in fields other than technical writing itself. A main point
about technical writing is that you communicate a technical subject to
beginners, so keep technical jargon to a minimum. Darrell Anderson
has written some
<a class="reference external" href="http://humanreadable.nfshost.com/howtos/technical_writing_tips.htm">tips on technical writing</a>,
which we highly recommend.</p>
<p>For the graphic designers or the artistically creative, you can
help out with improving the design of the Sage website. Or you can
cast your critical artistic eyes over the interfaces of SageMathCloud
or the Sage notebook, and find out where they need improvement.</p>
<p>If you can speak, read,
and write in another (natural) language, there are many ways in which
your contribution would be very valuable to the whole Sage
community. Say you know Italian. Then you can write a Sage tutorial in
Italian, or help out with translating the official Sage tutorial to
Italian.</p>
<p>The above is a very short
list. There are many, many more ways in which you can help out. Feel
free to send an email to the
<a class="reference external" href="http://groups.google.com/group/sage-devel">sage-devel</a>
mailing list to ask about possible ways in which you could help out,
or to suggest a project idea.</p>
</div>
<div class="section" id="where-can-i-find-resources-on-python-or-cython">
<h2>Where can I find resources on Python or Cython?<a class="headerlink" href="#where-can-i-find-resources-on-python-or-cython" title="Permalink to this headline">¶</a></h2>
<p>Here is an incomplete list of resources on Python and Cython. Further
resources can be found by a web search.</p>
<p><strong>General resources</strong></p>
<ul class="simple">
<li><a class="reference external" href="http://www.cython.org">Cython</a></li>
<li><a class="reference external" href="http://pypi.python.org/pypi/pep8">pep8</a></li>
<li><a class="reference external" href="http://www.tarind.com/depgraph.html">py2depgraph</a></li>
<li><a class="reference external" href="http://pycallgraph.slowchop.com">pycallgraph</a></li>
<li><a class="reference external" href="http://pychecker.sourceforge.net">PyChecker</a></li>
<li><a class="reference external" href="http://divmod.org/trac/wiki/DivmodPyflakes">PyFlakes</a></li>
<li><a class="reference external" href="http://www.logilab.org/project/pylint">Pylint</a></li>
<li><a class="reference external" href="http://www.python.org">Python</a> home page and the
<a class="reference external" href="http://docs.python.org">Python standard documentation</a></li>
<li><a class="reference external" href="http://furius.ca/snakefood">Snakefood</a></li>
<li><a class="reference external" href="http://sphinx.pocoo.org">Sphinx</a></li>
<li><a class="reference external" href="http://code.google.com/p/jrfonseca/wiki/XDot">XDot</a></li>
</ul>
<p><strong>Tutorials and books</strong></p>
<ul class="simple">
<li><a class="reference external" href="http://homepage.mac.com/s_lott/books/python.html">Building Skills in Python</a>
by Steven F. Lott</li>
<li><a class="reference external" href="http://conference.scipy.org/proceedings/SciPy2009/paper_1/">Cython Tutorial</a>
by Stefan Behnel, Robert W. Bradshaw, and Dag Sverre Seljebotn</li>
<li><a class="reference external" href="http://www.diveintopython.net">Dive into Python</a> by Mark Pilgrim</li>
<li><a class="reference external" href="http://www.diveintopython3.net">Dive Into Python 3</a> by Mark Pilgrim</li>
<li><a class="reference external" href="http://conference.scipy.org/proceedings/SciPy2009/paper_2/">Fast Numerical Computations with Cython</a>
by Dag Sverre Seljebotn</li>
<li><a class="reference external" href="http://www.openbookproject.net/thinkCSpy">How to Think Like a Computer Scientist</a>
by Jeffrey Elkner, Allen B. Downey, and Chris Meyers</li>
<li><a class="reference external" href="http://docs.python.org/tutorial">Official Python Tutorial</a></li>
</ul>
<p><strong>Articles and HOWTOs</strong></p>
<ul class="simple">
<li><a class="reference external" href="http://pypi.python.org/pypi/decorator">decorator</a></li>
<li><a class="reference external" href="http://docs.python.org/howto/functional.html">Functional Programming HOWTO</a>
by A. M. Kuchling</li>
<li><a class="reference external" href="http://wiki.sagemath.org/devel/FunctionalProgramming">Python Functional Programming for Mathematicians</a>
by Minh Van Nguyen</li>
<li><a class="reference external" href="http://docs.python.org/howto/regex.html">Regular Expression HOWTO</a>
by A. M. Kuchling</li>
<li><a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a></li>
<li><a class="reference external" href="http://www.doughellmann.com/articles/pythonmagazine/completely-different/2008-03-linters/">Static Code Analizers for Python</a>
by Doug Hellmann</li>
</ul>
</div>
<div class="section" id="are-there-any-coding-conventions-i-need-to-follow">
<h2>Are there any coding conventions I need to follow?<a class="headerlink" href="#are-there-any-coding-conventions-i-need-to-follow" title="Permalink to this headline">¶</a></h2>
<p>You should follow the standard Python conventions as documented at
<a class="reference external" href="http://www.python.org/dev/peps/pep-0008">PEP 0008</a>
and
<a class="reference external" href="http://www.python.org/dev/peps/pep-0257">PEP 0257</a>.
Also consult the Sage Developer&#8217;s Guide, especially the chapter
<a class="reference external" href="http://www.sagemath.org/doc/developer/conventions.html">Conventions for Coding in Sage</a>.</p>
</div>
<div class="section" id="i-submitted-a-bug-fix-to-the-trac-server-several-weeks-ago-why-are-you-ignoring-my-patch">
<h2>I submitted a bug fix to the trac server several weeks ago. Why are you ignoring my patch?<a class="headerlink" href="#i-submitted-a-bug-fix-to-the-trac-server-several-weeks-ago-why-are-you-ignoring-my-patch" title="Permalink to this headline">¶</a></h2>
<p>We are not trying to ignore your patch. People who work on Sage do so
in their free time. With hundreds of open tickets of varying degrees of
impacts on the whole Sage community, people who work on tickets need
to prioritize their time and work on those tickets that interest
them. Sometimes you may be the only person who understands your
patch. In that case, you are encouraged to take extra care to make it
as easy as possible for anyone to review your patch. Here are some
tips on making your patch easy to review:</p>
<ul class="simple">
<li>Have you clearly described the problem your patch is trying to
solve?</li>
<li>Have you provided any background information relevant to the problem
your patch is trying to solve? Such information include links to
online resources and any relevant papers, books and reference
materials.</li>
<li>Have you clearly described how your patch solves the problem under
consideration?</li>
<li>Have you clearly described how to test the changes in your patch?</li>
<li>Have you listed any tickets that your patch depends on?</li>
<li>If there are more than one patch, have you clearly stated the order
in which those patches are to be applied?</li>
<li>Does your patch
<a class="reference external" href="http://www.sagemath.org/doc/developer/writing_code.html">follow relevant conventions</a>
as documented in the Developer&#8217;s Guide?</li>
</ul>
<p>If your patch stands no chance of being merged in the Sage source
tree, we will not ignore your patch but simply close the relevant
ticket with an explanation why we cannot include your changes.</p>
</div>
<div class="section" id="when-and-how-might-i-remind-the-sage-community-of-a-patch-i-care-about">
<h2>When and how might I remind the Sage community of a patch I care about?<a class="headerlink" href="#when-and-how-might-i-remind-the-sage-community-of-a-patch-i-care-about" title="Permalink to this headline">¶</a></h2>
<p>You are encouraged to take extra care in how you remind the Sage
community of a patch you want to get merged into the Sage source
tree. There might be an upcoming bug squash sprint or an upcoming Sage
Days workshop that relates to your patch. Monitor the relevant Sage
mailing lists and respond politely to any relevant email threads, with
clear explanation on why your patch is relevant. Monitor the
<tt class="docutils literal"><span class="pre">#sage-devel</span></tt> IRC channel, taking care to strategically time your
reminders.</p>
</div>
<div class="section" id="i-wrote-some-sage-code-and-i-want-it-to-be-integrated-into-sage-however-after-renaming-my-file-a-sage-to-a-py-i-got-syntax-errors-do-i-have-to-rewrite-all-my-code-in-python-instead-of-sage">
<h2>I wrote some Sage code and I want it to be integrated into Sage. However, after renaming my file <tt class="docutils literal"><span class="pre">a.sage</span></tt> to <tt class="docutils literal"><span class="pre">a.py</span></tt>, I got syntax errors. Do I have to rewrite all my code in Python instead of Sage?<a class="headerlink" href="#i-wrote-some-sage-code-and-i-want-it-to-be-integrated-into-sage-however-after-renaming-my-file-a-sage-to-a-py-i-got-syntax-errors-do-i-have-to-rewrite-all-my-code-in-python-instead-of-sage" title="Permalink to this headline">¶</a></h2>
<p>The basic answer is yes, but rewriting is a big word for what is
really needed. There is little work to do since Sage mostly follows
Python syntax. The two main differences are handling of integer (see
also the <a class="reference external" href="http://www.sagemath.org/doc/tutorial/afterword.html">afterword</a> for more on the sage preparser), and the
necessity to import what you need.</p>
<ul>
<li><p class="first"><strong>Handling of integers:</strong> You need to take care of the following
changes:</p>
<ul class="simple">
<li>Notation for exponentiation: In Python <tt class="docutils literal"><span class="pre">**</span></tt> means exponentiation
and <tt class="docutils literal"><span class="pre">^</span></tt> means &#8220;xor&#8221;.</li>
<li>If you need to return an integer to the user, write <tt class="docutils literal"><span class="pre">return</span>
<span class="pre">Integer(1)</span></tt> instead of <tt class="docutils literal"><span class="pre">return</span> <span class="pre">1</span></tt>. In Python, 1 is a python
<tt class="docutils literal"><span class="pre">int</span></tt>, and <tt class="docutils literal"><span class="pre">Integer(1)</span></tt> is a Sage/Gmp integer. In addition,
<tt class="docutils literal"><span class="pre">Integer</span></tt> are much more powerful than <tt class="docutils literal"><span class="pre">int</span></tt>; for
example, they know about being prime and factorization.</li>
<li>You should also notice that <tt class="docutils literal"><span class="pre">2</span> <span class="pre">/</span> <span class="pre">3</span></tt> no longer means
<tt class="docutils literal"><span class="pre">Integer(2)</span> <span class="pre">/</span> <span class="pre">Integer(3)</span></tt> and returns <tt class="docutils literal"><span class="pre">2/3</span></tt>, but rather
<tt class="docutils literal"><span class="pre">int(2)</span> <span class="pre">/</span> <span class="pre">int(3)</span></tt>, and therefore returns <tt class="docutils literal"><span class="pre">0</span></tt> due to integer
division where it deregards any remainder. If you are dealing with
<tt class="docutils literal"><span class="pre">Integer</span></tt> but you really need an integer division you can use
<tt class="docutils literal"><span class="pre">Integer(2)</span> <span class="pre">//</span> <span class="pre">Integer(3)</span></tt>.</li>
</ul>
</li>
<li><p class="first"><strong>Importing stuff:</strong> The second big change is the necessity to
import everything what you need. More precisely, each time you use
some Sage function, you need to import it at the beginning of the
file. For example, if you want <tt class="docutils literal"><span class="pre">PolynomialRing</span></tt>, you need to
write:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sage.rings.polynomial.polynomial_ring_constructor</span> <span class="kn">import</span> <span class="n">PolynomialRing</span>
</pre></div>
</div>
<p>You can ask Sage where to find <tt class="docutils literal"><span class="pre">PolynomialRing</span></tt> using:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">PolynomialRing</span><span class="o">.</span><span class="n">__module__</span>
<span class="go">&#39;sage.rings.polynomial.polynomial_ring_constructor&#39;</span>
</pre></div>
</div>
<p>This also corresponds to the path starting after <tt class="docutils literal"><span class="pre">site-packages</span></tt>
given when you ask Sage for <tt class="docutils literal"><span class="pre">PolynomialRing</span></tt> help. For example,
if you call <tt class="docutils literal"><span class="pre">PolynomialRing?</span></tt>, you get:</p>
<div class="highlight-python"><div class="highlight"><pre>Type:    function
[...]
File:    /home/florent/src/Sage/sage/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_ring_constructor.py
[...]
</pre></div>
</div>
</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">FAQ: Contributing to Sage</a><ul>
<li><a class="reference internal" href="#how-can-i-start-contributing-to-sage">How can I start contributing to Sage?</a></li>
<li><a class="reference internal" href="#i-want-to-contribute-code-to-sage-how-do-i-get-started">I want to contribute code to Sage. How do I get started?</a></li>
<li><a class="reference internal" href="#can-i-contribute-to-sage-using-sagemathcloud">Can I contribute to Sage using SageMathCloud?</a></li>
<li><a class="reference internal" href="#i-m-not-a-programmer-is-there-another-way-i-can-help-out">I&#8217;m not a programmer. Is there another way I can help out?</a></li>
<li><a class="reference internal" href="#where-can-i-find-resources-on-python-or-cython">Where can I find resources on Python or Cython?</a></li>
<li><a class="reference internal" href="#are-there-any-coding-conventions-i-need-to-follow">Are there any coding conventions I need to follow?</a></li>
<li><a class="reference internal" href="#i-submitted-a-bug-fix-to-the-trac-server-several-weeks-ago-why-are-you-ignoring-my-patch">I submitted a bug fix to the trac server several weeks ago. Why are you ignoring my patch?</a></li>
<li><a class="reference internal" href="#when-and-how-might-i-remind-the-sage-community-of-a-patch-i-care-about">When and how might I remind the Sage community of a patch I care about?</a></li>
<li><a class="reference internal" href="#i-wrote-some-sage-code-and-i-want-it-to-be-integrated-into-sage-however-after-renaming-my-file-a-sage-to-a-py-i-got-syntax-errors-do-i-have-to-rewrite-all-my-code-in-python-instead-of-sage">I wrote some Sage code and I want it to be integrated into Sage. However, after renaming my file <tt class="docutils literal"><span class="pre">a.sage</span></tt> to <tt class="docutils literal"><span class="pre">a.py</span></tt>, I got syntax errors. Do I have to rewrite all my code in Python instead of Sage?</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="faq-usage.html"
                                  title="previous chapter">FAQ: Using Sage</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/faq-contribute.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <!-- The shading of the "Go" button should be consistent -->
                <!-- with the colour of the header and footer. See the file -->
                <!-- doc/common/themes/sage/theme.conf for colours used by -->
                <!-- the Sage theme. -->
                <input type="submit" style="background-color: #B8B9F6" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="faq-usage.html" title="FAQ: Using Sage"
             >previous</a> |</li>
  
    
      <a href="../index.html"><img src="_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="index.html">Sage FAQ v7.0</a> &raquo;</li>
 
      </ul>
    </div>
    
    <div class="footer">
        &copy; Copyright 2005--2016, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
  </body>
</html>
