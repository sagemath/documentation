<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Setting Up Git" href="git_setup.html" /><link rel="prev" title="Welcome to Sage Developer Guide" href="index.html" />

    <meta name="generator" content="sphinx-5.2.3, furo 2022.09.29"/>
        <title>Development Walk-through - Developer Guide</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=d81277517bee4d6b0349d71bb2661d4890b5617c" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="_static/custom-furo.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom-jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom-codemirror-monokai.css" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  --color-brand-primary: #0f0fff;
  --color-brand-content: #0f0fff;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Developer Guide</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/logo_sagemath_black.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/logo_sagemath_white.svg" alt="Dark Logo"/>
  </div>
  
      <span class="sidebar-brand-text">Sage 10.2 Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-home">
  <div class="sidebar-tree">
    <ul><li class="toctree-l1">
      <a class="reference internal" href="index.html">Home - Developer Guide</a>
    </li></ul>
  </div>
</div><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Development Walk-through</a></li>
<li class="toctree-l1"><a class="reference internal" href="git_setup.html">Setting Up Git</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="github.html">The Sage Repository on GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflows.html">Using Git with GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="review.html">Reviewing Code</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="git_basic.html">Git Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="git_advanced.html">Advanced Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="git_background.html">Git Tips and References</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="workspace.html">Setting up your workspace</a></li>
<li class="toctree-l1"><a class="reference internal" href="coding_basics.html">General Conventions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="doctesting.html">Running Sage’s Doctests</a></li>
<li class="toctree-l1"><a class="reference internal" href="portability_testing.html">Testing on Multiple Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Additional Development and Testing Tools</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sage_manuals.html">The Sage Manuals</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="coding_in_python.html">Coding in Python for Sage</a></li>
<li class="toctree-l1"><a class="reference internal" href="coding_in_cython.html">Coding in Cython</a></li>
<li class="toctree-l1"><a class="reference internal" href="coding_in_other.html">Using External Libraries and Interfaces</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="packaging.html">Packaging Third-Party Code for Sage</a></li>
<li class="toctree-l1"><a class="reference internal" href="packaging_sage_library.html">Packaging the Sage Library for Distribution</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="development-walk-through">
<span id="chapter-walkthrough"></span><h1>Development Walk-through<a class="headerlink" href="#development-walk-through" title="Permalink to this heading">#</a></h1>
<p>This section is a concise overview of the Sage development process. We will see
how to make changes to the Sage source code and record them in the Git revision
control system.</p>
<p>In the sections of the following chapter <a class="reference internal" href="index.html#section-development-on-github"><span class="std std-ref">Working on GitHub</span></a>,
we will look at communicating these changes back to the Sage project. All
changes to Sage source code have to go through <a class="reference external" href="https://github.com/sagemath/sage">the Sage repository</a> on GitHub.</p>
<p>For examples, we assume your name Alice. Always replace it with your own name.</p>
<section id="checking-git">
<span id="section-walkthrough-setup-git"></span><h2>Checking Git<a class="headerlink" href="#checking-git" title="Permalink to this heading">#</a></h2>
<p>First, open a shell (for instance, Terminal on Mac) and check that Git works:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost ~]$ </span>git
<span class="go">usage: git [--version] [--help] [-C &lt;path&gt;] [-c name=value]</span>
<span class="go">...</span>
<span class="go">The most commonly used git commands are:</span>
<span class="go">   add        Add file contents to the index</span>
<span class="go">...</span>
<span class="go">   tag        Create, list, delete or verify a tag object signed with GPG</span>

<span class="go">&#39;git help -a&#39; and &#39;git help -g&#39; lists available subcommands and some</span>
<span class="go">concept guides. See &#39;git help &lt;command&gt;&#39; or &#39;git help &lt;concept&gt;&#39;</span>
<span class="go">to read about a specific subcommand or concept.</span>
</pre></div>
</div>
<p>Don’t worry about the giant list of subcommands. You really only need a handful
of them for effective development, and we will walk you through them in this
guide. If you got a “command not found” error, then you don’t have Git
installed; now is the time to install it. See
<a class="reference internal" href="git_setup.html#section-git-install"><span class="std std-ref">Installing Git</span></a> for instructions.</p>
<p>Because we also track who does what changes with Git, you must tell
Git how you want to be known. Check if Git knows you:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost ~]$ </span>git config --global user.name
<span class="go">Alice Adventure</span>
<span class="gp">[alice@localhost ~]$ </span>git config --global user.email
<span class="go">alice@wonderland.com</span>
</pre></div>
</div>
<p>If you have multiple computers, then use the same name on each of them.  This
name/email combination ends up in commits. So if it’s not set yet, do it now
before you forget! This only needs to be done once. See
<a class="reference internal" href="git_setup.html#section-git-setup-name"><span class="std std-ref">Configuring Git</span></a> for instructions.</p>
</section>
<section id="obtaining-the-sage-source-code">
<span id="section-walkthrough-sage-source"></span><h2>Obtaining the Sage source code<a class="headerlink" href="#obtaining-the-sage-source-code" title="Permalink to this heading">#</a></h2>
<p>Obviously one needs the Sage source code to develop. You can use your
local installation of Sage, or (to start from scratch) download it
from our Sage repository on GitHub:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost ~]$ </span>git clone --origin upstream https://github.com/sagemath/sage.git
<span class="go">Cloning into &#39;sage&#39;...</span>
<span class="go">[...]</span>
<span class="go">Checking connectivity... done.</span>
</pre></div>
</div>
<p>This creates a directory named <code class="docutils literal notranslate"><span class="pre">sage</span></code> containing the sources for the
current stable and development releases of Sage. You next need to switch
to the develop branch (latest development release):</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost ~]$ </span><span class="nb">cd</span> sage
<span class="gp">[alice@localhost sage]$ </span>git checkout develop
</pre></div>
</div>
<p>Next, build Sage, following the instruction in the file <a class="reference external" href="https://github.com/sagemath/sage/#readme">README.md</a> in <code class="docutils literal notranslate"><span class="pre">SAGE_ROOT</span></code>. If all
prerequisites to build are in place, the commands <code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">&amp;&amp;</span> <span class="pre">make</span> <span class="pre">-j4</span></code>
will do it.  Additional details can be found in the section on <a class="reference external" href="../installation/source.html">installation
from source</a> in the Sage installation guide. If
you wish to use conda-forge, see the section on <a class="reference external" href="../installation/conda.html">conda</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>macOS allows changing directories without using exact capitalization.
Beware of this convenience when compiling for macOS. Ignoring exact
capitalization when changing into <span class="target" id="index-0"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">SAGE_ROOT</span></code> can lead to build
errors for dependencies requiring exact capitalization in path names.</p>
</div>
</section>
<section id="branching-out">
<span id="section-walkthrough-branch"></span><h2>Branching out<a class="headerlink" href="#branching-out" title="Permalink to this heading">#</a></h2>
<p>In order to start modifying Sage, we want to make a new <em>branch</em> in the local
Sage repo. A branch is a copy (except that it doesn’t take up twice the space)
of the Sage source code where you can store your modifications to the Sage
source code (and which you can push to your fork of the Sage repository on GitHub).</p>
<p>To begin with, type the command <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span></code>. You will see the following:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>git branch
<span class="go">* develop</span>
<span class="go">  master</span>
</pre></div>
</div>
<p>The asterisk shows you which branch you are on. Without an argument,
the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span></code> command displays a list of all local branches
with the current one marked by an asterisk.</p>
<p>It is easy to create a new branch. First make sure you are on the branch from
which you want to branch out. That is, if you are not currently on the
<code class="docutils literal notranslate"><span class="pre">develop</span></code> branch, type the command <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">develop</span></code>:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>git checkout develop
<span class="go">Switched to branch &#39;develop&#39;</span>
<span class="go">Your branch is up-to-date with &#39;origin/develop&#39;.</span>
</pre></div>
</div>
<p>Then use the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span></code> command to create a new branch, as follows:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>git branch last_twin_prime
</pre></div>
</div>
<p>Also note that <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span></code> creates a new branch, but does not switch
to it. For this, you have to use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code>:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>git checkout last_twin_prime
<span class="go">Switched to branch &#39;last_twin_prime&#39;</span>
</pre></div>
</div>
<p>Now if you use the command <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span></code>, you will see the following:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>git branch
<span class="go">  develop</span>
<span class="go">* last_twin_prime</span>
<span class="go">  master</span>
</pre></div>
</div>
<p>Note that unless you explicitly push a branch to a remote Git repository, the
branch is a local branch that is only on your computer and not visible to
anyone else.</p>
<p>To avoid typing the new branch name twice you can use the shortcut
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">-b</span> <span class="pre">last_twin_prime</span> <span class="pre">develop</span></code> to create and switch to the new
branch based on <code class="docutils literal notranslate"><span class="pre">develop</span></code> in one command.</p>
</section>
<section id="the-history">
<span id="section-walkthrough-logs"></span><h2>The history<a class="headerlink" href="#the-history" title="Permalink to this heading">#</a></h2>
<p>It is always a good idea to check that you are making your edits on the branch
that you think you are on. The following command shows you the topmost commit
in detail, including its changes to files:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>git show
</pre></div>
</div>
<p>To dig deeper, you can inspect the log:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>git log
</pre></div>
</div>
<p>By default, this lists all commits in reverse chronological order.</p>
<ul class="simple">
<li><p>If you find your branch to be in the wrong place, see the
<a class="reference internal" href="git_advanced.html#section-git-recovery"><span class="std std-ref">Reset and recovery</span></a> section.</p></li>
<li><p>Many tools are available to help you visualize the history tree better.
For instance, <code class="docutils literal notranslate"><span class="pre">tig</span></code> is a very nice text-mode tool.</p></li>
</ul>
</section>
<section id="editing-the-source-code">
<span id="section-walkthrough-add-edit"></span><h2>Editing the source code<a class="headerlink" href="#editing-the-source-code" title="Permalink to this heading">#</a></h2>
<p>Once you have your own branch, feel free to make any changes to source files as
you like. The chapter <a class="reference internal" href="index.html#section-writing-code-for-sage"><span class="std std-ref">Writing Code for Sage</span></a> explains how your
code should look like to fit into Sage, and how we ensure high code quality
throughout.</p>
<p>The Git command <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> is probably the most important of all Git
commands. It tells you which files changed, and how to continue with recording
the changes:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>git status
<span class="go">On branch last_twin_prime</span>
<span class="go">Changes not staged for commit:</span>
<span class="go">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span>
<span class="go">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span>

<span class="go">    modified:   some_file.py</span>
<span class="go">    modified:   src/sage/primes/all.py</span>

<span class="go">Untracked files:</span>
<span class="go">  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)</span>

<span class="go">    src/sage/primes/last_pair.py</span>

<span class="go">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span>
</pre></div>
</div>
<p>To dig deeper into what was changed in the files you can use:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>git diff some_file.py
</pre></div>
</div>
<p>to show you the differences.</p>
</section>
<section id="rebuilding-sage">
<span id="section-walkthrough-make"></span><h2>Rebuilding Sage<a class="headerlink" href="#rebuilding-sage" title="Permalink to this heading">#</a></h2>
<p>Once you have made any changes, you of course want to build Sage and try out
your edits. As long as you only modified the Sage library (that is, Python and
Cython files under <code class="docutils literal notranslate"><span class="pre">src/sage/...</span></code>) you just have to run:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>./sage -br
</pre></div>
</div>
<p>to rebuild the Sage library and then start Sage.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All changes to Python files take effect immediately after restarting Sage
(unless you have used <code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">--disable-editable</span></code> when you built
Sage). Hence you can just start Sage instead of <code class="docutils literal notranslate"><span class="pre">./sage</span> <span class="pre">-br</span></code> if only Python
files were modified.</p>
</div>
<p>If you made changes to <a class="reference internal" href="packaging.html#chapter-packaging"><span class="std std-ref">third-party packages</span></a>
installed as part of Sage, then you have to run</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>make build
</pre></div>
</div>
<p>as if you were <a class="reference external" href="http://doc.sagemath.org/html/en/installation/source.html">installing Sage from scratch</a>.  However, this
time only, the packages which were changed (or which depend on a changed package)
will be rebuilt, so it should be much faster than building Sage the first
time.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have <a class="reference external" href="https://doc.sagemath.org/html/en/developer/workflows.html#checking-out-an-existing-pr">pulled a branch from the GitHub Sage repository</a>,
it may depend on changes to third-party packages, so <code class="docutils literal notranslate"><span class="pre">./sage</span> <span class="pre">-br</span></code> may
fail.  If this happens (and you believe the code in this branch should
compile), try running <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">build</span></code>.</p>
</div>
<p>Rarely there are conflicts with other packages,
or with the already-installed older version of the package that you
changed, in that case you do have to recompile everything using:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>make distclean <span class="o">&amp;&amp;</span> make build
</pre></div>
</div>
<p>Also, don’t forget to run the tests (see <a class="reference internal" href="doctesting.html#chapter-doctesting"><span class="std std-ref">Running Sage’s Doctests</span></a>)
and build the documentation (see <a class="reference internal" href="sage_manuals.html#chapter-sage-manuals"><span class="std std-ref">The Sage Manuals</span></a>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you switch between branches based on different releases, the timestamps
of modified files will change. This triggers recythonization and recompilation
of modified files on subsequent builds, whether or not you have made any
additional changes to files. To minimize the impact of switching between branches,
install ccache using the command</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>./sage -i ccache
</pre></div>
</div>
<p>Recythonization will still occur when rebuilding, but the recompilation stage
first checks whether previously compiled files are cached for reuse before
compiling them again. This saves considerable time rebuilding.</p>
</div>
</section>
<section id="making-commits">
<span id="section-walkthrough-commit"></span><h2>Making commits<a class="headerlink" href="#making-commits" title="Permalink to this heading">#</a></h2>
<p>Whenever you have reached your goal, a milestone towards it, or
just feel like you got some work done you should <em>commit</em> your
changes. A commit is just a snapshot of the state of all files in
the repository.</p>
<p>Unlike with some other revision control programs, in Git you first
need to <em>stage</em> the changed files, which tells Git which files you
want to be part of the next commit:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>git status
<span class="gp"># </span>On branch my_branch
<span class="gp"># </span>Untracked files:
<span class="gp">#   </span><span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to include <span class="k">in</span> what will be committed<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#       </span>src/sage/primes/last_pair.py
<span class="go">nothing added to commit but untracked files present (use &quot;git add&quot; to track)</span>

<span class="gp">[alice@localhost sage]$ </span>git add src/sage/primes/last_pair.py
<span class="gp">[alice@localhost sage]$ </span>git status
<span class="gp"># </span>On branch my_branch
<span class="gp"># </span>Changes to be committed:
<span class="gp">#   </span><span class="o">(</span>use <span class="s2">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#   </span>new file:   src/sage/primes/last_pair.py
<span class="gp">#</span>
</pre></div>
</div>
<p>Once you are satisfied with the list of staged files, you create a new
snapshot with the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code> command:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>git commit
<span class="go">... editor opens ...</span>
<span class="go">[my_branch 31331f7] Added the very important foobar text file</span>
<span class="go"> 1 file changed, 1 insertion(+)</span>
<span class="go">  create mode 100644 foobar.txt</span>
</pre></div>
</div>
<p>This will open an editor for you to write your commit message. The
commit message should generally have a one-line description, followed
by an empty line, followed by further explanatory text:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Added the last twin prime

This is an example commit message. You see there is a one-line
summary followed by more detailed description, if necessary.
</pre></div>
</div>
<p>You can then continue working towards your next milestone, make
another commit, repeat until finished. As long as you do not
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code> another branch, all commits that you make will be part of
the branch that you created.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="git_setup.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Setting Up Git</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Home</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2005--2023, The Sage Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Development Walk-through</a><ul>
<li><a class="reference internal" href="#checking-git">Checking Git</a></li>
<li><a class="reference internal" href="#obtaining-the-sage-source-code">Obtaining the Sage source code</a></li>
<li><a class="reference internal" href="#branching-out">Branching out</a></li>
<li><a class="reference internal" href="#the-history">The history</a></li>
<li><a class="reference internal" href="#editing-the-source-code">Editing the source code</a></li>
<li><a class="reference internal" href="#rebuilding-sage">Rebuilding Sage</a></li>
<li><a class="reference internal" href="#making-commits">Making commits</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="_static/jupyter-sphinx-furo.js"></script>
    </body>
</html>