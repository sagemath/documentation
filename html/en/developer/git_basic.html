<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Advanced Git" href="git_advanced.html" /><link rel="prev" title="Reviewing Code" href="review.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2023.09.10 -->
        <title>Git Basics - Developer Guide</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="_static/custom-furo.css?v=213650f8" />
    <link rel="stylesheet" type="text/css" href="_static/custom-jupyter-sphinx.css?v=6422c25e" />
    <link rel="stylesheet" type="text/css" href="_static/custom-codemirror-monokai.css?v=b5588f12" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  --color-brand-primary: #0f0fff;
  --color-brand-content: #0f0fff;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Developer Guide</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/logo_sagemath_black.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/logo_sagemath_white.svg" alt="Dark Logo"/>
  </div>
  
      <span class="sidebar-brand-text">Sage 10.3 Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-home">
  <div class="sidebar-tree">
    <ul><li class="toctree-l1">
      <a class="reference internal" href="index.html">Home - Developer Guide</a>
    </li></ul>
  </div>
</div><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="walkthrough.html">Development Walk-through</a></li>
<li class="toctree-l1"><a class="reference internal" href="git_setup.html">Setting Up Git</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="github.html">The Sage Repository on GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflows.html">Using Git with GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="review.html">Reviewing Code</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Git Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="git_advanced.html">Advanced Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="git_background.html">Git Tips and References</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="workspace.html">Setting up Your Workspace</a></li>
<li class="toctree-l1"><a class="reference internal" href="coding_basics.html">General Conventions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="doctesting.html">Running Sage’s Doctests</a></li>
<li class="toctree-l1"><a class="reference internal" href="portability_testing.html">Testing on Multiple Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Development and Testing Tools</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sage_manuals.html">The Sage Manuals</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="coding_in_python.html">Coding in Python for Sage</a></li>
<li class="toctree-l1"><a class="reference internal" href="coding_in_cython.html">Coding in Cython</a></li>
<li class="toctree-l1"><a class="reference internal" href="coding_in_other.html">Using External Libraries and Interfaces</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="packaging.html">Packaging Third-Party Code for Sage</a></li>
<li class="toctree-l1"><a class="reference internal" href="packaging_sage_library.html">Packaging the Sage Library for Distribution</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="git-basics">
<span id="chapter-git-basic"></span><h1>Git Basics<a class="headerlink" href="#git-basics" title="Link to this heading">#</a></h1>
<p>Git is a tool to exchange commits (file changes) and branches (organized of
commits) with other developers.</p>
<p>As a distributed revision control system, Git does not have the notion of a
central server. However, for Sage development, Git communicates with other
developers via <a class="reference external" href="https://github.com/sagemath/sage">the Sage repository</a> on
GitHub. Hence we assume that throughout this guide.</p>
<section id="git-authentication-through-ssh">
<span id="section-git-ssh"></span><h2>Git authentication through SSH<a class="headerlink" href="#git-authentication-through-ssh" title="Link to this heading">#</a></h2>
<p>In order to push changes securely to a remote repository, Git uses public-key
cryptography. This section will show you how to set up the necessary
cryptographic keys for the case that you want to use SSH(Secure Shell) protocol
to authenticate your Git to GitHub, instead of HTTPS protocol.</p>
<section id="generating-your-ssh-keys">
<span id="section-github-ssh-key"></span><h3>Generating your SSH keys<a class="headerlink" href="#generating-your-ssh-keys" title="Link to this heading">#</a></h3>
<p>Check whether you already have suitable SSH keys by inspecting <code class="docutils literal notranslate"><span class="pre">.ssh</span></code>
directory in your home directory. If you don’t have suitable SSH keys yet, you
can create a key pair with the <code class="docutils literal notranslate"><span class="pre">ssh-keygen</span></code> tool.</p>
<p>Follow either <a class="reference external" href="https://git-scm.com/book/en/v2/Git-on-the-Server-Generating-Your-SSH-Public-Key">the detailed instructions</a>
or the following brief instructions:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost ~]$ </span>ssh-keygen
<span class="go">Generating public/private rsa key pair.</span>
<span class="go">Enter file in which to save the key (/home/user/.ssh/id_rsa):</span>
<span class="go">Enter passphrase (empty for no passphrase):</span>
<span class="go">Enter same passphrase again:</span>
<span class="go">Your identification has been saved in /home/user/.ssh/id_rsa.</span>
<span class="go">Your public key has been saved in /home/user/.ssh/id_rsa.pub.</span>
<span class="go">The key fingerprint is:</span>
<span class="go">ce:32:b3:de:38:56:80:c9:11:f0:b3:88:f2:1c:89:0a alice@localhost</span>
<span class="go">The key&#39;s randomart image is:</span>
<span class="go">+--[ RSA 2048]----+</span>
<span class="go">|  ....           |</span>
<span class="go">|   ..            |</span>
<span class="go">|   .o+           |</span>
<span class="go">| o o+o.          |</span>
<span class="go">|E + .  .S        |</span>
<span class="go">|+o .   o.        |</span>
<span class="go">|. o   +.o        |</span>
<span class="go">|      oB         |</span>
<span class="go">|     o+..        |</span>
<span class="go">+-----------------+</span>
</pre></div>
</div>
<p>This will generate a new random private RSA key
in the <code class="docutils literal notranslate"><span class="pre">.ssh</span></code> folder in your home directory. By default, they are</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">~/.ssh/id_rsa</span></code></dt><dd><p>Your private key. Keep safe. <strong>Never</strong> hand it out to anybody.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">~/.ssh/id_rsa.pub</span></code></dt><dd><p>The corresponding public key. This and only this file can be safely
disclosed to third parties.</p>
</dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">ssh-keygen</span></code> tool will let you generate a key with a different
file name, or protect it with a passphrase. Depending on how much you
trust your own computer or system administrator, you can leave the
passphrase empty to be able to login without any human intervention.</p>
</section>
<section id="adding-your-public-key-for-authentication-to-github">
<h3>Adding your public key for authentication to GitHub<a class="headerlink" href="#adding-your-public-key-for-authentication-to-github" title="Link to this heading">#</a></h3>
<p>Follow the procedure <a class="reference external" href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account">Adding a new SSH key to your GitHub account</a>.
Then check that it works by:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>origin<span class="w"> </span>git@github.com:alice/sage.git
<span class="gp">[alice@localhost sage]$ </span>git<span class="w"> </span>remote<span class="w"> </span>-v
<span class="go">origin  git@github.com:alice/sage.git (fetch)</span>
<span class="go">origin  git@github.com:alice/sage.git (push)</span>
</pre></div>
</div>
</section>
</section>
<section id="pushing-your-changes-to-a-remote">
<span id="section-git-push"></span><h2>Pushing your changes to a remote<a class="headerlink" href="#pushing-your-changes-to-a-remote" title="Link to this heading">#</a></h2>
<p>Push your branch to the remote <code class="docutils literal notranslate"><span class="pre">origin</span></code> with either</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>git<span class="w"> </span>push<span class="w"> </span>--set-upstream<span class="w"> </span>origin<span class="w"> </span>HEAD:my_branch
</pre></div>
</div>
<p>or</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>HEAD:my_branch
</pre></div>
</div>
<p>if your branch already has an upstream branch. Here “upstream” means the the
remote <code class="docutils literal notranslate"><span class="pre">origin</span></code>, which is <em>upstream</em> to your local Git repo.</p>
<p>Here, <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> means that you are pushing the most recent commit (and, by
extension, all of its parent commits) of the current local branch to the remote
branch.</p>
</section>
<section id="checking-out-a-pr">
<span id="section-git-checkout"></span><h2>Checking out a PR<a class="headerlink" href="#checking-out-a-pr" title="Link to this heading">#</a></h2>
<p>If you want to work with the changes of a PR branch, you must
make a local copy of the branch. In particular, Git has no concept of directly
working with the remote branch, the remotes are only bookmarks for
things that you can get from/to the remote server. Hence, the first
thing you should do is to get everything from the branch
into your local repository. This is achieved by:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>git<span class="w"> </span>fetch<span class="w"> </span>upstream<span class="w"> </span>pull/12345/head
<span class="go">remote: Enumerating objects: 12, done.</span>
<span class="go">remote: Counting objects: 100% (12/12), done.</span>
<span class="go">remote: Compressing objects: 100% (3/3), done.</span>
<span class="go">remote: Total 12 (delta 9), reused 11 (delta 9), pack-reused 0</span>
<span class="go">Unpacking objects: 100% (12/12), 2.22 KiB | 206.00 KiB/s, done.</span>
<span class="go">From https://github.com/sagemath/sage</span>
<span class="go"> * branch                  refs/pull/12345/head -&gt; FETCH_HEAD</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">pull/12345/head</span></code> branch refers to the branch of the PR #12345 of the
remote <code class="docutils literal notranslate"><span class="pre">upstream</span></code>. The branch is now temporarily (until you fetch something
else) stored in your local Git database under the alias <code class="docutils literal notranslate"><span class="pre">FETCH_HEAD</span></code>. In the
second step, we make it available as a new local branch and switch to it. Your
local branch can have a different name, for example:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>my_branch<span class="w"> </span>FETCH_HEAD
<span class="go">Switched to a new branch &#39;my_branch&#39;</span>
</pre></div>
</div>
<p>creates a new branch in your local Git repository named <code class="docutils literal notranslate"><span class="pre">my_branch</span></code>
and modifies your local Sage filesystem tree to the state of the files
in the branch. You can now edit files and commit changes to your
local branch.</p>
</section>
<section id="getting-changes-from-a-remote">
<span id="section-git-pull"></span><h2>Getting changes from a remote<a class="headerlink" href="#getting-changes-from-a-remote" title="Link to this heading">#</a></h2>
<p>A common task during development is to synchronize your local copy of the
branch with the branch on the GitHub Sage repo. In particular, assume you
downloaded the branch of a PR made by someone else, say Bob, and made some
suggestions for improvements on the PR. Now Bob incorporated your suggestions
into his branch, and you want to get the added changes to complete your review.
Assuming that you originally got your local branch as in
<a class="reference internal" href="#section-git-checkout"><span class="std std-ref">Checking out a PR</span></a>, you can just issue:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[bob@localhost sage]$ </span>git<span class="w"> </span>pull<span class="w"> </span>upstream<span class="w"> </span>pull/12345/head
<span class="go">From https://github.com/sagemath/sage</span>
<span class="go"> * branch                  refs/pull/35608/head -&gt; FETCH_HEAD</span>
<span class="go">Merge made by the &#39;ort&#39; strategy.</span>
<span class="go"> src/doc/common/python3.inv          | Bin 98082 -&gt; 131309 bytes</span>
<span class="go"> src/doc/common/update-python-inv.sh |   7 ++++---</span>
<span class="go"> 2 files changed, 4 insertions(+), 3 deletions(-)</span>
</pre></div>
</div>
<p>This command downloads the changes from the branch of the PR and merges
them into your local branch.</p>
</section>
<section id="updating-develop">
<span id="section-git-pull-develop"></span><h2>Updating develop<a class="headerlink" href="#updating-develop" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">develop</span></code> branch can be updated just like any other branch. However, your
local copy of the develop branch should stay <strong>identical</strong> to the GitHub Sage repo develop
branch.</p>
<p>If you accidentally added commits to your local copy of <code class="docutils literal notranslate"><span class="pre">develop</span></code>, you must
delete them before updating the branch.</p>
<p>One way to ensure that you are notified of potential problems is to use <code class="docutils literal notranslate"><span class="pre">git</span>
<span class="pre">pull</span> <span class="pre">--ff-only</span></code>, which will raise an error if a non-trivial merge would be
required:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>git<span class="w"> </span>checkout<span class="w"> </span>develop
<span class="gp">[alice@localhost sage]$ </span>git<span class="w"> </span>pull<span class="w"> </span>--ff-only<span class="w"> </span>upstream<span class="w"> </span>develop
</pre></div>
</div>
<p>If this pull fails, then something is wrong with the local copy of the
master branch. To switch to the correct Sage master branch, use:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@localhost sage]$ </span>git<span class="w"> </span>checkout<span class="w"> </span>develop
<span class="gp">[alice@localhost sage]$ </span>git<span class="w"> </span>reset<span class="w"> </span>--hard<span class="w"> </span>upstream/develop
</pre></div>
</div>
</section>
<section id="merging-and-rebasing">
<span id="section-git-merge"></span><h2>Merging and rebasing<a class="headerlink" href="#merging-and-rebasing" title="Link to this heading">#</a></h2>
<p>Sometimes, a new version of Sage is released while you work on a Git branch.</p>
<p>Let us assume you started <code class="docutils literal notranslate"><span class="pre">my_branch</span></code> at commit <code class="docutils literal notranslate"><span class="pre">B</span></code>. After a while, your
branch has advanced to commit <code class="docutils literal notranslate"><span class="pre">Z</span></code>, but you updated <code class="docutils literal notranslate"><span class="pre">develop</span></code> (see
<a class="reference internal" href="#section-git-pull-develop"><span class="std std-ref">Updating develop</span></a>) and now your Git history looks like this (see
<a class="reference internal" href="walkthrough.html#section-walkthrough-logs"><span class="std std-ref">The history</span></a>):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>      X---Y---Z my_branch
     /
A---B---C---D develop
</pre></div>
</div>
<p>How should you deal with such changes? In principle, there are two ways:</p>
<ul>
<li><p><strong>Rebase:</strong> The first solution is to <strong>replay</strong> commits <code class="docutils literal notranslate"><span class="pre">X,Y,Z</span></code> atop of the
new <code class="docutils literal notranslate"><span class="pre">develop</span></code>. This is called <strong>rebase</strong>, and it rewrites your current
branch:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>git checkout my_branch
git rebase -i develop
</pre></div>
</div>
<p>In terms of the commit graph, this results in:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>              X&#39;--Y&#39;--Z&#39; my_branch
             /
A---B---C---D develop
</pre></div>
</div>
<p>Note that this operation rewrites the history of <code class="docutils literal notranslate"><span class="pre">my_branch</span></code> (see
<a class="reference internal" href="git_advanced.html#section-git-rewriting-history"><span class="std std-ref">Rewriting history</span></a>). This can lead to problems if somebody
began to write code atop of your commits <code class="docutils literal notranslate"><span class="pre">X,Y,Z</span></code>. It is safe otherwise.</p>
<p><strong>Alternatively</strong>, you can rebase <code class="docutils literal notranslate"><span class="pre">my_branch</span></code> while updating <code class="docutils literal notranslate"><span class="pre">develop</span></code> at the
same time (see <a class="reference internal" href="#section-git-pull"><span class="std std-ref">Getting changes from a remote</span></a>):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>git checkout my_branch
git pull -r develop
</pre></div>
</div>
</li>
<li><p><strong>Merging</strong> your branch with <code class="docutils literal notranslate"><span class="pre">develop</span></code> will create a new commit above the two
of them:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>git checkout my_branch
git merge develop
</pre></div>
</div>
<p>The result is the following commit graph:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>      X---Y---Z---W my_branch
     /           /
A---B---C-------D develop
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Pros:</strong> you did not rewrite history (see
<a class="reference internal" href="git_advanced.html#section-git-rewriting-history"><span class="std std-ref">Rewriting history</span></a>).The additional commit is then easily
pushed to the git repository and distributed to your collaborators.</p></li>
<li><p><strong>Cons:</strong> it introduced an extra merge commit that would
not be there had you used rebase.</p></li>
</ul>
<p><strong>Alternatively</strong>, you can merge <code class="docutils literal notranslate"><span class="pre">my_branch</span></code> while updating <code class="docutils literal notranslate"><span class="pre">develop</span></code> at the
same time (see <a class="reference internal" href="#section-git-pull"><span class="std std-ref">Getting changes from a remote</span></a>):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>git checkout my_branch
git pull develop
</pre></div>
</div>
</li>
</ul>
<p><strong>In case of doubt</strong> use merge rather than rebase. There is less risk involved,
and rebase in this case is only useful for branches with a very long history.</p>
</section>
<section id="merge-tools">
<span id="section-git-mergetool"></span><h2>Merge tools<a class="headerlink" href="#merge-tools" title="Link to this heading">#</a></h2>
<p>Simple conflicts can be easily solved with Git only (see <a class="reference internal" href="#section-git-conflict"><span class="std std-ref">Conflict resolution</span></a>)</p>
<p>For more complicated ones, a range of specialized programs are
available. Because the conflict marker includes the hash of the most recent
common parent, you can use a three-way diff:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@laptop]$ </span>git<span class="w"> </span>mergetool

<span class="go">This message is displayed because &#39;merge.tool&#39; is not configured.</span>
<span class="go">See &#39;git mergetool --tool-help&#39; or &#39;git help config&#39; for more details.</span>
<span class="go">&#39;git mergetool&#39; will now attempt to use one of the following tools:</span>
<span class="go">meld opendiff kdiff3 [...] merge araxis bc3 codecompare emerge vimdiff</span>
<span class="go">Merging:</span>
<span class="go">fibonacci.py</span>

<span class="go">Normal merge conflict for &#39;fibonacci.py&#39;:</span>
<span class="go">  {local}: modified file</span>
<span class="go">  {remote}: modified file</span>
<span class="go">Hit return to start merge resolution tool (meld):</span>
</pre></div>
</div>
<p>If you don’t have a favourite merge tool we suggest you try <a class="reference external" href="http://meldmerge.org/">meld</a> (cross-platform). The result looks like the following
screenshot.</p>
<img alt="_images/meld-screenshot.png" src="_images/meld-screenshot.png" />
<p>The middle file is the most recent common parent; on the right is
Bob’s version and on the left is Alice’s conflicting version. Clicking
on the arrow moves the marked change to the file in the adjacent
pane.</p>
<section id="conflict-resolution">
<span id="section-git-conflict"></span><h3>Conflict resolution<a class="headerlink" href="#conflict-resolution" title="Link to this heading">#</a></h3>
<p>Merge conflicts happen if there are overlapping edits, and they are an
unavoidable consequence of distributed development. Fortunately,
resolving them is common and easy with Git. As a hypothetical example,
consider the following code snippet:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fibonacci</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the `i`-th Fibonacci number</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>This is clearly wrong. Two developers, namely Alice and Bob, decide to
fix it. Bob corrected the seed values:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fibonacci</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
<span class="w">   </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">   Return the `i`-th Fibonacci number</span>
<span class="sd">   &quot;&quot;&quot;</span>
   <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
       <span class="k">return</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
   <span class="k">return</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
</pre></div>
</div>
<p>and turned those changes into a new commit:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[bob@laptop sage]$ </span>git<span class="w"> </span>add<span class="w"> </span>fibonacci.py
<span class="gp">[bob@laptop sage]$ </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s1">&#39;return correct seed values&#39;</span>
</pre></div>
</div>
<p>He made his changes a PR to the GitHub Sage repo and got it merged to the
<code class="docutils literal notranslate"><span class="pre">develop</span></code> branch. His <code class="docutils literal notranslate"><span class="pre">fibonacci</span></code> function is not yet perfect but is
certainly better than the original.</p>
<p>Meanwhile, Alice changed the multiplication to an addition since that is the
correct recursion formula:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fibonacci</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the `i`-th Fibonacci number</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>and merged her branch with the latest <code class="docutils literal notranslate"><span class="pre">develop</span></code> branch fetched from the GitHub Sage repo:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@home sage]$ </span>git<span class="w"> </span>add<span class="w"> </span>fibonacci.py
<span class="gp">[alice@home sage]$ </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s1">&#39;corrected recursion formula, must be + instead of *&#39;</span>
<span class="gp">[alice@home sage]$ </span>git<span class="w"> </span>fetch<span class="w"> </span>upstream<span class="w"> </span>develop:develop
<span class="gp">[alice@home sage]$ </span>git<span class="w"> </span>merge<span class="w"> </span>develop
<span class="go">...</span>
<span class="go">CONFLICT (content): Merge conflict in fibonacci.py</span>
<span class="go">Automatic merge failed; fix conflicts and then commit the result.</span>
</pre></div>
</div>
<p>The file now looks like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fibonacci</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the `i`-th Fibonacci number</span>
<span class="sd">    &quot;&quot;&quot;</span>
<span class="o">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span> <span class="n">HEAD</span>
    <span class="k">return</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="o">=======</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span> <span class="mi">41675</span><span class="n">dfaedbfb89dcff0a47e520be4aa2b6c5d1b</span>
</pre></div>
</div>
<p>The conflict is shown between the conflict markers <code class="docutils literal notranslate"><span class="pre">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></code>. The first half (up to the <code class="docutils literal notranslate"><span class="pre">=======</span></code> marker) is Alice’s
current version, the second half is Bob’s version. The 40-digit hex
number after the second conflict marker is the SHA1 hash of the most
recent common parent of both.</p>
<p>It is now Alice’s job to resolve the conflict by reconciling their
changes, for example by editing the file. Her result is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fibonacci</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the `i`-th Fibonacci number</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
</pre></div>
</div>
<p>And then upload both her original change <em>and</em> her merge commit to the GitHub Sage repo:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@laptop sage]$ </span>git<span class="w"> </span>add<span class="w"> </span>fibonacci.py
<span class="gp">[alice@laptop sage]$ </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;merged Bob&#39;s changes with mine&quot;</span>
</pre></div>
</div>
<p>The resulting commit graph now has a loop:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">[alice@laptop sage]$ </span>git<span class="w"> </span>log<span class="w"> </span>--graph<span class="w"> </span>--oneline
<span class="go">*   6316447 merged Bob&#39;s changes with mine</span>
<span class="go">|\</span>
<span class="go">| * 41675df corrected recursion formula, must be + instead of *</span>
<span class="go">* | 14ae1d3 return correct seed values</span>
<span class="go">|/</span>
<span class="go">* 14afe53 initial commit</span>
<span class="gp">[alice@laptop sage]$ </span>git<span class="w"> </span>push<span class="w"> </span>origin
</pre></div>
</div>
<p>This time, there is no merge conflict since Alice’s branch already merged the <code class="docutils literal notranslate"><span class="pre">develop</span></code> branch.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="git_advanced.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Advanced Git</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="review.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Reviewing Code</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2005--2024, The Sage Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Git Basics</a><ul>
<li><a class="reference internal" href="#git-authentication-through-ssh">Git authentication through SSH</a><ul>
<li><a class="reference internal" href="#generating-your-ssh-keys">Generating your SSH keys</a></li>
<li><a class="reference internal" href="#adding-your-public-key-for-authentication-to-github">Adding your public key for authentication to GitHub</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pushing-your-changes-to-a-remote">Pushing your changes to a remote</a></li>
<li><a class="reference internal" href="#checking-out-a-pr">Checking out a PR</a></li>
<li><a class="reference internal" href="#getting-changes-from-a-remote">Getting changes from a remote</a></li>
<li><a class="reference internal" href="#updating-develop">Updating develop</a></li>
<li><a class="reference internal" href="#merging-and-rebasing">Merging and rebasing</a></li>
<li><a class="reference internal" href="#merge-tools">Merge tools</a><ul>
<li><a class="reference internal" href="#conflict-resolution">Conflict resolution</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=b1b6de4d"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=0477930c"></script>
    <script src="_static/tabs.js?v=3ee01567"></script>
    <script src="_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="_static/jupyter-sphinx-furo.js?v=1e69cd27"></script>
    </body>
</html>