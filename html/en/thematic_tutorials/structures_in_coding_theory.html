<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Polyhedra" href="geometry.html" /><link rel="prev" title="Coding Theory in Sage" href="coding_theory.html" />

    <meta name="generator" content="sphinx-5.2.3, furo 2022.09.29"/>
        <title>How to write your own classes for coding theory - Thematic Tutorials</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=d81277517bee4d6b0349d71bb2661d4890b5617c" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="_static/custom-furo.css" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  --color-brand-primary: #0f0fff;
  --color-brand-content: #0f0fff;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Thematic Tutorials</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/logo_sagemath_black.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/logo_sagemath_white.svg" alt="Dark Logo"/>
  </div>
  
      <span class="sidebar-brand-text">Sage 10.0 Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-home">
  <div class="sidebar-tree">
    <ul><li class="toctree-l1">
      <a class="reference internal" href="index.html">Home - Thematic Tutorials</a>
    </li></ul>
  </div>
</div><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="toctree.html">Thematic tutorial document tree</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="algebraic_combinatorics.html">Algebraic Combinatorics in Sage</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="algebraic_combinatorics/walks.html">Walks in graphs</a></li>
<li class="toctree-l3"><a class="reference internal" href="algebraic_combinatorics/n_cube.html"><span class="math notranslate nohighlight">\(n\)</span>-Cube</a></li>
<li class="toctree-l3"><a class="reference internal" href="algebraic_combinatorics/tsetlin_library.html">The Tsetlin library</a></li>
<li class="toctree-l3"><a class="reference internal" href="algebraic_combinatorics/rsk.html">Young’s lattice and the RSK algorithm</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="sandpile.html">Abelian Sandpile Model</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="group_theory.html">Group Theory and Sage</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="lie.html">Lie Methods and Related Combinatorics in Sage</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="lie/introduction.html">The Scope of this Document</a></li>
<li class="toctree-l3"><a class="reference internal" href="lie/lie_basics.html">Lie Group Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="lie/weyl_character_ring.html">The Weyl Character Ring</a></li>
<li class="toctree-l3"><a class="reference internal" href="lie/branching_rules.html">Maximal Subgroups and Branching Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="lie/weyl_groups.html">Weyl Groups, Coxeter Groups and the Bruhat Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="lie/crystals.html">Classical Crystals</a></li>
<li class="toctree-l3"><a class="reference internal" href="lie/affine.html">Affine Root System Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="lie/integrable.html">Integrable Highest Weight Representations of Affine Lie algebras</a></li>
<li class="toctree-l3"><a class="reference internal" href="lie/affine_finite_crystals.html">Affine Finite Crystals</a></li>
<li class="toctree-l3"><a class="reference internal" href="lie/affine_hw_crystals.html">Affine Highest Weight Crystals</a></li>
<li class="toctree-l3"><a class="reference internal" href="lie/elementary_crystals.html">Elementary crystals</a></li>
<li class="toctree-l3"><a class="reference internal" href="lie/infinity_crystals.html">Infinity Crystals</a></li>
<li class="toctree-l3"><a class="reference internal" href="lie/iwahori_hecke_algebra.html">Iwahori Hecke Algebras</a></li>
<li class="toctree-l3"><a class="reference internal" href="lie/kazhdan_lusztig_polynomials.html">Kazhdan-Lusztig Polynomials</a></li>
<li class="toctree-l3"><a class="reference internal" href="lie/bibliography.html">Bibliography</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="vector_calculus.html">Tutorial: Vector Calculus in Euclidean Spaces</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="vector_calculus/vector_calc_cartesian.html">How to compute a gradient, a divergence or a curl</a></li>
<li class="toctree-l3"><a class="reference internal" href="vector_calculus/vector_calc_curvilinear.html">How to perform vector calculus in curvilinear coordinates</a></li>
<li class="toctree-l3"><a class="reference internal" href="vector_calculus/vector_calc_change.html">How to change coordinates</a></li>
<li class="toctree-l3"><a class="reference internal" href="vector_calculus/vector_calc_advanced.html">Advanced aspects: the Euclidean space as a Riemannian manifold</a></li>
<li class="toctree-l3"><a class="reference internal" href="vector_calculus/vector_calc_plane.html">Vector calculus in the Euclidean plane</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="linear_programming.html">Linear Programming (Mixed Integer)</a></li>
<li class="toctree-l2"><a class="reference internal" href="numtheory_rsa.html">Number Theory and the RSA Public Key Cryptosystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="coding_theory.html">Coding Theory in Sage</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">How to write your own classes for coding theory</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="geometry.html">Polyhedra</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="geometry/polyhedra_quicktutorial.html">A Brief Introduction to Polytopes in Sage</a></li>
<li class="toctree-l3"><a class="reference internal" href="geometry/polyhedra_tutorial.html">A Longer Introduction to Polyhedral Computations in Sage</a></li>
<li class="toctree-l3"><a class="reference internal" href="geometry/polyhedra_quickref.html">Quick reference for polyhedra in Sage</a></li>
<li class="toctree-l3"><a class="reference internal" href="geometry/tips.html">Polyhedra tips and tricks</a></li>
<li class="toctree-l3"><a class="reference internal" href="geometry/visualization.html">Visualization of polyhedron objects in Sage</a></li>
<li class="toctree-l3"><a class="reference internal" href="geometry/polytope_tikz.html">Draw polytopes in LaTeX using TikZ</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="steenrod_algebra_modules.html">Steenrod Algebra Modules</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial-programming-python.html">Tutorial: Programming in Python and Sage</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial-comprehensions.html">Tutorial: Comprehensions, Iterators, and Iterables</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial-objects-and-classes.html">Tutorial: Objects and Classes in Python and Sage</a></li>
<li class="toctree-l2"><a class="reference internal" href="functional_programming.html">Functional Programming for Mathematicians</a></li>
<li class="toctree-l2"><a class="reference internal" href="coercion_and_categories.html">How to implement new algebraic structures in Sage</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial-implementing-algebraic-structures.html">Tutorial: Implementing Algebraic Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="cython_interface.html">How to call a C code (or a compiled library) from Sage ?</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="numerical_sage/index.html">Numerical Computing with Sage</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="numerical_sage/numerical_tools.html">Numerical Tools</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="numerical_sage/numpy.html">NumPy</a></li>
<li class="toctree-l4"><a class="reference internal" href="numerical_sage/scipy.html">SciPy</a></li>
<li class="toctree-l4"><a class="reference internal" href="numerical_sage/cvxopt.html">Cvxopt</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="numerical_sage/using_compiled_code_iteractively.html">Using Compiled Code Interactively</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="numerical_sage/f2py.html">f2py</a></li>
<li class="toctree-l4"><a class="reference internal" href="numerical_sage/f2py_examples.html">More Interesting Examples with f2py</a></li>
<li class="toctree-l4"><a class="reference internal" href="numerical_sage/ctypes.html">Ctypes</a></li>
<li class="toctree-l4"><a class="reference internal" href="numerical_sage/ctypes_examples.html">More complicated ctypes example</a></li>
<li class="toctree-l4"><a class="reference internal" href="numerical_sage/comparison_to_cython.html">Comparison to Cython/Pyrex</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="numerical_sage/parallel_computation.html">Parallel Computation</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="numerical_sage/mpi4py.html">mpi4py</a></li>
<li class="toctree-l4"><a class="reference internal" href="numerical_sage/parallel_laplace_solver.html">Parallel Laplace Solver</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="explicit_methods_in_number_theory/index.html">Three Lectures about Explicit Methods in Number Theory Using Sage</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="explicit_methods_in_number_theory/introduction.html">Introduction</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="explicit_methods_in_number_theory/number_fields.html">Number Fields</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="explicit_methods_in_number_theory/nf_introduction.html">Introduction to Number Fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="explicit_methods_in_number_theory/nf_galois_groups.html">Number Fields: Galois Groups and Class Groups</a></li>
<li class="toctree-l4"><a class="reference internal" href="explicit_methods_in_number_theory/nf_orders.html">Orders and Relative Extensions</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="explicit_methods_in_number_theory/birds_eye_view.html">A Bird’s Eye View</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="explicit_methods_in_number_theory/integer_factorization.html">Integer Factorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="explicit_methods_in_number_theory/elliptic_curves.html">Elliptic Curves</a></li>
<li class="toctree-l4"><a class="reference internal" href="explicit_methods_in_number_theory/birds_other.html">The Matrix of Frobenius on Hyperelliptic Curves</a></li>
<li class="toctree-l4"><a class="reference internal" href="explicit_methods_in_number_theory/birds_other.html#modular-symbols">Modular Symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="explicit_methods_in_number_theory/birds_other.html#enumerating-totally-real-number-fields">Enumerating Totally Real Number Fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="explicit_methods_in_number_theory/birds_other.html#bernoulli-numbers">Bernoulli Numbers</a></li>
<li class="toctree-l4"><a class="reference internal" href="explicit_methods_in_number_theory/birds_other.html#polynomial-arithmetic">Polynomial Arithmetic</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="explicit_methods_in_number_theory/modular_forms.html">Modular Forms</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="explicit_methods_in_number_theory/modular_forms_and_hecke_operators.html">Modular Forms and Hecke Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="explicit_methods_in_number_theory/modular_symbols.html">Modular Symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="explicit_methods_in_number_theory/method_of_graphs.html">Method of Graphs</a></li>
<li class="toctree-l4"><a class="reference internal" href="explicit_methods_in_number_theory/level_one_forms.html">Level One Modular Forms</a></li>
<li class="toctree-l4"><a class="reference internal" href="explicit_methods_in_number_theory/half_integral.html">Half Integral Weight Forms</a></li>
<li class="toctree-l4"><a class="reference internal" href="explicit_methods_in_number_theory/generators_for_rings.html">Generators for Rings of Modular Forms</a></li>
<li class="toctree-l4"><a class="reference internal" href="explicit_methods_in_number_theory/l_series.html"><span class="math notranslate nohighlight">\(L\)</span>-series</a></li>
<li class="toctree-l4"><a class="reference internal" href="explicit_methods_in_number_theory/modabvar.html">Modular Abelian Varieties</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="profiling.html">Profiling in Sage</a></li>
<li class="toctree-l2"><a class="reference internal" href="sws2rst.html">Creating a Tutorial from an old Sage Worksheet (.sws)</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="how-to-write-your-own-classes-for-coding-theory">
<span id="structures-in-coding-theory"></span><h1><a class="toc-backref" href="#id1" role="doc-backlink">How to write your own classes for coding theory</a><a class="headerlink" href="#how-to-write-your-own-classes-for-coding-theory" title="Permalink to this heading">#</a></h1>
<p><em>Author: David Lucas (2016) for initial version. Marketa Slukova (2019) for this version.</em></p>
<p>This tutorial, designed for advanced users who want to build their own classes,
will explain step by step what you need to do to write code which integrates
well in the framework of coding theory.
During this tutorial, we will cover the following parts:</p>
<ul class="simple">
<li><p>how to write a new <strong>code family</strong></p></li>
<li><p>how to write a new <strong>encoder</strong></p></li>
<li><p>how to write a new <strong>decoder</strong></p></li>
<li><p>how to write a new <strong>channel</strong></p></li>
</ul>
<p>This tutorial focuses on the example of implementation of the repetition code.
At the end of each part, we will summarize every important step of the
implementation. If one just wants a quick access to the implementation of one of
the objects cited above, one can jump directly to the end of related part,
which presents a summary of what to do.</p>
<nav class="contents this-will-duplicate-information-and-it-is-still-useful-here" id="table-of-contents">
<p class="topic-title">Table of contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#how-to-write-your-own-classes-for-coding-theory" id="id1">How to write your own classes for coding theory</a></p>
<ul>
<li><p><a class="reference internal" href="#i-abstract-classes" id="id2">I. Abstract classes</a></p></li>
<li><p><a class="reference internal" href="#ii-the-repetition-code" id="id3">II. The repetition code</a></p></li>
<li><p><a class="reference internal" href="#iii-write-a-new-code-class" id="id4">III. Write a new code class</a></p></li>
<li><p><a class="reference internal" href="#iv-write-a-new-encoder-class" id="id5">IV. Write a new encoder class</a></p></li>
<li><p><a class="reference internal" href="#v-write-a-new-decoder-class" id="id6">V. Write a new decoder class</a></p></li>
<li><p><a class="reference internal" href="#vi-write-a-new-channel-class" id="id7">VI. Write a new channel class</a></p></li>
<li><p><a class="reference internal" href="#vii-sort-our-new-elements" id="id8">VII. Sort our new elements</a></p></li>
<li><p><a class="reference internal" href="#viii-complete-code-of-this-tutorial" id="id9">VIII. Complete code of this tutorial</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="i-abstract-classes">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">I. Abstract classes</a><a class="headerlink" href="#i-abstract-classes" title="Permalink to this heading">#</a></h2>
<p>There is a number of abstract classes representing different types of codes in
the coding module of Sage. Depending on the type of code you want to implement,
you should inherit from different abstract classes.</p>
<p>The most generic class is <code class="xref py py-class docutils literal notranslate"><span class="pre">sage.coding.abstract_code:AbstractCode</span></code>. This
class makes no assumptions about linearity, metric, finiteness or the number of
alphabets. The abstract notion of “code” that is implicitly used for this class
is any enumerable subset of a cartesian product
<span class="math notranslate nohighlight">\(A_1 \times A_2 \times \ldots \times A_n\)</span> for some sets <span class="math notranslate nohighlight">\(A_i\)</span>.</p>
<p>If, for example, you want to create a non-linear code family, this is the class
you should inherit from.</p>
<p>We give a small example of creating a non-linear code family. Take the code
consisting of the following <span class="math notranslate nohighlight">\(l\)</span> words:</p>
<p><span class="math notranslate nohighlight">\(\{00 \ldots 00, 10 \ldots 00, 11 \ldots 00, \ldots , 11 \ldots 10, 11 \ldots 11 \}\)</span>.</p>
<p>Here is how we can implement it:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.coding.abstract_code</span> <span class="kn">import</span> <span class="n">AbstractCode</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">ExampleCodeFamily</span><span class="p">(</span><span class="n">AbstractCode</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="nb">super</span><span class="p">(</span><span class="n">ExampleCodeFamily</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
<span class="gp">....: </span>            <span class="k">yield</span> <span class="n">vector</span><span class="p">([</span><span class="mi">1</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">())])</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="k">return</span> <span class="n">word</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="nf">_repr_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="k">return</span> <span class="s2">&quot;Dummy code of length </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">())</span>

<span class="gp">sage: </span><span class="n">C</span> <span class="o">=</span> <span class="n">ExampleCodeFamily</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="c1"># check that this works.</span>
<span class="gp">sage: </span><span class="n">C</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">[(0, 0, 0, 0), (1, 0, 0, 0), (1, 1, 0, 0), (1, 1, 1, 0), (1, 1, 1, 1)]</span>
</pre></div>
</div>
<p>Focusing on linear codes, the most generic representative is the class
<code class="xref py py-class docutils literal notranslate"><span class="pre">sage.coding.linear_code_no_metric:AbstractLinearCodeNoMetric</span></code> which
contains all the methods that all linear codes share regardless of what their
metric is. If you want to implement a linear code over some metric which has
not been implemented in Sage yet, this is the class you should be inheriting
from.</p>
<p>We have two metric specific abstract linear code classes,
<code class="xref py py-class docutils literal notranslate"><span class="pre">sage.coding.linear_code:AbstractLinearCode</span></code> for Hamming metric and
<code class="xref py py-class docutils literal notranslate"><span class="pre">sage.coding.linear_rank_metric:AbstractLinearRankMetricCode</span></code> for rank
metric. If you wish to implement a linear code class over one of these metrics,
you should inherit from the given abstract class.</p>
</section>
<section id="ii-the-repetition-code">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">II. The repetition code</a><a class="headerlink" href="#ii-the-repetition-code" title="Permalink to this heading">#</a></h2>
<p>We want to implement in Sage the well-known repetition code.
Its definition follows:</p>
<p>the <span class="math notranslate nohighlight">\((n, 1)\)</span>-repetition code over <span class="math notranslate nohighlight">\(\GF{q}\)</span> is the code formed
by all the vectors of <span class="math notranslate nohighlight">\(\GF{q}^{n}\)</span> of the form
<span class="math notranslate nohighlight">\((i, i, i, \dots, i)\)</span> for all <span class="math notranslate nohighlight">\(i \in \GF{q}\)</span>.</p>
<p>For example, the <span class="math notranslate nohighlight">\((3, 1)\)</span>-repetition code over <span class="math notranslate nohighlight">\(\GF{2}\)</span> is:
<span class="math notranslate nohighlight">\(C = \{(0, 0, 0), (1, 1, 1)\}\)</span>.</p>
<p>The encoding is very simple, it only consists in repeating <span class="math notranslate nohighlight">\(n\)</span>
times the input symbol and pick the vector thus formed.</p>
<p>The decoding uses majority voting to select the right symbol
(over <span class="math notranslate nohighlight">\(\GF{2}\)</span>). If we receive the word <span class="math notranslate nohighlight">\((1, 0, 1)\)</span>
(example cont’d), we deduce that the original word was <span class="math notranslate nohighlight">\((1)\)</span>.
It can correct up to <span class="math notranslate nohighlight">\(\left\lceil \frac{n-1}{2} \right\rceil\)</span> errors.</p>
<p>Through all this tutorial, we will illustrate the implementation of the
<span class="math notranslate nohighlight">\((n, 1)\)</span>-repetition code over <span class="math notranslate nohighlight">\(\GF{2}\)</span>.</p>
</section>
<section id="iii-write-a-new-code-class">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">III. Write a new code class</a><a class="headerlink" href="#iii-write-a-new-code-class" title="Permalink to this heading">#</a></h2>
<p>The first thing to do to write a new code class is to identify which abstract
class to inherit from. Since the repetition code is linear and we take it over
the Hamming metric, this means that we will inherit from
<a class="reference external" href="../reference/coding/sage/coding/linear_code.html#sage.coding.linear_code.AbstractLinearCode" title="(in Coding Theory v10.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.coding.linear_code.AbstractLinearCode</span></code></a>.</p>
<p>Now we have to identify the initializing parameters of this class, which are:</p>
<ul class="simple">
<li><p>the length of the code,</p></li>
<li><p>the base field of the code,</p></li>
<li><p>the default encoder for the code,</p></li>
<li><p>the default decoder for the code and</p></li>
<li><p>any other useful argument we want to set at construction time.</p></li>
</ul>
<p>For our code, we know its length, its dimension, its base field, one encoder
and one decoder.</p>
<p>Now we isolated the parameters of the code, we can write the
constructor of our class.
As we said, every linear code class over the Hamming metric must inherit from
<a class="reference external" href="../reference/coding/sage/coding/linear_code.html#sage.coding.linear_code.AbstractLinearCode" title="(in Coding Theory v10.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.coding.linear_code.AbstractLinearCode</span></code></a>.
This class provides a lot of useful methods and, as we illustrate thereafter,
a default constructor which sets the <em>length</em>, the <em>base field</em>,
the <em>default encoder</em> and the <em>default decoder</em> as class parameters.
We also need to create the dictionary of known encoders and decoders
for the class.</p>
<p>Let us now write the constructor for our code class,
that we store in some file called <code class="docutils literal notranslate"><span class="pre">repetition_code.py</span></code>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.coding.linear_code</span> <span class="kn">import</span> <span class="n">AbstractLinearCode</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.rings.finite_rings.finite_field_constructor</span> <span class="kn">import</span> <span class="n">FiniteField</span> <span class="k">as</span> <span class="n">GF</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">BinaryRepetitionCode</span><span class="p">(</span><span class="n">AbstractLinearCode</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="n">_registered_encoders</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">....: </span>    <span class="n">_registered_decoders</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="nb">super</span><span class="p">(</span><span class="n">BinaryRepetitionCode</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">length</span><span class="p">,</span>
<span class="gp">....: </span>          <span class="s2">&quot;RepetitionGeneratorMatrixEncoder&quot;</span><span class="p">,</span> <span class="s2">&quot;MajorityVoteDecoder&quot;</span><span class="p">)</span>
<span class="gp">....: </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_dimension</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>As you notice, the constructor is really simple. Most of the work is indeed
managed by the topclass through the <code class="docutils literal notranslate"><span class="pre">super</span></code> statement.
Note that the dimension is not set by the abstract class, because for some
code families the exact dimension is hard to compute.
If the exact dimension is known, set it using <code class="docutils literal notranslate"><span class="pre">_dimension</span></code>
as a class parameter.</p>
<p>We can now write representation methods for our code class:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">_repr_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="s2">&quot;Binary repetition code of length </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
<span class="gp">sage: </span><span class="k">def</span> <span class="nf">_latex_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">extnormal{Binary repetition code of length } </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
</pre></div>
</div>
<p>We also write a method to check equality:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">BinaryRepetitionCode</span><span class="p">)</span>
<span class="gp">....: </span>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
<span class="gp">....: </span>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimension</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">dimension</span><span class="p">())</span>
</pre></div>
</div>
<p>After these examples, you probably noticed that we use two methods,
namely <code class="docutils literal notranslate"><span class="pre">length()</span></code> and <code class="docutils literal notranslate"><span class="pre">dimension()</span></code> without defining them.
That is because their implementation is provided in parent classes of
<a class="reference external" href="../reference/coding/sage/coding/linear_code.html#sage.coding.linear_code.AbstractLinearCode" title="(in Coding Theory v10.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.coding.linear_code.AbstractLinearCode</span></code></a>, which are
<a class="reference external" href="../reference/coding/sage/coding/linear_code_no_metric.html#sage.coding.linear_code_no_metric.AbstractLinearCodeNoMetric" title="(in Coding Theory v10.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.coding.linear_code_no_metric.AbstractLinearCodeNoMetric</span></code></a> and
<a class="reference external" href="../reference/coding/sage/coding/abstract_code.html#sage.coding.abstract_code.AbstractCode" title="(in Coding Theory v10.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.coding.abstract_code.AbstractCode</span></code></a></p>
<p>They provide a default implementation of the following getter methods:</p>
<ul class="simple">
<li><p><a class="reference external" href="../reference/coding/sage/coding/abstract_code.html#sage.coding.abstract_code.AbstractCode.length" title="(in Coding Theory v10.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.coding.abstract_code.AbstractCode.length()</span></code></a>,</p></li>
<li><p><a class="reference external" href="../reference/coding/sage/coding/linear_code_no_metric.html#sage.coding.linear_code_no_metric.AbstractLinearCodeNoMetric.dimension" title="(in Coding Theory v10.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.coding.linear_code_no_metric.AbstractLinearCodeNoMetric.dimension()</span></code></a>,</p></li>
<li><p><a class="reference external" href="../reference/coding/sage/coding/linear_code_no_metric.html#sage.coding.linear_code_no_metric.AbstractLinearCodeNoMetric.base_field" title="(in Coding Theory v10.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.coding.linear_code_no_metric.AbstractLinearCodeNoMetric.base_field()</span></code></a> and</p></li>
<li><p><a class="reference external" href="../reference/coding/sage/coding/linear_code_no_metric.html#sage.coding.linear_code_no_metric.AbstractLinearCodeNoMetric.ambient_space" title="(in Coding Theory v10.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.coding.linear_code_no_metric.AbstractLinearCodeNoMetric.ambient_space()</span></code></a>.</p></li>
</ul>
<p>They also provide several other useful methods, such as <code class="docutils literal notranslate"><span class="pre">__contains__</span></code>. Note
that a lot of these other methods rely on the computation of a generator matrix.
It is thus highly recommended to set an encoder which knows how to compute such
a matrix as default encoder. As default encoder will be used by all these
methods which expect a generator matrix, if one provides a default encoder which
does not have a <code class="docutils literal notranslate"><span class="pre">generator_matrix</span></code> method, a lot of generic methods will fail.</p>
<p>As our code family is really simple, we do not need anything else,
and the code provided above is enough to describe properly a repetition code.</p>
<section id="summary-of-the-implementation-for-linear-codes-over-the-hamming-metric">
<h3>Summary of the implementation for linear codes over the Hamming metric<a class="headerlink" href="#summary-of-the-implementation-for-linear-codes-over-the-hamming-metric" title="Permalink to this heading">#</a></h3>
<ol class="arabic">
<li><p>Inherit from <a class="reference external" href="../reference/coding/sage/coding/linear_code.html#sage.coding.linear_code.AbstractLinearCode" title="(in Coding Theory v10.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.coding.linear_code.AbstractLinearCode</span></code></a>.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">_registered_encoders</span> <span class="pre">=</span>&#160; <span class="pre">{}</span></code> and <code class="docutils literal notranslate"><span class="pre">_registered_decoders</span> <span class="pre">=</span> <span class="pre">{}</span></code>
as class variables.</p></li>
<li><p>Add this line in the class’ constructor:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">super(ClassName, self).__init__(base_field, length, &quot;DefaultEncoder&quot;, &quot;DefaultDecoder&quot;)</span>
</pre></div>
</div>
</li>
<li><p>Implement representation methods (not mandatory, but highly advised)
<code class="docutils literal notranslate"><span class="pre">_repr_</span></code> and <code class="docutils literal notranslate"><span class="pre">_latex_</span></code>.</p></li>
<li><p>Implement <code class="docutils literal notranslate"><span class="pre">__eq__</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__ne__</span></code>, <code class="docutils literal notranslate"><span class="pre">length</span></code> and <code class="docutils literal notranslate"><span class="pre">dimension</span></code> come with the abstract class.</p></li>
</ol>
<p>Please note that <code class="docutils literal notranslate"><span class="pre">dimension</span></code> will not work is there is no field
<code class="docutils literal notranslate"><span class="pre">_dimension</span></code> as class parameter.</p>
<p>We now know how to write a new code class.
Let us see how to write a new encoder and a new decoder.</p>
</section>
</section>
<section id="iv-write-a-new-encoder-class">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">IV. Write a new encoder class</a><a class="headerlink" href="#iv-write-a-new-encoder-class" title="Permalink to this heading">#</a></h2>
<p>Let us continue our example. We ask the same question as before:
what do we need to describe the encoder?
For most of the cases (this one included), we only need the associated code.
In that case, writing the constructor is really straightforward
(we store the code in the same <code class="docutils literal notranslate"><span class="pre">.py</span></code> file as the code class):</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.coding.encoder</span> <span class="kn">import</span> <span class="n">Encoder</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">BinaryRepetitionCodeGeneratorMatrixEncoder</span><span class="p">(</span><span class="n">Encoder</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="nb">super</span><span class="p">(</span><span class="n">BinaryRepetitionCodeGeneratorMatrixEncoder</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
</pre></div>
</div>
<p>Same thing as before, as an encoder always needs to know its associated code,
the work can be done by the base class.
Remember to inherit from <a class="reference external" href="../reference/coding/sage/coding/encoder.html#sage.coding.encoder.Encoder" title="(in Coding Theory v10.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.coding.encoder.Encoder</span></code></a>!</p>
<p>We also want to override representation methods <code class="docutils literal notranslate"><span class="pre">_repr_</span></code> and <code class="docutils literal notranslate"><span class="pre">_latex_</span></code>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">_repr_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="s2">&quot;Binary repetition encoder for the </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span>
<span class="gp">sage: </span><span class="k">def</span> <span class="nf">_latex_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">extnormal{Binary repetition encoder for the } </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span>
</pre></div>
</div>
<p>And we want to have an equality check too:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">BinaryRepetitionCodeGeneratorMatrixEncoder</span><span class="p">)</span>
<span class="gp">....: </span>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">code</span><span class="p">())</span>
</pre></div>
</div>
<p>As before, default getter method is provided by the topclass,
namely <a class="reference external" href="../reference/coding/sage/coding/encoder.html#sage.coding.encoder.Encoder.code" title="(in Coding Theory v10.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.coding.encoder.Encoder.code()</span></code></a>.</p>
<p>All we have to do is to implement the methods related to the encoding.
This implementation changes quite a lot whether
we have a generator matrix or not.</p>
<section id="we-have-a-generator-matrix">
<h3>We have a generator matrix<a class="headerlink" href="#we-have-a-generator-matrix" title="Permalink to this heading">#</a></h3>
<p>In that case, the message space is a vector space, and it is especially easy:
the only method you need to implement is <code class="docutils literal notranslate"><span class="pre">generator_matrix</span></code>.</p>
<p>Continuing our example, it will be:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">generator_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="p">[</span><span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">one</span><span class="p">()]</span> <span class="o">*</span> <span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
<p>As the topclass provides default implementation for encode and the inverse
operation, that we call <em>unencode</em>
(see: <a class="reference external" href="../reference/coding/sage/coding/encoder.html#sage.coding.encoder.Encoder.encode" title="(in Coding Theory v10.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.coding.encoder.Encoder.encode()</span></code></a> and
<a class="reference external" href="../reference/coding/sage/coding/encoder.html#sage.coding.encoder.Encoder.unencode" title="(in Coding Theory v10.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.coding.encoder.Encoder.unencode()</span></code></a>), alongside
with a default implementation of
<a class="reference external" href="../reference/coding/sage/coding/encoder.html#sage.coding.encoder.Encoder.message_space" title="(in Coding Theory v10.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.coding.encoder.Encoder.message_space()</span></code></a>, our work here is done.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Default <code class="docutils literal notranslate"><span class="pre">encode</span></code> method multiplies the provide word by the generator
matrix, while default <code class="docutils literal notranslate"><span class="pre">unencode</span></code> computes an information set for
the generator matrix, inverses it and performs a matrix-vector
multiplication to recover the original message.
If one has a better implementation for one’s specific code family,
one should obviously override the default <code class="docutils literal notranslate"><span class="pre">encode</span></code> and <code class="docutils literal notranslate"><span class="pre">unencode</span></code>.</p>
</div>
</section>
<section id="we-do-not-have-any-generator-matrix">
<h3>We do not have any generator matrix<a class="headerlink" href="#we-do-not-have-any-generator-matrix" title="Permalink to this heading">#</a></h3>
<p>In that case, we need to override several methods, namely <code class="docutils literal notranslate"><span class="pre">encode</span></code>,
<code class="docutils literal notranslate"><span class="pre">unencode_nocheck</span></code> and probably <code class="docutils literal notranslate"><span class="pre">message_space</span></code> (in the case where
the message space is not a vector space). Note that the default
implementation of <a class="reference external" href="../reference/coding/sage/coding/encoder.html#sage.coding.encoder.Encoder.unencode" title="(in Coding Theory v10.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.coding.encoder.Encoder.unencode()</span></code></a> relies on
<code class="docutils literal notranslate"><span class="pre">unencode_nocheck</span></code>, so reimplementing the former is not necessary.</p>
<p>In our example, it is easy to create an encoder which does not need
a generator matrix to perform the encoding and the unencoding.
We propose the following implementation:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="n">vector</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="p">[</span><span class="n">message</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span><span class="o">.</span><span class="n">length</span><span class="p">())</span>

<span class="gp">sage: </span><span class="k">def</span> <span class="nf">unencode_nocheck</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="gp">sage: </span><span class="k">def</span> <span class="nf">message_space</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Our work here is done.</p>
<p>We need to do one extra thing: set this encoder in the dictionary
of known encoders for the associated code class.
To do that, just add the following line at the end of your file:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">BinaryRepetitionCode._registered_encoders[&quot;RepetitionGeneratorMatrixEncoder&quot;] = BinaryRepetitionCodeGeneratorMatrixEncoder</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In case you are implementing a generic encoder (an encoder which works
with any family of linear codes), please add the following statement in
<code class="docutils literal notranslate"><span class="pre">AbstractLinearCode</span></code>’s constructor instead:
<code class="docutils literal notranslate"><span class="pre">self._registered_encoders[&quot;EncName&quot;]</span> <span class="pre">=</span> <span class="pre">MyGenericEncoder</span></code>.
This will make it immediately available to any code
class which inherits from <span class="math notranslate nohighlight">\(AbstractLinearCode\)</span>.</p>
</div>
</section>
<section id="summary-of-the-implementation-for-encoders">
<h3>Summary of the implementation for encoders<a class="headerlink" href="#summary-of-the-implementation-for-encoders" title="Permalink to this heading">#</a></h3>
<ol class="arabic">
<li><p>Inherit from <a class="reference external" href="../reference/coding/sage/coding/encoder.html#sage.coding.encoder.Encoder" title="(in Coding Theory v10.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.coding.encoder.Encoder</span></code></a>.</p></li>
<li><p>Add this line in the class’ constructor:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">super(ClassName, self).__init__(associated_code)</span>
</pre></div>
</div>
</li>
<li><p>Implement representation methods (not mandatory) <code class="docutils literal notranslate"><span class="pre">_repr_</span></code>
and <code class="docutils literal notranslate"><span class="pre">_latex_</span></code>.</p></li>
<li><p>Implement <code class="docutils literal notranslate"><span class="pre">__eq__</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__ne__</span></code>, <code class="docutils literal notranslate"><span class="pre">code</span></code> come with the abstract class.</p></li>
<li><p>If a generator matrix is known, override <code class="docutils literal notranslate"><span class="pre">generator_matrix</span></code>.</p></li>
<li><p>Else override <code class="docutils literal notranslate"><span class="pre">encode</span></code>, <code class="docutils literal notranslate"><span class="pre">unencode_nocheck</span></code> and if needed
<code class="docutils literal notranslate"><span class="pre">message_space</span></code>.</p></li>
<li><p>Add the encoder to <code class="docutils literal notranslate"><span class="pre">CodeClass._registered_encoders</span></code>.</p></li>
</ol>
</section>
</section>
<section id="v-write-a-new-decoder-class">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">V. Write a new decoder class</a><a class="headerlink" href="#v-write-a-new-decoder-class" title="Permalink to this heading">#</a></h2>
<p>Let us continue by writing a decoder. As before, we need to know what is
required to describe a decoder. We need of course the associated code of
the decoder. We also want to know which <code class="docutils literal notranslate"><span class="pre">Encoder</span></code> we should use when we
try to recover the original message from a received word containing errors.
We call this encoder <code class="docutils literal notranslate"><span class="pre">connected_encoder</span></code>.
As different decoding algorithms do not have the same behaviour
(e.g. probabilistic decoding vs deterministic), we would like to give a few
clues about the type of a decoder. So we can store a list of keywords in the
class parameter <code class="docutils literal notranslate"><span class="pre">_decoder_type</span></code>.
Eventually, we also need to know the input space of the decoder.
As usual, initializing these parameters can be delegated to the topclass,
and our constructor looks like that:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.coding.decoder</span> <span class="kn">import</span> <span class="n">Decoder</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">BinaryRepetitionCodeMajorityVoteDecoder</span><span class="p">(</span><span class="n">Decoder</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="nb">super</span><span class="p">((</span><span class="n">BinaryRepetitionCodeMajorityVoteDecoder</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">code</span><span class="p">,</span>
<span class="gp">....: </span>           <span class="n">code</span><span class="o">.</span><span class="n">ambient_space</span><span class="p">(),</span> <span class="s2">&quot;RepetitionGeneratorMatrixEncoder&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Remember to inherit from <a class="reference external" href="../reference/coding/sage/coding/decoder.html#sage.coding.decoder.Decoder" title="(in Coding Theory v10.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.coding.decoder.Decoder</span></code></a>!</p>
<p>As <code class="docutils literal notranslate"><span class="pre">_decoder_type</span></code> is actually a class parameter, one should set it
in the file itself, outside of any method.
For readability, we suggest to add this statement at the bottom of the file.
We’ll get back to this in a moment.</p>
<p>We also want to override representation methods <code class="docutils literal notranslate"><span class="pre">_repr_</span></code> and <code class="docutils literal notranslate"><span class="pre">_latex_</span></code>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">_repr_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="s2">&quot;Majority vote-based decoder for the </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span>
<span class="gp">sage: </span><span class="k">def</span> <span class="nf">_latex_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">extnormal{Majority vote based-decoder for the } </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span>
</pre></div>
</div>
<p>And we want to have an equality check too:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="nb">isinstance</span><span class="p">((</span><span class="n">other</span><span class="p">,</span> <span class="n">BinaryRepetitionCodeMajorityVoteDecoder</span><span class="p">)</span>
<span class="gp">....: </span>          <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">code</span><span class="p">())</span>
</pre></div>
</div>
<p>As before, default getter methods are provided by the topclass, namely
<a class="reference external" href="../reference/coding/sage/coding/decoder.html#sage.coding.decoder.Decoder.code" title="(in Coding Theory v10.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.coding.decoder.Decoder.code()</span></code></a>,
<a class="reference external" href="../reference/coding/sage/coding/decoder.html#sage.coding.decoder.Decoder.input_space" title="(in Coding Theory v10.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.coding.decoder.Decoder.input_space()</span></code></a>,
<a class="reference external" href="../reference/coding/sage/coding/decoder.html#sage.coding.decoder.Decoder.decoder_type" title="(in Coding Theory v10.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.coding.decoder.Decoder.decoder_type()</span></code></a> and
<a class="reference external" href="../reference/coding/sage/coding/decoder.html#sage.coding.decoder.Decoder.connected_encoder" title="(in Coding Theory v10.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.coding.decoder.Decoder.connected_encoder()</span></code></a>.</p>
<p>All we have to do know is to implement the methods related to the decoding.</p>
<p>There are two methods, namely
<a class="reference external" href="../reference/coding/sage/coding/decoder.html#sage.coding.decoder.Decoder.decode_to_code" title="(in Coding Theory v10.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.coding.decoder.Decoder.decode_to_code()</span></code></a>
and <a class="reference external" href="../reference/coding/sage/coding/decoder.html#sage.coding.decoder.Decoder.decode_to_message" title="(in Coding Theory v10.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.coding.decoder.Decoder.decode_to_message()</span></code></a>.</p>
<p>By the magic of default implementation, these two are linked, as
<code class="docutils literal notranslate"><span class="pre">decode_to_message</span></code> calls first <code class="docutils literal notranslate"><span class="pre">decode_to_code</span></code> and then
<code class="docutils literal notranslate"><span class="pre">unencode</span></code>, while <code class="docutils literal notranslate"><span class="pre">decode_to_code</span></code> calls successively
<code class="docutils literal notranslate"><span class="pre">decode_to_message</span></code> and <code class="docutils literal notranslate"><span class="pre">encode</span></code>.
So we only need to implement one of these two, and we choose
to override <code class="docutils literal notranslate"><span class="pre">decode_to_code</span></code>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">decode_to_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="n">list_word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="gp">....: </span>    <span class="n">count_one</span> <span class="o">=</span> <span class="n">list_word</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">one</span><span class="p">())</span>
<span class="gp">....: </span>    <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
<span class="gp">....: </span>    <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_word</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="n">F</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="k">if</span> <span class="n">count_one</span> <span class="o">&gt;</span> <span class="n">length</span> <span class="o">/</span> <span class="mi">2</span><span class="p">:</span>
<span class="gp">....: </span>        <span class="k">return</span> <span class="n">vector</span><span class="p">(</span><span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="n">F</span><span class="o">.</span><span class="n">one</span><span class="p">()]</span> <span class="o">*</span> <span class="n">n</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="k">elif</span> <span class="n">count_one</span> <span class="o">&lt;</span> <span class="n">length</span> <span class="o">/</span> <span class="mi">2</span><span class="p">:</span>
<span class="gp">....: </span>        <span class="k">return</span> <span class="n">vector</span><span class="p">(</span><span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="n">F</span><span class="o">.</span><span class="n">zero</span><span class="p">()]</span> <span class="o">*</span> <span class="n">n</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="k">else</span><span class="p">:</span>
<span class="gp">....: </span>        <span class="k">raise</span> <span class="n">DecodingError</span><span class="p">(</span><span class="s2">&quot;impossible to find a majority&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>One notices that if default <code class="docutils literal notranslate"><span class="pre">decode_to_code</span></code> calls default
<code class="docutils literal notranslate"><span class="pre">decode_to_message</span></code> and default <code class="docutils literal notranslate"><span class="pre">decode_to_message</span></code> calls default
<code class="docutils literal notranslate"><span class="pre">decode_to_code</span></code>, if none is overridden and one is called,
it will end up stuck in an infinite loop. We added a trigger guard
against this, so if none is overridden and one is called,
an exception will be raised.</p>
</div>
<p>Only one method is missing: one to provide to the user the number of
errors our decoder can decode.
This is the method <a class="reference external" href="../reference/coding/sage/coding/decoder.html#sage.coding.decoder.Decoder.decoding_radius" title="(in Coding Theory v10.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sage.coding.decoder.Decoder.decoding_radius()</span></code></a>,
which we override:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">decoding_radius</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span><span class="o">.</span><span class="n">length</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
</pre></div>
</div>
<p>As for some cases, the decoding might not be precisely known, its
implementation is not mandatory in <a class="reference external" href="../reference/coding/sage/coding/decoder.html#sage.coding.decoder.Decoder" title="(in Coding Theory v10.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.coding.decoder.Decoder</span></code></a>’s
subclasses.</p>
<p>We need to do one extra thing: set this encoder in the dictionary of
known decoders for the associated code class.
To do that, just add the following line at the end of your file:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">BinaryRepetitionCode._registered_decoders[&quot;MajorityVoteDecoder&quot;] = BinaryRepetitionCodeMajorityVoteDecoder</span>
</pre></div>
</div>
<p>Also put this line to set <code class="docutils literal notranslate"><span class="pre">decoder_type</span></code>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">BinaryRepetitionCode._decoder_type = {&quot;hard-decision&quot;, &quot;unique&quot;}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In case you are implementing a generic decoder (a decoder which works
with any family of linear codes), please add the following statement in
<code class="docutils literal notranslate"><span class="pre">AbstractLinearCode</span></code>’s constructor instead:
<code class="docutils literal notranslate"><span class="pre">self._registered_decoders[&quot;DecName&quot;]</span> <span class="pre">=</span> <span class="pre">MyGenericDecoder</span></code>.
This will make it immediately available to any code
class which inherits from <span class="math notranslate nohighlight">\(AbstractLinearCode\)</span>.</p>
</div>
<section id="summary-of-the-implementation-for-decoders">
<h3>Summary of the implementation for decoders<a class="headerlink" href="#summary-of-the-implementation-for-decoders" title="Permalink to this heading">#</a></h3>
<ol class="arabic">
<li><p>Inherit from <a class="reference external" href="../reference/coding/sage/coding/decoder.html#sage.coding.decoder.Decoder" title="(in Coding Theory v10.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.coding.decoder.Decoder</span></code></a>.</p></li>
<li><p>Add this line in the class’ constructor:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">super(ClassName, self).__init__(associated_code, input_space, connected_encoder_name, decoder_type)</span>
</pre></div>
</div>
</li>
<li><p>Implement representation methods (not mandatory) <code class="docutils literal notranslate"><span class="pre">_repr_</span></code> and
<code class="docutils literal notranslate"><span class="pre">_latex_</span></code>.</p></li>
<li><p>Implement <code class="docutils literal notranslate"><span class="pre">__eq__</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__ne__</span></code>, <code class="docutils literal notranslate"><span class="pre">code</span></code>, <code class="docutils literal notranslate"><span class="pre">connected_encoder</span></code>, <code class="docutils literal notranslate"><span class="pre">decoder_type</span></code> come with
the abstract class.</p></li>
<li><p>Override <code class="docutils literal notranslate"><span class="pre">decode_to_code</span></code> or <code class="docutils literal notranslate"><span class="pre">decode_to_message</span></code> and
<code class="docutils literal notranslate"><span class="pre">decoding_radius</span></code>.</p></li>
<li><p>Add the encoder to <code class="docutils literal notranslate"><span class="pre">CodeClass._registered_decoders</span></code>.</p></li>
</ol>
</section>
</section>
<section id="vi-write-a-new-channel-class">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">VI. Write a new channel class</a><a class="headerlink" href="#vi-write-a-new-channel-class" title="Permalink to this heading">#</a></h2>
<p>Alongside all these new structures directly related to codes, we also propose
a whole new and shiny structure to experiment on codes, and more specifically
on their decoding.</p>
<p>Indeed, we implemented a structure to emulate real-world communication
channels.</p>
<p>I’ll propose here a step-by-step implementation of a dummy channel
for example’s sake.</p>
<p>We will implement a very naive channel which works only for words over
<span class="math notranslate nohighlight">\(\GF{2}\)</span> and flips as many bits as requested by the user.</p>
<p>As channels are not directly related to code families, but more to
vectors and words, we have a specific file, <code class="docutils literal notranslate"><span class="pre">channel.py</span></code>
to store them.</p>
<p>So we will just add our new class in this file.</p>
<p>For starters, we ask ourselves the eternal question: What do we need to
describe a channel?
Well, we mandatorily need its <code class="docutils literal notranslate"><span class="pre">input_space</span></code> and its <code class="docutils literal notranslate"><span class="pre">output_space</span></code>.
Of course, in most of the cases, the user will be able to provide some extra
information on the channel’s behaviour.
In our case, it will be the number of bits to flip (aka the number of errors).</p>
<p>As you might have guess, there is an abstract class to take care
of the mandatory arguments!
Plus, in our case, as this channel only works for vectors
over <span class="math notranslate nohighlight">\(\GF{2}\)</span>, the input and output spaces are the same.
Let us write the constructor of our new channel class:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.coding.channel</span> <span class="kn">import</span> <span class="n">Channel</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">BinaryStaticErrorRateChannel</span><span class="p">(</span><span class="n">Channel</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">number_errors</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="k">if</span> <span class="n">space</span><span class="o">.</span><span class="n">base_ring</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
<span class="gp">....: </span>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Provided space must be a vector space over GF(2)&quot;</span><span class="p">)</span>
<span class="gp">....: </span>        <span class="k">if</span> <span class="n">number_errors</span> <span class="o">&gt;</span> <span class="n">space</span><span class="o">.</span><span class="n">dimension</span><span class="p">():</span>
<span class="gp">....: </span>            <span class="k">raise</span> <span class="n">ValueErrors</span><span class="p">(</span><span class="s2">&quot;number_errors cannot be bigger than input space&#39;s dimension&quot;</span><span class="p">)</span>
<span class="gp">....: </span>        <span class="nb">super</span><span class="p">(</span><span class="n">BinaryStaticErrorRateChannel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">space</span><span class="p">,</span> <span class="n">space</span><span class="p">)</span>
<span class="gp">....: </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_number_errors</span> <span class="o">=</span> <span class="n">number_errors</span>
</pre></div>
</div>
<p>Remember to inherit from <a class="reference external" href="../reference/coding/sage/coding/channel.html#sage.coding.channel.Channel" title="(in Coding Theory v10.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.coding.channel.Channel</span></code></a>!</p>
<p>We also want to override representation methods <code class="docutils literal notranslate"><span class="pre">_repr_</span></code> and <code class="docutils literal notranslate"><span class="pre">_latex_</span></code>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">_repr_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;Binary static error rate channel creating </span><span class="si">%s</span><span class="s2"> errors, of input and output space </span><span class="si">%s</span><span class="s2">&quot;</span>
<span class="gp">....: </span>            <span class="o">%</span> <span class="p">(</span><span class="n">format_interval</span><span class="p">(</span><span class="n">no_err</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_space</span><span class="p">()))</span>

<span class="gp">sage: </span><span class="k">def</span> <span class="nf">_latex_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">textnormal{Static error rate channel creating </span><span class="si">%s</span><span class="s2"> errors, of input and output space </span><span class="si">%s</span><span class="s2">}&quot;</span>
<span class="gp">....: </span>            <span class="o">%</span> <span class="p">(</span><span class="n">format_interval</span><span class="p">(</span><span class="n">no_err</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_space</span><span class="p">()))</span>
</pre></div>
</div>
<p>We don’t really see any use case for equality methods
(<code class="docutils literal notranslate"><span class="pre">__eq__</span></code> and <code class="docutils literal notranslate"><span class="pre">__ne__</span></code>) so do not provide any default implementation.
If one needs these, one can of course override Python’s default methods.</p>
<p>We of course want getter methods.
There is a provided default implementation for <code class="docutils literal notranslate"><span class="pre">input_space</span></code> and
<code class="docutils literal notranslate"><span class="pre">output_space</span></code>, so we only need one for <code class="docutils literal notranslate"><span class="pre">number_errors</span></code>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">number_errors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number_errors</span>
</pre></div>
</div>
<p>So, now we want a method to actually add errors to words.
As it is the same thing as transmitting messages over a real-world channel,
we propose two methods, <code class="docutils literal notranslate"><span class="pre">transmit</span></code> and <code class="docutils literal notranslate"><span class="pre">transmit_unsafe</span></code>.
As you can guess, <code class="docutils literal notranslate"><span class="pre">transmit_unsafe</span></code> tries to transmit the message
without checking if it is in the input space or not, while <code class="docutils literal notranslate"><span class="pre">transmit</span></code> checks
this before the transmission… Which means that <code class="docutils literal notranslate"><span class="pre">transmit</span></code> has a default
implementation which calls <code class="docutils literal notranslate"><span class="pre">transmit_unsafe</span></code>.
So we only need to override <code class="docutils literal notranslate"><span class="pre">transmit_unsafe</span></code>! Let us do it:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">transmit_unsafe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="n">w</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="n">number_err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_errors</span><span class="p">()</span>
<span class="gp">....: </span>    <span class="n">V</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_space</span><span class="p">()</span>
<span class="gp">....: </span>    <span class="n">F</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">....: </span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">V</span><span class="o">.</span><span class="n">dimension</span><span class="p">()),</span> <span class="n">number_err</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="n">w</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">F</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="n">w</span>
</pre></div>
</div>
<p>That is it, we now have our new channel class ready to use!</p>
<section id="summary-of-the-implementation-for-channels">
<h3>Summary of the implementation for channels<a class="headerlink" href="#summary-of-the-implementation-for-channels" title="Permalink to this heading">#</a></h3>
<ol class="arabic">
<li><p>Inherit from <a class="reference external" href="../reference/coding/sage/coding/channel.html#sage.coding.channel.Channel" title="(in Coding Theory v10.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sage.coding.channel.Channel</span></code></a>.</p></li>
<li><p>Add this line in the class’ constructor:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">super</span><span class="p">(</span><span class="n">ClassName</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">input_space</span><span class="p">,</span> <span class="n">output_space</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Implement representation methods (not mandatory) <code class="docutils literal notranslate"><span class="pre">_repr_</span></code> and
<code class="docutils literal notranslate"><span class="pre">_latex_</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">input_space</span></code> and <code class="docutils literal notranslate"><span class="pre">output_space</span></code> getter methods come with the
abstract class.</p></li>
<li><p>Override <code class="docutils literal notranslate"><span class="pre">transmit_unsafe</span></code>.</p></li>
</ol>
</section>
</section>
<section id="vii-sort-our-new-elements">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">VII. Sort our new elements</a><a class="headerlink" href="#vii-sort-our-new-elements" title="Permalink to this heading">#</a></h2>
<p>As there is many code families and channels in the coding theory library,
we do not wish to store all our classes directly in Sage’s global namespace.</p>
<p>We propose several catalog files to store our constructions, namely:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">codes_catalog.py</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">encoders_catalog.py</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">decoders_catalog.py</span></code> and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">channels_catalog.py</span></code>.</p></li>
</ul>
<p>Every time one creates a new object, it should be added in the dedicated
catalog file instead of coding theory folder’s <code class="docutils literal notranslate"><span class="pre">all.py</span></code>.</p>
<p>Here it means the following:</p>
<ul>
<li><p>add the following in <code class="docutils literal notranslate"><span class="pre">codes_catalog.py</span></code>:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sage.coding.repetition_code</span> <span class="kn">import</span> <span class="n">BinaryRepetitionCode</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>add the following in <code class="docutils literal notranslate"><span class="pre">encoders_catalog.py</span></code>:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sage.coding.repetition_code</span> <span class="kn">import</span> <span class="n">BinaryRepetitionCodeGeneratorMatrixEncoder</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>add the following in <code class="docutils literal notranslate"><span class="pre">decoders_catalog.py</span></code>:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sage.coding.repetition_code</span> <span class="kn">import</span> <span class="n">BinaryRepetitionCodeMajorityVoteDecoder</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>add the following in <code class="docutils literal notranslate"><span class="pre">channels_catalog.py</span></code>:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sage.coding.channel</span> <span class="kn">import</span> <span class="n">BinaryStaticErrorRateChannel</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="viii-complete-code-of-this-tutorial">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">VIII. Complete code of this tutorial</a><a class="headerlink" href="#viii-complete-code-of-this-tutorial" title="Permalink to this heading">#</a></h2>
<p>If you need some base code to start from, feel free to copy-paste and
derive from the one that follows.</p>
<p><code class="docutils literal notranslate"><span class="pre">repetition_code.py</span></code> (with two encoders):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sage.coding.linear_code</span> <span class="kn">import</span> <span class="n">AbstractLinearCode</span>
<span class="kn">from</span> <span class="nn">sage.coding.encoder</span> <span class="kn">import</span> <span class="n">Encoder</span>
<span class="kn">from</span> <span class="nn">sage.coding.decoder</span> <span class="kn">import</span> <span class="n">Decoder</span>
<span class="kn">from</span> <span class="nn">sage.rings.finite_rings.finite_field_constructor</span> <span class="kn">import</span> <span class="n">FiniteField</span> <span class="k">as</span> <span class="n">GF</span>

<span class="k">class</span> <span class="nc">BinaryRepetitionCode</span><span class="p">(</span><span class="n">AbstractLinearCode</span><span class="p">):</span>

    <span class="n">_registered_encoders</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">_registered_decoders</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">BinaryRepetitionCode</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">length</span><span class="p">,</span> <span class="s2">&quot;RepetitionGeneratorMatrixEncoder&quot;</span><span class="p">,</span> <span class="s2">&quot;MajorityVoteDecoder&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dimension</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">_repr_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Binary repetition code of length </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_latex_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">extnormal{Binary repetition code of length } </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">BinaryRepetitionCode</span><span class="p">)</span>
           <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
           <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimension</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">dimension</span><span class="p">())</span>



<span class="k">class</span> <span class="nc">BinaryRepetitionCodeGeneratorMatrixEncoder</span><span class="p">(</span><span class="n">Encoder</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">BinaryRepetitionCodeGeneratorMatrixEncoder</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_repr_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Binary repetition encoder for the </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_latex_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">extnormal{Binary repetition encoder for the } </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">BinaryRepetitionCodeGeneratorMatrixEncoder</span><span class="p">)</span>
           <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">code</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">generator_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="p">[</span><span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">one</span><span class="p">()]</span> <span class="o">*</span> <span class="n">n</span><span class="p">)</span>



<span class="k">class</span> <span class="nc">BinaryRepetitionCodeStraightforwardEncoder</span><span class="p">(</span><span class="n">Encoder</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">BinaryRepetitionCodeStraightforwardEncoder</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_repr_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Binary repetition encoder for the </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_latex_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">extnormal{Binary repetition encoder for the } </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">BinaryRepetitionCodeStraightforwardEncoder</span><span class="p">)</span>
           <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">code</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">vector</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="p">[</span><span class="n">message</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span><span class="o">.</span><span class="n">length</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">unencode_nocheck</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">message_space</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>



<span class="k">class</span> <span class="nc">BinaryRepetitionCodeMajorityVoteDecoder</span><span class="p">(</span><span class="n">Decoder</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">BinaryRepetitionCodeMajorityVoteDecoder</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">code</span><span class="o">.</span><span class="n">ambient_space</span><span class="p">(),</span>
           <span class="s2">&quot;RepetitionGeneratorMatrixEncoder&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_repr_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Majority vote-based decoder for the </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_latex_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">extnormal{Majority vote based-decoder for the } </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span>


    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">BinaryRepetitionCodeMajorityVoteDecoder</span><span class="p">)</span>
           <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">code</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">decode_to_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="n">list_word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="n">count_one</span> <span class="o">=</span> <span class="n">list_word</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">one</span><span class="p">())</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
        <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_word</span><span class="p">)</span>
        <span class="n">F</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">count_one</span> <span class="o">&gt;</span> <span class="n">length</span> <span class="o">/</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">vector</span><span class="p">(</span><span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="n">F</span><span class="o">.</span><span class="n">one</span><span class="p">()]</span> <span class="o">*</span> <span class="n">n</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">count_one</span> <span class="o">&lt;</span> <span class="n">length</span> <span class="o">/</span> <span class="mi">2</span><span class="p">:</span>
           <span class="k">return</span> <span class="n">vector</span><span class="p">(</span><span class="n">F</span><span class="p">,</span> <span class="p">[</span><span class="n">F</span><span class="o">.</span><span class="n">zero</span><span class="p">()]</span> <span class="o">*</span> <span class="n">n</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
           <span class="k">raise</span> <span class="n">DecodingError</span><span class="p">(</span><span class="s2">&quot;impossible to find a majority&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">decoding_radius</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">()</span><span class="o">.</span><span class="n">length</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>



<span class="n">BinaryRepetitionCode</span><span class="o">.</span><span class="n">_registered_encoders</span><span class="p">[</span><span class="s2">&quot;RepetitionGeneratorMatrixEncoder&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">BinaryRepetitionCodeGeneratorMatrixEncoder</span>
<span class="n">BinaryRepetitionCode</span><span class="o">.</span><span class="n">_registered_encoders</span><span class="p">[</span><span class="s2">&quot;RepetitionStraightforwardEncoder&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">BinaryRepetitionCodeStraightforwardEncoder</span>
<span class="n">BinaryRepetitionCode</span><span class="o">.</span><span class="n">_registered_decoders</span><span class="p">[</span><span class="s2">&quot;MajorityVoteDecoder&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">BinaryRepetitionCodeMajorityVoteDecoder</span>
<span class="n">BinaryRepetitionCodeMajorityVoteDecoder</span><span class="o">.</span><span class="n">_decoder_type</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;hard-decision&quot;</span><span class="p">,</span> <span class="s2">&quot;unique&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">channel.py</span></code> (continued):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BinaryStaticErrorRateChannel</span><span class="p">(</span><span class="n">Channel</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">number_errors</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">space</span><span class="o">.</span><span class="n">base_ring</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Provided space must be a vector space over GF(2)&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">number_errors</span> <span class="o">&gt;</span> <span class="n">space</span><span class="o">.</span><span class="n">dimension</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">ValueErrors</span><span class="p">(</span><span class="s2">&quot;number_errors cannot be bigger than input space&#39;s dimension&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">BinaryStaticErrorRateChannel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">space</span><span class="p">,</span> <span class="n">space</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_number_errors</span> <span class="o">=</span> <span class="n">number_errors</span>

    <span class="k">def</span> <span class="nf">_repr_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;Binary static error rate channel creating </span><span class="si">%s</span><span class="s2"> errors, of input and output space </span><span class="si">%s</span><span class="s2">&quot;</span>
              <span class="o">%</span> <span class="p">(</span><span class="n">format_interval</span><span class="p">(</span><span class="n">no_err</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_space</span><span class="p">()))</span>

    <span class="k">def</span> <span class="nf">_latex_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">textnormal{Static error rate channel creating </span><span class="si">%s</span><span class="s2"> errors, of input and output space </span><span class="si">%s</span><span class="s2">}&quot;</span>
              <span class="o">%</span> <span class="p">(</span><span class="n">format_interval</span><span class="p">(</span><span class="n">no_err</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_space</span><span class="p">()))</span>

    <span class="k">def</span> <span class="nf">number_errors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number_errors</span>

    <span class="k">def</span> <span class="nf">transmit_unsafe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="n">number_err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_errors</span><span class="p">()</span>
        <span class="n">V</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_space</span><span class="p">()</span>
        <span class="n">F</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">V</span><span class="o">.</span><span class="n">dimension</span><span class="p">()),</span> <span class="n">number_err</span><span class="p">):</span>
            <span class="n">w</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">F</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">w</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">codes_catalog.py</span></code> (continued):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sage.coding.repetition_code</span> <span class="kn">import</span> <span class="n">BinaryRepetitionCode</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">encoders_catalog.py</span></code> (continued):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sage.coding.repetition_code</span> <span class="kn">import</span> <span class="p">(</span><span class="n">BinaryRepetitionCodeGeneratorMatrixEncoder</span><span class="p">,</span> <span class="n">BinaryRepetitionCodeStraightforwardEncoder</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">decoders_catalog.py</span></code> (continued):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sage.coding.repetition_code</span> <span class="kn">import</span> <span class="n">BinaryRepetitionCodeMajorityVoteDecoder</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">channels_catalog.py</span></code> (continued):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sage.coding.channel</span> <span class="kn">import</span> <span class="p">(</span><span class="n">ErrorErasureChannel</span><span class="p">,</span> <span class="n">StaticErrorRateChannel</span><span class="p">,</span> <span class="n">BinaryStaticErrorRateChannel</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="geometry.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Polyhedra</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="coding_theory.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Coding Theory in Sage</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2005--2023, The Sage Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">How to write your own classes for coding theory</a><ul>
<li><a class="reference internal" href="#i-abstract-classes">I. Abstract classes</a></li>
<li><a class="reference internal" href="#ii-the-repetition-code">II. The repetition code</a></li>
<li><a class="reference internal" href="#iii-write-a-new-code-class">III. Write a new code class</a><ul>
<li><a class="reference internal" href="#summary-of-the-implementation-for-linear-codes-over-the-hamming-metric">Summary of the implementation for linear codes over the Hamming metric</a></li>
</ul>
</li>
<li><a class="reference internal" href="#iv-write-a-new-encoder-class">IV. Write a new encoder class</a><ul>
<li><a class="reference internal" href="#we-have-a-generator-matrix">We have a generator matrix</a></li>
<li><a class="reference internal" href="#we-do-not-have-any-generator-matrix">We do not have any generator matrix</a></li>
<li><a class="reference internal" href="#summary-of-the-implementation-for-encoders">Summary of the implementation for encoders</a></li>
</ul>
</li>
<li><a class="reference internal" href="#v-write-a-new-decoder-class">V. Write a new decoder class</a><ul>
<li><a class="reference internal" href="#summary-of-the-implementation-for-decoders">Summary of the implementation for decoders</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vi-write-a-new-channel-class">VI. Write a new channel class</a><ul>
<li><a class="reference internal" href="#summary-of-the-implementation-for-channels">Summary of the implementation for channels</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vii-sort-our-new-elements">VII. Sort our new elements</a></li>
<li><a class="reference internal" href="#viii-complete-code-of-this-tutorial">VIII. Complete code of this tutorial</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>window.MathJax = {"tex": {"macros": {"ZZ": "\\Bold{Z}", "NN": "\\Bold{N}", "RR": "\\Bold{R}", "CC": "\\Bold{C}", "QQ": "\\Bold{Q}", "QQbar": "\\overline{\\QQ}", "GF": ["\\Bold{F}_{#1}", 1], "Zp": ["\\Bold{Z}_{#1}", 1], "Qp": ["\\Bold{Q}_{#1}", 1], "Zmod": ["\\ZZ/#1\\ZZ", 1], "CDF": "\\Bold{C}", "CIF": "\\Bold{C}", "CLF": "\\Bold{C}", "RDF": "\\Bold{R}", "RIF": "\\Bold{I} \\Bold{R}", "RLF": "\\Bold{R}", "SL": "\\mathrm{SL}", "PSL": "\\mathrm{PSL}", "Bold": ["\\mathbf{#1}", 1]}, "inlineMath": [["$", "$"], ["\\(", "\\)"]], "maxBuffer": 51200, "autoload": {"color": [], "colorv2": ["color"]}}}</script>
    <script defer="defer" src="_static/mathjax/tex-chtml.js"></script>
    </body>
</html>