<!doctype html>
<html class="no-js" lang="fr">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Recherche" href="search.html" /><link rel="next" title="Programmation" href="programming.html" /><link rel="prev" title="Interfaces" href="interfaces.html" />

    <meta name="generator" content="sphinx-5.2.3, furo 2022.09.29"/>
        <title>Sage, LaTeX et compagnie - Tutoriel Sage v9.8</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=d81277517bee4d6b0349d71bb2661d4890b5617c" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="_static/custom-furo.css" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  --color-brand-primary: #0f0fff;
  --color-brand-content: #0f0fff;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZGD13B5572"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-ZGD13B5572');
</script></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Tutoriel Sage v9.8</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../../en/index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/logo_sagemath_black.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/logo_sagemath_white.svg" alt="Dark Logo"/>
  </div>
  
      <span class="sidebar-brand-text">Sage 9.8 Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Recherche name="q" aria-label="Recherche">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-home">
  <div class="sidebar-tree">
    <ul><li class="toctree-l1">
      <a class="reference internal" href="index.html">Home - Tutoriel Sage v9.8</a>
    </li></ul>
  </div>
</div><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tour.html">Visite guidée</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="tour_assignment.html">Affectation, égalité et arithmétique</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_help.html">Obtenir de l’aide</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_help.html#fonctions-indentation-et-iteration">Fonctions, indentation et itération</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_algebra.html">Algèbre de base et calcul infinitésimal</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_plotting.html">Graphiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_functions.html">Problèmes fréquents concernant les fonctions</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_rings.html">Anneaux de base</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_polynomial.html">Polynômes</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_coercion.html">Parents, conversions, coercitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_linalg.html">Algèbre linéaire</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_groups.html">Groupes finis, groupes abéliens</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_numtheory.html">Théorie des nombres</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_advanced.html">Quelques mathématiques plus avancées</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="interactive_shell.html">La ligne de commande interactive</a></li>
<li class="toctree-l1"><a class="reference internal" href="interfaces.html">Interfaces</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Sage, LaTeX et compagnie</a></li>
<li class="toctree-l1"><a class="reference internal" href="programming.html">Programmation</a></li>
<li class="toctree-l1"><a class="reference internal" href="sagetex.html">Utiliser SageTeX</a></li>
<li class="toctree-l1"><a class="reference internal" href="afterword.html">Postface</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Annexe</a></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliographie</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="sage-latex-et-compagnie">
<h1>Sage, LaTeX et compagnie<a class="headerlink" href="#sage-latex-et-compagnie" title="Lien permanent vers cette rubrique">#</a></h1>
<p>AUTEUR:  Rob Beezer (2010-05-23)</p>
<p>Sage et le dialecte LaTeX de TeX entretiennent une forte synergie. L’objet de
cette section est de présenter leurs différentes interactions. Nous commençons
par les plus basiques, avant de passer à des fonctionnalités plus obscures.
(Une partie de cette section peut donc être sautée en première lecture.)</p>
<section id="vue-d-ensemble">
<h2>Vue d’ensemble<a class="headerlink" href="#vue-d-ensemble" title="Lien permanent vers cette rubrique">#</a></h2>
<p>Le plus simple pour comprendre comment Sage peut faire appel à LaTeX est
peut-être de passer en revue les trois principales techniques.</p>
<blockquote>
<div><ol class="arabic">
<li><p>Dans Sage, chaque « objet » doit disposer d’une représentation LaTeX. La
représentation d’un objet <code class="docutils literal notranslate"><span class="pre">foo</span></code> est accessible par la commande
<code class="docutils literal notranslate"><span class="pre">latex(foo)</span></code>, utilisable dans le bloc-notes ou en ligne de commande.
Celle-ci renvoie une chaîne de caractères qui, interprétée par TeX en
mode mathématique (entre signes dollar simples par exemple) devrait
produire une représentation raisonnable de l’objet <code class="docutils literal notranslate"><span class="pre">foo</span></code>. Nous verrons
quelques exemples plus bas.</p>
<p>On peut ainsi utiliser Sage pour préparer des fragments de document
LaTeX : il suffit de définir ou obtenir par un calcul un objet Sage et
de copier-coller le résultat de <code class="docutils literal notranslate"><span class="pre">latex()</span></code> appliqué à l’objet dans le
document en question.</p>
</li>
<li><p>Le bloc-notes de Sage fait par défaut appel à
<a class="reference external" href="http://www.mathjax.org">MathJax</a>
pour afficher proprement les formules mathématiques dans le navigateur
web. MathJax est un moteur de rendu mathématique open source écrit en
JavaScript compatible avec tous les navigateurs récents. MathJax
interprète un sous-ensemble conséquent de TeX, mais pas la totalité.
Orienté avant tout vers le rendu correct de petits fragments de TeX, il
ne gère par exemple ni les tableaux compliqués ni le découpage en
sections du document. Le rendu automatique des formules mathématiques
dans le bloc-notes fonctionne en convertissant la sortie de <code class="docutils literal notranslate"><span class="pre">latex()</span></code>
mentionnée ci-dessus en une portion de document HTML que MathJax sait
interpréter.</p>
<p>MathJax utilise ses propres polices de caractères vectorielles, et
fournit ainsi un rendu de meilleure qualité que les méthodes d’affichage
d’équations ou d’autres fragments de TeX qui passent par des images
bitmap statiques.</p>
</li>
<li><p>Il est possible de faire appel à une installation extérieure de LaTeX
depuis la ligne de commande de Sage, ou depuis le bloc-notes pour
interpréter du code plus compliqué que ce que MathJax sait traiter. La
distribution Sage inclut pratiquement tout le nécessaire pour compiler
et utiliser le logiciel Sage, à la notable exception de TeX. Il faut
donc installer par ailleurs TeX et quelques utilitaires de conversion
associés pour l’utiliser depuis Sage de cette manière.</p></li>
</ol>
</div></blockquote>
<p>Voici quelques exemples d’utilisation élémentaire de la fonction <code class="docutils literal notranslate"><span class="pre">latex()</span></code>.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">var</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">)</span>
<span class="go">z</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="n">z</span><span class="o">^</span><span class="mi">12</span><span class="p">)</span>
<span class="go">z^{12}</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="n">integrate</span><span class="p">(</span><span class="n">z</span><span class="o">^</span><span class="mi">4</span><span class="p">,</span> <span class="n">z</span><span class="p">))</span>
<span class="go">\frac{1}{5} \, z^{5}</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="s1">&#39;a string&#39;</span><span class="p">)</span>
<span class="go">\text{\texttt{a{ }string}}</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="go">\Bold{Q}</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="n">matrix</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">[[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">],[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]]))</span>
<span class="go">\left(\begin{array}{rrr}</span>
<span class="go">2 &amp; 4 &amp; 6 \\</span>
<span class="go">-1 &amp; -1 &amp; -1</span>
<span class="go">\end{array}\right)</span>
</pre></div>
</div>
<p>L’utilisation de base de MathJax dans le bloc-notes est largement automatique.
Nous pouvons tout de même en voir quelques exemples en employant la classe
<code class="docutils literal notranslate"><span class="pre">MathJax</span></code>. La méthode <code class="docutils literal notranslate"><span class="pre">eval</span></code> de celle-ci convertit un objet Sage en sa
représentation LaTeX, puis emballe le résultat dans du code HTML qui fait
possède la classe CSS « math », laquelle indique de faire appel à MathJax.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.html</span> <span class="kn">import</span> <span class="n">MathJax</span>
<span class="gp">sage: </span><span class="n">mj</span> <span class="o">=</span> <span class="n">MathJax</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">var</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">)</span>
<span class="go">z</span>
<span class="gp">sage: </span><span class="n">mj</span><span class="p">(</span><span class="n">z</span><span class="o">^</span><span class="mi">12</span><span class="p">)</span>
<span class="go">&lt;html&gt;\[z^{12}\]&lt;/html&gt;</span>
<span class="gp">sage: </span><span class="n">mj</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="go">&lt;html&gt;\[\newcommand{\Bold}[1]{\mathbf{#1}}\Bold{Q}\]&lt;/html&gt;</span>
<span class="gp">sage: </span><span class="n">mj</span><span class="p">(</span><span class="n">ZZ</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span>
<span class="go">&lt;html&gt;\[\newcommand{\Bold}[1]{\mathbf{#1}}\Bold{Z}[x]\]&lt;/html&gt;</span>
<span class="gp">sage: </span><span class="n">mj</span><span class="p">(</span><span class="n">integrate</span><span class="p">(</span><span class="n">z</span><span class="o">^</span><span class="mi">4</span><span class="p">,</span> <span class="n">z</span><span class="p">))</span>
<span class="go">&lt;html&gt;\[\frac{1}{5} \, z^{5}\]&lt;/html&gt;</span>
</pre></div>
</div>
</section>
<section id="utilisation-de-base">
<h2>Utilisation de base<a class="headerlink" href="#utilisation-de-base" title="Lien permanent vers cette rubrique">#</a></h2>
<p>Comme indiqué dans la vue d’ensemble, la manière la plus simple d’exploiter le
support LaTeX de Sage consiste à appeler la fonction <code class="docutils literal notranslate"><span class="pre">latex()</span></code> pour produire
du code LaTeX représentant un objet mathématique. Les chaînes obtenues peuvent
ensuite être incorporées dans des documents LaTeX indépendants. Cela fonctionne
de la même manière dans le bloc-notes et en ligne de commande.</p>
<p>L’autre extrême est la commande <code class="docutils literal notranslate"><span class="pre">view()</span></code>, qui fait tout le nécessaire pour
afficher le rendu correspondant au code LaTeX.</p>
<p>En ligne de commande, <code class="docutils literal notranslate"><span class="pre">view(foo)</span></code> produit la représentation LaTeX de <code class="docutils literal notranslate"><span class="pre">foo</span></code>,
la place dans un document LaTeX simple, et compile ce document en utilisant
l’installation de TeX du système. Elle appelle ensuite un autre programme
externe pour afficher le résultat de la compilation. La version de TeX (et donc
le format de sortie) ainsi que la visionneuse à utiliser sont configurables,
voir <a class="reference internal" href="#sec-custom-processing"><span class="std std-ref">Personnaliser le traitement du code par LaTeX</span></a>.</p>
<p>Dans le bloc-notes, <code class="docutils literal notranslate"><span class="pre">view(foo)</span></code> produit une combinaison de HTML et CSS qui
indique à MathJax de s’occuper du rendu de la représentation LaTeX.
L’utilisateur voit une version joliment formatée de la sortie à la place de la
sortie ASCII par défaut de Sage. Certains objets ont cependant des
représentations LaTeX trop compliquées pour être affichés par MathJax. Lorsque
c’est le cas, il est possible de contourner l’interprétation par MathJax,
d’appeler l’installation LaTeX du système, et de convertir le document produit
en image pour l’afficher dans le bloc-note. La section
<a class="reference internal" href="#sec-custom-generation"><span class="std std-ref">Personnaliser le code LaTeX produit</span></a> ci-dessous explique comment configurer et
contrôler ce processus.</p>
<p>La commande interne <code class="docutils literal notranslate"><span class="pre">pretty_print()</span></code> permet de convertir un objet Sage en code
HTML utilisant MathJax. C’est le code qui sera ensuite utilisé dans le
bloc-notes</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">pretty_print</span><span class="p">(</span><span class="n">x</span><span class="o">^</span><span class="mi">12</span><span class="p">)</span>
<span class="go">x^12</span>
<span class="gp">sage: </span><span class="n">pretty_print</span><span class="p">(</span><span class="n">integrate</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">x</span><span class="p">))</span>
<span class="go">-cos(x)</span>
</pre></div>
</div>
<p>Le bloc-notes dispose de deux autres fonctionnalités pour appeler LaTeX.
Premièrement, lorsque la case « Typeset » (juste au-dessus de la première
cellule d’une feuille de travail, à droite des quatre listes déroulantes) est
cochée, le résultat de l’évaluation d’une cellule est automatiquement
interprété par MathJax et affiché sous forme de formule plutôt que de texte
brut. Les sorties déjà affichées ne sont pas modifiées tant que l’on ne
ré-évalue pas les cellules correspondantes. Cocher la case « Typeset » revient
essentiellement à appeler <code class="docutils literal notranslate"><span class="pre">view()</span></code> sur le résultat de chaque cellule.</p>
<p>Deuxièmement, le bloc-notes permet d’annoter une feuille de travail en
saisissant du TeX. Un clic en tenant la touche Maj enfoncée sur la barre bleue
qui apparaît lorsque l’on place le curseur de la souris entre deux cellules
ouvre un mini-traitement de texte appelé TinyMCE. Cela permet de saisir du
texte pour commenter la feuille de travail, et de le mettre en forme avec un
éditeur WYSIWIG de HTML et CSS. Mais le texte placé entre signes dollar simples
ou doubles est interprété par MathJax, respectivement comme formule composée en
ligne ou hors texte.</p>
</section>
<section id="personnaliser-le-code-latex-produit">
<span id="sec-custom-generation"></span><h2>Personnaliser le code LaTeX produit<a class="headerlink" href="#personnaliser-le-code-latex-produit" title="Lien permanent vers cette rubrique">#</a></h2>
<p>Les méthodes de l’objet prédéfini <code class="docutils literal notranslate"><span class="pre">latex</span></code> permettent de personnaliser le code
LaTeX produit par la commande <code class="docutils literal notranslate"><span class="pre">latex()</span></code> de différentes manières. Cela
s’applique dans le bloc-notes comme en ligne de commande. On obtient la liste
des méthodes en saisissant <code class="docutils literal notranslate"><span class="pre">latex.</span></code> (noter la présence du point) puis en
appuyant sur la touche tabulation.</p>
<p>Un bon exemple est la méthode <code class="docutils literal notranslate"><span class="pre">latex.matrix_delimiters</span></code>, qui sert à modifier
les symboles entourant les matrices – parenthèses, crochets, accolades
ou barres verticales par exemple. Les délimiteurs gauche et droit sont
donnés par des chaînes LaTeX. Ils n’ont pas besoin de se correspondre. Notons
comment les contre-obliques qui doivent être interprétées par TeX sont
protégées par une seconde contre-oblique dans l’exemple ci-dessous.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="go">\left(\begin{array}{rr}</span>
<span class="go">0 &amp; 1 \\</span>
<span class="go">2 &amp; 3</span>
<span class="go">\end{array}\right)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">matrix_delimiters</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="s1">&#39;[&#39;</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="s1">&#39;]&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="go">\left[\begin{array}{rr}</span>
<span class="go">0 &amp; 1 \\</span>
<span class="go">2 &amp; 3</span>
<span class="go">\end{array}\right]</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">matrix_delimiters</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">{&#39;</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">}&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="go">\left\{\begin{array}{rr}</span>
<span class="go">0 &amp; 1 \\</span>
<span class="go">2 &amp; 3</span>
<span class="go">\end{array}\right\}</span>
</pre></div>
</div>
<p>La méthode <code class="docutils literal notranslate"><span class="pre">latex.vector_delimiters</span></code> fonctionne de manière analogue.</p>
<p>Les anneaux et corps usuels (entiers, rationnels, réels, etc.) sont par défaut
composés en gras. La méthode <code class="docutils literal notranslate"><span class="pre">latex.blackboard_bold</span></code> permet de changer pour
des lettres ajourées. Elle ne change pas la sortie de la commande <code class="docutils literal notranslate"><span class="pre">latex()</span></code>
mais la définition de la macro TeX <code class="docutils literal notranslate"><span class="pre">\Bold{}</span></code> fournie par Sage.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="go">\Bold{Q}</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.html</span> <span class="kn">import</span> <span class="n">MathJax</span>
<span class="gp">sage: </span><span class="n">mj</span><span class="o">=</span><span class="n">MathJax</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">mj</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="go">&lt;html&gt;\[\newcommand{\Bold}[1]{\mathbf{#1}}\Bold{Q}\]&lt;/html&gt;</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">blackboard_bold</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">mj</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="go">&lt;html&gt;\[\newcommand{\Bold}[1]{\mathbb{#1}}\Bold{Q}\]&lt;/html&gt;</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">blackboard_bold</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>On peut aussi définir de nouvelles macros TeX ou charger des packages
supplémentaires. L’exemple suivant montre comment ajouter des macros qui seront
utilisées à chaque fois que MathJax interprète un fragment de TeX dans le
bloc-notes.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_macros</span><span class="p">()</span>
<span class="go">&#39;&#39;</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">add_macro</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">newcommand{</span><span class="se">\\</span><span class="s2">foo}</span><span class="si">{bar}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_macros</span><span class="p">()</span>
<span class="go">&#39;\\newcommand{\\foo}{bar}&#39;</span>
<span class="gp">sage: </span><span class="n">var</span><span class="p">(</span><span class="s1">&#39;x y&#39;</span><span class="p">)</span>
<span class="go">(x, y)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>
<span class="go">x + y</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.html</span> <span class="kn">import</span> <span class="n">MathJax</span>
<span class="gp">sage: </span><span class="n">mj</span><span class="o">=</span><span class="n">MathJax</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">mj</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>
<span class="go">&lt;html&gt;\[\newcommand{\foo}{bar}x + y\]&lt;/html&gt;</span>
</pre></div>
</div>
<p>Ces macros supplémentaires sont disponibles aussi quand Sage appelle TeX pour
compiler un fragment de document trop gros pour MathJax. C’est la fonction
<code class="docutils literal notranslate"><span class="pre">latex_extra_preamble</span></code>, appelée pour préparer le préambule du document LaTeX,
qui les définit, comme l’illustre l’exemple suivant. Notons à nouveau le
dédoublement des <code class="docutils literal notranslate"><span class="pre">\</span></code> dans les chaînes Python.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_macros</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_preamble</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.latex</span> <span class="kn">import</span> <span class="n">latex_extra_preamble</span>
<span class="gp">sage: </span><span class="nb">print</span><span class="p">(</span><span class="n">latex_extra_preamble</span><span class="p">())</span>
<span class="go">\newcommand{\ZZ}{\Bold{Z}}</span>
<span class="go">...</span>
<span class="go">\newcommand{\Bold}[1]{\mathbf{#1}}</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">add_macro</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">newcommand{</span><span class="se">\\</span><span class="s2">foo}</span><span class="si">{bar}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="nb">print</span><span class="p">(</span><span class="n">latex_extra_preamble</span><span class="p">())</span>
<span class="go">\newcommand{\ZZ}{\Bold{Z}}</span>
<span class="go">...</span>
<span class="go">\newcommand{\Bold}[1]{\mathbf{#1}}</span>
<span class="go">\newcommand{\foo}{bar}</span>
</pre></div>
</div>
<p>On peut aussi charger des packages LaTeX, ou ajouter n’importe quelle autre
commande au préambule, grâce à la méthode <code class="docutils literal notranslate"><span class="pre">latex.add_package_to_preamble</span></code>. Sa
variante plus spécialisée <code class="docutils literal notranslate"><span class="pre">latex.add_package_to_preamble_if_available</span></code>
vérifie qu’un package donné est disponible avant de l’ajouter au préambule si
c’est bien le cas.</p>
<p>Dans l’exemple suivant, nous ajoutons au préambule la commande qui charge le
package <code class="docutils literal notranslate"><span class="pre">geometry</span></code>, puis nous l’utilisons pour régler la taille de la zone de
texte (et donc indirectement les marges) du document TeX. Une fois encore, les
contre-obliques sont dédoublées.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.latex</span> <span class="kn">import</span> <span class="n">latex_extra_preamble</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_macros</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_preamble</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">add_to_preamble</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">usepackage</span><span class="si">{geometry}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">add_to_preamble</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">geometry{letterpaper,total={8in,10in}}&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_preamble</span><span class="p">()</span>
<span class="go">&#39;\\usepackage{geometry}\\geometry{letterpaper,total={8in,10in}}&#39;</span>
<span class="gp">sage: </span><span class="nb">print</span><span class="p">(</span><span class="n">latex_extra_preamble</span><span class="p">())</span>
<span class="go">\usepackage{geometry}\geometry{letterpaper,total={8in,10in}}</span>
<span class="go">\newcommand{\ZZ}{\Bold{Z}}</span>
<span class="go">...</span>
<span class="go">\newcommand{\Bold}[1]{\mathbf{#1}}</span>
</pre></div>
</div>
<p>Voici enfin comment ajouter un package en vérifiant sa disponibilité, et ce
qu’il se passe quand le package n’existe pas.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_preamble</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_preamble</span><span class="p">()</span>
<span class="go">&#39;&#39;</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">add_to_preamble</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">usepackage{foo-bar-unchecked}&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_preamble</span><span class="p">()</span>
<span class="go">&#39;\\usepackage{foo-bar-unchecked}&#39;</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">add_package_to_preamble_if_available</span><span class="p">(</span><span class="s1">&#39;foo-bar-checked&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_preamble</span><span class="p">()</span>
<span class="go">&#39;\\usepackage{foo-bar-unchecked}&#39;</span>
</pre></div>
</div>
</section>
<section id="personnaliser-le-traitement-du-code-par-latex">
<span id="sec-custom-processing"></span><h2>Personnaliser le traitement du code par LaTeX<a class="headerlink" href="#personnaliser-le-traitement-du-code-par-latex" title="Lien permanent vers cette rubrique">#</a></h2>
<p>En plus de modifier LaTeX produit par Sage, on peut choisir la variante de
TeX appelée pour le traiter, et donc la nature du document produit. De même, il
est possible de contrôler dans quelles circonstances le bloc-notes utilisera
MathJax (c’est-à-dire quels fragments de code TeX seront jugés suffisamment
simples) et quand il choisira de se rabattre sur l’installation de TeX du système.</p>
<p>La méthode <code class="docutils literal notranslate"><span class="pre">latex.engine()</span></code> permet de choisir lequel des moteurs TeX
<code class="docutils literal notranslate"><span class="pre">latex</span></code>, <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code> et <code class="docutils literal notranslate"><span class="pre">xelatex</span></code> doit servir à compiler les expressions
LaTeX complexes. Lorsque l’on appelle <code class="docutils literal notranslate"><span class="pre">view</span></code> en ligne de commande, si le
moteur actif est <code class="docutils literal notranslate"><span class="pre">latex</span></code>, celui-ci produit un fichier dvi, puis Sage fait
appel à une visionneuse dvi (par exemple xdvi) pour afficher le résultat. Si en
revanche le moteur est <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code>, il produit par défaut un fichier PDF, que
Sage affiche grâce à la visionneuse PDF du système (Adobe Reader, Okular,
evince…).</p>
<p>Dans le bloc-notes, la première étape est de décider s’il faut utiliser MathJax
ou LaTeX pour interpréter un fragment de TeX donné. La décision se fonde sur
une liste de chaînes « interdites » dont la présence dans le fragment indique
d’appeler latex (ou plus généralement le moteur choisi via <code class="docutils literal notranslate"><span class="pre">latex.engine()</span></code>)
au lieu MathJax. Les méthodes <code class="docutils literal notranslate"><span class="pre">latex.add_to_mathjax_avoid_list</span></code> et
<code class="docutils literal notranslate"><span class="pre">latex.mathjax_avoid_list</span></code> permettent de gérer le contenu de cette liste.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">mathjax_avoid_list</span><span class="p">([])</span>  <span class="c1"># not tested</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">mathjax_avoid_list</span><span class="p">()</span>    <span class="c1"># not tested</span>
<span class="go">[]</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">mathjax_avoid_list</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">])</span>  <span class="c1"># not tested</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">mathjax_avoid_list</span><span class="p">()</span>                <span class="c1"># not tested</span>
<span class="go">[&#39;foo&#39;, &#39;bar&#39;]</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">add_to_mathjax_avoid_list</span><span class="p">(</span><span class="s1">&#39;tikzpicture&#39;</span><span class="p">)</span>  <span class="c1"># not tested</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">mathjax_avoid_list</span><span class="p">()</span>                      <span class="c1"># not tested</span>
<span class="go">[&#39;foo&#39;, &#39;bar&#39;, &#39;tikzpicture&#39;]</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">mathjax_avoid_list</span><span class="p">([])</span>  <span class="c1"># not tested</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">mathjax_avoid_list</span><span class="p">()</span>    <span class="c1"># not tested</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>Supposons maintenant que, dans le bloc-notes, un appel à <code class="docutils literal notranslate"><span class="pre">view()</span></code> ou
l’évaluation d’une cellule lorsque la case « Typeset » est cochée produise un
résultat dont le mécanisme décrit ci-dessus détermine qu’il doit être passé au
moteur LaTeX externe. Comme en ligne de commande, l’exécutable spécifié par
<code class="docutils literal notranslate"><span class="pre">latex.engine()</span></code> traite alors le document. Cependant, au lieu d’appeler une
visionneuse externe pour afficher le document produit, Sage tente de recadrer
le document en rognant les zones blanches, et de le convertir en une image qui
est ensuite insérée dans le bloc-notes comme sortie associée à la cellule.</p>
<p>Plusieurs facteurs influencent la conversion, principalement le moteur TeX
choisi et la palette d’utilitaires de conversion disponibles sur le système.
Les convertisseurs suivants couvrent à eux quatre toutes les situations :
<code class="docutils literal notranslate"><span class="pre">dvips</span></code>, <code class="docutils literal notranslate"><span class="pre">ps2pdf</span></code>, <code class="docutils literal notranslate"><span class="pre">dvipng</span></code> et <code class="docutils literal notranslate"><span class="pre">convert</span></code> (de la collection ImageMagick).
Dans tous les cas, il s’agit d’arriver à produire une image PNG à insérer dans
la feuille de travail. Lorsque le moteur LaTeX produit un fichier dvi, le
programme dvipng suffit en général à effectuer la conversion. Il peut cependant
arriver que le fichier dvi contienne des instructions spécifiques à un pilote
(commande TeX <code class="docutils literal notranslate"><span class="pre">\special</span></code>) que dvipng est incapable d’interpréter, auquel cas
on utilise <code class="docutils literal notranslate"><span class="pre">dvips</span></code> pour créer un fichier PostScript. Celui-ci, de même que
le fichier PDF produit par le moteur le cas échéant, est ensuite converti en
image png avec <code class="docutils literal notranslate"><span class="pre">convert</span></code>. Les commandes <code class="docutils literal notranslate"><span class="pre">have_dvipng()</span></code> et
<code class="docutils literal notranslate"><span class="pre">have_convert()</span></code> permettent de tester la présence sur le système des
utilitaires en question.</p>
<p>Toutes ces conversions sont automatiques lorsque les outils nécessaires sont
installés. Dans le cas contraire, un message d’erreur indique ce qu’il manque
et où le télécharger.</p>
<p>La section suivante (<a class="reference internal" href="#sec-tkz-graph"><span class="std std-ref">Example : rendu de graphes avec tkz-graph</span></a>) présente un exemple concret de
traitement d’expressions LaTeX complexes, en l’occurrence pour obtenir un rendu
de qualité de graphes grâce au package LaTeX <code class="docutils literal notranslate"><span class="pre">tkz-graph</span></code>. Les tests inclus
dans Sage contiennent d’autres exemples. On y accède en important l’objet
prédéfini <code class="docutils literal notranslate"><span class="pre">sage.misc.latex.latex_examples</span></code>, instance de la classe
<code class="docutils literal notranslate"><span class="pre">sage.misc.latex.LatexExamples</span></code>, comme illustré ci-dessous. Les exemples
fournis actuellement couvrent les types d’objets suivants : diagrammes
commutatifs (utilisant le package <span class="math notranslate nohighlight">\(xy\)</span>), graphes combinatoires (<span class="math notranslate nohighlight">\(tkz-graph\)</span>),
nœuds (<span class="math notranslate nohighlight">\(xypic\)</span>), schémas pstricks (<span class="math notranslate nohighlight">\(pstricks\)</span>). Pour obtenir la liste des
exemples, utilisez la complétion de ligne de commande après avoir importé
<code class="docutils literal notranslate"><span class="pre">latex_examples</span></code>. Chaque exemple affiche quand on l’appelle des instructions
sur la configuration nécessaire pour qu’il fonctionne correctement. Une fois le
préambule, le moteur LaTeX etc. configurés comme indiqué, il suffit d’appeler
la commande <code class="docutils literal notranslate"><span class="pre">view()</span></code> pour visualiser l’exemple.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.misc.latex</span> <span class="kn">import</span> <span class="n">latex_examples</span>
<span class="gp">sage: </span><span class="n">latex_examples</span><span class="o">.</span><span class="n">diagram</span><span class="p">()</span>
<span class="go">LaTeX example for testing display of a commutative diagram produced</span>
<span class="go">by xypic.</span>

<span class="go">To use, try to view this object -- it will not work.  Now try</span>
<span class="go">&#39;latex.add_to_preamble(&quot;\\usepackage[matrix,arrow,curve,cmtip]{xy}&quot;)&#39;,</span>
<span class="go">and try viewing again. You should get a picture (a part of the diagram arising</span>
<span class="go">from a filtered chain complex).</span>
</pre></div>
</div>
</section>
<section id="example-rendu-de-graphes-avec-tkz-graph">
<span id="sec-tkz-graph"></span><h2>Example : rendu de graphes avec tkz-graph<a class="headerlink" href="#example-rendu-de-graphes-avec-tkz-graph" title="Lien permanent vers cette rubrique">#</a></h2>
<p>Le package <code class="docutils literal notranslate"><span class="pre">tkz-graph</span></code> permet de produire des dessins de graphes
(combinatoires) de qualité. Il repose sur TikZ, lui-même une interface pour la
bibliothèque TeX pgf : pgf, TikZ et tkz-graph doivent donc tous être présents
dans l’installation TeX du système pour que cet exemple fonctionne. Les
versions fournies par certaines distributions TeX sont parfois trop anciennes,
et il peut donc être souhaitable de les installer manuellement dans son arbre
texmf personnel. On consultera la documentation de la distribution TeX pour la
procédure à suivre, qui dépasse le cadre de ce document. La section
<a class="reference internal" href="#sec-system-wide-tex"><span class="std std-ref">Une installation TeX pleinement opérationnelle</span></a> donne la liste des fichiers nécessaires.</p>
<p>Il nous faut tout d’abord nous assurer que les packages requis sont inclus dans
le document LaTeX, en les ajoutant au préambule. Le rendu des graphes n’est pas
correct quand on passe par le format dvi, aussi il est préférable de
sélectionner <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code> comme moteur TeX. Après ces réglages, une instruction
du genre <code class="docutils literal notranslate"><span class="pre">view(graphs.CompleteGraph(4))</span></code> saisie dans l’interface en ligne de
commande doit produire un fichier PDF contenant un dessin du graphe complet
<span class="math notranslate nohighlight">\(K_4\)</span>.</p>
<p>Pour que la même chose fonctionne dans le bloc-notes, il faut de plus
désactiver l’interprétation du code LaTeX produisant le graphe par MathJax, à
l’aide de la liste de motifs exclus. Le nom de l’environnement <code class="docutils literal notranslate"><span class="pre">tikzpicture</span></code>,
dans lequel sont placés les graphes, est un bon choix de chaîne à exclure. Une
fois cela fait, la commande <code class="docutils literal notranslate"><span class="pre">view(graphs.CompleteGraph(4))</span></code> dans une feuille
de travail du bloc-notes appelle pdflatex pour produire un fichier PDF, puis
<code class="docutils literal notranslate"><span class="pre">convert</span></code> pour en extraire une image PNG à placer dans la zone de sortie de
la feuille de travail. Les commandes suivantes reprennent l’ensemble des
étapes de configuration.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.graphs.graph_latex</span> <span class="kn">import</span> <span class="n">setup_latex_preamble</span>
<span class="gp">sage: </span><span class="n">setup_latex_preamble</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">extra_preamble</span><span class="p">()</span> <span class="c1"># random - depends on system&#39;s TeX installation</span>
<span class="go">&#39;\\usepackage{tikz}\n\\usepackage{tkz-graph}\n\\usepackage{tkz-berge}\n&#39;</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">engine</span><span class="p">(</span><span class="s1">&#39;pdflatex&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">add_to_mathjax_avoid_list</span><span class="p">(</span><span class="s1">&#39;tikzpicture&#39;</span><span class="p">)</span>  <span class="c1"># not tested</span>
<span class="gp">sage: </span><span class="n">latex</span><span class="o">.</span><span class="n">mathjax_avoid_list</span><span class="p">()</span>                      <span class="c1"># not tested</span>
<span class="go">[&#39;tikz&#39;, &#39;tikzpicture&#39;]</span>
</pre></div>
</div>
<p>La mise en forme du graphe est faite en traitant des commandes <code class="docutils literal notranslate"><span class="pre">tkz-graph</span></code>
qui le décrivent avec <code class="docutils literal notranslate"><span class="pre">pdflatex</span></code>. Diverses options pour influencer ce rendu,
qui sortent du cadre de cette section, sont décrites dans la section intitulée
« LaTeX Options for Graphs » du manuel de référence de Sage.</p>
</section>
<section id="une-installation-tex-pleinement-operationnelle">
<span id="sec-system-wide-tex"></span><h2>Une installation TeX pleinement opérationnelle<a class="headerlink" href="#une-installation-tex-pleinement-operationnelle" title="Lien permanent vers cette rubrique">#</a></h2>
<p>Beaucoup de fonctionnalités avancées de l’intégration Sage-TeX nécessitent
qu’une installation extérieure de TeX soit disponible sur le système. Les
distributions Linux en fournissent généralement, sous forme de paquets basés
sur TeX Live ; sous OS X, on peut installer TeXshop ; et sous Windows, MikTeX.
L’utilitaire <code class="docutils literal notranslate"><span class="pre">convert</span></code> fait partie de la boîte à outils <a class="reference external" href="http://www.imagemagick.org/">ImageMagick</a> (probablement disponible dans l’archive de
paquets de votre système ou facile à télécharger et installer). Les programmes
<code class="docutils literal notranslate"><span class="pre">dvipng</span></code>, <code class="docutils literal notranslate"><span class="pre">ps2pdf</span></code>, and <code class="docutils literal notranslate"><span class="pre">dvips</span></code> sont parfois inclus dans les
installations de TeX, et les deux premiers sont par ailleurs disponibles
respectivement à l’adresse <a class="reference external" href="http://sourceforge.net/projects/dvipng/">http://sourceforge.net/projects/dvipng/</a> et dans
<a class="reference external" href="http://www.ghostscript.com/">Ghostscript</a>.</p>
<p>Le rendu des graphes nécessite une version suffisamment récente de PGF, ainsi
que les fichiers <code class="docutils literal notranslate"><span class="pre">tkz-graph.sty</span></code>, disponible sur le site web
<a class="reference external" href="https://www.ctan.org/pkg/tkz-graph">https://www.ctan.org/pkg/tkz-graph</a>, <code class="docutils literal notranslate"><span class="pre">tkz-arith.sty</span></code> et suivant les
cas <code class="docutils literal notranslate"><span class="pre">tkz-berge.sty</span></code>, disponibles sur le site web
<a class="reference external" href="https://www.ctan.org/pkg/tkz-berge">https://www.ctan.org/pkg/tkz-berge</a>.</p>
</section>
<section id="programmes-externes">
<h2>Programmes externes<a class="headerlink" href="#programmes-externes" title="Lien permanent vers cette rubrique">#</a></h2>
<p>Trois programmes séparés contribuent encore à l’intégration TeX-Sage.</p>
<p>Le premier, sagetex, est (pour simplifier) une collection de macros TeX qui
permettent d’introduire dans un document LaTeX des instructions qui seront
interprétées par Sage pour effectuer des calculs et/ou mettre en forme des
objets mathématiques avec la commande <code class="docutils literal notranslate"><span class="pre">latex()</span></code> de Sage. Il est donc possible
de faire faire des calculs à Sage et de produire les sorties LaTeX associées
comme étape intermédiaire de la compilation d’un document LaTeX. Par exemple,
on peut imaginer de maintenir la correspondance entre questions et réponses
dans un sujet d’examen en utilisant Sage pour calculer les unes à partir des
autres. Sagetex est décrit plus en détail en section <a class="reference internal" href="sagetex.html#sec-sagetex"><span class="std std-ref">Utiliser SageTeX</span></a> de ce
document.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="programming.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Programmation</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="interfaces.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Interfaces</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2005--2023, The Sage Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Sage, LaTeX et compagnie</a><ul>
<li><a class="reference internal" href="#vue-d-ensemble">Vue d’ensemble</a></li>
<li><a class="reference internal" href="#utilisation-de-base">Utilisation de base</a></li>
<li><a class="reference internal" href="#personnaliser-le-code-latex-produit">Personnaliser le code LaTeX produit</a></li>
<li><a class="reference internal" href="#personnaliser-le-traitement-du-code-par-latex">Personnaliser le traitement du code par LaTeX</a></li>
<li><a class="reference internal" href="#example-rendu-de-graphes-avec-tkz-graph">Example : rendu de graphes avec tkz-graph</a></li>
<li><a class="reference internal" href="#une-installation-tex-pleinement-operationnelle">Une installation TeX pleinement opérationnelle</a></li>
<li><a class="reference internal" href="#programmes-externes">Programmes externes</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/thebelab-helper.js"></script>
    <script src="_static/translations.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>window.MathJax = {"tex": {"macros": {"ZZ": "\\Bold{Z}", "NN": "\\Bold{N}", "RR": "\\Bold{R}", "CC": "\\Bold{C}", "QQ": "\\Bold{Q}", "QQbar": "\\overline{\\QQ}", "GF": ["\\Bold{F}_{#1}", 1], "Zp": ["\\Bold{Z}_{#1}", 1], "Qp": ["\\Bold{Q}_{#1}", 1], "Zmod": ["\\ZZ/#1\\ZZ", 1], "CDF": "\\Bold{C}", "CIF": "\\Bold{C}", "CLF": "\\Bold{C}", "RDF": "\\Bold{R}", "RIF": "\\Bold{I} \\Bold{R}", "RLF": "\\Bold{R}", "SL": "\\mathrm{SL}", "PSL": "\\mathrm{PSL}", "Bold": ["\\mathbf{#1}", 1]}, "inlineMath": [["$", "$"], ["\\(", "\\)"]], "maxBuffer": 51200, "autoload": {"color": [], "colorv2": ["color"]}}}</script>
    <script defer="defer" src="_static/mathjax/tex-chtml.js"></script>
    </body>
</html>