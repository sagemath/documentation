<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>A Linha de Comando Interativa &mdash; Tutorial Sage v6.9</title>
    
    <link rel="stylesheet" href="_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '6.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Tutorial Sage v6.9" href="index.html" />
    <link rel="next" title="Interfaces" href="interfaces.html" />
    <link rel="prev" title="Um Pouco Mais de Matemática Avançada" href="tour_advanced.html" />
    <link rel="icon" href="_static/sageicon.png" type="image/x-icon" />

  </head>
  <body>
    <div class="related">
      <h3>Navegação</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Índice Geral"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Índice de Módulos do Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="interfaces.html" title="Interfaces"
             accesskey="N">próximo</a> |</li>
        <li class="right" >
          <a href="tour_advanced.html" title="Um Pouco Mais de Matemática Avançada"
             accesskey="P">anterior</a> |</li>
  
    
      <a href="../index.html"><img src="_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="index.html">Tutorial Sage v6.9</a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="a-linha-de-comando-interativa">
<span id="chapter-interactive-shell"></span><h1>A Linha de Comando Interativa<a class="headerlink" href="#a-linha-de-comando-interativa" title="Link permanente para este título">¶</a></h1>
<p>Na maior parte deste tutorial, assumimos que você iniciou o
interpretador Sage usando o comando <tt class="docutils literal"><span class="pre">sage</span></tt>. Isso inicia uma versão
personalizada da linha de comando IPython, e importa diversas funções
e classes de modo que elas fiquem prontas para serem usadas a partir
da linha de comando. Configuração adicional é possível editando o
arquivo <tt class="docutils literal"><span class="pre">$SAGE_ROOT/ipythonrc</span></tt>. Assim que você inicia o Sage, você
obtém o seguinte:</p>
<div class="highlight-python"><div class="highlight"><pre>----------------------------------------------------------------------
| SAGE Version 3.1.1, Release Date: 2008-05-24                       |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
sage:
</pre></div>
</div>
<p>Para sair do Sage pressione Ctrl-D ou digite <tt class="docutils literal"><span class="pre">quit</span></tt> ou <tt class="docutils literal"><span class="pre">exit</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">quit</span>
<span class="go">Exiting SAGE (CPU time 0m0.00s, Wall time 0m0.89s)</span>
</pre></div>
</div>
<p>O wall time é o tempo que passou no relógio &#8220;pendurado na sua parede&#8221;.
Isso é relevante, pois o tempo CPU não conta o tempo usado por
subprocessos como GAP ou Singular.</p>
<p>(Evite terminar um processo do Sage usando <tt class="docutils literal"><span class="pre">kill</span> <span class="pre">-9</span></tt> a partir de um
terminal, pois o Sage pode não terminal seus subprocessos, por
exemplo, subprocessos do Maple, ou limpeza de arquivos temporários em
<tt class="docutils literal"><span class="pre">$HOME/.sage/tmp</span></tt>.)</p>
<div class="section" id="a-sua-sessao-no-sage">
<h2>A Sua Sessão no Sage<a class="headerlink" href="#a-sua-sessao-no-sage" title="Link permanente para este título">¶</a></h2>
<p>A sessão é a sequência de entradas e saídas de dados desde o momento em
que você inicia até o momento em que você termina o Sage. O Sage grava
todas as entradas de dados, através do IPython. De fato, se você está
usando a linha de comando (não o Notebook), então a qualquer momento
você pode digitar <tt class="docutils literal"><span class="pre">%history</span></tt> (ou <tt class="docutils literal"><span class="pre">%hist</span></tt>) para obter uma lista de
todas as linhas digitadas até então. Você pode digitar <tt class="docutils literal"><span class="pre">?</span></tt> no prompt
do Sage para aprender mais sobre o IPython, por exemplo, &#8220;IPython
offers numbered prompts ... with input and output caching. All input
is saved and can be retrieved as variables (besides the usual arrow
key recall). The following GLOBAL variables always exist (so don&#8217;t
overwrite them!)&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre>_:  previous input (interactive shell and notebook)
__: next previous input (interactive shell only)
_oh : list of all inputs (interactive shell only)
</pre></div>
</div>
<p>Aqui vai um exemplo:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">factor</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="go"> _1 = 2^2 * 5^2</span>
<span class="gp">sage: </span><span class="n">kronecker_symbol</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="go"> _2 = -1</span>
<span class="gp">sage: </span><span class="o">%</span><span class="n">hist</span>   <span class="c">#This only works from the interactive shell, not the notebook.</span>
<span class="go">1: factor(100)</span>
<span class="go">2: kronecker_symbol(3,5)</span>
<span class="go">3: %hist</span>
<span class="gp">sage: </span><span class="n">_oh</span>
<span class="go"> _4 = {1: 2^2 * 5^2, 2: -1}</span>
<span class="gp">sage: </span><span class="n">_i1</span>
<span class="go"> _5 = &#39;factor(ZZ(100))\n&#39;</span>
<span class="gp">sage: </span><span class="nb">eval</span><span class="p">(</span><span class="n">_i1</span><span class="p">)</span>
<span class="go"> _6 = 2^2 * 5^2</span>
<span class="gp">sage: </span><span class="o">%</span><span class="n">hist</span>
<span class="go">1: factor(100)</span>
<span class="go">2: kronecker_symbol(3,5)</span>
<span class="go">3: %hist</span>
<span class="go">4: _oh</span>
<span class="go">5: _i1</span>
<span class="go">6: eval(_i1)</span>
<span class="go">7: %hist</span>
</pre></div>
</div>
<p>Vamos omitir a numeração das linhas no restante deste tutorial e em
outras documentações do Sage.</p>
<p>Você também pode salvar uma lista de comandos em uma macro.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">E</span> <span class="o">=</span> <span class="n">EllipticCurve</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">ModularSymbols</span><span class="p">(</span><span class="mi">37</span><span class="p">)</span>
<span class="gp">sage: </span><span class="o">%</span><span class="n">hist</span>
<span class="go">1: E = EllipticCurve([1,2,3,4,5])</span>
<span class="go">2: M = ModularSymbols(37)</span>
<span class="go">3: %hist</span>
<span class="gp">sage: </span><span class="o">%</span><span class="n">macro</span> <span class="n">em</span> <span class="mi">1</span><span class="o">-</span><span class="mi">2</span>
<span class="go">Macro `em` created. To execute, type its name (without quotes).</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">E</span>
<span class="go">Elliptic Curve defined by y^2 + x*y + 3*y = x^3 + 2*x^2 + 4*x + 5 over</span>
<span class="go">Rational Field</span>
<span class="gp">sage: </span><span class="n">E</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="bp">None</span>
<span class="gp">sage: </span><span class="n">em</span>
<span class="go">Executing Macro...</span>
<span class="gp">sage: </span><span class="n">E</span>
<span class="go">Elliptic Curve defined by y^2 + x*y + 3*y = x^3 + 2*x^2 + 4*x + 5 over</span>
<span class="go">Rational Field</span>
</pre></div>
</div>
<p>Quando se usa a linha de comando, qualquer comando UNIX pode ser
executado a partir do Sage inserindo um ponto de exclamação <tt class="docutils literal"><span class="pre">!</span></tt> como
prefixo. Por exemplo,</p>
<div class="highlight-python"><div class="highlight"><pre>sage: !ls
auto  example.sage glossary.tex  t  tmp  tut.log  tut.tex
</pre></div>
</div>
<p>fornece a lista de arquivos do atual diretório.</p>
<p>O <tt class="docutils literal"><span class="pre">PATH</span></tt> possui o diretório bin do Sage em primeiro, portanto se
você digitar <tt class="docutils literal"><span class="pre">p</span></tt>, <tt class="docutils literal"><span class="pre">gap</span></tt>, <tt class="docutils literal"><span class="pre">singular</span></tt>, <tt class="docutils literal"><span class="pre">maxima</span></tt>, etc., você
executa a versão incluída no Sage.</p>
<div class="highlight-python"><div class="highlight"><pre>sage: !gp
Reading GPRC: /etc/gprc ...Done.

                           GP/PARI CALCULATOR Version 2.2.11 (alpha)
                  i686 running linux (ix86/GMP-4.1.4 kernel) 32-bit version
...
sage: !singular
                     SINGULAR                             /  Development
 A Computer Algebra System for Polynomial Computations   /   version 3-0-1
                                                       0&lt;
     by: G.-M. Greuel, G. Pfister, H. Schoenemann        \   October 2005
FB Mathematik der Universitaet, D-67653 Kaiserslautern    \
</pre></div>
</div>
</div>
<div class="section" id="gravando-entradas-e-saidas-de-dados">
<h2>Gravando Entradas e Saídas de dados<a class="headerlink" href="#gravando-entradas-e-saidas-de-dados" title="Link permanente para este título">¶</a></h2>
<p>Gravar a sua sessão no Sage não é o mesmo que salvá-la (veja
<a class="reference internal" href="#section-save"><em>Salvando e Abrindo Sessões Completas</em></a>). Para gravar a entrada de dados (e opcionalmente
a saída) use o comando <tt class="docutils literal"><span class="pre">logstart</span></tt>. Digite <tt class="docutils literal"><span class="pre">logstart?</span></tt> para mais
detalhes. Você pode usar esse comando para gravar tudo o que você
digita, toda a saída de dados, e até mesmo usar essa entrada de dados
que você guardou em uma sessão futura (simplesmente importando o
arquivo log).</p>
<div class="highlight-python"><div class="highlight"><pre>was@form:~$ sage
----------------------------------------------------------------------
| SAGE Version 3.0.2, Release Date: 2008-05-24                       |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------

sage: logstart setup
Activating auto-logging. Current session state plus future input saved.
Filename       : setup
Mode           : backup
Output logging : False
Timestamping   : False
State          : active
sage: E = EllipticCurve([1,2,3,4,5]).minimal_model()
sage: F = QQ^3
sage: x,y = QQ[&#39;x,y&#39;].gens()
sage: G = E.gens()
sage:
Exiting SAGE (CPU time 0m0.61s, Wall time 0m50.39s).
was@form:~$ sage
----------------------------------------------------------------------
| SAGE Version 3.0.2, Release Date: 2008-05-24                       |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------

sage: load &quot;setup&quot;
Loading log file &lt;setup&gt; one line at a time...
Finished replaying log file &lt;setup&gt;
sage: E
Elliptic Curve defined by y^2 + x*y  = x^3 - x^2 + 4*x + 3 over Rational
Field
sage: x*y
x*y
sage: G
[(2 : 3 : 1)]
</pre></div>
</div>
<p>Se você usa o Sage no terminal <tt class="docutils literal"><span class="pre">konsole</span></tt> do Linux KDE, então você
pode gravar a sessão da seguinte forma: após iniciar o Sage no
<tt class="docutils literal"><span class="pre">konsole</span></tt>, selecione &#8220;settings&#8221;, então &#8220;history...&#8221;, então &#8220;set
unlimited&#8221;. Quando você estiver pronto para guardar a sua sessão,
selecione &#8220;edit&#8221; e então &#8220;save history as...&#8221; e digite um nome para
salvar o texto de sua sessão em seu computador. Após salvar esse
arquivo, você poderia abri-lô em um editor, tal como o xemacs, e
imprimi-lo.</p>
</div>
<div class="section" id="colar-texto-ignora-prompts">
<h2>Colar Texto Ignora Prompts<a class="headerlink" href="#colar-texto-ignora-prompts" title="Link permanente para este título">¶</a></h2>
<p>Suponha que você está lendo uma sequência de comandos em Sage ou
Python e quer copiá-los no Sage. Mas eles têm os irritantes prompts
<tt class="docutils literal"><span class="pre">&gt;&gt;&gt;</span></tt> ou <tt class="docutils literal"><span class="pre">sage:</span></tt> para te aborrecer. De fato, você pode copiar e
colar um exemplo, incluindo os prompts se você quiser, no Sage. Em
outras palavras, automaticamente o Sage remove os caracteres <tt class="docutils literal"><span class="pre">&gt;&gt;&gt;</span></tt>
ou <tt class="docutils literal"><span class="pre">sage:</span></tt> antes de colar o conteúdo no Python. Por exemplo,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="mi">2</span><span class="o">^</span><span class="mi">10</span>
<span class="go">1024</span>
<span class="gp">sage: </span><span class="n">sage</span><span class="p">:</span> <span class="n">sage</span><span class="p">:</span> <span class="mi">2</span><span class="o">^</span><span class="mi">10</span>
<span class="go">1024</span>
<span class="gp">sage: </span><span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span><span class="o">^</span><span class="mi">10</span>
<span class="go">1024</span>
</pre></div>
</div>
</div>
<div class="section" id="comandos-de-tempo">
<h2>Comandos de Tempo<a class="headerlink" href="#comandos-de-tempo" title="Link permanente para este título">¶</a></h2>
<p>Se você colocar o comando <tt class="docutils literal"><span class="pre">%time</span></tt> no começo de uma linha de comando,
o tempo que o comando leva para ser executado vai aparecer após a
saída de dados. Por exemplo, nós podemos comparar o tempo de execução
para certas operações de exponenciação de várias formas. Os tempos
abaixo vão ser provavelmente muito diferentes para o seu computador,
ou até mesmo para versões diferentes do Sage. Primeiro, usando o
Python</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="o">%</span><span class="n">time</span> <span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">1938</span><span class="p">)</span><span class="o">^</span><span class="nb">int</span><span class="p">(</span><span class="mi">99484</span><span class="p">)</span>
<span class="go">CPU times: user 0.66 s, sys: 0.00 s, total: 0.66 s</span>
<span class="go">Wall time: 0.66</span>
</pre></div>
</div>
<p>Isso significa que levou 0.66 segundos no total, e o wall time, isto
é, a quantidade de tempo que passou no seu relógio de parede, é também
0.66 segundos. Se o seu computador está executado outros programas o
wall time pode ser muito maior do que o tempo de CPU.</p>
<p>A seguir verificamos o tempo de exponenciação usando o tipo Integer do
Sage, o qual é implementado (em Cython) usando a biblioteca GMP:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="o">%</span><span class="n">time</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1938</span><span class="o">^</span><span class="mi">99484</span>
<span class="go">CPU times: user 0.04 s, sys: 0.00 s, total: 0.04 s</span>
<span class="go">Wall time: 0.04</span>
</pre></div>
</div>
<p>Usando a biblioteca C do PARI:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="o">%</span><span class="n">time</span> <span class="n">a</span> <span class="o">=</span> <span class="n">pari</span><span class="p">(</span><span class="mi">1938</span><span class="p">)</span><span class="o">^</span><span class="n">pari</span><span class="p">(</span><span class="mi">99484</span><span class="p">)</span>
<span class="go">CPU times: user 0.05 s, sys: 0.00 s, total: 0.05 s</span>
<span class="go">Wall time: 0.05</span>
</pre></div>
</div>
<p>A GMP é melhor, mas por pouco (como esperado, pois a versão do PARI
contida no Sage usa a GMP para aritmética de inteiros).</p>
<p>Você pode também contar o tempo de um bloco de comandos usado o
comando <tt class="docutils literal"><span class="pre">cputime</span></tt>, como ilustrado abaixo:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">t</span> <span class="o">=</span> <span class="n">cputime</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">1938</span><span class="p">)</span><span class="o">^</span><span class="nb">int</span><span class="p">(</span><span class="mi">99484</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">b</span> <span class="o">=</span> <span class="mi">1938</span><span class="o">^</span><span class="mi">99484</span>
<span class="gp">sage: </span><span class="n">c</span> <span class="o">=</span> <span class="n">pari</span><span class="p">(</span><span class="mi">1938</span><span class="p">)</span><span class="o">^</span><span class="n">pari</span><span class="p">(</span><span class="mi">99484</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">cputime</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>                       <span class="c"># somewhat random output</span>
<span class="go">0.64</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>sage: cputime?
...
    Return the time in CPU second since SAGE started, or with optional
    argument t, return the time since time t.
    INPUT:
        t -- (optional) float, time in CPU seconds
    OUTPUT:
        float -- time in CPU seconds
</pre></div>
</div>
<p>O comando <tt class="docutils literal"><span class="pre">walltime</span></tt> se comporta como o comando <tt class="docutils literal"><span class="pre">cputime</span></tt>, exceto
que ele conta o tempo do relógio.</p>
<p>Nós podemos também calcular a potência acima em alguns softwares de
álgebra incluídos no Sage. Em cada caso executamos um comando trivial
no sistema de modo a inicializar o servidor para aquele programa. O
tempo mais relevante é o tempo do relógio. Todavia, se houver uma
diferença significativa entre o wall time e o CPU time então isso pode
indicar algum problema de performance que vale a pena investigar.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">time</span> <span class="mi">1938</span><span class="o">^</span><span class="mi">99484</span><span class="p">;</span>
<span class="go">CPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s</span>
<span class="go">Wall time: 0.01</span>
<span class="gp">sage: </span><span class="n">gp</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="n">time</span> <span class="n">g</span> <span class="o">=</span> <span class="n">gp</span><span class="p">(</span><span class="s">&#39;1938^99484&#39;</span><span class="p">)</span>
<span class="go">CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s</span>
<span class="go">Wall time: 0.04</span>
<span class="gp">sage: </span><span class="n">maxima</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="n">time</span> <span class="n">g</span> <span class="o">=</span> <span class="n">maxima</span><span class="p">(</span><span class="s">&#39;1938^99484&#39;</span><span class="p">)</span>
<span class="go">CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s</span>
<span class="go">Wall time: 0.30</span>
<span class="gp">sage: </span><span class="n">kash</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="n">time</span> <span class="n">g</span> <span class="o">=</span> <span class="n">kash</span><span class="p">(</span><span class="s">&#39;1938^99484&#39;</span><span class="p">)</span>
<span class="go">CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s</span>
<span class="go">Wall time: 0.04</span>
<span class="gp">sage: </span><span class="n">mathematica</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">        0</span>
<span class="gp">sage: </span><span class="n">time</span> <span class="n">g</span> <span class="o">=</span> <span class="n">mathematica</span><span class="p">(</span><span class="s">&#39;1938^99484&#39;</span><span class="p">)</span>
<span class="go">CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s</span>
<span class="go">Wall time: 0.03</span>
<span class="gp">sage: </span><span class="n">maple</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="n">time</span> <span class="n">g</span> <span class="o">=</span> <span class="n">maple</span><span class="p">(</span><span class="s">&#39;1938^99484&#39;</span><span class="p">)</span>
<span class="go">CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s</span>
<span class="go">Wall time: 0.11</span>
<span class="gp">sage: </span><span class="n">gap</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="n">time</span> <span class="n">g</span> <span class="o">=</span> <span class="n">gap</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s">&#39;1938^99484;;&#39;</span><span class="p">)</span>
<span class="go">CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s</span>
<span class="go">Wall time: 1.02</span>
</pre></div>
</div>
<p>Note que o GAP e o Maxima são os mais lentos neste teste (isso foi
executado no computador <tt class="docutils literal"><span class="pre">sage.math.washington.edu</span></tt>). Devido ao
processamento extra (overhead) da interface pexpect, talvez não seja
apropriado comparar esses resultados com o Sage, que é o mais rápido.</p>
</div>
<div class="section" id="outras-dicas-para-o-ipython">
<h2>Outras Dicas para o IPython<a class="headerlink" href="#outras-dicas-para-o-ipython" title="Link permanente para este título">¶</a></h2>
<p>Como observado acima, o Sage usa o IPython como interface, logo você
pode usar quaisquer comandos e recursos do IPython. Você pode ler a
<a class="reference external" href="http://ipython.scipy.org/moin/Documentation">Documentação completa do IPython</a> (em inglês).</p>
<ul>
<li><p class="first">Você pode usar <tt class="docutils literal"><span class="pre">%bg</span></tt> para executar um comando no background, e
então usar <tt class="docutils literal"><span class="pre">jobs</span></tt> para acessar os resultados, da seguinte forma.
(Os comentários <tt class="docutils literal"><span class="pre">not</span> <span class="pre">tested</span></tt> estão aqui porque a sintaxe <tt class="docutils literal"><span class="pre">%bg</span></tt>
não funciona bem com o sistema de testes automáticos do Sage. Se
você digitar esses comandos, eles devem funcionar. Isso é obviamente
mais útil com comandos que demoram para serem completados.)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="k">def</span> <span class="nf">quick</span><span class="p">(</span><span class="n">m</span><span class="p">):</span> <span class="k">return</span> <span class="mi">2</span><span class="o">*</span><span class="n">m</span>
<span class="gp">sage: </span><span class="o">%</span><span class="n">bg</span> <span class="n">quick</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>  <span class="c"># not tested</span>
<span class="go">Starting job # 0 in a separate thread.</span>
<span class="gp">sage: </span><span class="n">jobs</span><span class="o">.</span><span class="n">status</span><span class="p">()</span>  <span class="c"># not tested</span>
<span class="go">Completed jobs:</span>
<span class="go">0 : quick(20)</span>
<span class="gp">sage: </span><span class="n">jobs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">result</span>  <span class="c"># the actual answer, not tested</span>
<span class="go">40</span>
</pre></div>
</div>
<p>Note que os comandos executados no background não usam o
pre-processador (preparser) do Sage &#8211; veja <a class="reference internal" href="afterword.html#section-mathannoy"><em>O Pré-Processador: Diferenças entre o Sage e o Python</em></a>
para mais informações. Uma forma (estranha talvez) de contornar esse
problema seria executar</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="o">%</span><span class="n">bg</span> <span class="nb">eval</span><span class="p">(</span><span class="n">preparse</span><span class="p">(</span><span class="s">&#39;quick(20)&#39;</span><span class="p">))</span> <span class="c"># not tested</span>
</pre></div>
</div>
<p>É mais seguro e simples, todavia, usar <tt class="docutils literal"><span class="pre">%bg</span></tt> apenas em comandos
que não requerem o pre-processador (preparser).</p>
</li>
<li><p class="first">Você pode usar <tt class="docutils literal"><span class="pre">%edit</span></tt> (ou <tt class="docutils literal"><span class="pre">%ed</span></tt> ou <tt class="docutils literal"><span class="pre">ed</span></tt>) para abrir um
editor, se você desejar digitar algum código mais complexo. Antes de
iniciar o Sage, certifique-se de que a variável de ambiente
<span class="target" id="index-0"></span><tt class="xref std std-envvar docutils literal"><span class="pre">EDITOR</span></tt> está definida com o seu editor favorito (colocando
<tt class="docutils literal"><span class="pre">export</span> <span class="pre">EDITOR=/usr/bin/emacs</span></tt> ou <tt class="docutils literal"><span class="pre">export</span> <span class="pre">EDITOR=/usr/bin/vim</span></tt>
or algo similar no lugar apropriado, como um arquivo <tt class="docutils literal"><span class="pre">.profile</span></tt>).
A partir do prompt do Sage, o comando <tt class="docutils literal"><span class="pre">%edit</span></tt> irá abrir o editor
escolhido. Então usando o editor você pode definir uma função:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">some_function</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">n</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span><span class="o">*</span><span class="n">n</span> <span class="o">+</span> <span class="mi">2</span>
</pre></div>
</div>
<p>Salve e feche o editor. No restante da sua sessão do Sage, você pode
usar então a função <tt class="docutils literal"><span class="pre">some_function</span></tt>. Se você quiser modificá-la,
digite <tt class="docutils literal"><span class="pre">%edit</span> <span class="pre">some_function</span></tt> no prompt do Sage.</p>
</li>
<li><p class="first">Se você for calcular algo e quiser modificar o resultado para outro
uso, execute o cálculo e então digite <tt class="docutils literal"><span class="pre">%rep</span></tt>: isso irá colocar o
resultado do comando anterior no prompt do Sage, pronto para ser
editado.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">derivative</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">-sin(x)</span>
</pre></div>
</div>
<p>A esta altura, se você digitar <tt class="docutils literal"><span class="pre">%rep</span></tt> no prompt do Sage, você irá
obter um novo prompt, seguido de <tt class="docutils literal"><span class="pre">-sin(x)</span></tt>, com o cursor no final
da linha.</p>
</li>
</ul>
<p>Para mais informações, digite <tt class="docutils literal"><span class="pre">%quickref</span></tt> para ver um guia rápido de
referência do IPython. Quando este tutorial foi escrito (Fevereiro 2015),
o Sage usa a versão 2.3.0 do IPython, e a <a class="reference external" href="http://ipython.org/ipython-doc/dev/interactive/tutorial.html#magic-functions">documentation for its magic commands</a> está disponível na internet.</p>
</div>
<div class="section" id="erros-e-excecoes">
<h2>Erros e Exceções<a class="headerlink" href="#erros-e-excecoes" title="Link permanente para este título">¶</a></h2>
<p>Quando algo errado ocorre, você usualmente verá uma &#8220;exceção&#8221; do
Python. O Python até mesmo tenta sugerir o que ocasionou a exceção,
por exemplo, <tt class="docutils literal"><span class="pre">NameError</span></tt> ou <tt class="docutils literal"><span class="pre">ValueError</span></tt> (veja o Manual de
Referência do Python <a class="reference internal" href="bibliography.html#py" id="id1">[Py]</a> para uma lista completa de exceções). Por
exemplo,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="mi">3</span><span class="n">_2</span>
<span class="go">------------------------------------------------------------</span>
<span class="go">   File &quot;&lt;console&gt;&quot;, line 1</span>
<span class="go">     ZZ(3)_2</span>
<span class="go">           ^</span>
<span class="go">SyntaxError: invalid syntax</span>

<span class="gp">sage: </span><span class="n">EllipticCurve</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="n">infinity</span><span class="p">])</span>
<span class="go">------------------------------------------------------------</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">TypeError</span>: <span class="n">Unable to coerce Infinity (&lt;class &#39;sage...Infinity&#39;&gt;) to Rational</span>
</pre></div>
</div>
<p>O debugador interativo é as vezes útil para entender o que houve de
errado. Você pode ativá-lo e desativá-lo usando <tt class="docutils literal"><span class="pre">%pdb</span></tt> (o padrão é
desativado). O prompt <tt class="docutils literal"><span class="pre">ipdb&gt;</span></tt> aparece se uma exceção é levantada e o
debugador está ativado. A partir do debugador, você pode imprimir o
estado de qualquer variável local, e mover a pilha de execução para
cima e para baixo. Por exemplo,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="o">%</span><span class="n">pdb</span>
<span class="go">Automatic pdb calling has been turned ON</span>
<span class="gp">sage: </span><span class="n">EllipticCurve</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="n">infinity</span><span class="p">])</span>
<span class="go">---------------------------------------------------------------------------</span>
<span class="go">&lt;type &#39;exceptions.TypeError&#39;&gt;             Traceback (most recent call last)</span>
<span class="gp">...</span>

<span class="go">ipdb&gt;</span>
</pre></div>
</div>
<p>Para uma lista de comandos do debugador, digite <tt class="docutils literal"><span class="pre">?</span></tt> no prompt
<tt class="docutils literal"><span class="pre">ipbd&gt;</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>ipdb&gt; ?

Documented commands (type help &lt;topic&gt;):
========================================
EOF    break  commands   debug    h       l     pdef   quit    tbreak
a      bt     condition  disable  help    list  pdoc   r       u
alias  c      cont       down     ignore  n     pinfo  return  unalias
args   cl     continue   enable   j       next  pp     s       up
b      clear  d          exit     jump    p     q      step    w
whatis where

Miscellaneous help topics:
==========================
exec  pdb

Undocumented commands:
======================
retval  rv
</pre></div>
</div>
<p>Digite Ctrl-D ou <tt class="docutils literal"><span class="pre">quit</span></tt> para retornar ao Sage.</p>
</div>
<div class="section" id="busca-reversa-e-completamento-tab">
<span id="section-tabcompletion"></span><h2>Busca Reversa e Completamento Tab<a class="headerlink" href="#busca-reversa-e-completamento-tab" title="Link permanente para este título">¶</a></h2>
<p>Busca reversa: Digite o começo de um comando, e então <tt class="docutils literal"><span class="pre">Ctrl-p</span></tt> (ou
tecle a seta para cima) para voltar para cada linha que você digitou
que começa daquela forma. Isso funciona mesmo se você encerrou o Sage
e iniciou novamente mais tarde. Você também pode fazer uma busca
reversa ao longo da história usando <tt class="docutils literal"><span class="pre">Ctrl-r</span></tt>. Todos esses recursos
usam o pacote <tt class="docutils literal"><span class="pre">readline</span></tt>, que está disponível no Linux.</p>
<p>Para ilustrar a busca reversa, primeiro crie o e espaço vetorial
tri-dimensional <span class="math">\(V=\QQ^3\)</span> da seguinte forma:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">V</span> <span class="o">=</span> <span class="n">VectorSpace</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">V</span>
<span class="go">Vector space of dimension 3 over Rational Field</span>
</pre></div>
</div>
<p>Você pode usar a seguinte notação mais compacta:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">V</span> <span class="o">=</span> <span class="n">QQ</span><span class="o">^</span><span class="mi">3</span>
</pre></div>
</div>
<p>Então é fácil listar todas as funções para <span class="math">\(V\)</span> usando
completamento. Digite <tt class="docutils literal"><span class="pre">V</span></tt>, e então pressione a tecla <tt class="docutils literal"><span class="pre">[tab]</span></tt> no
seu teclado:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">V</span><span class="o">.</span><span class="p">[</span><span class="n">tab</span> <span class="n">key</span><span class="p">]</span>
<span class="go">V._VectorSpace_generic__base_field</span>
<span class="gp">...</span>
<span class="go">V.ambient_space</span>
<span class="go">V.base_field</span>
<span class="go">V.base_ring</span>
<span class="go">V.basis</span>
<span class="go">V.coordinates</span>
<span class="gp">...</span>
<span class="go">V.zero_vector</span>
</pre></div>
</div>
<p>Se você digitar as primeiras letras de uma função, e então a tecla
<tt class="docutils literal"><span class="pre">[tab]</span></tt>, você obtém apenas funções que começam conforme indicado.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">V</span><span class="o">.</span><span class="n">i</span><span class="p">[</span><span class="n">tab</span> <span class="n">key</span><span class="p">]</span>
<span class="go">V.is_ambient  V.is_dense    V.is_full     V.is_sparse</span>
</pre></div>
</div>
<p>Se você gostaria de saber o que uma função faz, por exemplo, a função
coordinates, digite <tt class="docutils literal"><span class="pre">V.coordinates?</span></tt> para ajuda ou
<tt class="docutils literal"><span class="pre">V.coordinates??</span></tt> para ver o código fonte, como explicado na próxima
sessão.</p>
</div>
<div class="section" id="sistema-de-ajuda-integrado">
<h2>Sistema de Ajuda Integrado<a class="headerlink" href="#sistema-de-ajuda-integrado" title="Link permanente para este título">¶</a></h2>
<p>O Sage possui um sistema de ajuda integrado. Digite o nome da função
seguido de ? para ver informações sobre a função.</p>
<div class="highlight-python"><div class="highlight"><pre>sage: V = QQ^3
sage: V.coordinates?
Type:           instancemethod
Base Class:     &lt;type &#39;instancemethod&#39;&gt;
String Form:    &lt;bound method FreeModule_ambient_field.coordinates of Vector
space of dimension 3 over Rational Field&gt;
Namespace:      Interactive
File:           /home/was/s/local/lib/python2.4/site-packages/sage/modules/f
ree_module.py
Definition:     V.coordinates(self, v)
Docstring:
    Write v in terms of the basis for self.

    Returns a list c such that if B is the basis for self, then

            sum c_i B_i = v.

    If v is not in self, raises an ArithmeticError exception.

    EXAMPLES:
        sage: M = FreeModule(IntegerRing(), 2); M0,M1=M.gens()
        sage: W = M.submodule([M0 + M1, M0 - 2*M1])
        sage: W.coordinates(2*M0-M1)
        [2, -1]
</pre></div>
</div>
<p>Como mostrado acima, o comando de ajuda mostra o tipo do objeto, o
arquivo no qual ele é definido, e uma descrição útil da função com
exemplos que você pode colar na sua sessão atual. Quase todos esses
exemplos são regularmente testados automaticamente para certificar que
eles se comportam exatamente como esperado.</p>
<p>Outro recurso que vai muito na direção do espírito de código aberto do
Sage é que se <tt class="docutils literal"><span class="pre">f</span></tt> é uma função do Python, então o comando <tt class="docutils literal"><span class="pre">f??</span></tt>
mostra o código fonte que define <tt class="docutils literal"><span class="pre">f</span></tt>. Por exemplo,</p>
<div class="highlight-python"><div class="highlight"><pre>sage: V = QQ^3
sage: V.coordinates??
Type:           instancemethod
...
Source:
def coordinates(self, v):
        &quot;&quot;&quot;
        Write $v$ in terms of the basis for self.
        ...
        &quot;&quot;&quot;
        return self.coordinate_vector(v).list()
</pre></div>
</div>
<p>Isso nos diz que tudo que a função <tt class="docutils literal"><span class="pre">coordinates</span></tt> faz é chamar a
função <tt class="docutils literal"><span class="pre">coordinate_vector</span></tt> e converter o resultado para uma lista. O
que a função <tt class="docutils literal"><span class="pre">coordinate_vector</span></tt> faz?</p>
<div class="highlight-python"><div class="highlight"><pre>sage: V = QQ^3
sage: V.coordinate_vector??
...
def coordinate_vector(self, v):
        ...
        return self.ambient_vector_space()(v)
</pre></div>
</div>
<p>A função <tt class="docutils literal"><span class="pre">coordinate_vector</span></tt> coage a sua entrada em um espaço
ambiente, o que tem o efeito de calcular o vetor de coeficientes de
<span class="math">\(v\)</span> em termos de <span class="math">\(V\)</span>. O espaço <span class="math">\(V\)</span> já é o espaço
ambiente pois é simplesmente <span class="math">\(\QQ^3\)</span>. Existe também uma função
<tt class="docutils literal"><span class="pre">coordinate_vector</span></tt> para subespaços, que é diferente. Vamos criar um
subespaço e ver:</p>
<div class="highlight-python"><div class="highlight"><pre>sage: V = QQ^3; W = V.span_of_basis([V.0, V.1])
sage: W.coordinate_vector??
...
def coordinate_vector(self, v):
        &quot;&quot;&quot;
         ...
        &quot;&quot;&quot;
        # First find the coordinates of v wrt echelon basis.
        w = self.echelon_coordinate_vector(v)
        # Next use transformation matrix from echelon basis to
        # user basis.
        T = self.echelon_to_user_matrix()
        return T.linear_combination_of_rows(w)
</pre></div>
</div>
<p>(Se você acha que a implementação é ineficiente, por favor junte-se a
nós para ajudar a optimizar as funções de álgebra linear.)</p>
<p>Você também pode digitar <tt class="docutils literal"><span class="pre">help(command_name)</span></tt> ou <tt class="docutils literal"><span class="pre">help(class)</span></tt>
para ler um arquivo de ajuda sobre determinada classe.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">help</span><span class="p">(</span><span class="n">VectorSpace</span><span class="p">)</span>
<span class="go">Help on class VectorSpace ...</span>

<span class="go">class VectorSpace(__builtin__.object)</span>
<span class="go"> |  Create a Vector Space.</span>
<span class="go"> |</span>
<span class="go"> |  To create an ambient space over a field with given dimension</span>
<span class="go"> |  using the calling syntax ...</span>
<span class="go"> :</span>
<span class="go"> :</span>
</pre></div>
</div>
<p>Quando você digita <tt class="docutils literal"><span class="pre">q</span></tt> para sair do sistema de ajuda, a sua sessão
aparece na tela da mesma forma que anteriormente. O texto de ajuda não
fica permanentemente em sua tela, ao contrário da saída de
<tt class="docutils literal"><span class="pre">function_name?</span></tt> que as vezes fica. É partircularmente útil digitar
<tt class="docutils literal"><span class="pre">help(module_name)</span></tt>. Por exemplo, espaços vetoriais são definidos em
<tt class="docutils literal"><span class="pre">sage.modules.free_module</span></tt>, então digite
<tt class="docutils literal"><span class="pre">help(sage.modules.free_module)</span></tt> para obter documentação sobre esse
módulo. Quando visualizando documentação usando a ajuda, você pode
procurar no texto digitando <tt class="docutils literal"><span class="pre">/</span></tt> e na ordem reversa digitando <tt class="docutils literal"><span class="pre">?</span></tt>.</p>
</div>
<div class="section" id="salvando-e-carregando-objetos-individuais">
<h2>Salvando e Carregando Objetos Individuais<a class="headerlink" href="#salvando-e-carregando-objetos-individuais" title="Link permanente para este título">¶</a></h2>
<p>Suponha que você calcule uma matriz, ou pior ainda, um espaço
complicado de símbolos, e gostaria de salvá-los para uso posterior. O
que você pode fazer? Existem várias estratégias que os sistemas
computacionais de álgebra adotam para salvar objetos individuais.</p>
<ol class="arabic simple">
<li><strong>Salve seus cálculos:</strong> Suportam apenas salvar e carregar uma
sessão completa (por exemplo, GAP, Magma).</li>
<li><strong>Entrada e Saída Unificadas:</strong> Faz com que cada objeto seja
impresso de uma forma que possa ser lido novamente (GP/PARI).</li>
<li><strong>Eval:</strong> Torna fácil processar um código arbitrário no
interpretador (por exemplo, Singular, PARI).</li>
</ol>
<p>Como o Sage usa o Python, ele adota uma estratégia diferente, que se
baseia no fato de que qualquer objeto pode ser &#8220;serializado&#8221;, isto é,
transformado em uma string a partir da qual o objeto pode ser
recuperado. Isso segue o espírito da estratégia unificada de entrada e
saída do PARI, exceto que não possue a desvantagem que os objetos são
impressos na tela em uma forma muito complicada. Além disso, o suporte
para salvar e recuperar é (na maior parte dos casos) completamente
automática, não requerendo nenhuma programação extra; é simplesmente um
recurso do Python que foi implementado na linguagem desde o início de
seu desenvolvimento.</p>
<p>Quase todos os objetos <tt class="docutils literal"><span class="pre">x</span></tt> podem ser armazenados em disco de forma
comprimida usando <tt class="docutils literal"><span class="pre">save(x,</span> <span class="pre">filename)</span></tt> (ou em muitos casos
<tt class="docutils literal"><span class="pre">x.save(filename)</span></tt>). Para carregar o objeto de volta no Sage use
<tt class="docutils literal"><span class="pre">load(filename)</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">MatrixSpace</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span><span class="mi">3</span><span class="p">)(</span><span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">))</span><span class="o">^</span><span class="mi">2</span>
<span class="gp">sage: </span><span class="n">A</span>
<span class="go">[ 15  18  21]</span>
<span class="go">[ 42  54  66]</span>
<span class="go">[ 69  90 111]</span>
<span class="gp">sage: </span><span class="n">save</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Você deve agora sair do Sage e reiniciá-lo. Então você pode obter
<tt class="docutils literal"><span class="pre">A</span></tt> de volta:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">A</span>
<span class="go">[ 15  18  21]</span>
<span class="go">[ 42  54  66]</span>
<span class="go">[ 69  90 111]</span>
</pre></div>
</div>
<p>Você pode fazer o mesmo com objetos mais complicados, por exemplo,
curvas elípticas. Todos os dados sobre o objeto são guardados e
restaurados com o objeto. Por exemplo,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">E</span> <span class="o">=</span> <span class="n">EllipticCurve</span><span class="p">(</span><span class="s">&#39;11a&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="n">E</span><span class="o">.</span><span class="n">anlist</span><span class="p">(</span><span class="mi">100000</span><span class="p">)</span>              <span class="c"># takes a while</span>
<span class="gp">sage: </span><span class="n">save</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="s">&#39;E&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">quit</span>
</pre></div>
</div>
<p>A versão em disco de <tt class="docutils literal"><span class="pre">E</span></tt> ocupa 153 kilobytes, pois ela guarda os
primeiros 1000000 <span class="math">\(a_n\)</span> com ela.</p>
<div class="highlight-python"><div class="highlight"><pre>~/tmp$ ls -l E.sobj
-rw-r--r--  1 was was 153500 2006-01-28 19:23 E.sobj
~/tmp$ sage [...]
sage: E = load(&#39;E&#39;)
sage: v = E.anlist(100000)              # instant!
</pre></div>
</div>
<p>(Em Python, salvar e restaurar é feito usando o módulo <tt class="docutils literal"><span class="pre">cPickle</span></tt>. Em
particular, um objeto <tt class="docutils literal"><span class="pre">x</span></tt> do Sage pode ser salvo usando
<tt class="docutils literal"><span class="pre">cPickle.dumps(x,</span> <span class="pre">2)</span></tt>. Note o <tt class="docutils literal"><span class="pre">2</span></tt>!)</p>
<p>O sage não pode salvar e carregar objetos criados em algum outro
sistema computacional de álgebra, por exemplo, GAP, Singular, Maxima,
etc. Eles são carregados em um estado &#8220;inválido&#8221;. Em GAP, embora
muitos objetos podem ser impressos de uma forma que eles podem ser
reconstruídos, muitos não, logo reconstrução a partir de suas
representações impressas não é permitido.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">gap</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">load</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">The session in which this object was defined is no longer</span>
<span class="go">running.</span>
</pre></div>
</div>
<p>Objetos do GP/PARI também podem ser salvos e carregados pois suas
representações em forma impressa são suficientes para reconstruí-los.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">gp</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">load</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
<p>Objetos que foram salvos podem ser abertos posteriormente em
computadores com arquiteturas e sistemas operacionais diferentes, por
exemplo, você poderia salvar uma matriz muito grande em um OS X de
32-bits e abri-lo em um Linux de 64-bits, encontrar a forma reduzida,
e movê-lo de volta. Além disso, em muitos casos você pode até mesmo
abrir objetos em versões do Sage diferentes daquela no qual o objeto
foi salvo, desde que o código para aquele objeto não seja muito
diferente. Todos os atributos do objetos são armazendos, assim como a
classe (mas não o código fonte) que define o objeto. Se aquela classe
não existir mais em uma nova versão do Sage, então o objeto não pode
ser reaberto nessa versão. Mas você poderia abri-lo em uma versão mais
antiga, obter o dicionário do objeto (com <tt class="docutils literal"><span class="pre">x.__dict__</span></tt>), salvar o
dicionário, e abri-lo em uma versão mais nova.</p>
<div class="section" id="salvando-como-texto">
<h3>Salvando como Texto<a class="headerlink" href="#salvando-como-texto" title="Link permanente para este título">¶</a></h3>
<p>Você também pode salvar a representação em texto (ASCII) de objetos em
um arquivo, simplesmente abrindo um arquivo em modo de escrita, e
escrevendo a string que representa o objeto no arquivo (você pode
salvar mais de um objeto dessa forma). Quando você terminar de
escrever os objetos, feche o arquivo.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">PolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">f</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span><span class="o">^</span><span class="mi">7</span>
<span class="gp">sage: </span><span class="n">o</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;file.txt&#39;</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">o</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">o</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="salvando-e-abrindo-sessoes-completas">
<span id="section-save"></span><h2>Salvando e Abrindo Sessões Completas<a class="headerlink" href="#salvando-e-abrindo-sessoes-completas" title="Link permanente para este título">¶</a></h2>
<p>O Sage é flexível para salvar e abrir sessões completas.</p>
<p>O comando <tt class="docutils literal"><span class="pre">save_session(sessionname)</span></tt> salva todas as variáveis que
você definiu na sessão atual como um dicionário com o nome
<tt class="docutils literal"><span class="pre">sessionname</span></tt>. (No caso raro de uma variável não poder ser salva,
ela simplesmente não aparece no dicionário.) O resultado é um arquivo
<tt class="docutils literal"><span class="pre">.sobj</span></tt> que pode ser aberto como qualquer outro objeto que foi
salvo. Quando você abre os objetos que foram salvos em uma sessão,
você obtém um dicionário cujas chaves (keys) são os nomes das
variáveis e os valores são os objetos.</p>
<p>Você pode usar o comando <tt class="docutils literal"><span class="pre">load_session(sessionname)</span></tt> para carregar
na presente sessão as variáveis definidas em <tt class="docutils literal"><span class="pre">sessioname</span></tt>. Note que
isso não remove as variáveis já definidas na presente sessão; em vez
disso, as duas sessões são combinadas.</p>
<p>Primeiro iniciamos o Sage e definimos algumas variáveis.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">E</span> <span class="o">=</span> <span class="n">EllipticCurve</span><span class="p">(</span><span class="s">&#39;11a&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">ModularSymbols</span><span class="p">(</span><span class="mi">37</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="mi">389</span>
<span class="gp">sage: </span><span class="n">t</span> <span class="o">=</span> <span class="n">M</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="mi">2003</span><span class="p">)</span><span class="o">.</span><span class="n">matrix</span><span class="p">();</span> <span class="n">t</span><span class="o">.</span><span class="n">charpoly</span><span class="p">()</span><span class="o">.</span><span class="n">factor</span><span class="p">()</span>
<span class="go"> _4 = (x - 2004) * (x - 12)^2 * (x + 54)^2</span>
</pre></div>
</div>
<p>A seguir nós salvamos a nossa sessão, o que armazena cada uma das
variáveis acima em um arquivo. Então visualizamos o arquivo, que tem
por volta de 3K bytes.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">save_session</span><span class="p">(</span><span class="s">&#39;misc&#39;</span><span class="p">)</span>
<span class="go">Saving a</span>
<span class="go">Saving M</span>
<span class="go">Saving t</span>
<span class="go">Saving E</span>
<span class="gp">sage: </span><span class="n">quit</span>
<span class="go">was@form:~/tmp$ ls -l misc.sobj</span>
<span class="go">-rw-r--r--  1 was was 2979 2006-01-28 19:47 misc.sobj</span>
</pre></div>
</div>
<p>Por fim reiniciamos o Sage, definimos algumas variáveis extra, e
carregamos a sessão que foi salva anteriormente.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">b</span> <span class="o">=</span> <span class="mi">19</span>
<span class="gp">sage: </span><span class="n">load_session</span><span class="p">(</span><span class="s">&#39;misc&#39;</span><span class="p">)</span>
<span class="go">Loading a</span>
<span class="go">Loading M</span>
<span class="go">Loading E</span>
<span class="go">Loading t</span>
</pre></div>
</div>
<p>Cada variável que foi salva está de novo disponível. Além disso, a
variável <tt class="docutils literal"><span class="pre">b</span></tt> não foi redefinida.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">M</span>
<span class="go">Full Modular Symbols space for Gamma_0(37) of weight 2 with sign 0</span>
<span class="go">and dimension 5 over Rational Field</span>
<span class="gp">sage: </span><span class="n">E</span>
<span class="go">Elliptic Curve defined by y^2 + y = x^3 - x^2 - 10*x - 20 over Rational</span>
<span class="go">Field</span>
<span class="gp">sage: </span><span class="n">b</span>
<span class="go">19</span>
<span class="gp">sage: </span><span class="n">a</span>
<span class="go">389</span>
</pre></div>
</div>
</div>
<div class="section" id="a-interface-do-notebook">
<span id="section-notebook"></span><h2>A Interface do Notebook<a class="headerlink" href="#a-interface-do-notebook" title="Link permanente para este título">¶</a></h2>
<p>O Sage Notebook é iniciado digitando</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">notebook</span><span class="p">()</span>
</pre></div>
</div>
<p>na linha de comando do Sage. Isso inicia o Notebook e abre o seu
navegador padrão para visualizá-lo. Os arquivos de estado do servidor
são armazenados em <tt class="docutils literal"><span class="pre">$HOME/.sage/sage\_notebook</span></tt>.</p>
<p>Outras opções incluem:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">notebook</span><span class="p">(</span><span class="s">&quot;directory&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>a qual inicia um novo servidor para o Notebook usando arquivos em um
dado diretório, em vez do diretório padrão
<tt class="docutils literal"><span class="pre">$HOME/.sage/sage_notebook</span></tt>. Isso pode ser útil se você quiser ter
uma coleção de folhas de trabalho (worksheets) associadas com um
projeto específico, ou executar vários Notebooks separadamente ao
mesmo tempo.</p>
<p>Quando você inicia o Notebook, ele primeiro cria os seguintes arquivos
em <tt class="docutils literal"><span class="pre">$HOME/.sage/sage_notebook</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>nb.sobj       (the notebook SAGE object file)
objects/      (a directory containing SAGE objects)
worksheets/   (a directory containing SAGE worksheets).
</pre></div>
</div>
<p>Após criar os arquivos acima, o Notebook inicia o servidor web.</p>
<p>Um &#8220;Notebook&#8221; é uma coleção de contas de usuário, cada qual pode ter
várias folhas de trabalho (worksheets). Quando você cria uma nova
folha de trabalho, os dados dela são armazenados no diretórios
<tt class="docutils literal"><span class="pre">worksheets/username/number</span></tt>. Em cada diretório desse há um arquivo
texto <tt class="docutils literal"><span class="pre">worksheet.txt</span></tt> - se algum problema ocorrer com as suas
folhas de trabalho, ou com o Sage, esse arquivo texto contém toda
informação necessária para reconstruir a folha de trabalho.</p>
<p>A partir do Sage, digite <tt class="docutils literal"><span class="pre">notebook?</span></tt> para mais informações sobre
como iniciar um servidor.</p>
<p>O seguinte diagrama ilustra a arquitetura do Notebook Sage:</p>
<div class="highlight-python"><div class="highlight"><pre>----------------------
|                    |
|                    |
|   firefox/safari   |
|                    |
|     javascript     |
|      program       |
|                    |
|                    |
----------------------
      |      ^
      | AJAX |
      V      |
----------------------
|                    |
|       sage         |                SAGE process 1
|       web          | ------------&gt;  SAGE process 2    (Python processes)
|      server        |   pexpect      SAGE process 3
|                    |                    .
|                    |                    .
----------------------                    .
</pre></div>
</div>
<p>Para ajuda sobre as teclas de atalho disponíveis no Notebook, clique
no link <tt class="docutils literal"><span class="pre">Help</span></tt>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Tabela de Conteúdo</a></h3>
            <ul>
<li><a class="reference internal" href="#">A Linha de Comando Interativa</a><ul>
<li><a class="reference internal" href="#a-sua-sessao-no-sage">A Sua Sessão no Sage</a></li>
<li><a class="reference internal" href="#gravando-entradas-e-saidas-de-dados">Gravando Entradas e Saídas de dados</a></li>
<li><a class="reference internal" href="#colar-texto-ignora-prompts">Colar Texto Ignora Prompts</a></li>
<li><a class="reference internal" href="#comandos-de-tempo">Comandos de Tempo</a></li>
<li><a class="reference internal" href="#outras-dicas-para-o-ipython">Outras Dicas para o IPython</a></li>
<li><a class="reference internal" href="#erros-e-excecoes">Erros e Exceções</a></li>
<li><a class="reference internal" href="#busca-reversa-e-completamento-tab">Busca Reversa e Completamento Tab</a></li>
<li><a class="reference internal" href="#sistema-de-ajuda-integrado">Sistema de Ajuda Integrado</a></li>
<li><a class="reference internal" href="#salvando-e-carregando-objetos-individuais">Salvando e Carregando Objetos Individuais</a><ul>
<li><a class="reference internal" href="#salvando-como-texto">Salvando como Texto</a></li>
</ul>
</li>
<li><a class="reference internal" href="#salvando-e-abrindo-sessoes-completas">Salvando e Abrindo Sessões Completas</a></li>
<li><a class="reference internal" href="#a-interface-do-notebook">A Interface do Notebook</a></li>
</ul>
</li>
</ul>

            <h4>Tópico anterior</h4>
            <p class="topless"><a href="tour_advanced.html"
                                  title="capítulo anterior">Um Pouco Mais de Matemática Avançada</a></p>
            <h4>Próximo tópico</h4>
            <p class="topless"><a href="interfaces.html"
                                  title="próximo capítulo">Interfaces</a></p>
            <h3>Esta Página</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/interactive_shell.txt"
                     rel="nofollow">Exibir Fonte</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Pesquisa rápida</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <!-- The shading of the "Go" button should be consistent -->
                <!-- with the colour of the header and footer. See the file -->
                <!-- doc/common/themes/sage/theme.conf for colours used by -->
                <!-- the Sage theme. -->
                <input type="submit" style="background-color: #B8B9F6" value="Ir" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Digite os termos da busca ou o nome de um módulo, classe ou função.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navegação</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Índice Geral"
             >índice</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Índice de Módulos do Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="interfaces.html" title="Interfaces"
             >próximo</a> |</li>
        <li class="right" >
          <a href="tour_advanced.html" title="Um Pouco Mais de Matemática Avançada"
             >anterior</a> |</li>
  
    
      <a href="../index.html"><img src="_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="index.html">Tutorial Sage v6.9</a> &raquo;</li>
 
      </ul>
    </div>
    
    <div class="footer">
        &copy; Copyright 2005--2015, The Sage Development Team.
      Criado usando <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
  </body>
</html>