<!doctype html>
<html class="no-js" lang="pt-BR">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Índice" href="genindex.html" /><link rel="search" title="Buscar" href="search.html" /><link rel="next" title="Usando o SageTeX" href="sagetex.html" /><link rel="prev" title="Sage, LaTeX e Companheiros" href="latex.html" />

    <meta name="generator" content="sphinx-5.2.3, furo 2022.09.29"/>
        <title>Programação - Tutorial Sage v10.0</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=d81277517bee4d6b0349d71bb2661d4890b5617c" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="_static/custom-furo.css" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  --color-brand-primary: #0f0fff;
  --color-brand-content: #0f0fff;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Tutorial Sage v10.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../../en/index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/logo_sagemath_black.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/logo_sagemath_white.svg" alt="Dark Logo"/>
  </div>
  
      <span class="sidebar-brand-text">Sage 10.0 Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Buscar name="q" aria-label="Buscar">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-home">
  <div class="sidebar-tree">
    <ul><li class="toctree-l1">
      <a class="reference internal" href="index.html">Home - Tutorial Sage v10.0</a>
    </li></ul>
  </div>
</div><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introdução</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tour.html">Um passeio guiado</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="tour_assignment.html">Atribuição, Igualdade, e Aritmética</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_help.html">Obtendo ajuda</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_help.html#funcoes-tabulacao-e-contagem">Funções, Tabulação, e Contagem</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_algebra.html">Álgebra Elementar e Cálculo</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_plotting.html">Gráficos</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_functions.html">Algumas Questões Frequentes sobre Funções</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_rings.html">Anéis Básicos</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_linalg.html">Álgebra Linear</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_polynomial.html">Polinômios</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_coercion.html">Famílias, Conversão e Coação</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_groups.html">Grupos Finitos, Grupos Abelianos</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_numtheory.html">Teoria de Números</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_advanced.html">Um Pouco Mais de Matemática Avançada</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="interactive_shell.html">A Linha de Comando Interativa</a></li>
<li class="toctree-l1"><a class="reference internal" href="interfaces.html">Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="latex.html">Sage, LaTeX e Companheiros</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Programação</a></li>
<li class="toctree-l1"><a class="reference internal" href="sagetex.html">Usando o SageTeX</a></li>
<li class="toctree-l1"><a class="reference internal" href="afterword.html">Posfacio</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Apêndice</a></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliografia</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="programacao">
<h1>Programação<a class="headerlink" href="#programacao" title="Link permanente para este cabeçalho">#</a></h1>
<section id="carregando-e-anexando-arquivos-do-sage">
<span id="section-loadattach"></span><h2>Carregando e Anexando Arquivos do Sage<a class="headerlink" href="#carregando-e-anexando-arquivos-do-sage" title="Link permanente para este cabeçalho">#</a></h2>
<p>A seguir ilustramos como carregar no Sage programas escritos em um
arquivo separado. Crie um arquivo chamado <code class="docutils literal notranslate"><span class="pre">example.sage</span></code> com o
seguinte conteúdo:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">print(&quot;Hello World&quot;)</span>
<span class="go">print(2^3)</span>
</pre></div>
</div>
<p>Você pode ler e executar o arquivo <code class="docutils literal notranslate"><span class="pre">example.sage</span></code> usando o comando
<code class="docutils literal notranslate"><span class="pre">load</span></code>.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">load</span> <span class="s2">&quot;example.sage&quot;</span>
<span class="go">Hello World</span>
<span class="go">8</span>
</pre></div>
</div>
<p>Você também pode anexar um arquivo em Sage à sessão em execução usando
o comando <code class="docutils literal notranslate"><span class="pre">attach</span></code>.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">attach</span> <span class="s2">&quot;example.sage&quot;</span>
<span class="go">Hello World</span>
<span class="go">8</span>
</pre></div>
</div>
<p>Agora se você alterar <code class="docutils literal notranslate"><span class="pre">example.sage</span></code> e adicionar uma linha em branco
(por exemplo), então o conteúdo de <code class="docutils literal notranslate"><span class="pre">example.sage</span></code> será
automaticamente recarregado no Sage.</p>
<p>Em particular, <code class="docutils literal notranslate"><span class="pre">attach</span></code> automaticamente recarrega um arquivo toda
vez que ele for modificado, o que é útil para desenvolver e testar um
programa, enquanto <code class="docutils literal notranslate"><span class="pre">load</span></code> carrega o arquivo apenas uma vez.</p>
<p>Quando o Sage carrega <code class="docutils literal notranslate"><span class="pre">example.sage</span></code> ele converte esse arquivo para
o Python, o qual é então executado pelo interpretador do Python. Essa
conversão é mínima; ela essencialmente consiste em encapsular inteiros
em <code class="docutils literal notranslate"><span class="pre">Integer()</span></code>, números float em <code class="docutils literal notranslate"><span class="pre">RealNumber()</span></code>, substituir <code class="docutils literal notranslate"><span class="pre">^</span></code>
por <code class="docutils literal notranslate"><span class="pre">**</span></code>, e substituir, por exemplo, <code class="docutils literal notranslate"><span class="pre">R.2</span></code> por <code class="docutils literal notranslate"><span class="pre">R.gen(2)</span></code>. A
versão convertida de <code class="docutils literal notranslate"><span class="pre">example.sage</span></code> é armazenada no mesmo diretório
de <code class="docutils literal notranslate"><span class="pre">example.sage</span></code> e é chamada <code class="docutils literal notranslate"><span class="pre">example.sage.py</span></code>. Esse arquivo
contém o seguinte código:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">print(&quot;Hello World&quot;)</span>
<span class="go">print(Integer(2)**Integer(3))</span>
</pre></div>
</div>
<p>Inteiros literais são encapsulados e <code class="docutils literal notranslate"><span class="pre">^</span></code> é substituído por <code class="docutils literal notranslate"><span class="pre">**</span></code>.
(Em Python, <code class="docutils literal notranslate"><span class="pre">^</span></code> significa “ou exclusivo” e <code class="docutils literal notranslate"><span class="pre">**</span></code> significa
“exponenciação”.)</p>
<p>Esse “” está implementado em <code class="docutils literal notranslate"><span class="pre">sage/misc/interpreter.py</span></code>.)</p>
<p>Você pode colar código tabulado com muitas linhas no Sage desde que
existam linhas em branco separando blocos de código (isso não é
necessário em arquivos). Todavia, a melhor forma de adicionar tal
código a uma sessão do Sage é salvá-lo em um arquivo e usar
<code class="docutils literal notranslate"><span class="pre">attach</span></code>, como descrito anteriormente.</p>
</section>
<section id="criando-codigo-compilado">
<span id="section-compile"></span><h2>Criando Código Compilado<a class="headerlink" href="#criando-codigo-compilado" title="Link permanente para este cabeçalho">#</a></h2>
<p>Velocidade é crucial em cálculos matemáticos. Embora o Python seja uma
linguagem conveniente de alto nível, certos cálculos podem ser várias
vezes mais rápidos do que em Python se eles forem implementados usando
tipos estáticos em uma linguagem compilada. Alguns aspectos do Sage
seriam muito lentos se eles fossem escritos inteiramente em Python.
Para lidar com isso, o Sage suporta uma “versão” compilada do Python
chamada Cython (<a class="reference internal" href="bibliography.html#cyt" id="id1"><span>[Cyt]</span></a> and <a class="reference internal" href="bibliography.html#pyr" id="id2"><span>[Pyr]</span></a>). O Cython é simultaneamente similar
ao Python e ao C. A maior parte das construções em Python, incluindo
“list comprehensions”, expressões condicionais, código como <code class="docutils literal notranslate"><span class="pre">+=</span></code> são
permitidos; você também pode importar código que você escreveu em
outros módulos em Python. Além disso, você pode declarar variáveis em
C arbitrárias, e qualquer chamada de bibliotecas em C pode ser feita
diretamente. O código resultante é convertido para C e compilado
usando um compilador para C.</p>
<p>Para criar o seu próprio código compilado em Sage, nomeie o arquivo
com uma extensão <code class="docutils literal notranslate"><span class="pre">.spyx</span></code> (em vez de <code class="docutils literal notranslate"><span class="pre">.sage</span></code>). Se você está
trabalhando na linha de comando, você pode anexar e carregar código
compilado exatamente como se faz com código interpretado (no momento,
anexar e carregar código em Cython não é suportado no Notebook). A
compilação é realizada implicitamente sem que você tenha que fazer
qualquer coisa explicitamente. Veja
<code class="docutils literal notranslate"><span class="pre">$SAGE_ROOT/examples/programming/sagex/factorial.spyx</span></code> para um
exemplo de uma implementação compilada para a função fatorial que usa
diretamente a biblioteca GMP em C. Experimente o seguinte, usando cd,
vá para o diretório <code class="docutils literal notranslate"><span class="pre">$SAGE_ROOT/examples/programming/sagex/</span></code>, e
então faça o seguinte:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">load</span> <span class="s2">&quot;factorial.spyx&quot;</span>
<span class="go">***************************************************</span>
<span class="go">                Recompiling factorial.spyx</span>
<span class="go">***************************************************</span>
<span class="gp">sage: </span><span class="n">factorial</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="go">30414093201713378043612608166064768844377641568960512000000000000</span>
<span class="gp">sage: </span><span class="n">time</span> <span class="n">n</span> <span class="o">=</span> <span class="n">factorial</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="go">CPU times: user 0.03 s, sys: 0.00 s, total: 0.03 s</span>
<span class="go">Wall time: 0.03</span>
</pre></div>
</div>
<p>Note que o Sage vai recompilar <code class="docutils literal notranslate"><span class="pre">factorial.spyx</span></code> se você encerrar e
reiniciar o Sage. A biblioteca compilada e compartilhada é armazenada
em <code class="docutils literal notranslate"><span class="pre">$HOME/.sage/temp/hostname/pid/spyx</span></code>. Esses arquivos são
excluídos quando você encerra o Sage.</p>
<p>Nenhum pré-processamento é aplicado em arquivos spyx, por exemplo,
<code class="docutils literal notranslate"><span class="pre">1/3</span></code> vai resultar em 0 em um arquivo spyx em vez do número racional
<span class="math notranslate nohighlight">\(1/3\)</span>. Se <code class="docutils literal notranslate"><span class="pre">foo</span></code> é uma função da biblioteca Sage, para usá-la
em um arquivo spyx importe <code class="docutils literal notranslate"><span class="pre">sage.all</span></code> e use <code class="docutils literal notranslate"><span class="pre">sage.all.foo</span></code>.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">import sage.all</span>
<span class="go">def foo(n):</span>
<span class="go">    return sage.all.factorial(n)</span>
</pre></div>
</div>
<section id="acessando-funcoes-em-c-em-arquivos-separados">
<h3>Acessando Funções em C em Arquivos Separados<a class="headerlink" href="#acessando-funcoes-em-c-em-arquivos-separados" title="Link permanente para este cabeçalho">#</a></h3>
<p>É fácil também acessar funções em C definidas em arquivos *.c
separados. Aqui vai um exemplo. Crie os arquivos <code class="docutils literal notranslate"><span class="pre">test.c</span></code> e
<code class="docutils literal notranslate"><span class="pre">test.spyx</span></code> no mesmo diretório contendo:</p>
<p>Código C puro: <code class="docutils literal notranslate"><span class="pre">test.c</span></code></p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">int add_one(int n) {</span>
<span class="go">  return n + 1;</span>
<span class="go">}</span>
</pre></div>
</div>
<p>Código Cython: <code class="docutils literal notranslate"><span class="pre">test.spyx</span></code>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">cdef extern from &quot;test.c&quot;:</span>
<span class="go">    int add_one(int n)</span>

<span class="go">def test(n):</span>
<span class="go">    return add_one(n)</span>
</pre></div>
</div>
<p>Então o seguinte funciona:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">attach</span> <span class="s2">&quot;test.spyx&quot;</span>
<span class="go">Compiling (...)/test.spyx...</span>
<span class="gp">sage: </span><span class="n">test</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">11</span>
</pre></div>
</div>
<p>Se uma biblioteca <code class="docutils literal notranslate"><span class="pre">foo</span></code> adicional é necessária para compilar código
em C gerado a partir de um arquivo em Cython, adicione a linha <code class="docutils literal notranslate"><span class="pre">clib</span>
<span class="pre">foo</span></code> no arquivo fonte em Cython. De forma similar, um arquivo em C
adicional <code class="docutils literal notranslate"><span class="pre">bar</span></code> pode ser incluído na compilação declarando <code class="docutils literal notranslate"><span class="pre">cfile</span>
<span class="pre">bar</span></code>.</p>
</section>
</section>
<section id="scripts-independentes-em-python-sage">
<span id="section-standalone"></span><h2>Scripts Independentes em Python/Sage<a class="headerlink" href="#scripts-independentes-em-python-sage" title="Link permanente para este cabeçalho">#</a></h2>
<p>O seguinte script em Sage fatora inteiros, polinômios, etc:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">#!/usr/bin/env sage</span>

<span class="go">import sys</span>
<span class="go">from sage.all import *</span>

<span class="go">if len(sys.argv) != 2:</span>
<span class="go">    print(&quot;Usage: %s &lt;n&gt;&quot; % sys.argv[0])</span>
<span class="go">    print(&quot;Outputs the prime factorization of n.&quot;)</span>
<span class="go">    sys.exit(1)</span>

<span class="go">print(factor(sage_eval(sys.argv[1])))</span>
</pre></div>
</div>
<p>Para usar esse script, sua <code class="docutils literal notranslate"><span class="pre">SAGE_ROOT</span></code> precisa estar na sua variável
PATH. Se o script acima for chamado <code class="docutils literal notranslate"><span class="pre">factor</span></code>, aqui está um exemplo
de como usá-lo:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">bash $ ./factor 2006</span>
<span class="go">2 * 17 * 59</span>
</pre></div>
</div>
</section>
<section id="tipo-de-dados">
<h2>Tipo de Dados<a class="headerlink" href="#tipo-de-dados" title="Link permanente para este cabeçalho">#</a></h2>
<p>Cada objeto em Sage possui um tipo bem definido. O Python possui
diversos tipos de dados, e a biblioteca do Sage adiciona ainda mais.
Os tipos de dados de Python incluem strings, listas, tuplas, inteiros
e floats, como ilustrado:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;sage&quot;</span><span class="p">;</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&lt;... &#39;str&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;sage&#39;</span><span class="p">;</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>      <span class="c1"># you can use either single or double quotes</span>
<span class="go">&lt;... &#39;str&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">];</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&lt;... &#39;list&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&lt;... &#39;tuple&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">2006</span><span class="p">);</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&lt;... &#39;int&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">2006</span><span class="p">);</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&lt;... &#39;float&#39;&gt;</span>
</pre></div>
</div>
<p>Além disso, o Sage acrescenta vários outros tipos. Por exemplo,
espaços vetoriais:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">V</span> <span class="o">=</span> <span class="n">VectorSpace</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="mi">1000000</span><span class="p">);</span> <span class="n">V</span>
<span class="go">Vector space of dimension 1000000 over Rational Field</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>
<span class="go">&lt;class &#39;sage.modules.free_module.FreeModule_ambient_field_with_category&#39;&gt;</span>
</pre></div>
</div>
<p>Apenas certas funções podem ser aplicadas sobre <code class="docutils literal notranslate"><span class="pre">V</span></code>. Em outros
softwares de matemática, essas seriam chamadas usando a notação
“funcional” <code class="docutils literal notranslate"><span class="pre">foo(V,...)</span></code>. Em Sage, algumas funções estão anexadas ao
tipo (ou classe) de <code class="docutils literal notranslate"><span class="pre">V</span></code>, e são chamadas usando uma sintaxe orientada
a objetos como em Java ou C++, por exemplo, <code class="docutils literal notranslate"><span class="pre">V.foo()</span></code>. Isso ajuda a
manter o espaço de variáveis global sem milhares de funções, e permite
que várias funções diferentes com comportamento diferente possam ser
chamadas foo, sem a necessidade de usar um mecanismo de identificação
de tipos (ou casos) para decidir qual chamar. Além disso, se você
reutilizar o nome de uma função, essa função continua ainda disponível
(por exemplo, se você chamar algo <code class="docutils literal notranslate"><span class="pre">zeta</span></code>, e então quiser calcular o
valor da função zeta de Riemann em 0.5, você continua podendo digitar
<code class="docutils literal notranslate"><span class="pre">s=.5;</span> <span class="pre">s.zeta()</span></code>).</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">zeta</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="gp">sage: </span><span class="n">s</span><span class="o">=</span><span class="mf">.5</span><span class="p">;</span> <span class="n">s</span><span class="o">.</span><span class="n">zeta</span><span class="p">()</span>
<span class="go">-1.46035450880959</span>
</pre></div>
</div>
<p>Em alguns casos muito comuns, a notação funcional usual é também
suportada por conveniência e porque expressões matemáticas podem
parecer confusas usando a notação orientada a objetos. Aqui vão alguns
exemplos.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">n</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">n</span><span class="o">.</span><span class="n">sqrt</span><span class="p">()</span>
<span class="go">sqrt(2)</span>
<span class="gp">sage: </span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">sqrt(2)</span>
<span class="gp">sage: </span><span class="n">V</span> <span class="o">=</span> <span class="n">VectorSpace</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">V</span><span class="o">.</span><span class="n">basis</span><span class="p">()</span>
<span class="go">    [</span>
<span class="go">    (1, 0),</span>
<span class="go">    (0, 1)</span>
<span class="go">    ]</span>
<span class="gp">sage: </span><span class="n">basis</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>
<span class="go">    [</span>
<span class="go">    (1, 0),</span>
<span class="go">    (0, 1)</span>
<span class="go">    ]</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">MatrixSpace</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span> <span class="n">M</span>
<span class="go">Full MatrixSpace of 2 by 2 dense matrices over Finite Field of size 7</span>
<span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">M</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]);</span> <span class="n">A</span>
<span class="go">[1 2]</span>
<span class="go">[3 4]</span>
<span class="gp">sage: </span><span class="n">A</span><span class="o">.</span><span class="n">charpoly</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="go">x^2 + 2*x + 5</span>
<span class="gp">sage: </span><span class="n">charpoly</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="go">x^2 + 2*x + 5</span>
</pre></div>
</div>
<p>Para listar todas as funções para <span class="math notranslate nohighlight">\(A\)</span>, use completamento tab.
Simplesmente digite <code class="docutils literal notranslate"><span class="pre">A.</span></code>, então tecle <code class="docutils literal notranslate"><span class="pre">[tab]</span></code> no seu teclado, como
descrito em <a class="reference internal" href="interactive_shell.html#section-tabcompletion"><span class="std std-ref">Busca Reversa e Completamento Tab</span></a>.</p>
</section>
<section id="listas-tuplas-e-sequencias">
<h2>Listas, Tuplas e Sequências<a class="headerlink" href="#listas-tuplas-e-sequencias" title="Link permanente para este cabeçalho">#</a></h2>
<p>O tipo de dados lista armazena elementos de um tipo arbitrário. Como
em C, C++, etc. (mas diferentemente da maioria dos sistemas de álgebra
computacional), os elementos da lista são indexados a partir do
<span class="math notranslate nohighlight">\(0\)</span>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">SymmetricGroup</span><span class="p">(</span><span class="mi">3</span><span class="p">)];</span> <span class="n">v</span>
<span class="go">[2, 3, 5, &#39;x&#39;, Symmetric group of order 3! as a permutation group]</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="go">&lt;... &#39;list&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">2</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="go">5</span>
</pre></div>
</div>
<p>(Quando se indexa uma lista, é permitido que o índice não seja um int
do Python!) Um Inteiro do Sage (ou Racional, ou qualquer objeto que
possua um método <code class="docutils literal notranslate"><span class="pre">__index__</span></code>) também ira funcionar.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="go">3</span>
<span class="gp">sage: </span><span class="n">n</span> <span class="o">=</span> <span class="mi">2</span>      <span class="c1"># Sage Integer</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>       <span class="c1"># Perfectly OK!</span>
<span class="go">3</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>  <span class="c1"># Also OK.</span>
<span class="go">3</span>
</pre></div>
</div>
<p>A função <code class="docutils literal notranslate"><span class="pre">range</span></code> cria uma lista de int’s do Python (não Inteiros do
Sage):</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span>
<span class="go">[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]</span>
</pre></div>
</div>
<p>Isso é útil quando se usa “list comprehensions” para construir listas:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="n">factor</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">)]</span>
<span class="gp">sage: </span><span class="n">L</span>
<span class="go">[1, 2, 3, 2^2, 5, 2 * 3, 7, 2^3, 3^2, 2 * 5, 11, 2^2 * 3, 13, 2 * 7]</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span>
<span class="go">13</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">L</span><span class="p">[</span><span class="mi">12</span><span class="p">])</span>
<span class="go">&lt;class &#39;sage.structure.factorization_integer.IntegerFactorization&#39;&gt;</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">factor</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span> <span class="k">if</span> <span class="n">is_odd</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
<span class="go">[1, 3, 5, 7, 3^2, 11, 13]</span>
</pre></div>
</div>
<p>Para mais sobre como criar listas usando “list comprehensions”, veja
<a class="reference internal" href="bibliography.html#pyt" id="id3"><span>[PyT]</span></a>.</p>
<p>Fatiamento de lista (list slicing) é um recurso fantástico. Se <code class="docutils literal notranslate"><span class="pre">L</span></code> é
uma lista, então <code class="docutils literal notranslate"><span class="pre">L[m:n]</span></code> retorna uma sub-lista de <code class="docutils literal notranslate"><span class="pre">L</span></code> obtida
começando do <span class="math notranslate nohighlight">\(m\)</span>-ésimo elemento e terminando no
<span class="math notranslate nohighlight">\((n-1)\)</span>-ésimo elemento, como ilustrado abaixo.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="n">factor</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">)]</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">9</span><span class="p">]</span>
<span class="go">[5, 2 * 3, 7, 2^3, 3^2]</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
<span class="go">[1, 2, 3, 2^2]</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="mi">14</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="go">[]</span>
<span class="gp">sage: </span><span class="n">L</span><span class="p">[</span><span class="mi">14</span><span class="p">:]</span>
<span class="go">[3 * 5, 2^4, 17, 2 * 3^2, 19]</span>
</pre></div>
</div>
<p>Tuplas são semelhantes à listas, exceto que elas são imutáveis: uma
vez criadas elas não podem ser alteradas.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span> <span class="n">v</span>
<span class="go">(1, 2, 3, 4)</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="go">&lt;... &#39;tuple&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">TypeError: &#39;tuple&#39; object does not support item assignment</span>
</pre></div>
</div>
<p>Sequências são um terceiro tipo de dados do Sage semelhante a listas.
Diferentemente de listas e tuplas, Sequence não é um tipo de dados
nativo do Python. Por definição, uma sequência é mutável, mas usando o
método <code class="docutils literal notranslate"><span class="pre">set_immutable</span></code> da classe <code class="docutils literal notranslate"><span class="pre">Sequence</span></code> elas podem ser feitas
imutáveis, como mostra o exemplo a seguir. Todos os elementos da
sequência possuem um parente comum, chamado o universo da sequência.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="n">Sequence</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="o">/</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">v</span>
<span class="go">[1, 2, 3, 4/5]</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="go">&lt;class &#39;sage.structure.sequence.Sequence_generic&#39;&gt;</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">&lt;class &#39;sage.rings.rational.Rational&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">v</span><span class="o">.</span><span class="n">universe</span><span class="p">()</span>
<span class="go">Rational Field</span>
<span class="gp">sage: </span><span class="n">v</span><span class="o">.</span><span class="n">is_immutable</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">v</span><span class="o">.</span><span class="n">set_immutable</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: object is immutable; please change a copy instead.</span>
</pre></div>
</div>
<p>Sequências são derivadas de listas e podem ser usadas em qualquer
lugar que listas são usadas.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="n">Sequence</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="o">/</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">sage: </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">list</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="go">[1, 2, 3, 4/5]</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
<span class="go">&lt;... &#39;list&#39;&gt;</span>
</pre></div>
</div>
<p>Como um outro exemplo, bases para espaços vetoriais são sequências
imutáveis, pois é importante que elas não sejam modificadas.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">V</span> <span class="o">=</span> <span class="n">QQ</span><span class="o">^</span><span class="mi">3</span><span class="p">;</span> <span class="n">B</span> <span class="o">=</span> <span class="n">V</span><span class="o">.</span><span class="n">basis</span><span class="p">();</span> <span class="n">B</span>
<span class="go">[</span>
<span class="go">(1, 0, 0),</span>
<span class="go">(0, 1, 0),</span>
<span class="go">(0, 0, 1)</span>
<span class="go">]</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<span class="go">&lt;class &#39;sage.structure.sequence.Sequence_generic&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">B</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">B</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">...</span>
<span class="go">ValueError: object is immutable; please change a copy instead.</span>
<span class="gp">sage: </span><span class="n">B</span><span class="o">.</span><span class="n">universe</span><span class="p">()</span>
<span class="go">Vector space of dimension 3 over Rational Field</span>
</pre></div>
</div>
</section>
<section id="dicionarios">
<h2>Dicionários<a class="headerlink" href="#dicionarios" title="Link permanente para este cabeçalho">#</a></h2>
<p>Um dicionário (também chamado as vezes de lista associativa ou “hash
table”) é um mapeamento de objetos em objetos arbitrários. (Exemplos
de objetos que admitem uma lista associativa são strings e números;
veja a documentação Python em <a class="reference external" href="https://docs.python.org/3/tutorial/index.html">https://docs.python.org/3/tutorial/index.html</a>
para detalhes).</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;sage&#39;</span><span class="p">:</span><span class="mi">17</span><span class="p">,</span> <span class="n">ZZ</span><span class="p">:</span><span class="n">GF</span><span class="p">(</span><span class="mi">7</span><span class="p">)}</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">&lt;... &#39;dict&#39;&gt;</span>
<span class="gp">sage: </span><span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="go">[1, &#39;sage&#39;, Integer Ring]</span>
<span class="gp">sage: </span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;sage&#39;</span><span class="p">]</span>
<span class="go">17</span>
<span class="gp">sage: </span><span class="n">d</span><span class="p">[</span><span class="n">ZZ</span><span class="p">]</span>
<span class="go">Finite Field of size 7</span>
<span class="gp">sage: </span><span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">5</span>
</pre></div>
</div>
<p>A terceira chave (key) ilustra como os índices de um dicionário podem
ser complicados, por exemplo, um anel de inteiros.</p>
<p>Você pode transformar o dicionário acima em uma lista com os mesmos
dados:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(1, 5), (&#39;sage&#39;, 17), (Integer Ring, Finite Field of size 7)]</span>
</pre></div>
</div>
<p>É comum iterar sobre os pares em um dicionário:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span><span class="mi">16</span><span class="p">}</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">a</span><span class="o">*</span><span class="n">b</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
<span class="go">[8, 27, 64]</span>
</pre></div>
</div>
<p>Um dicionário não possui ordem, como o exemplo acima mostra.</p>
</section>
<section id="conjuntos">
<h2>Conjuntos<a class="headerlink" href="#conjuntos" title="Link permanente para este cabeçalho">#</a></h2>
<p>O Python possui um tipo de conjuntos (set) nativo. O principal recurso
que ele oferece é a rápida verificação se um objeto está ou não em um
conjunto, juntamente com as operações comuns em conjuntos.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">X</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">]);</span>   <span class="n">Y</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">X</span>   <span class="c1"># random</span>
<span class="go">{1, 19, &#39;a&#39;}</span>
<span class="gp">sage: </span><span class="n">Y</span>   <span class="c1"># random</span>
<span class="go">{2/3, 1}</span>
<span class="gp">sage: </span><span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">X</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">Y</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">X</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span>
<span class="go">{1}</span>
</pre></div>
</div>
<p>O Sage também possui o seu próprio tipo de dados para conjuntos que é
(em alguns casos) implementado usando o tipo nativo do Python, mas
possuir algumas funcionalidades adicionais. Crie um conjunto em Sage
usando <code class="docutils literal notranslate"><span class="pre">Set(...)</span></code>. Por exemplo,</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">X</span> <span class="o">=</span> <span class="n">Set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">]);</span>   <span class="n">Y</span> <span class="o">=</span> <span class="n">Set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">X</span>   <span class="c1"># random</span>
<span class="go">{&#39;a&#39;, 1, 19}</span>
<span class="gp">sage: </span><span class="n">Y</span>   <span class="c1"># random</span>
<span class="go">{1, 2/3}</span>
<span class="gp">sage: </span><span class="n">X</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span>
<span class="go">{1}</span>
<span class="gp">sage: </span><span class="nb">print</span><span class="p">(</span><span class="n">latex</span><span class="p">(</span><span class="n">Y</span><span class="p">))</span>
<span class="go">\left\{1, \frac{2}{3}\right\}</span>
<span class="gp">sage: </span><span class="n">Set</span><span class="p">(</span><span class="n">ZZ</span><span class="p">)</span>
<span class="go">Set of elements of Integer Ring</span>
</pre></div>
</div>
</section>
<section id="iteradores">
<h2>Iteradores<a class="headerlink" href="#iteradores" title="Link permanente para este cabeçalho">#</a></h2>
<p>Iteradores foram adicionados recentemente ao Python e são
particularmente úteis em aplicações matemáticas. Aqui estão vários
exemplos; veja <a class="reference internal" href="bibliography.html#pyt" id="id4"><span>[PyT]</span></a> para mais detalhes. Vamos criar um iterador
sobre o quadrados dos números inteiros até <span class="math notranslate nohighlight">\(10000000\)</span>.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span><span class="o">^</span><span class="mi">2</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000000</span><span class="p">))</span>
<span class="gp">sage: </span><span class="nb">next</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="nb">next</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">sage: </span><span class="nb">next</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="go">4</span>
</pre></div>
</div>
<p>Criamos agora um iterador sobre os primos da forma <span class="math notranslate nohighlight">\(4p+1\)</span> com
<span class="math notranslate nohighlight">\(p\)</span> também primo, e observamos os primeiros valores.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">w</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">p</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">Primes</span><span class="p">()</span> <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">p</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">w</span>         <span class="c1"># in the next line, 0xb0853d6c is a random 0x number</span>
<span class="go">&lt;generator object at 0xb0853d6c&gt;</span>
<span class="gp">sage: </span><span class="nb">next</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
<span class="go">13</span>
<span class="gp">sage: </span><span class="nb">next</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
<span class="go">29</span>
<span class="gp">sage: </span><span class="nb">next</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
<span class="go">53</span>
</pre></div>
</div>
<p>Certos anéis, por exemplo, corpos finitos e os inteiros possuem
iteradores associados a eles:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">GF</span><span class="p">(</span><span class="mi">7</span><span class="p">)]</span>
<span class="go">[0, 1, 2, 3, 4, 5, 6]</span>
<span class="gp">sage: </span><span class="n">W</span> <span class="o">=</span> <span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ZZ</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ZZ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="nb">next</span><span class="p">(</span><span class="n">W</span><span class="p">)</span>
<span class="go">(0, 0)</span>
<span class="gp">sage: </span><span class="nb">next</span><span class="p">(</span><span class="n">W</span><span class="p">)</span>
<span class="go">(0, 1)</span>
<span class="gp">sage: </span><span class="nb">next</span><span class="p">(</span><span class="n">W</span><span class="p">)</span>
<span class="go">(0, -1)</span>
</pre></div>
</div>
</section>
<section id="lacos-funcoes-enunciados-de-controle-e-comparacoes">
<h2>Laços, Funções, Enunciados de Controle e Comparações<a class="headerlink" href="#lacos-funcoes-enunciados-de-controle-e-comparacoes" title="Link permanente para este cabeçalho">#</a></h2>
<p>Nós já vimos alguns exemplos de alguns usos comuns de laços (loops)
<code class="docutils literal notranslate"><span class="pre">for</span></code>. Em Python, um laço <code class="docutils literal notranslate"><span class="pre">for</span></code> possui uma estrutura tabulada, tal
como</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt; for i in range(5):</span>
<span class="go">...      print(i)</span>
<span class="go">...</span>
<span class="go">0</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">4</span>
</pre></div>
</div>
<p>Note que os dois pontos no final do enunciado (não existe “do” ou “od”
como no GAP ou Maple), e a identação antes dos comandos dentro do
laço, isto é, <code class="docutils literal notranslate"><span class="pre">print(i)</span></code>. A tabulação é importante. No Sage, a
tabulação é automaticamente adicionada quando você digita <code class="docutils literal notranslate"><span class="pre">enter</span></code>
após “:”, como ilustrado abaixo.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>  <span class="c1"># now hit enter twice</span>
<span class="go">0</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">4</span>
</pre></div>
</div>
<p>O símbolo <code class="docutils literal notranslate"><span class="pre">=</span></code> é usado para atribuição.
O símbolo <code class="docutils literal notranslate"><span class="pre">==</span></code> é usado para verificar igualdade:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">15</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="k">if</span> <span class="n">gcd</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="mi">15</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="gp">....: </span>        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">4</span>
<span class="go">7</span>
<span class="go">8</span>
<span class="go">11</span>
<span class="go">13</span>
<span class="go">14</span>
</pre></div>
</div>
<p>Tenha em mente como a tabulação determina a estrutura de blocos para
enunciados <code class="docutils literal notranslate"><span class="pre">if</span></code>, <code class="docutils literal notranslate"><span class="pre">for</span></code>, e <code class="docutils literal notranslate"><span class="pre">while</span></code>:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="k">def</span> <span class="nf">legendre</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
<span class="gp">....: </span>    <span class="n">is_sqr_modp</span><span class="o">=-</span><span class="mi">1</span>
<span class="gp">....: </span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
<span class="gp">....: </span>        <span class="k">if</span> <span class="n">a</span> <span class="o">%</span> <span class="n">p</span> <span class="o">==</span> <span class="n">i</span><span class="o">^</span><span class="mi">2</span> <span class="o">%</span> <span class="n">p</span><span class="p">:</span>
<span class="gp">....: </span>            <span class="n">is_sqr_modp</span><span class="o">=</span><span class="mi">1</span>
<span class="gp">....: </span>    <span class="k">return</span> <span class="n">is_sqr_modp</span>

<span class="gp">sage: </span><span class="n">legendre</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">sage: </span><span class="n">legendre</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span>
<span class="go">-1</span>
</pre></div>
</div>
<p>Obviamente essa não é uma implementação eficiente do símbolo de
Legendre! O objetivo é ilustrar vários aspectos da programação em
Python/Sage. A função {kronecker}, que já vem com o Sage, calcula o
símbolo de Legendre eficientemente usando uma biblioteca em C do PARI.</p>
<p>Finalmente, observamos que comparações, tais como <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>,
<code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, entre números irão automaticamente
converter ambos os números para o mesmo tipo, se possível:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="mi">2</span> <span class="o">&lt;</span> <span class="mf">3.1</span><span class="p">;</span> <span class="mf">3.1</span> <span class="o">&lt;=</span> <span class="mi">1</span>
<span class="go">True</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>   <span class="mi">3</span><span class="o">/</span><span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">/</span><span class="mi">1</span>
<span class="go">True</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Use bool para desigualdades simbólicas:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
<span class="go">x &lt; x + 1</span>
<span class="gp">sage: </span><span class="nb">bool</span><span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Quando se compara objetos de tipos diferentes no Sage, na maior parte
dos casos o Sage tenta encontrar uma coação canônica para ambos os
objetos em um parente comum (veja <a class="reference internal" href="tour_coercion.html#section-coercion"><span class="std std-ref">Famílias, Conversão e Coação</span></a> para mais
detalhes). Se isso for bem sucedido, a comparação é realizada entre os
objetos que foram coagidos; se não for bem sucedido, os objetos são
considerados diferentes. Para testar se duas variáveis fazem
referência ao mesmo objeto use <code class="docutils literal notranslate"><span class="pre">is</span></code>. Como se vê no próximo exemplo,
o int <code class="docutils literal notranslate"><span class="pre">1</span></code> do Python é único, mas o Inteiro <code class="docutils literal notranslate"><span class="pre">1</span></code> do Sage não é.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="mi">1</span> <span class="ow">is</span> <span class="mi">2</span><span class="o">/</span><span class="mi">2</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="mi">1</span> <span class="ow">is</span> <span class="mi">1</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span><span class="o">/</span><span class="mi">2</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Nas duas linhas seguintes, a primeira igualdade é falsa (<code class="docutils literal notranslate"><span class="pre">False</span></code>)
porque não existe um morfismo canônico <span class="math notranslate nohighlight">\(QQ\to \GF{5}\)</span>, logo
não há uma forma de comparar o <span class="math notranslate nohighlight">\(1\)</span> em <span class="math notranslate nohighlight">\(\GF{5}\)</span> com o
<span class="math notranslate nohighlight">\(1 \in \QQ\)</span>. Em contraste, existe um mapa canônico entre
<span class="math notranslate nohighlight">\(\ZZ \to \GF{5}\)</span>, logo a segunda comparação é verdadeira
(<code class="docutils literal notranslate"><span class="pre">True</span></code>)</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">GF</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">QQ</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="n">QQ</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">GF</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">False</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">GF</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">ZZ</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="n">ZZ</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">GF</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">ZZ</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">QQ</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>ATENÇÃO: Comparação no Sage é mais restritiva do que no Magma, o qual
declara <span class="math notranslate nohighlight">\(1 \in \GF{5}\)</span> igual a <span class="math notranslate nohighlight">\(1 \in \QQ\)</span>.</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">magma</span><span class="p">(</span><span class="s1">&#39;GF(5)!1 eq Rationals()!1&#39;</span><span class="p">)</span>            <span class="c1"># optional magma required</span>
<span class="go">true</span>
</pre></div>
</div>
</section>
<section id="otimizacao-profiling">
<h2>Otimização (Profiling)<a class="headerlink" href="#otimizacao-profiling" title="Link permanente para este cabeçalho">#</a></h2>
<p>Autor desta seção: Martin Albrecht (<a class="reference external" href="https://martinralbrecht.wordpress.com/">https://martinralbrecht.wordpress.com/</a>)</p>
<blockquote>
<div><p>“Premature optimization is the root of all evil.” - Donald Knuth</p>
</div></blockquote>
<p>As vezes é útil procurar por gargalos em programas para entender quais
partes gastam maior tempo computacional; isso pode dar uma boa ideia
sobre quais partes otimizar. Python e portanto Sage fornecem várias
opções de “profiling” (esse é o nome que se dá ao processo de
otimização).</p>
<p>O mais simples de usar é o comando <code class="docutils literal notranslate"><span class="pre">prun</span></code> na linha de comando
interativa. Ele retorna um sumário sobre o tempo computacional
utilizado por cada função. Para analisar (a atualmente lenta! – na
versão 1.0) multiplicação de matrizes sobre corpos finitos, por
exemplo, faça o seguinte:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">k</span><span class="p">,</span><span class="n">a</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">objgen</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,[</span><span class="n">k</span><span class="o">.</span><span class="n">random_element</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="mi">10</span><span class="p">)])</span>
</pre></div>
</div>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="o">%</span><span class="k">prun</span> B = A*A
<span class="go">       32893 function calls in 1.100 CPU seconds</span>

<span class="go">Ordered by: internal time</span>

<span class="go">ncalls tottime percall cumtime percall filename:lineno(function)</span>
<span class="go"> 12127  0.160   0.000   0.160  0.000 :0(isinstance)</span>
<span class="go">  2000  0.150   0.000   0.280  0.000 matrix.py:2235(__getitem__)</span>
<span class="go">  1000  0.120   0.000   0.370  0.000 finite_field_element.py:392(__mul__)</span>
<span class="go">  1903  0.120   0.000   0.200  0.000 finite_field_element.py:47(__init__)</span>
<span class="go">  1900  0.090   0.000   0.220  0.000 finite_field_element.py:376(__compat)</span>
<span class="go">   900  0.080   0.000   0.260  0.000 finite_field_element.py:380(__add__)</span>
<span class="go">     1  0.070   0.070   1.100  1.100 matrix.py:864(__mul__)</span>
<span class="go">  2105  0.070   0.000   0.070  0.000 matrix.py:282(ncols)</span>
<span class="go">  ...</span>
</pre></div>
</div>
<p>Aqui <code class="docutils literal notranslate"><span class="pre">ncalls</span></code> é o números de chamadas, <code class="docutils literal notranslate"><span class="pre">tottime</span></code> é o tempo total
gasto por uma determinada função (excluíndo o tempo gasto em chamadas
de subfunções), <code class="docutils literal notranslate"><span class="pre">percall</span></code> é o quociente de <code class="docutils literal notranslate"><span class="pre">tottime</span></code> dividido por
<code class="docutils literal notranslate"><span class="pre">ncalls</span></code>. <code class="docutils literal notranslate"><span class="pre">cumtime</span></code> é o tempo total gasto nessa e em todas as
subfunções (isto é, desde o início até o término da execução da
função), <code class="docutils literal notranslate"><span class="pre">percall</span></code> é o quociente de <code class="docutils literal notranslate"><span class="pre">cumtime</span></code> dividido pelas
chamadas primitivas, e <code class="docutils literal notranslate"><span class="pre">filename:lineno(function)</span></code> fornece os dados
respectivos para cada função. A regra prática aqui é: Quanto mais no
topo uma função aparece nessa lista, mais custo computacional ela
acarreta. Logo é mais interessante para ser optimizada.</p>
<p>Como usual, <code class="docutils literal notranslate"><span class="pre">prun?</span></code> fornece detalhes sobre como usar o “profiler” e
como entender a saída de dados.</p>
<p>A saída de dados pode ser escrita em um objeto para permitir uma
análise mais detalhada:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="o">%</span><span class="k">prun</span> -r A*A
<span class="gp">sage: </span><span class="n">stats</span> <span class="o">=</span> <span class="n">_</span>
<span class="gp">sage: </span>stats<span class="o">?</span>
</pre></div>
</div>
<p>Note: digitando <code class="docutils literal notranslate"><span class="pre">stats</span> <span class="pre">=</span> <span class="pre">prun</span> <span class="pre">-r</span> <span class="pre">A\*A</span></code> obtém-se um erro de sintaxe
porque prun é um comando do IPython, não uma função comum.</p>
<p>Para uma representação gráfica dos dados do “profiling”, você pode
usar o “hotspot profiler”, um pequeno script chamado
<code class="docutils literal notranslate"><span class="pre">hotshot2cachetree</span></code> e o programa <code class="docutils literal notranslate"><span class="pre">kcachegrind</span></code> (apenas no Unix). O
mesmo exemplo agora com o “hotspot profiler”:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">k</span><span class="p">,</span><span class="n">a</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">objgen</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,[</span><span class="n">k</span><span class="o">.</span><span class="n">random_element</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="mi">10</span><span class="p">)])</span>
<span class="gp">sage: </span><span class="kn">import</span> <span class="nn">hotshot</span>
<span class="gp">sage: </span><span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;pythongrind.prof&quot;</span>
<span class="gp">sage: </span><span class="n">prof</span> <span class="o">=</span> <span class="n">hotshot</span><span class="o">.</span><span class="n">Profile</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">lineevents</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">prof</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;A*A&quot;</span><span class="p">)</span>
<span class="go">&lt;hotshot.Profile instance at 0x414c11ec&gt;</span>
<span class="gp">sage: </span><span class="n">prof</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>Isso resulta em um arquivo <code class="docutils literal notranslate"><span class="pre">pythongrind.prof</span></code> no diretório de
trabalho atual. Ele pode ser convertido para o formato cachegrind para
visualização.</p>
<p>Em uma linha de comando do sistema, digite</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">hotshot2calltree -o cachegrind.out.42 pythongrind.prof</span>
</pre></div>
</div>
<p>O arquivo de saída <code class="docutils literal notranslate"><span class="pre">cachegrind.out.42</span></code> pode ser examinado com
<code class="docutils literal notranslate"><span class="pre">kcachegrind</span></code>. Note que a convenção de nomes <code class="docutils literal notranslate"><span class="pre">cachegrind.out.XX</span></code>
precisa ser obedecida.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="sagetex.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Usando o SageTeX</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="latex.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Sage, LaTeX e Companheiros</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2005--2023, The Sage Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Programação</a><ul>
<li><a class="reference internal" href="#carregando-e-anexando-arquivos-do-sage">Carregando e Anexando Arquivos do Sage</a></li>
<li><a class="reference internal" href="#criando-codigo-compilado">Criando Código Compilado</a><ul>
<li><a class="reference internal" href="#acessando-funcoes-em-c-em-arquivos-separados">Acessando Funções em C em Arquivos Separados</a></li>
</ul>
</li>
<li><a class="reference internal" href="#scripts-independentes-em-python-sage">Scripts Independentes em Python/Sage</a></li>
<li><a class="reference internal" href="#tipo-de-dados">Tipo de Dados</a></li>
<li><a class="reference internal" href="#listas-tuplas-e-sequencias">Listas, Tuplas e Sequências</a></li>
<li><a class="reference internal" href="#dicionarios">Dicionários</a></li>
<li><a class="reference internal" href="#conjuntos">Conjuntos</a></li>
<li><a class="reference internal" href="#iteradores">Iteradores</a></li>
<li><a class="reference internal" href="#lacos-funcoes-enunciados-de-controle-e-comparacoes">Laços, Funções, Enunciados de Controle e Comparações</a></li>
<li><a class="reference internal" href="#otimizacao-profiling">Otimização (Profiling)</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/thebelab-helper.js"></script>
    <script src="_static/translations.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>window.MathJax = {"tex": {"macros": {"ZZ": "\\Bold{Z}", "NN": "\\Bold{N}", "RR": "\\Bold{R}", "CC": "\\Bold{C}", "QQ": "\\Bold{Q}", "QQbar": "\\overline{\\QQ}", "GF": ["\\Bold{F}_{#1}", 1], "Zp": ["\\Bold{Z}_{#1}", 1], "Qp": ["\\Bold{Q}_{#1}", 1], "Zmod": ["\\ZZ/#1\\ZZ", 1], "CDF": "\\Bold{C}", "CIF": "\\Bold{C}", "CLF": "\\Bold{C}", "RDF": "\\Bold{R}", "RIF": "\\Bold{I} \\Bold{R}", "RLF": "\\Bold{R}", "SL": "\\mathrm{SL}", "PSL": "\\mathrm{PSL}", "Bold": ["\\mathbf{#1}", 1]}, "inlineMath": [["$", "$"], ["\\(", "\\)"]], "maxBuffer": 51200, "autoload": {"color": [], "colorv2": ["color"]}}}</script>
    <script defer="defer" src="_static/mathjax/tex-chtml.js"></script>
    </body>
</html>